<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="索引" href="../genindex.html" /><link rel="search" title="搜索" href="../search.html" /><link rel="copyright" title="版权所有" href="../copyright.html" /><link rel="next" title="安全" href="security.html" /><link rel="prev" title="路由任务/Tasks" href="routing.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>监控和管理指南 - Celery 5.5.1 文档</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=3ee1c6c6" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../_static/my.css?v=112ca36d" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Celery 5.5.1 文档</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/celery_512_1.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Celery 5.5.1 文档</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">版权</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../getting-started/index.html">快速开始</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 快速开始</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/introduction.html">Celery 简介</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../getting-started/backends-and-brokers/index.html">Backends 和 Brokers</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Backends 和 Brokers</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/rabbitmq.html">使用 RabbitMQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/redis.html">使用 Redis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/sqs.html">使用 Amazon SQS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/kafka.html">使用 Kafka</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/gcpubsub.html">使用 Google Pub/Sub</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/first-steps-with-celery.html">使用 Celery 的第一步</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/next-steps.html">下一步</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/resources.html">资源</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">用户指南</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 用户指南</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="application.html">应用程序</a></li>
<li class="toctree-l2"><a class="reference internal" href="tasks.html">任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="calling.html">调用任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="canvas.html">Canvas：设计工作流</a></li>
<li class="toctree-l2"><a class="reference internal" href="workers.html">Workers 指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="daemonizing.html">守护进程</a></li>
<li class="toctree-l2"><a class="reference internal" href="periodic-tasks.html">周期性任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing.html">路由任务/Tasks</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">监控和管理指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">安全</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimizing.html">优化</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">调试</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="concurrency/index.html">并发</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of 并发</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="concurrency/eventlet.html">Eventlet 并发</a></li>
<li class="toctree-l3"><a class="reference internal" href="concurrency/gevent.html">gevent 并发</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="signals.html">信号</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">使用 Celery 进行测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="extending.html">扩展 和 Bootsteps</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">配置和默认值</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx.html">使用 Sphinx 文档化任务</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../django/index.html">Django</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Django</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../django/first-steps-with-django.html">使用 Django 的第一步</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community.html">社区资源</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">教程</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 教程</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/task-cookbook.html">Task Cookbook</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">常见问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">更改历史</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/index.html">API 参考</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of API 参考</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/cli.html">命令行接口</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">celery</span></code> --- Distributed processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.html">Proxies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.html#functions">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.task.html"><code class="docutils literal notranslate"><span class="pre">celery.app.task</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.amqp.html">AMQP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.amqp.html#queues">Queues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.defaults.html"><code class="docutils literal notranslate"><span class="pre">celery.app.defaults</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.control.html"><code class="docutils literal notranslate"><span class="pre">celery.app.control</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.registry.html"><code class="docutils literal notranslate"><span class="pre">celery.app.registry</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.backends.html"><code class="docutils literal notranslate"><span class="pre">celery.app.backends</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.builtins.html"><code class="docutils literal notranslate"><span class="pre">celery.app.builtins</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.events.html"><code class="docutils literal notranslate"><span class="pre">celery.app.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.log.html"><code class="docutils literal notranslate"><span class="pre">celery.app.log</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.utils.html"><code class="docutils literal notranslate"><span class="pre">celery.app.utils</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.autoretry.html"><code class="docutils literal notranslate"><span class="pre">celery.app.autoretry</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bootsteps.html"><code class="docutils literal notranslate"><span class="pre">celery.bootsteps</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.result.html"><code class="docutils literal notranslate"><span class="pre">celery.result</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.schedules.html"><code class="docutils literal notranslate"><span class="pre">celery.schedules</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.signals.html"><code class="docutils literal notranslate"><span class="pre">celery.signals</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.security.html"><code class="docutils literal notranslate"><span class="pre">celery.security</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.utils.debug.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.debug</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.exceptions.html"><code class="docutils literal notranslate"><span class="pre">celery.exceptions</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.app.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders.app</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.default.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders.default</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.base.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders.base</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html">States</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#sets">Sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#misc">Misc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.FAILURE"><code class="docutils literal notranslate"><span class="pre">FAILURE</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.PENDING"><code class="docutils literal notranslate"><span class="pre">PENDING</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.RECEIVED"><code class="docutils literal notranslate"><span class="pre">RECEIVED</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.RETRY"><code class="docutils literal notranslate"><span class="pre">RETRY</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.REVOKED"><code class="docutils literal notranslate"><span class="pre">REVOKED</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.STARTED"><code class="docutils literal notranslate"><span class="pre">STARTED</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.SUCCESS"><code class="docutils literal notranslate"><span class="pre">SUCCESS</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.precedence"><code class="docutils literal notranslate"><span class="pre">precedence()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.state"><code class="docutils literal notranslate"><span class="pre">state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.abortable.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.abortable</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.django.task.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.django.task</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.migrate.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.migrate</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.pytest.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.pytest</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.sphinx.html">celery.contrib.sphinx</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.app.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.app</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.manager.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.manager</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.mocks.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.mocks</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.rdb.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.rdb</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.html"><code class="docutils literal notranslate"><span class="pre">celery.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.receiver.html"><code class="docutils literal notranslate"><span class="pre">celery.events.receiver</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.dispatcher.html"><code class="docutils literal notranslate"><span class="pre">celery.events.state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.event.html"><code class="docutils literal notranslate"><span class="pre">celery.events.event</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.state.html"><code class="docutils literal notranslate"><span class="pre">celery.events.state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.beat.html"><code class="docutils literal notranslate"><span class="pre">celery.beat</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.apps.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.apps.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.apps.beat.html"><code class="docutils literal notranslate"><span class="pre">celery.apps.beat</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.apps.multi.html"><code class="docutils literal notranslate"><span class="pre">celery.apps.multi</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.request.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.request</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.state.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.strategy.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.strategy</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.agent.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.agent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.connection.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.connection</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.consumer.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.consumer</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.control.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.control</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.events.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.gossip.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.gossip</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.heart.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.heart</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.mingle.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.mingle</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.tasks.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.tasks</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.base.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.base</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.celery.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.celery</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.beat.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.beat</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.events.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.logtool.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.logtool</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.amqp.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.amqp</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.graph.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.graph</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.multi.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.multi</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.call.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.call</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.control.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.control</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.list.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.list</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.migrate.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.migrate</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.purge.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.purge</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.result.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.result</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.shell.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.shell</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.upgrade.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.upgrade</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../internals/index.html">内部</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of 内部</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../internals/guide.html">代码贡献指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/deprecation.html">Celery 弃用时间表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/worker.html">内部的 worker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/protocol.html">消息协议</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/app-overview.html">“大实例”重构</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../internals/reference/index.html">内部模块参考</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 内部模块参考</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.components.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.components</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.loops.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.loops</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.heartbeat.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.heartbeat</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.control.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.control</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.pidbox.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.pidbox</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.autoscale.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.autoscale</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.solo.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.solo</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.prefork.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.prefork</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.eventlet.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.eventlet</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.gevent.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.gevent</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.thread.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.thread</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.base.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.base</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.html"><code class="docutils literal notranslate"><span class="pre">celery.backends</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.base.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.base</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.asynchronous.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.asynchronous</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.azureblockblob.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.azureblockblob</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.rpc.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.rpc</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.database.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.database</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.cache.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.cache</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.consul.html">celery.backends.consul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.couchdb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.couchdb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.mongodb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.mongodb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.elasticsearch.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.elasticsearch</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.redis.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.redis</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.cassandra.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.cassandra</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.couchbase.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.couchbase</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.arangodb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.arangodb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.dynamodb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.dynamodb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.filesystem.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.filesystem</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.cosmosdbsql.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.cosmosdbsql</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.s3.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.s3</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.gcs.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.gcs</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.app.trace.html"><code class="docutils literal notranslate"><span class="pre">celery.app.trace</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.app.annotations.html"><code class="docutils literal notranslate"><span class="pre">celery.app.annotations</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.app.routes.html"><code class="docutils literal notranslate"><span class="pre">celery.app.routes</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.certificate.html"><code class="docutils literal notranslate"><span class="pre">celery.security.certificate</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.key.html"><code class="docutils literal notranslate"><span class="pre">celery.security.key</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.serialization.html"><code class="docutils literal notranslate"><span class="pre">celery.security.serialization</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.utils.html"><code class="docutils literal notranslate"><span class="pre">celery.security.utils</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.events.snapshot.html"><code class="docutils literal notranslate"><span class="pre">celery.events.snapshot</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.events.cursesmon.html"><code class="docutils literal notranslate"><span class="pre">celery.events.cursesmon</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.events.dumper.html"><code class="docutils literal notranslate"><span class="pre">celery.events.dumper</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.database.models.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.database.models</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.database.session.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.database.session</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.html"><code class="docutils literal notranslate"><span class="pre">celery.utils</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.abstract.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.abstract</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.collections.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.collections</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.nodenames.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.nodenames</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.deprecated.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.deprecated</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.functional.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.functional</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.graph.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.graph</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.objects.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.objects</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.term.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.term</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.time.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.time</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.iso8601.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.iso8601</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.saferepr.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.saferepr</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.serialization.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.serialization</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.sysinfo.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.sysinfo</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.threads.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.threads</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.timer2.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.timer2</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.imports.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.imports</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.log.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.log</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.text.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.text</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.dispatch.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.dispatch</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.dispatch.signal.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.dispatch.signal</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.platforms.html"><code class="docutils literal notranslate"><span class="pre">celery.platforms</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery._state.html"><code class="docutils literal notranslate"><span class="pre">celery._state</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../history/index.html">历史</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 历史</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-5.5.html">What's new in Celery 5.5 (Immunity)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-5.5.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-5.4.html">What's new in Celery 5.4 (Opalescent)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-5.4.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-5.3.html">What's new in Celery 5.3 (Emerald Rush)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-5.3.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-5.1.html">What's new in Celery 5.1 (Sun Harmonics)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-5.1.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-5.0.html">What's new in Celery 5.0 (singularity)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-5.0.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-4.4.html">What's new in Celery 4.4 (Cliffs)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-4.4.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-4.3.html">What's new in Celery 4.3 (rhubarb)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-4.3.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-4.2.html">What's new in Celery 4.2 (windowlicker)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-4.2.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-4.1.html">What's new in Celery 4.1 (latentcall)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-4.1.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-4.0.html">What's new in Celery 4.0 (latentcall)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-4.0.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-3.1.html">What's new in Celery 3.1 (Cipater)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-3.1.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-3.0.html">What's new in Celery 3.0 (Chiastic Slide)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-3.0.html">Change history for Celery 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-2.5.html">What's new in Celery 2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-2.5.html">Change history for Celery 2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-2.4.html">Change history for Celery 2.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-2.3.html">Change history for Celery 2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-2.2.html">Change history for Celery 2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-2.1.html">Change history for Celery 2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-2.0.html">Change history for Celery 2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-1.0.html">Change history for Celery 1.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">术语</a></li>
</ul>

</div>
<!-- <iframe src="https://ghbtns.com/github-btn.html?user=celery&repo=celery&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe> -->
<div id="donate">
  <h5>捐赠</h5>
  <p>请捐赠以支持这个社区项目</p>
  <a href="https://opencollective.com/celery/donate" target="_blank">
    <!-- <img src="https://opencollective.com/celery/donate/button@2x.png?color=blue" /> -->
    <img src="https://opencollective.com/celery/donate/button.png?color=blue" />
  </a>
</div></div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/userguide/monitoring.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="guide-monitoring">
<span id="id1"></span><h1>监控和管理指南<a class="headerlink" href="#guide-monitoring" title="Link to this heading">¶</a></h1>
<p>Monitoring and Management Guide</p>
<section id="id2">
<h2>简介<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<p>Introduction</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">中文</label><div class="tab-content docutils container">
<p>有多种工具可用于监控和检查 Celery 集群。</p>
<p>本文档将介绍其中的一些工具，以及与监控相关的功能，例如事件（events）和广播命令（broadcast commands）。</p>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">英文</label><div class="tab-content docutils container">
<p>There are several tools available to monitor and inspect Celery clusters.</p>
<p>This document describes some of these, as well as
features related to monitoring, like events and broadcast commands.</p>
</div>
</div>
</section>
<section id="workers">
<span id="monitoring-workers"></span><h2>Workers<a class="headerlink" href="#workers" title="Link to this heading">¶</a></h2>
<section id="inspect-control">
<span id="monitoring-control"></span><h3>命令行管理实用程序（<code class="docutils literal notranslate"><span class="pre">inspect</span></code>/<code class="docutils literal notranslate"><span class="pre">control</span></code>）<a class="headerlink" href="#inspect-control" title="Link to this heading">¶</a></h3>
<p>Management Command-line Utilities (<code class="docutils literal notranslate"><span class="pre">inspect</span></code>/<code class="docutils literal notranslate"><span class="pre">control</span></code>)</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">中文</label><div class="tab-content docutils container">
<p><strong class="program">celery</strong> 命令也可用于检查和管理 worker 节点（以及在一定程度上用于管理任务）。</p>
<p>若要列出所有可用的命令，请运行：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>--help
</pre></div>
</div>
<p>或者要获取某个特定命令的帮助信息，请运行：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>&lt;command&gt;<span class="w"> </span>--help
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">英文</label><div class="tab-content docutils container">
<p><strong class="program">celery</strong> can also be used to inspect
and manage worker nodes (and to some degree tasks).</p>
<p>To list all the commands available do:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>--help
</pre></div>
</div>
<p>or to get help for a specific command do:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>&lt;command&gt;<span class="w"> </span>--help
</pre></div>
</div>
</div>
</div>
<section id="id3">
<h4>命令<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h4>
<p>Commands</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--2-input--1" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--1">中文</label><div class="tab-content docutils container">
<ul>
<li><p><strong>shell</strong>：进入 Python 交互式 shell。</p>
<p>本地变量中会包含 <code class="docutils literal notranslate"><span class="pre">celery</span></code> 变量，即当前的 app。
同时，所有已知的任务也会自动加入到本地变量中（除非设置了
<a class="reference internal" href="../reference/cli.html#cmdoption-celery-shell-T"><code class="xref std std-option docutils literal notranslate"><span class="pre">--without-tasks</span></code></a> 标志）。</p>
<p>会优先使用已安装的 <a class="extlink-pypi reference external" href="https://pypi.org/project/Ipython/">https://pypi.org/project/Ipython/</a>、<a class="extlink-pypi reference external" href="https://pypi.org/project/bpython/">https://pypi.org/project/bpython/</a>，或普通的 <strong class="program">python</strong>。
你可以通过 <a class="reference internal" href="../reference/cli.html#cmdoption-celery-shell-I"><code class="xref std std-option docutils literal notranslate"><span class="pre">--ipython</span></code></a>、
<a class="reference internal" href="../reference/cli.html#cmdoption-celery-shell-B"><code class="xref std std-option docutils literal notranslate"><span class="pre">--bpython</span></code></a> 或
<a class="reference internal" href="../reference/cli.html#cmdoption-celery-shell-python"><code class="xref std std-option docutils literal notranslate"><span class="pre">--python</span></code></a> 强制指定某种实现。</p>
</li>
<li><p><strong>status</strong>：列出当前集群中所有存活节点</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>status
</pre></div>
</div>
</li>
<li><p><strong>result</strong>：显示任务的执行结果</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>result<span class="w"> </span>-t<span class="w"> </span>tasks.add<span class="w"> </span>4e196aa4-0141-4601-8138-7aa33db0f577
</pre></div>
</div>
<p>注意：如果任务未使用自定义的结果后端，则可以省略任务名。</p>
</li>
<li><p><strong>purge</strong>：清空所有配置的任务队列中的消息。</p>
<p>此命令将移除 <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_QUEUES</span></code> 中配置的队列里的所有消息：</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>此操作不可撤销，消息将被永久删除！</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>purge
</pre></div>
</div>
<p>你也可以使用 <cite>-Q</cite> 选项指定要清除的队列：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>purge<span class="w"> </span>-Q<span class="w"> </span>celery,foo,bar
</pre></div>
</div>
<p>使用 <cite>-X</cite> 选项排除某些队列不被清除：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>purge<span class="w"> </span>-X<span class="w"> </span>celery
</pre></div>
</div>
</li>
<li><p><strong>inspect active</strong>：列出所有正在执行的任务</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>active
</pre></div>
</div>
</li>
<li><p><strong>inspect scheduled</strong>：列出所有计划执行（ETA）的任务</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>scheduled
</pre></div>
</div>
<p>这些是包含 <cite>eta</cite> 或 <cite>countdown</cite> 参数的任务，已被 worker 保留。</p>
</li>
<li><p><strong>inspect reserved</strong>：列出所有已被 worker 预取但尚未执行的任务</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>reserved
</pre></div>
</div>
<p>不包含具有 ETA 的任务。</p>
</li>
<li><p><strong>inspect revoked</strong>：列出被撤销的任务历史记录</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>revoked
</pre></div>
</div>
</li>
<li><p><strong>inspect registered</strong>：列出所有已注册的任务</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>registered
</pre></div>
</div>
</li>
<li><p><strong>inspect stats</strong>：显示 worker 的统计信息（参考 <a class="reference internal" href="workers.html#worker-statistics"><span class="std std-ref">统计信息</span></a>）</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>stats
</pre></div>
</div>
</li>
<li><p><strong>inspect query_task</strong>：根据任务 ID 查询任务信息</p>
<p>任意一个拥有指定任务 ID 的 worker 将返回状态和任务信息。</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>query_task<span class="w"> </span>e9f6c8f0-fec9-4ae8-a8c6-cf8c8451d4f8
</pre></div>
</div>
<p>你也可以一次查询多个任务：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>query_task<span class="w"> </span>id1<span class="w"> </span>id2<span class="w"> </span>...<span class="w"> </span>idN
</pre></div>
</div>
</li>
<li><p><strong>control enable_events</strong>：启用事件</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>control<span class="w"> </span>enable_events
</pre></div>
</div>
</li>
<li><p><strong>control disable_events</strong>：禁用事件</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>control<span class="w"> </span>disable_events
</pre></div>
</div>
</li>
<li><p><strong>migrate</strong>：将任务从一个 broker 迁移到另一个（<strong>实验性功能</strong>）</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>migrate<span class="w"> </span>redis://localhost<span class="w"> </span>amqp://localhost
</pre></div>
</div>
<p>该命令会将一个 broker 上的所有任务迁移到另一个。
由于该命令为实验性功能，执行前请确保备份数据！</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>所有 <code class="docutils literal notranslate"><span class="pre">inspect</span></code> 和 <code class="docutils literal notranslate"><span class="pre">control</span></code> 命令都支持
<a class="reference internal" href="../reference/cli.html#cmdoption-celery-inspect-t"><code class="xref std std-option docutils literal notranslate"><span class="pre">--timeout</span></code></a> 参数，
用于设置等待响应的时间（秒）。
如果由于网络延迟未收到响应，可以尝试增加超时时间。</p>
</div>
</div>
<input class="tab-input" id="tab-set--2-input--2" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--2">英文</label><div class="tab-content docutils container">
<ul>
<li><p><strong>shell</strong>: Drop into a Python shell.</p>
<p>The locals will include the <code class="docutils literal notranslate"><span class="pre">celery</span></code> variable: this is the current app.
Also all known tasks will be automatically added to locals (unless the
<a class="reference internal" href="../reference/cli.html#cmdoption-celery-shell-T"><code class="xref std std-option docutils literal notranslate"><span class="pre">--without-tasks</span></code></a> flag is set).</p>
<p>Uses <a class="extlink-pypi reference external" href="https://pypi.org/project/Ipython/">https://pypi.org/project/Ipython/</a>, <a class="extlink-pypi reference external" href="https://pypi.org/project/bpython/">https://pypi.org/project/bpython/</a>, or regular <strong class="program">python</strong> in that
order if installed. You can force an implementation using
<a class="reference internal" href="../reference/cli.html#cmdoption-celery-shell-I"><code class="xref std std-option docutils literal notranslate"><span class="pre">--ipython</span></code></a>,
<a class="reference internal" href="../reference/cli.html#cmdoption-celery-shell-B"><code class="xref std std-option docutils literal notranslate"><span class="pre">--bpython</span></code></a>, or
<a class="reference internal" href="../reference/cli.html#cmdoption-celery-shell-python"><code class="xref std std-option docutils literal notranslate"><span class="pre">--python</span></code></a>.</p>
</li>
<li><p><strong>status</strong>: List active nodes in this cluster</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>status
</pre></div>
</div>
</li>
<li><p><strong>result</strong>: Show the result of a task</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>result<span class="w"> </span>-t<span class="w"> </span>tasks.add<span class="w"> </span>4e196aa4-0141-4601-8138-7aa33db0f577
</pre></div>
</div>
<p>Note that you can omit the name of the task as long as the
task doesn't use a custom result backend.</p>
</li>
<li><p><strong>purge</strong>: Purge messages from all configured task queues.</p>
<p>This command will remove all messages from queues configured in
the <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_QUEUES</span></code> setting:</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>There's no undo for this operation, and messages will
be permanently deleted!</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>purge
</pre></div>
</div>
<p>You can also specify the queues to purge using the <cite>-Q</cite> option:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>purge<span class="w"> </span>-Q<span class="w"> </span>celery,foo,bar
</pre></div>
</div>
<p>and exclude queues from being purged using the <cite>-X</cite> option:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>purge<span class="w"> </span>-X<span class="w"> </span>celery
</pre></div>
</div>
</li>
<li><p><strong>inspect active</strong>: List active tasks</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>active
</pre></div>
</div>
<p>These are all the tasks that are currently being executed.</p>
</li>
<li><p><strong>inspect scheduled</strong>: List scheduled ETA tasks</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>scheduled
</pre></div>
</div>
<p>These are tasks reserved by the worker when they have an
<cite>eta</cite> or <cite>countdown</cite> argument set.</p>
</li>
<li><p><strong>inspect reserved</strong>: List reserved tasks</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>reserved
</pre></div>
</div>
<p>This will list all tasks that have been prefetched by the worker,
and is currently waiting to be executed (doesn't include tasks
with an ETA value set).</p>
</li>
<li><p><strong>inspect revoked</strong>: List history of revoked tasks</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>revoked
</pre></div>
</div>
</li>
<li><p><strong>inspect registered</strong>: List registered tasks</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>registered
</pre></div>
</div>
</li>
<li><p><strong>inspect stats</strong>: Show worker statistics (see <a class="reference internal" href="workers.html#worker-statistics"><span class="std std-ref">统计信息</span></a>)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>stats
</pre></div>
</div>
</li>
<li><p><strong>inspect query_task</strong>: Show information about task(s) by id.</p>
<p>Any worker having a task in this set of ids reserved/active will respond
with status and information.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>query_task<span class="w"> </span>e9f6c8f0-fec9-4ae8-a8c6-cf8c8451d4f8
</pre></div>
</div>
<p>You can also query for information about multiple tasks:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>query_task<span class="w"> </span>id1<span class="w"> </span>id2<span class="w"> </span>...<span class="w"> </span>idN
</pre></div>
</div>
</li>
<li><p><strong>control enable_events</strong>: Enable events</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>control<span class="w"> </span>enable_events
</pre></div>
</div>
</li>
<li><p><strong>control disable_events</strong>: Disable events</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>control<span class="w"> </span>disable_events
</pre></div>
</div>
</li>
<li><p><strong>migrate</strong>: Migrate tasks from one broker to another (<strong>EXPERIMENTAL</strong>).</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>migrate<span class="w"> </span>redis://localhost<span class="w"> </span>amqp://localhost
</pre></div>
</div>
<p>This command will migrate all the tasks on one broker to another.
As this command is new and experimental you should be sure to have
a backup of the data before proceeding.</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>All <code class="docutils literal notranslate"><span class="pre">inspect</span></code> and <code class="docutils literal notranslate"><span class="pre">control</span></code> commands supports a
<a class="reference internal" href="../reference/cli.html#cmdoption-celery-inspect-t"><code class="xref std std-option docutils literal notranslate"><span class="pre">--timeout</span></code></a> argument,
This is the number of seconds to wait for responses.
You may have to increase this timeout if you're not getting a response
due to latency.</p>
</div>
</div>
</div>
</section>
<section id="inspect-destination">
<span id="id4"></span><h4>指定目标节点<a class="headerlink" href="#inspect-destination" title="Link to this heading">¶</a></h4>
<p>Specifying destination nodes</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--3-input--1" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--1">中文</label><div class="tab-content docutils container">
<p>默认情况下， <cite>inspect</cite> 和 <cite>control</cite> 命令会作用于所有 worker。
你可以通过 <a class="reference internal" href="../reference/cli.html#cmdoption-celery-inspect-d"><code class="xref std std-option docutils literal notranslate"><span class="pre">--destination</span></code></a> 参数
指定一个或多个 worker：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>-d<span class="w"> </span>w1@e.com,w2@e.com<span class="w"> </span>reserved

<span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>control<span class="w"> </span>-d<span class="w"> </span>w1@e.com,w2@e.com<span class="w"> </span>enable_events
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--3-input--2" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--2">英文</label><div class="tab-content docutils container">
<p>By default the inspect and control commands operates on all workers.
You can specify a single, or a list of workers by using the
<a class="reference internal" href="../reference/cli.html#cmdoption-celery-inspect-d"><code class="xref std std-option docutils literal notranslate"><span class="pre">--destination</span></code></a> argument:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>inspect<span class="w"> </span>-d<span class="w"> </span>w1@e.com,w2@e.com<span class="w"> </span>reserved

<span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>control<span class="w"> </span>-d<span class="w"> </span>w1@e.com,w2@e.com<span class="w"> </span>enable_events
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="flower-celery-web-monitor">
<span id="monitoring-flower"></span><h3>Flower：实时 Celery web-monitor<a class="headerlink" href="#flower-celery-web-monitor" title="Link to this heading">¶</a></h3>
<p>Flower: Real-time Celery web-monitor</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--4-input--1" name="tab-set--4" type="radio"><label class="tab-label" for="tab-set--4-input--1">中文</label><div class="tab-content docutils container">
<p>Flower 是一个基于 Web 的实时监控与管理工具，用于 Celery 集群。
它正在积极开发中，已经成为一个关键工具。
作为 Celery 官方推荐的监控工具，它取代了 Django-Admin 监控器、
<code class="docutils literal notranslate"><span class="pre">celerymon</span></code> 以及基于 <code class="docutils literal notranslate"><span class="pre">ncurses</span></code> 的监控工具。</p>
<p>Flower 发音类似于 &quot;flow&quot;，当然你也可以选择植物学中的发音方式。</p>
</div>
<input class="tab-input" id="tab-set--4-input--2" name="tab-set--4" type="radio"><label class="tab-label" for="tab-set--4-input--2">英文</label><div class="tab-content docutils container">
<p>Flower is a real-time web based monitor and administration tool for Celery.
It's under active development, but is already an essential tool.
Being the recommended monitor for Celery, it obsoletes the Django-Admin
monitor, <code class="docutils literal notranslate"><span class="pre">celerymon</span></code> and the <code class="docutils literal notranslate"><span class="pre">ncurses</span></code> based monitor.</p>
<p>Flower is pronounced like &quot;flow&quot;, but you can also use the botanical version
if you prefer.</p>
</div>
</div>
<section id="id5">
<h4>功能<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h4>
<p>Features</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--5-input--1" name="tab-set--5" type="radio"><label class="tab-label" for="tab-set--5-input--1">中文</label><div class="tab-content docutils container">
<ul class="simple">
<li><p>使用 Celery Events 进行实时监控</p>
<ul>
<li><p>任务进度与历史记录</p></li>
<li><p>能够显示任务详情（参数、开始时间、运行时长等）</p></li>
<li><p>图表与统计信息</p></li>
</ul>
</li>
<li><p>远程控制</p>
<ul>
<li><p>查看 worker 状态与统计数据</p></li>
<li><p>关闭并重启 worker 实例</p></li>
<li><p>控制 worker 池大小与自动伸缩设置</p></li>
<li><p>查看并修改 worker 实例所消费的队列</p></li>
<li><p>查看当前正在运行的任务</p></li>
<li><p>查看计划执行的任务（ETA/countdown）</p></li>
<li><p>查看保留与撤销的任务</p></li>
<li><p>应用时间与速率限制</p></li>
<li><p>配置查看器</p></li>
<li><p>撤销或终止任务</p></li>
</ul>
</li>
<li><p>HTTP API 接口</p>
<ul>
<li><p>列出所有 workers</p></li>
<li><p>关闭 worker</p></li>
<li><p>重启 worker 池</p></li>
<li><p>扩展 worker 池</p></li>
<li><p>收缩 worker 池</p></li>
<li><p>自动伸缩 worker 池</p></li>
<li><p>开始消费某队列</p></li>
<li><p>停止消费某队列</p></li>
<li><p>列出所有任务</p></li>
<li><p>列出（已见）任务类型</p></li>
<li><p>获取任务信息</p></li>
<li><p>执行一个任务</p></li>
<li><p>通过名称执行任务</p></li>
<li><p>获取任务结果</p></li>
<li><p>修改任务的软/硬时间限制</p></li>
<li><p>修改任务的速率限制</p></li>
<li><p>撤销任务</p></li>
</ul>
</li>
<li><p>OpenID 身份认证</p></li>
</ul>
<p><strong>截图</strong></p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/dashboard.png"><img alt="../_images/dashboard.png" src="../_images/dashboard.png" style="width: 700px;" />
</a>
</figure>
<p>更多截图请见：<a class="reference external" href="https://github.com/mher/flower/tree/master/docs/screenshots">screenshots</a></p>
</div>
<input class="tab-input" id="tab-set--5-input--2" name="tab-set--5" type="radio"><label class="tab-label" for="tab-set--5-input--2">英文</label><div class="tab-content docutils container">
<ul class="simple">
<li><p>Real-time monitoring using Celery Events</p>
<ul>
<li><p>Task progress and history</p></li>
<li><p>Ability to show task details (arguments, start time, run-time, and more)</p></li>
<li><p>Graphs and statistics</p></li>
</ul>
</li>
<li><p>Remote Control</p>
<ul>
<li><p>View worker status and statistics</p></li>
<li><p>Shutdown and restart worker instances</p></li>
<li><p>Control worker pool size and autoscale settings</p></li>
<li><p>View and modify the queues a worker instance consumes from</p></li>
<li><p>View currently running tasks</p></li>
<li><p>View scheduled tasks (ETA/countdown)</p></li>
<li><p>View reserved and revoked tasks</p></li>
<li><p>Apply time and rate limits</p></li>
<li><p>Configuration viewer</p></li>
<li><p>Revoke or terminate tasks</p></li>
</ul>
</li>
<li><p>HTTP API</p>
<ul>
<li><p>List workers</p></li>
<li><p>Shut down a worker</p></li>
<li><p>Restart worker’s pool</p></li>
<li><p>Grow worker’s pool</p></li>
<li><p>Shrink worker’s pool</p></li>
<li><p>Autoscale worker pool</p></li>
<li><p>Start consuming from a queue</p></li>
<li><p>Stop consuming from a queue</p></li>
<li><p>List tasks</p></li>
<li><p>List (seen) task types</p></li>
<li><p>Get a task info</p></li>
<li><p>Execute a task</p></li>
<li><p>Execute a task by name</p></li>
<li><p>Get a task result</p></li>
<li><p>Change soft and hard time limits for a task</p></li>
<li><p>Change rate limit for a task</p></li>
<li><p>Revoke a task</p></li>
</ul>
</li>
<li><p>OpenID authentication</p></li>
</ul>
<p><strong>Screenshots</strong></p>
<figure class="align-default">
<a class="reference internal image-reference" href="../_images/dashboard.png"><img alt="../_images/dashboard.png" src="../_images/dashboard.png" style="width: 700px;" />
</a>
</figure>
<p>More <a class="reference external" href="https://github.com/mher/flower/tree/master/docs/screenshots">screenshots</a>:</p>
</div>
</div>
</section>
<section id="id6">
<h4>用法<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h4>
<p>Usage</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--6-input--1" name="tab-set--6" type="radio"><label class="tab-label" for="tab-set--6-input--1">中文</label><div class="tab-content docutils container">
<p>你可以使用 pip 安装 Flower：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>flower
</pre></div>
</div>
<p>运行 flower 命令将启动一个 Web 服务器，你可以通过浏览器访问它：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>flower
</pre></div>
</div>
<p>默认端口为 <a class="reference external" href="http://localhost:5555">http://localhost:5555</a>，你可以使用 <a class="reference external" href="https://flower.readthedocs.io/en/latest/config.html#port">--port</a> 参数修改端口：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>flower<span class="w"> </span>--port<span class="o">=</span><span class="m">5555</span>
</pre></div>
</div>
<p>Broker URL 也可以通过 <a class="reference internal" href="../reference/cli.html#cmdoption-celery-b"><code class="xref std std-option docutils literal notranslate"><span class="pre">--broker</span></code></a> 参数传入：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>--broker<span class="o">=</span>amqp://guest:guest@localhost:5672//<span class="w"> </span>flower
<span class="go">或者</span>
<span class="gp">$ </span>celery<span class="w"> </span>--broker<span class="o">=</span>redis://guest:guest@localhost:6379/0<span class="w"> </span>flower
</pre></div>
</div>
<p>然后，你可以在浏览器中访问 Flower：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>open<span class="w"> </span>http://localhost:5555
</pre></div>
</div>
<p>Flower 的功能远不止于此，还包括身份验证等高级选项。
请查阅 <a class="reference external" href="https://flower.readthedocs.io">官方文档</a> 获取更多信息。</p>
</div>
<input class="tab-input" id="tab-set--6-input--2" name="tab-set--6" type="radio"><label class="tab-label" for="tab-set--6-input--2">英文</label><div class="tab-content docutils container">
<p>You can use pip to install Flower:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>flower
</pre></div>
</div>
<p>Running the flower command will start a web-server that you can visit:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>flower
</pre></div>
</div>
<p>The default port is <a class="reference external" href="http://localhost:5555">http://localhost:5555</a>, but you can change this using the
<a class="reference external" href="https://flower.readthedocs.io/en/latest/config.html#port">--port</a> argument:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>flower<span class="w"> </span>--port<span class="o">=</span><span class="m">5555</span>
</pre></div>
</div>
<p>Broker URL can also be passed through the
<a class="reference internal" href="../reference/cli.html#cmdoption-celery-b"><code class="xref std std-option docutils literal notranslate"><span class="pre">--broker</span></code></a> argument :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>--broker<span class="o">=</span>amqp://guest:guest@localhost:5672//<span class="w"> </span>flower
<span class="go">or</span>
<span class="gp">$ </span>celery<span class="w"> </span>--broker<span class="o">=</span>redis://guest:guest@localhost:6379/0<span class="w"> </span>flower
</pre></div>
</div>
<p>Then, you can visit flower in your web browser :</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>open<span class="w"> </span>http://localhost:5555
</pre></div>
</div>
<p>Flower has many more features than are detailed here, including
authorization options. Check out the <a class="reference external" href="https://flower.readthedocs.io/en/latest/">official documentation</a> for more
information.</p>
</div>
</div>
</section>
</section>
<section id="celery-curses">
<span id="monitoring-celeryev"></span><h3>celery 事件：Curses 监控<a class="headerlink" href="#celery-curses" title="Link to this heading">¶</a></h3>
<p>celery events: Curses Monitor</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--7-input--1" name="tab-set--7" type="radio"><label class="tab-label" for="tab-set--7-input--1">中文</label><div class="tab-content docutils container">
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.0.</span></p>
</div>
<p><cite>celery events</cite> 是一个基于 curses 的简易监视器，用于显示任务与 worker 的历史状态。
你可以查看任务的结果与 traceback 信息，它还支持一些管理命令，例如速率限制与关闭 worker。
该监视器最初作为概念验证工具创建，建议使用功能更强大的 Flower 替代。</p>
<p>启动方式如下：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>events
</pre></div>
</div>
<p>你应该会看到如下界面：</p>
<figure class="align-default">
<img alt="../_images/celeryevshotsm.jpg" src="../_images/celeryevshotsm.jpg" />
</figure>
<p><cite>celery events</cite> 也可用于启动快照相机（详见 <a class="reference internal" href="#monitoring-snapshots"><span class="std std-ref">快照</span></a>）：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>events<span class="w"> </span>--camera<span class="o">=</span>&lt;camera-class&gt;<span class="w"> </span>--frequency<span class="o">=</span><span class="m">1</span>.0
</pre></div>
</div>
<p>并且包含一个工具可将事件输出到 <code class="file docutils literal notranslate"><span class="pre">stdout</span></code>：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>events<span class="w"> </span>--dump
</pre></div>
</div>
<p>如需查看所有可用选项，请使用 <code class="xref std std-option docutils literal notranslate"><span class="pre">--help</span></code>：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>events<span class="w"> </span>--help
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--7-input--2" name="tab-set--7" type="radio"><label class="tab-label" for="tab-set--7-input--2">英文</label><div class="tab-content docutils container">
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.0.</span></p>
</div>
<p><cite>celery events</cite> is a simple curses monitor displaying
task and worker history. You can inspect the result and traceback of tasks,
and it also supports some management commands like rate limiting and shutting
down workers. This monitor was started as a proof of concept, and you
probably want to use Flower instead.</p>
<p>Starting:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>events
</pre></div>
</div>
<p>You should see a screen like:</p>
<figure class="align-default">
<img alt="../_images/celeryevshotsm.jpg" src="../_images/celeryevshotsm.jpg" />
</figure>
<p><cite>celery events</cite> is also used to start snapshot cameras (see
<a class="reference internal" href="#monitoring-snapshots"><span class="std std-ref">快照</span></a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>events<span class="w"> </span>--camera<span class="o">=</span>&lt;camera-class&gt;<span class="w"> </span>--frequency<span class="o">=</span><span class="m">1</span>.0
</pre></div>
</div>
<p>and it includes a tool to dump events to <code class="file docutils literal notranslate"><span class="pre">stdout</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>events<span class="w"> </span>--dump
</pre></div>
</div>
<p>For a complete list of options use <code class="xref std std-option docutils literal notranslate"><span class="pre">--help</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>events<span class="w"> </span>--help
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="rabbitmq">
<span id="monitoring-rabbitmq"></span><h2>RabbitMQ<a class="headerlink" href="#rabbitmq" title="Link to this heading">¶</a></h2>
<p>RabbitMQ</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--8-input--1" name="tab-set--8" type="radio"><label class="tab-label" for="tab-set--8-input--1">中文</label><div class="tab-content docutils container">
<p>要管理一个 Celery 集群，了解如何监控 RabbitMQ 是非常重要的。</p>
<p>RabbitMQ 自带了 <a class="reference external" href="http://www.rabbitmq.com/man/rabbitmqctl.1.man.html">rabbitmqctl(1)</a> 命令工具，
你可以使用它来列出队列、交换器、绑定关系、
队列长度、每个队列的内存使用情况，
还可以管理用户、虚拟主机及其权限。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>以下示例中使用的是默认虚拟主机（<code class="docutils literal notranslate"><span class="pre">&quot;/&quot;</span></code>），
如果你使用了自定义虚拟主机，需为命令添加 <code class="docutils literal notranslate"><span class="pre">-p</span></code> 参数，例如：
<code class="docutils literal notranslate"><span class="pre">rabbitmqctl</span> <span class="pre">list_queues</span> <span class="pre">-p</span> <span class="pre">my_vhost</span> <span class="pre">…</span></code></p>
</div>
</div>
<input class="tab-input" id="tab-set--8-input--2" name="tab-set--8" type="radio"><label class="tab-label" for="tab-set--8-input--2">英文</label><div class="tab-content docutils container">
<p>To manage a Celery cluster it is important to know how
RabbitMQ can be monitored.</p>
<p>RabbitMQ ships with the <a class="reference external" href="http://www.rabbitmq.com/man/rabbitmqctl.1.man.html">rabbitmqctl(1)</a> command,
with this you can list queues, exchanges, bindings,
queue lengths, the memory usage of each queue, as well
as manage users, virtual hosts and their permissions.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The default virtual host (<code class="docutils literal notranslate"><span class="pre">&quot;/&quot;</span></code>) is used in these
examples, if you use a custom virtual host you have to add
the <code class="docutils literal notranslate"><span class="pre">-p</span></code> argument to the command, for example:
<code class="docutils literal notranslate"><span class="pre">rabbitmqctl</span> <span class="pre">list_queues</span> <span class="pre">-p</span> <span class="pre">my_vhost</span> <span class="pre">…</span></code></p>
</div>
</div>
</div>
<section id="monitoring-rmq-queues">
<span id="id8"></span><h3>检查队列<a class="headerlink" href="#monitoring-rmq-queues" title="Link to this heading">¶</a></h3>
<p>Inspecting queues</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--9-input--1" name="tab-set--9" type="radio"><label class="tab-label" for="tab-set--9-input--1">中文</label><div class="tab-content docutils container">
<p>查询队列中的任务数量：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>rabbitmqctl<span class="w"> </span>list_queues<span class="w"> </span>name<span class="w"> </span>messages<span class="w"> </span>messages_ready<span class="w"> </span><span class="se">\</span>
<span class="w">                        </span>messages_unacknowledged
</pre></div>
</div>
<p>其中，<cite>messages_ready</cite> 表示已发送但尚未被接收的消息数量，
<cite>messages_unacknowledged</cite> 表示已被 worker 接收但尚未确认的消息数量
（表示该任务正在执行或已被保留）。
<cite>messages</cite> 则是上述两者之和。</p>
<p>查询当前从某个队列中消费的 worker 数量：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>rabbitmqctl<span class="w"> </span>list_queues<span class="w"> </span>name<span class="w"> </span>consumers
</pre></div>
</div>
<p>查询分配给某个队列的内存量：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>rabbitmqctl<span class="w"> </span>list_queues<span class="w"> </span>name<span class="w"> </span>memory
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Tip<span class="colon">:</span></dt>
<dd class="field-odd"><p>给 <a class="reference external" href="http://www.rabbitmq.com/man/rabbitmqctl.1.man.html">rabbitmqctl(1)</a> 添加 <code class="docutils literal notranslate"><span class="pre">-q</span></code> 选项可以使输出更易于解析。</p>
</dd>
</dl>
</div>
<input class="tab-input" id="tab-set--9-input--2" name="tab-set--9" type="radio"><label class="tab-label" for="tab-set--9-input--2">英文</label><div class="tab-content docutils container">
<p>Finding the number of tasks in a queue:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>rabbitmqctl<span class="w"> </span>list_queues<span class="w"> </span>name<span class="w"> </span>messages<span class="w"> </span>messages_ready<span class="w"> </span><span class="se">\</span>
<span class="w">                        </span>messages_unacknowledged
</pre></div>
</div>
<p>Here <cite>messages_ready</cite> is the number of messages ready
for delivery (sent but not received), <cite>messages_unacknowledged</cite>
is the number of messages that's been received by a worker but
not acknowledged yet (meaning it is in progress, or has been reserved).
<cite>messages</cite> is the sum of ready and unacknowledged messages.</p>
<p>Finding the number of workers currently consuming from a queue:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>rabbitmqctl<span class="w"> </span>list_queues<span class="w"> </span>name<span class="w"> </span>consumers
</pre></div>
</div>
<p>Finding the amount of memory allocated to a queue:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>rabbitmqctl<span class="w"> </span>list_queues<span class="w"> </span>name<span class="w"> </span>memory
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Tip<span class="colon">:</span></dt>
<dd class="field-odd"><p>Adding the <code class="docutils literal notranslate"><span class="pre">-q</span></code> option to <a class="reference external" href="http://www.rabbitmq.com/man/rabbitmqctl.1.man.html">rabbitmqctl(1)</a> makes the output easier to parse.</p>
</dd>
</dl>
</div>
</div>
</section>
</section>
<section id="redis">
<span id="monitoring-redis"></span><h2>Redis<a class="headerlink" href="#redis" title="Link to this heading">¶</a></h2>
<p>Redis</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--10-input--1" name="tab-set--10" type="radio"><label class="tab-label" for="tab-set--10-input--1">中文</label><div class="tab-content docutils container">
<p>如果你使用 Redis 作为 broker，可以使用 <cite>redis-cli(1)</cite> 命令来监控 Celery 集群中各队列的长度。</p>
</div>
<input class="tab-input" id="tab-set--10-input--2" name="tab-set--10" type="radio"><label class="tab-label" for="tab-set--10-input--2">英文</label><div class="tab-content docutils container">
<p>If you're using Redis as the broker, you can monitor the Celery cluster using the <cite>redis-cli(1)</cite> command to list lengths of queues.</p>
</div>
</div>
<section id="monitoring-redis-queues">
<span id="id9"></span><h3>检查队列<a class="headerlink" href="#monitoring-redis-queues" title="Link to this heading">¶</a></h3>
<p>Inspecting queues</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--11-input--1" name="tab-set--11" type="radio"><label class="tab-label" for="tab-set--11-input--1">中文</label><div class="tab-content docutils container">
<p>查询队列中的任务数量：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>redis-cli<span class="w"> </span>-h<span class="w"> </span>HOST<span class="w"> </span>-p<span class="w"> </span>PORT<span class="w"> </span>-n<span class="w"> </span>DATABASE_NUMBER<span class="w"> </span>llen<span class="w"> </span>QUEUE_NAME
</pre></div>
</div>
<p>默认的队列名为 <cite>celery</cite>。要获取所有可用的队列，可以使用：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>redis-cli<span class="w"> </span>-h<span class="w"> </span>HOST<span class="w"> </span>-p<span class="w"> </span>PORT<span class="w"> </span>-n<span class="w"> </span>DATABASE_NUMBER<span class="w"> </span>keys<span class="w"> </span><span class="se">\*</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>队列的键只有在其中存在任务时才会存在。
如果某个键不存在，仅表示该队列中当前没有消息。
因为在 Redis 中，如果列表为空会自动被删除，
所以该键不会出现在 <cite>keys</cite> 命令的输出中，
对该键使用 <cite>llen</cite> 命令也会返回 0。</p>
<p>另外，如果你还在使用 Redis 执行其他任务，
<cite>keys</cite> 命令的输出可能会包含数据库中不相关的键值。
推荐的做法是为 Celery 使用一个专用的 <cite>DATABASE_NUMBER</cite>，
你也可以用不同的数据库编号来隔离不同的 Celery 应用（相当于虚拟主机），
但需要注意，这不会影响像 Flower 这样基于 Redis 的 pub/sub 事件监控，
因为 pub/sub 是全局性的，而非按数据库划分的。</p>
</div>
</div>
<input class="tab-input" id="tab-set--11-input--2" name="tab-set--11" type="radio"><label class="tab-label" for="tab-set--11-input--2">英文</label><div class="tab-content docutils container">
<p>Finding the number of tasks in a queue:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>redis-cli<span class="w"> </span>-h<span class="w"> </span>HOST<span class="w"> </span>-p<span class="w"> </span>PORT<span class="w"> </span>-n<span class="w"> </span>DATABASE_NUMBER<span class="w"> </span>llen<span class="w"> </span>QUEUE_NAME
</pre></div>
</div>
<p>The default queue is named <cite>celery</cite>. To get all available queues, invoke:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>redis-cli<span class="w"> </span>-h<span class="w"> </span>HOST<span class="w"> </span>-p<span class="w"> </span>PORT<span class="w"> </span>-n<span class="w"> </span>DATABASE_NUMBER<span class="w"> </span>keys<span class="w"> </span><span class="se">\*</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Queue keys only exists when there are tasks in them, so if a key
doesn't exist it simply means there are no messages in that queue.
This is because in Redis a list with no elements in it is automatically
removed, and hence it won't show up in the <cite>keys</cite> command output,
and <cite>llen</cite> for that list returns 0.</p>
<p>Also, if you're using Redis for other purposes, the
output of the <cite>keys</cite> command will include unrelated values stored in
the database. The recommended way around this is to use a
dedicated <cite>DATABASE_NUMBER</cite> for Celery, you can also use
database numbers to separate Celery applications from each other (virtual
hosts), but this won't affect the monitoring events used by for example
Flower as Redis pub/sub commands are global rather than database based.</p>
</div>
</div>
</div>
</section>
</section>
<section id="munin">
<span id="monitoring-munin"></span><h2>Munin<a class="headerlink" href="#munin" title="Link to this heading">¶</a></h2>
<p>Munin</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--12-input--1" name="tab-set--12" type="radio"><label class="tab-label" for="tab-set--12-input--1">中文</label><div class="tab-content docutils container">
<p>以下是一些在维护 Celery 集群时可能有用的已知 Munin 插件列表：</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">rabbitmq-munin</span></code>：用于 RabbitMQ 的 Munin 插件。</p>
<p><a class="reference external" href="https://github.com/ask/rabbitmq-munin">https://github.com/ask/rabbitmq-munin</a></p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">celery_tasks</span></code>：监控每种任务类型的执行次数（需要 <cite>celerymon</cite> 支持）。</p>
<p><a class="reference external" href="https://github.com/munin-monitoring/contrib/blob/master/plugins/celery/celery_tasks">https://github.com/munin-monitoring/contrib/blob/master/plugins/celery/celery_tasks</a></p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">celery_tasks_states</span></code>：监控各个状态下的任务数量（需要 <cite>celerymon</cite> 支持）。</p>
<p><a class="reference external" href="https://github.com/munin-monitoring/contrib/blob/master/plugins/celery/celery_tasks_states">https://github.com/munin-monitoring/contrib/blob/master/plugins/celery/celery_tasks_states</a></p>
</li>
</ul>
</div>
<input class="tab-input" id="tab-set--12-input--2" name="tab-set--12" type="radio"><label class="tab-label" for="tab-set--12-input--2">英文</label><div class="tab-content docutils container">
<p>This is a list of known Munin plug-ins that can be useful when maintaining a Celery cluster.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">rabbitmq-munin</span></code>: Munin plug-ins for RabbitMQ.</p>
<p><a class="reference external" href="https://github.com/ask/rabbitmq-munin">https://github.com/ask/rabbitmq-munin</a></p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">celery_tasks</span></code>: Monitors the number of times each task type has been executed (requires <cite>celerymon</cite>).</p>
<p><a class="reference external" href="https://github.com/munin-monitoring/contrib/blob/master/plugins/celery/celery_tasks">https://github.com/munin-monitoring/contrib/blob/master/plugins/celery/celery_tasks</a></p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">celery_tasks_states</span></code>: Monitors the number of tasks in each state (requires <cite>celerymon</cite>).</p>
<p><a class="reference external" href="https://github.com/munin-monitoring/contrib/blob/master/plugins/celery/celery_tasks_states">https://github.com/munin-monitoring/contrib/blob/master/plugins/celery/celery_tasks_states</a></p>
</li>
</ul>
</div>
</div>
</section>
<section id="monitoring-events">
<span id="id10"></span><h2>事件<a class="headerlink" href="#monitoring-events" title="Link to this heading">¶</a></h2>
<p>Events</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--13-input--1" name="tab-set--13" type="radio"><label class="tab-label" for="tab-set--13-input--1">中文</label><div class="tab-content docutils container">
<p>Worker 有能力在某些事件发生时发送消息。这些事件可以被如 Flower
和 <strong class="program">celery events</strong> 等工具捕获，用于监控集群状态。</p>
</div>
<input class="tab-input" id="tab-set--13-input--2" name="tab-set--13" type="radio"><label class="tab-label" for="tab-set--13-input--2">英文</label><div class="tab-content docutils container">
<p>The worker has the ability to send a message whenever some event
happens. These events are then captured by tools like Flower,
and <strong class="program">celery events</strong> to monitor the cluster.</p>
</div>
</div>
<section id="monitoring-snapshots">
<span id="id11"></span><h3>快照<a class="headerlink" href="#monitoring-snapshots" title="Link to this heading">¶</a></h3>
<p>Snapshots</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--14-input--1" name="tab-set--14" type="radio"><label class="tab-label" for="tab-set--14-input--1">中文</label><div class="tab-content docutils container">
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.1.</span></p>
</div>
<p>即使是单个 worker 也可能产生大量事件，因此将所有事件的历史记录存储到磁盘上
可能非常昂贵。</p>
<p>一系列事件描述了该时间段内的集群状态，
通过定期对这一状态进行快照，可以保留整个历史记录，
但只需周期性地写入磁盘。</p>
<p>若要拍摄快照，你需要定义一个 Camera 类，它决定了每次捕获状态时应执行的操作；
你可以选择将其写入数据库、发送邮件，或者采取其他任意处理方式。</p>
<p><strong class="program">celery events</strong> 可用于结合 camera 来拍摄快照，
例如，若你希望每隔 2 秒捕获一次状态，且使用 camera 类 <code class="docutils literal notranslate"><span class="pre">myapp.Camera</span></code>，
你可以使用如下命令运行 <strong class="program">celery events</strong>：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>events<span class="w"> </span>-c<span class="w"> </span>myapp.Camera<span class="w"> </span>--frequency<span class="o">=</span><span class="m">2</span>.0
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--14-input--2" name="tab-set--14" type="radio"><label class="tab-label" for="tab-set--14-input--2">英文</label><div class="tab-content docutils container">
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.1.</span></p>
</div>
<p>Even a single worker can produce a huge amount of events, so storing
the history of all events on disk may be very expensive.</p>
<p>A sequence of events describes the cluster state in that time period,
by taking periodic snapshots of this state you can keep all history, but
still only periodically write it to disk.</p>
<p>To take snapshots you need a Camera class, with this you can define
what should happen every time the state is captured;  You can
write it to a database, send it by email or something else entirely.</p>
<p><strong class="program">celery events</strong> is then used to take snapshots with the camera,
for example if you want to capture state every 2 seconds using the
camera <code class="docutils literal notranslate"><span class="pre">myapp.Camera</span></code> you run <strong class="program">celery events</strong> with the following
arguments:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>events<span class="w"> </span>-c<span class="w"> </span>myapp.Camera<span class="w"> </span>--frequency<span class="o">=</span><span class="m">2</span>.0
</pre></div>
</div>
</div>
</div>
<section id="monitoring-camera">
<span id="id12"></span><h4>自定义摄像头<a class="headerlink" href="#monitoring-camera" title="Link to this heading">¶</a></h4>
<p>Custom Camera</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--15-input--1" name="tab-set--15" type="radio"><label class="tab-label" for="tab-set--15-input--1">中文</label><div class="tab-content docutils container">
<p>如果你需要周期性地捕获事件并进行处理，Camera 会很有用。
若需实时处理事件，应该直接使用 <code class="xref py py-class docutils literal notranslate"><span class="pre">app.events.Receiver</span></code>，详见
<a class="reference internal" href="#event-real-time-example"><span class="std std-ref">实时处理</span></a>。</p>
<p>以下是一个示例 camera，它将快照信息打印到屏幕上：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pprint</span><span class="w"> </span><span class="kn">import</span> <span class="n">pformat</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">celery.events.snapshot</span><span class="w"> </span><span class="kn">import</span> <span class="n">Polaroid</span>

<span class="k">class</span><span class="w"> </span><span class="nc">DumpCam</span><span class="p">(</span><span class="n">Polaroid</span><span class="p">):</span>
    <span class="n">clear_after</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># flush 后清除状态（包括 state.event_count）</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">on_shutter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">state</span><span class="o">.</span><span class="n">event_count</span><span class="p">:</span>
            <span class="c1"># 自上次快照后无新事件</span>
            <span class="k">return</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Workers: </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pformat</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">workers</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Tasks: </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pformat</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">tasks</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total: </span><span class="si">{0.event_count}</span><span class="s1"> events, </span><span class="si">{0.task_count}</span><span class="s1"> tasks&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">state</span><span class="p">))</span>
</pre></div>
</div>
<p>详见 <a class="reference internal" href="../reference/celery.events.state.html#module-celery.events.state" title="celery.events.state"><code class="xref py py-mod docutils literal notranslate"><span class="pre">celery.events.state</span></code></a> 的 API 参考，了解更多关于 state 对象的信息。</p>
<p>你可以通过在运行 <strong class="program">celery events</strong> 时使用 <a class="reference internal" href="../reference/cli.html#cmdoption-celery-events-c"><code class="xref std std-option docutils literal notranslate"><span class="pre">-c</span></code></a> 选项来指定使用该 camera：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>events<span class="w"> </span>-c<span class="w"> </span>myapp.DumpCam<span class="w"> </span>--frequency<span class="o">=</span><span class="m">2</span>.0
</pre></div>
</div>
<p>你也可以以编程方式使用该 camera，如下所示：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">celery</span><span class="w"> </span><span class="kn">import</span> <span class="n">Celery</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">myapp</span><span class="w"> </span><span class="kn">import</span> <span class="n">DumpCam</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">State</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">connection</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">recv</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">Receiver</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">handlers</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;*&#39;</span><span class="p">:</span> <span class="n">state</span><span class="o">.</span><span class="n">event</span><span class="p">})</span>
        <span class="k">with</span> <span class="n">DumpCam</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">):</span>
            <span class="n">recv</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Celery</span><span class="p">(</span><span class="n">broker</span><span class="o">=</span><span class="s1">&#39;amqp://guest@localhost//&#39;</span><span class="p">)</span>
    <span class="n">main</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--15-input--2" name="tab-set--15" type="radio"><label class="tab-label" for="tab-set--15-input--2">英文</label><div class="tab-content docutils container">
<p>Cameras can be useful if you need to capture events and do something
with those events at an interval. For real-time event processing
you should use <code class="xref py py-class docutils literal notranslate"><span class="pre">app.events.Receiver</span></code> directly, like in
<a class="reference internal" href="#event-real-time-example"><span class="std std-ref">实时处理</span></a>.</p>
<p>Here is an example camera, dumping the snapshot to screen:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pprint</span><span class="w"> </span><span class="kn">import</span> <span class="n">pformat</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">celery.events.snapshot</span><span class="w"> </span><span class="kn">import</span> <span class="n">Polaroid</span>

<span class="k">class</span><span class="w"> </span><span class="nc">DumpCam</span><span class="p">(</span><span class="n">Polaroid</span><span class="p">):</span>
    <span class="n">clear_after</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># clear after flush (incl, state.event_count).</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">on_shutter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">state</span><span class="o">.</span><span class="n">event_count</span><span class="p">:</span>
            <span class="c1"># No new events since last snapshot.</span>
            <span class="k">return</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Workers: </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pformat</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">workers</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Tasks: </span><span class="si">{0}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pformat</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">tasks</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total: </span><span class="si">{0.event_count}</span><span class="s1"> events, </span><span class="si">{0.task_count}</span><span class="s1"> tasks&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">state</span><span class="p">))</span>
</pre></div>
</div>
<p>See the API reference for <a class="reference internal" href="../reference/celery.events.state.html#module-celery.events.state" title="celery.events.state"><code class="xref py py-mod docutils literal notranslate"><span class="pre">celery.events.state</span></code></a> to read more
about state objects.</p>
<p>Now you can use this cam with <strong class="program">celery events</strong> by specifying
it with the <a class="reference internal" href="../reference/cli.html#cmdoption-celery-events-c"><code class="xref std std-option docutils literal notranslate"><span class="pre">-c</span></code></a> option:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celery<span class="w"> </span>-A<span class="w"> </span>proj<span class="w"> </span>events<span class="w"> </span>-c<span class="w"> </span>myapp.DumpCam<span class="w"> </span>--frequency<span class="o">=</span><span class="m">2</span>.0
</pre></div>
</div>
<p>Or you can use it programmatically like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">celery</span><span class="w"> </span><span class="kn">import</span> <span class="n">Celery</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">myapp</span><span class="w"> </span><span class="kn">import</span> <span class="n">DumpCam</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">State</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">connection</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">recv</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">Receiver</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">handlers</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;*&#39;</span><span class="p">:</span> <span class="n">state</span><span class="o">.</span><span class="n">event</span><span class="p">})</span>
        <span class="k">with</span> <span class="n">DumpCam</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">):</span>
            <span class="n">recv</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Celery</span><span class="p">(</span><span class="n">broker</span><span class="o">=</span><span class="s1">&#39;amqp://guest@localhost//&#39;</span><span class="p">)</span>
    <span class="n">main</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="event-real-time-example">
<span id="id13"></span><h3>实时处理<a class="headerlink" href="#event-real-time-example" title="Link to this heading">¶</a></h3>
<p>Real-time processing</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--16-input--1" name="tab-set--16" type="radio"><label class="tab-label" for="tab-set--16-input--1">中文</label><div class="tab-content docutils container">
<p>若要实时处理事件，需要以下组件：</p>
<ul>
<li><p>一个事件消费者（即 <code class="docutils literal notranslate"><span class="pre">Receiver</span></code>）</p></li>
<li><p>一组事件处理器，会在事件到达时被调用。</p>
<p>你可以为每种事件类型定义不同的处理器，
也可以使用通配处理器（如 '*'）</p>
</li>
<li><p>状态（可选）</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">app.events.State</span></code> 是一个内存中的便捷结构，用于表示
集群中的任务和 worker，会在事件到达时自动更新。</p>
<p>它封装了解决许多常见需求的方法，例如判断某个 worker 是否存活
（通过检查心跳）、将事件字段合并、确保时间戳同步等等。</p>
</li>
</ul>
<p>结合这些组件，你就可以轻松实现事件的实时处理：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">celery</span><span class="w"> </span><span class="kn">import</span> <span class="n">Celery</span>


<span class="k">def</span><span class="w"> </span><span class="nf">my_monitor</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">State</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">announce_failed_tasks</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="n">state</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="c1"># 任务名仅在 -received 事件中传送，state 会帮我们记录</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">])</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;TASK FAILED: </span><span class="si">%s</span><span class="s1">[</span><span class="si">%s</span><span class="s1">] </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">task</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">info</span><span class="p">(),))</span>

    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">connection</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">recv</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">Receiver</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">handlers</span><span class="o">=</span><span class="p">{</span>
                <span class="s1">&#39;task-failed&#39;</span><span class="p">:</span> <span class="n">announce_failed_tasks</span><span class="p">,</span>
                <span class="s1">&#39;*&#39;</span><span class="p">:</span> <span class="n">state</span><span class="o">.</span><span class="n">event</span><span class="p">,</span>
        <span class="p">})</span>
        <span class="n">recv</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wakeup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Celery</span><span class="p">(</span><span class="n">broker</span><span class="o">=</span><span class="s1">&#39;amqp://guest@localhost//&#39;</span><span class="p">)</span>
    <span class="n">my_monitor</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>向 <code class="docutils literal notranslate"><span class="pre">capture</span></code> 传入 <code class="docutils literal notranslate"><span class="pre">wakeup</span></code> 参数会向所有 worker 发送一个信号，
强制其发送心跳。这样一来，当监控器启动时就能立刻看到所有 worker。</p>
</div>
<p>你也可以通过只注册感兴趣的处理器来监听特定事件：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">celery</span><span class="w"> </span><span class="kn">import</span> <span class="n">Celery</span>

<span class="k">def</span><span class="w"> </span><span class="nf">my_monitor</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">State</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">announce_failed_tasks</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="n">state</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="c1"># 任务名仅在 -received 事件中传送，state 会帮我们记录</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">])</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;TASK FAILED: </span><span class="si">%s</span><span class="s1">[</span><span class="si">%s</span><span class="s1">] </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">task</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">info</span><span class="p">(),))</span>

    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">connection</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">recv</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">Receiver</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">handlers</span><span class="o">=</span><span class="p">{</span>
                <span class="s1">&#39;task-failed&#39;</span><span class="p">:</span> <span class="n">announce_failed_tasks</span><span class="p">,</span>
        <span class="p">})</span>
        <span class="n">recv</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wakeup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Celery</span><span class="p">(</span><span class="n">broker</span><span class="o">=</span><span class="s1">&#39;amqp://guest@localhost//&#39;</span><span class="p">)</span>
    <span class="n">my_monitor</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--16-input--2" name="tab-set--16" type="radio"><label class="tab-label" for="tab-set--16-input--2">英文</label><div class="tab-content docutils container">
<p>To process events in real-time you need the following</p>
<ul>
<li><p>An event consumer (this is the <code class="docutils literal notranslate"><span class="pre">Receiver</span></code>)</p></li>
<li><p>A set of handlers called when events come in.</p>
<blockquote>
<div><p>You can have different handlers for each event type,
or a catch-all handler can be used ('*')</p>
</div></blockquote>
</li>
<li><p>State (optional)</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">app.events.State</span></code> is a convenient in-memory representation
of tasks and workers in the cluster that's updated as events come in.</p>
<p>It encapsulates solutions for many common things, like checking if a
worker is still alive (by verifying heartbeats), merging event fields
together as events come in, making sure time-stamps are in sync, and so on.</p>
</li>
</ul>
<p>Combining these you can easily process events in real-time:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">celery</span><span class="w"> </span><span class="kn">import</span> <span class="n">Celery</span>


<span class="k">def</span><span class="w"> </span><span class="nf">my_monitor</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">State</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">announce_failed_tasks</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="n">state</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="c1"># task name is sent only with -received event, and state</span>
        <span class="c1"># will keep track of this for us.</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">])</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;TASK FAILED: </span><span class="si">%s</span><span class="s1">[</span><span class="si">%s</span><span class="s1">] </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">task</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">info</span><span class="p">(),))</span>

    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">connection</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">recv</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">Receiver</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">handlers</span><span class="o">=</span><span class="p">{</span>
                <span class="s1">&#39;task-failed&#39;</span><span class="p">:</span> <span class="n">announce_failed_tasks</span><span class="p">,</span>
                <span class="s1">&#39;*&#39;</span><span class="p">:</span> <span class="n">state</span><span class="o">.</span><span class="n">event</span><span class="p">,</span>
        <span class="p">})</span>
        <span class="n">recv</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wakeup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Celery</span><span class="p">(</span><span class="n">broker</span><span class="o">=</span><span class="s1">&#39;amqp://guest@localhost//&#39;</span><span class="p">)</span>
    <span class="n">my_monitor</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The <code class="docutils literal notranslate"><span class="pre">wakeup</span></code> argument to <code class="docutils literal notranslate"><span class="pre">capture</span></code> sends a signal to all workers
to force them to send a heartbeat. This way you can immediately see
workers when the monitor starts.</p>
</div>
<p>You can listen to specific events by specifying the handlers:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">celery</span><span class="w"> </span><span class="kn">import</span> <span class="n">Celery</span>

<span class="k">def</span><span class="w"> </span><span class="nf">my_monitor</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">State</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">announce_failed_tasks</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="n">state</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="c1"># task name is sent only with -received event, and state</span>
        <span class="c1"># will keep track of this for us.</span>
        <span class="n">task</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event</span><span class="p">[</span><span class="s1">&#39;uuid&#39;</span><span class="p">])</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;TASK FAILED: </span><span class="si">%s</span><span class="s1">[</span><span class="si">%s</span><span class="s1">] </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="n">task</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">task</span><span class="o">.</span><span class="n">info</span><span class="p">(),))</span>

    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">connection</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
        <span class="n">recv</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">Receiver</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">handlers</span><span class="o">=</span><span class="p">{</span>
                <span class="s1">&#39;task-failed&#39;</span><span class="p">:</span> <span class="n">announce_failed_tasks</span><span class="p">,</span>
        <span class="p">})</span>
        <span class="n">recv</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wakeup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Celery</span><span class="p">(</span><span class="n">broker</span><span class="o">=</span><span class="s1">&#39;amqp://guest@localhost//&#39;</span><span class="p">)</span>
    <span class="n">my_monitor</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="event-reference">
<span id="id14"></span><h2>事件参考<a class="headerlink" href="#event-reference" title="Link to this heading">¶</a></h2>
<p>Event Reference</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--17-input--1" name="tab-set--17" type="radio"><label class="tab-label" for="tab-set--17-input--1">中文</label><div class="tab-content docutils container">
<p>以下列表包含了由 worker 发送的事件及其参数。</p>
</div>
<input class="tab-input" id="tab-set--17-input--2" name="tab-set--17" type="radio"><label class="tab-label" for="tab-set--17-input--2">英文</label><div class="tab-content docutils container">
<p>This list contains the events sent by the worker, and their arguments.</p>
</div>
</div>
<section id="event-reference-task">
<span id="id15"></span><h3>任务事件<a class="headerlink" href="#event-reference-task" title="Link to this heading">¶</a></h3>
<p>Task Events</p>
<section id="std-event-task-sent">
<span id="id16"></span><h4>任务已发送<a class="headerlink" href="#std-event-task-sent" title="Link to this heading">¶</a></h4>
<p>task-sent</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--18-input--1" name="tab-set--18" type="radio"><label class="tab-label" for="tab-set--18-input--1">中文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">task-sent(uuid,</span> <span class="pre">name,</span> <span class="pre">args,</span> <span class="pre">kwargs,</span> <span class="pre">retries,</span> <span class="pre">eta,</span> <span class="pre">expires,</span> <span class="pre">queue,</span> <span class="pre">exchange,</span> <span class="pre">routing_key,</span> <span class="pre">root_id,</span> <span class="pre">parent_id)</span></code></p>
</dd>
</dl>
<p>当任务消息被发布，且已启用 <a class="reference internal" href="configuration.html#std-setting-task_send_sent_event"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_send_sent_event</span></code></a> 设置时发送。</p>
</div>
<input class="tab-input" id="tab-set--18-input--2" name="tab-set--18" type="radio"><label class="tab-label" for="tab-set--18-input--2">英文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">task-sent(uuid,</span> <span class="pre">name,</span> <span class="pre">args,</span> <span class="pre">kwargs,</span> <span class="pre">retries,</span> <span class="pre">eta,</span> <span class="pre">expires,</span>
<span class="pre">queue,</span> <span class="pre">exchange,</span> <span class="pre">routing_key,</span> <span class="pre">root_id,</span> <span class="pre">parent_id)</span></code></p>
</dd>
</dl>
<p>Sent when a task message is published and
the <a class="reference internal" href="configuration.html#std-setting-task_send_sent_event"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_send_sent_event</span></code></a> setting is enabled.</p>
</div>
</div>
</section>
<section id="std-event-task-received">
<span id="id17"></span><h4>任务已接收<a class="headerlink" href="#std-event-task-received" title="Link to this heading">¶</a></h4>
<p>task-received</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--19-input--1" name="tab-set--19" type="radio"><label class="tab-label" for="tab-set--19-input--1">中文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">task-received(uuid,</span> <span class="pre">name,</span> <span class="pre">args,</span> <span class="pre">kwargs,</span> <span class="pre">retries,</span> <span class="pre">eta,</span> <span class="pre">hostname,</span>
<span class="pre">timestamp,</span> <span class="pre">root_id,</span> <span class="pre">parent_id)</span></code></p>
</dd>
</dl>
<p>当 worker 接收到任务时发送。</p>
</div>
<input class="tab-input" id="tab-set--19-input--2" name="tab-set--19" type="radio"><label class="tab-label" for="tab-set--19-input--2">英文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">task-received(uuid,</span> <span class="pre">name,</span> <span class="pre">args,</span> <span class="pre">kwargs,</span> <span class="pre">retries,</span> <span class="pre">eta,</span> <span class="pre">hostname,</span>
<span class="pre">timestamp,</span> <span class="pre">root_id,</span> <span class="pre">parent_id)</span></code></p>
</dd>
</dl>
<p>Sent when the worker receives a task.</p>
</div>
</div>
</section>
<section id="std-event-task-started">
<span id="id18"></span><h4>任务已启动<a class="headerlink" href="#std-event-task-started" title="Link to this heading">¶</a></h4>
<p>task-started</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--20-input--1" name="tab-set--20" type="radio"><label class="tab-label" for="tab-set--20-input--1">中文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">task-started(uuid,</span> <span class="pre">hostname,</span> <span class="pre">timestamp,</span> <span class="pre">pid)</span></code></p>
</dd>
</dl>
<p>在 worker 即将执行任务前发送。</p>
</div>
<input class="tab-input" id="tab-set--20-input--2" name="tab-set--20" type="radio"><label class="tab-label" for="tab-set--20-input--2">英文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">task-started(uuid,</span> <span class="pre">hostname,</span> <span class="pre">timestamp,</span> <span class="pre">pid)</span></code></p>
</dd>
</dl>
<p>Sent just before the worker executes the task.</p>
</div>
</div>
</section>
<section id="std-event-task-succeeded">
<span id="id19"></span><h4>任务已成功<a class="headerlink" href="#std-event-task-succeeded" title="Link to this heading">¶</a></h4>
<p>task-succeeded</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--21-input--1" name="tab-set--21" type="radio"><label class="tab-label" for="tab-set--21-input--1">中文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">task-succeeded(uuid,</span> <span class="pre">result,</span> <span class="pre">runtime,</span> <span class="pre">hostname,</span> <span class="pre">timestamp)</span></code></p>
</dd>
</dl>
<p>当任务成功执行时发送。</p>
<p>运行时间（runtime）是指任务通过池（pool）执行所耗费的时间。
（从任务被发送到 worker 池开始，到池的结果处理回调被调用为止）。</p>
</div>
<input class="tab-input" id="tab-set--21-input--2" name="tab-set--21" type="radio"><label class="tab-label" for="tab-set--21-input--2">英文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">task-succeeded(uuid,</span> <span class="pre">result,</span> <span class="pre">runtime,</span> <span class="pre">hostname,</span> <span class="pre">timestamp)</span></code></p>
</dd>
</dl>
<p>Sent if the task executed successfully.</p>
<p>Run-time is the time it took to execute the task using the pool.
(Starting from the task is sent to the worker pool, and ending when the
pool result handler callback is called).</p>
</div>
</div>
</section>
<section id="std-event-task-failed">
<span id="id20"></span><h4>任务已失败<a class="headerlink" href="#std-event-task-failed" title="Link to this heading">¶</a></h4>
<p>task-failed</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--22-input--1" name="tab-set--22" type="radio"><label class="tab-label" for="tab-set--22-input--1">中文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">task-failed(uuid,</span> <span class="pre">exception,</span> <span class="pre">traceback,</span> <span class="pre">hostname,</span> <span class="pre">timestamp)</span></code></p>
</dd>
</dl>
<p>当任务执行失败时发送。</p>
</div>
<input class="tab-input" id="tab-set--22-input--2" name="tab-set--22" type="radio"><label class="tab-label" for="tab-set--22-input--2">英文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">task-failed(uuid,</span> <span class="pre">exception,</span> <span class="pre">traceback,</span> <span class="pre">hostname,</span> <span class="pre">timestamp)</span></code></p>
</dd>
</dl>
<p>Sent if the execution of the task failed.</p>
</div>
</div>
</section>
<section id="std-event-task-rejected">
<span id="id21"></span><h4>任务已拒绝<a class="headerlink" href="#std-event-task-rejected" title="Link to this heading">¶</a></h4>
<p>task-rejected</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--23-input--1" name="tab-set--23" type="radio"><label class="tab-label" for="tab-set--23-input--1">中文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">task-rejected(uuid,</span> <span class="pre">requeue)</span></code></p>
</dd>
</dl>
<p>任务被 worker 拒绝处理，可能被重新入队或转移至死信队列。</p>
</div>
<input class="tab-input" id="tab-set--23-input--2" name="tab-set--23" type="radio"><label class="tab-label" for="tab-set--23-input--2">英文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">task-rejected(uuid,</span> <span class="pre">requeue)</span></code></p>
</dd>
</dl>
<p>The task was rejected by the worker, possibly to be re-queued or moved to a
dead letter queue.</p>
</div>
</div>
</section>
<section id="std-event-task-revoked">
<span id="id22"></span><h4>任务已撤销<a class="headerlink" href="#std-event-task-revoked" title="Link to this heading">¶</a></h4>
<p>task-revoked</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--24-input--1" name="tab-set--24" type="radio"><label class="tab-label" for="tab-set--24-input--1">中文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">task-revoked(uuid,</span> <span class="pre">terminated,</span> <span class="pre">signum,</span> <span class="pre">expired)</span></code></p>
</dd>
</dl>
<p>当任务被撤销时发送（注意：该事件可能由多个 worker 发送）。</p>
<ul class="simple">
<li><p>如果任务进程被终止，则 <code class="docutils literal notranslate"><span class="pre">terminated</span></code> 为 true，且 <code class="docutils literal notranslate"><span class="pre">signum</span></code> 字段表示使用的信号。</p></li>
<li><p>如果任务已过期，则 <code class="docutils literal notranslate"><span class="pre">expired</span></code> 为 true。</p></li>
</ul>
</div>
<input class="tab-input" id="tab-set--24-input--2" name="tab-set--24" type="radio"><label class="tab-label" for="tab-set--24-input--2">英文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">task-revoked(uuid,</span> <span class="pre">terminated,</span> <span class="pre">signum,</span> <span class="pre">expired)</span></code></p>
</dd>
</dl>
<p>Sent if the task has been revoked (Note that this is likely
to be sent by more than one worker).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">terminated</span></code> is set to true if the task process was terminated, and the <code class="docutils literal notranslate"><span class="pre">signum</span></code> field set to the signal used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expired</span></code> is set to true if the task expired.</p></li>
</ul>
</div>
</div>
</section>
<section id="std-event-task-retried">
<span id="id23"></span><h4>任务已重试<a class="headerlink" href="#std-event-task-retried" title="Link to this heading">¶</a></h4>
<p>task-retried</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--25-input--1" name="tab-set--25" type="radio"><label class="tab-label" for="tab-set--25-input--1">中文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">task-retried(uuid,</span> <span class="pre">exception,</span> <span class="pre">traceback,</span> <span class="pre">hostname,</span> <span class="pre">timestamp)</span></code></p>
</dd>
</dl>
<p>当任务失败但将会在未来被重试时发送。</p>
</div>
<input class="tab-input" id="tab-set--25-input--2" name="tab-set--25" type="radio"><label class="tab-label" for="tab-set--25-input--2">英文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">task-retried(uuid,</span> <span class="pre">exception,</span> <span class="pre">traceback,</span> <span class="pre">hostname,</span> <span class="pre">timestamp)</span></code></p>
</dd>
</dl>
<p>Sent if the task failed, but will be retried in the future.</p>
</div>
</div>
</section>
</section>
<section id="worker">
<span id="event-reference-worker"></span><h3>Worker 事件<a class="headerlink" href="#worker" title="Link to this heading">¶</a></h3>
<p>Worker Events</p>
<section id="worker-online">
<span id="std-event-worker-online"></span><h4>worker-online<a class="headerlink" href="#worker-online" title="Link to this heading">¶</a></h4>
<p>worker-online</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--26-input--1" name="tab-set--26" type="radio"><label class="tab-label" for="tab-set--26-input--1">中文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">worker-online(hostname,</span> <span class="pre">timestamp,</span> <span class="pre">freq,</span> <span class="pre">sw_ident,</span> <span class="pre">sw_ver,</span> <span class="pre">sw_sys)</span></code></p>
</dd>
</dl>
<p>worker 已连接至 broker 并处于在线状态。</p>
<ul class="simple">
<li><p><cite>hostname</cite>：worker 的节点名称。</p></li>
<li><p><cite>timestamp</cite>：事件时间戳。</p></li>
<li><p><cite>freq</cite>：心跳频率（单位：秒，浮点数）。</p></li>
<li><p><cite>sw_ident</cite>：worker 软件名称（例如 <code class="docutils literal notranslate"><span class="pre">py-celery</span></code>）。</p></li>
<li><p><cite>sw_ver</cite>：软件版本（例如 2.2.0）。</p></li>
<li><p><cite>sw_sys</cite>：操作系统（例如 Linux 或 Darwin）。</p></li>
</ul>
</div>
<input class="tab-input" id="tab-set--26-input--2" name="tab-set--26" type="radio"><label class="tab-label" for="tab-set--26-input--2">英文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">worker-online(hostname,</span> <span class="pre">timestamp,</span> <span class="pre">freq,</span> <span class="pre">sw_ident,</span> <span class="pre">sw_ver,</span> <span class="pre">sw_sys)</span></code></p>
</dd>
</dl>
<p>The worker has connected to the broker and is online.</p>
<ul class="simple">
<li><p><cite>hostname</cite>: Nodename of the worker.</p></li>
<li><p><cite>timestamp</cite>: Event time-stamp.</p></li>
<li><p><cite>freq</cite>: Heartbeat frequency in seconds (float).</p></li>
<li><p><cite>sw_ident</cite>: Name of worker software (e.g., <code class="docutils literal notranslate"><span class="pre">py-celery</span></code>).</p></li>
<li><p><cite>sw_ver</cite>: Software version (e.g., 2.2.0).</p></li>
<li><p><cite>sw_sys</cite>: Operating System (e.g., Linux/Darwin).</p></li>
</ul>
</div>
</div>
</section>
<section id="worker-heartbeat">
<span id="std-event-worker-heartbeat"></span><h4>worker-heartbeat<a class="headerlink" href="#worker-heartbeat" title="Link to this heading">¶</a></h4>
<p>worker-heartbeat</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--27-input--1" name="tab-set--27" type="radio"><label class="tab-label" for="tab-set--27-input--1">中文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">worker-heartbeat(hostname,</span> <span class="pre">timestamp,</span> <span class="pre">freq,</span> <span class="pre">sw_ident,</span> <span class="pre">sw_ver,</span> <span class="pre">sw_sys,</span>
<span class="pre">active,</span> <span class="pre">processed)</span></code></p>
</dd>
</dl>
<p>每分钟发送一次，如果 2 分钟内未收到心跳，则视为离线。</p>
<ul class="simple">
<li><p><cite>hostname</cite>：worker 的节点名称。</p></li>
<li><p><cite>timestamp</cite>：事件时间戳。</p></li>
<li><p><cite>freq</cite>：心跳频率（单位：秒，浮点数）。</p></li>
<li><p><cite>sw_ident</cite>：worker 软件名称（例如 <code class="docutils literal notranslate"><span class="pre">py-celery</span></code>）。</p></li>
<li><p><cite>sw_ver</cite>：软件版本（例如 2.2.0）。</p></li>
<li><p><cite>sw_sys</cite>：操作系统（例如 Linux 或 Darwin）。</p></li>
<li><p><cite>active</cite>：当前正在执行的任务数量。</p></li>
<li><p><cite>processed</cite>：该 worker 已处理的任务总数。</p></li>
</ul>
</div>
<input class="tab-input" id="tab-set--27-input--2" name="tab-set--27" type="radio"><label class="tab-label" for="tab-set--27-input--2">英文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">worker-heartbeat(hostname,</span> <span class="pre">timestamp,</span> <span class="pre">freq,</span> <span class="pre">sw_ident,</span> <span class="pre">sw_ver,</span> <span class="pre">sw_sys,</span>
<span class="pre">active,</span> <span class="pre">processed)</span></code></p>
</dd>
</dl>
<p>Sent every minute, if the worker hasn't sent a heartbeat in 2 minutes,
it is considered to be offline.</p>
<ul class="simple">
<li><p><cite>hostname</cite>: Nodename of the worker.</p></li>
<li><p><cite>timestamp</cite>: Event time-stamp.</p></li>
<li><p><cite>freq</cite>: Heartbeat frequency in seconds (float).</p></li>
<li><p><cite>sw_ident</cite>: Name of worker software (e.g., <code class="docutils literal notranslate"><span class="pre">py-celery</span></code>).</p></li>
<li><p><cite>sw_ver</cite>: Software version (e.g., 2.2.0).</p></li>
<li><p><cite>sw_sys</cite>: Operating System (e.g., Linux/Darwin).</p></li>
<li><p><cite>active</cite>: Number of currently executing tasks.</p></li>
<li><p><cite>processed</cite>: Total number of tasks processed by this worker.</p></li>
</ul>
</div>
</div>
</section>
<section id="worker-offline">
<span id="std-event-worker-offline"></span><h4>worker-offline<a class="headerlink" href="#worker-offline" title="Link to this heading">¶</a></h4>
<p>worker-offline</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--28-input--1" name="tab-set--28" type="radio"><label class="tab-label" for="tab-set--28-input--1">中文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">worker-offline(hostname,</span> <span class="pre">timestamp,</span> <span class="pre">freq,</span> <span class="pre">sw_ident,</span> <span class="pre">sw_ver,</span> <span class="pre">sw_sys)</span></code></p>
</dd>
</dl>
<p>worker 已从 broker 断开连接。</p>
</div>
<input class="tab-input" id="tab-set--28-input--2" name="tab-set--28" type="radio"><label class="tab-label" for="tab-set--28-input--2">英文</label><div class="tab-content docutils container">
<dl class="field-list simple">
<dt class="field-odd">signature<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">worker-offline(hostname,</span> <span class="pre">timestamp,</span> <span class="pre">freq,</span> <span class="pre">sw_ident,</span> <span class="pre">sw_ver,</span> <span class="pre">sw_sys)</span></code></p>
</dd>
</dl>
<p>The worker has disconnected from the broker.</p>
</div>
</div>
</section>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="security.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">安全</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="routing.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">路由任务/Tasks</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                <a href="../copyright.html">Copyright</a> &#169; 2009-2023, Ask Solem &amp; contributors
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">监控和管理指南</a><ul>
<li><a class="reference internal" href="#id2">简介</a></li>
<li><a class="reference internal" href="#workers">Workers</a><ul>
<li><a class="reference internal" href="#inspect-control">命令行管理实用程序（<code class="docutils literal notranslate"><span class="pre">inspect</span></code>/<code class="docutils literal notranslate"><span class="pre">control</span></code>）</a><ul>
<li><a class="reference internal" href="#id3">命令</a></li>
<li><a class="reference internal" href="#inspect-destination">指定目标节点</a></li>
</ul>
</li>
<li><a class="reference internal" href="#flower-celery-web-monitor">Flower：实时 Celery web-monitor</a><ul>
<li><a class="reference internal" href="#id5">功能</a></li>
<li><a class="reference internal" href="#id6">用法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#celery-curses">celery 事件：Curses 监控</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rabbitmq">RabbitMQ</a><ul>
<li><a class="reference internal" href="#monitoring-rmq-queues">检查队列</a></li>
</ul>
</li>
<li><a class="reference internal" href="#redis">Redis</a><ul>
<li><a class="reference internal" href="#monitoring-redis-queues">检查队列</a></li>
</ul>
</li>
<li><a class="reference internal" href="#munin">Munin</a></li>
<li><a class="reference internal" href="#monitoring-events">事件</a><ul>
<li><a class="reference internal" href="#monitoring-snapshots">快照</a><ul>
<li><a class="reference internal" href="#monitoring-camera">自定义摄像头</a></li>
</ul>
</li>
<li><a class="reference internal" href="#event-real-time-example">实时处理</a></li>
</ul>
</li>
<li><a class="reference internal" href="#event-reference">事件参考</a><ul>
<li><a class="reference internal" href="#event-reference-task">任务事件</a><ul>
<li><a class="reference internal" href="#std-event-task-sent">任务已发送</a></li>
<li><a class="reference internal" href="#std-event-task-received">任务已接收</a></li>
<li><a class="reference internal" href="#std-event-task-started">任务已启动</a></li>
<li><a class="reference internal" href="#std-event-task-succeeded">任务已成功</a></li>
<li><a class="reference internal" href="#std-event-task-failed">任务已失败</a></li>
<li><a class="reference internal" href="#std-event-task-rejected">任务已拒绝</a></li>
<li><a class="reference internal" href="#std-event-task-revoked">任务已撤销</a></li>
<li><a class="reference internal" href="#std-event-task-retried">任务已重试</a></li>
</ul>
</li>
<li><a class="reference internal" href="#worker">Worker 事件</a><ul>
<li><a class="reference internal" href="#worker-online">worker-online</a></li>
<li><a class="reference internal" href="#worker-heartbeat">worker-heartbeat</a></li>
<li><a class="reference internal" href="#worker-offline">worker-offline</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=8156d91f"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=5eb1bb1e"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    </body>
</html>