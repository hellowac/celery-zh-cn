<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="索引" href="../genindex.html" /><link rel="search" title="搜索" href="../search.html" /><link rel="copyright" title="版权所有" href="../copyright.html" /><link rel="next" title="使用 Sphinx 文档化任务" href="sphinx.html" /><link rel="prev" title="扩展 和 Bootsteps" href="extending.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>配置和默认值 - Celery 5.5.1 文档</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=3ee1c6c6" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../_static/my.css?v=112ca36d" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Celery 5.5.1 文档</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/celery_512_1.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Celery 5.5.1 文档</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">版权</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../getting-started/index.html">快速开始</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 快速开始</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/introduction.html">Celery 简介</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../getting-started/backends-and-brokers/index.html">Backends 和 Brokers</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Backends 和 Brokers</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/rabbitmq.html">使用 RabbitMQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/redis.html">使用 Redis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/sqs.html">使用 Amazon SQS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/kafka.html">使用 Kafka</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/gcpubsub.html">使用 Google Pub/Sub</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/first-steps-with-celery.html">使用 Celery 的第一步</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/next-steps.html">下一步</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/resources.html">资源</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">用户指南</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 用户指南</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="application.html">应用程序</a></li>
<li class="toctree-l2"><a class="reference internal" href="tasks.html">任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="calling.html">调用任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="canvas.html">Canvas：设计工作流</a></li>
<li class="toctree-l2"><a class="reference internal" href="workers.html">Workers 指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="daemonizing.html">守护进程</a></li>
<li class="toctree-l2"><a class="reference internal" href="periodic-tasks.html">周期性任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="routing.html">路由任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="monitoring.html">监控和管理指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">安全</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimizing.html">优化</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">调试</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="concurrency/index.html">并发</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of 并发</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="concurrency/eventlet.html">Eventlet 并发</a></li>
<li class="toctree-l3"><a class="reference internal" href="concurrency/gevent.html">gevent 并发</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="signals.html">信号</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">使用 Celery 进行测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="extending.html">扩展 和 Bootsteps</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">配置和默认值</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx.html">使用 Sphinx 文档化任务</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../django/index.html">Django</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Django</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../django/first-steps-with-django.html">使用 Django 的第一步</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community.html">社区资源</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">教程</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 教程</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/task-cookbook.html">Task Cookbook</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">常见问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">更改历史</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/index.html">API 参考</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of API 参考</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/cli.html">命令行接口</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">celery</span></code> --- Distributed processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.html">Proxies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.html#functions">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.task.html"><code class="docutils literal notranslate"><span class="pre">celery.app.task</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.amqp.html">AMQP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.amqp.html#queues">Queues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.defaults.html"><code class="docutils literal notranslate"><span class="pre">celery.app.defaults</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.control.html"><code class="docutils literal notranslate"><span class="pre">celery.app.control</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.registry.html"><code class="docutils literal notranslate"><span class="pre">celery.app.registry</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.backends.html"><code class="docutils literal notranslate"><span class="pre">celery.app.backends</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.builtins.html"><code class="docutils literal notranslate"><span class="pre">celery.app.builtins</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.events.html"><code class="docutils literal notranslate"><span class="pre">celery.app.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.log.html"><code class="docutils literal notranslate"><span class="pre">celery.app.log</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.utils.html"><code class="docutils literal notranslate"><span class="pre">celery.app.utils</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.autoretry.html"><code class="docutils literal notranslate"><span class="pre">celery.app.autoretry</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bootsteps.html"><code class="docutils literal notranslate"><span class="pre">celery.bootsteps</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.result.html"><code class="docutils literal notranslate"><span class="pre">celery.result</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.schedules.html"><code class="docutils literal notranslate"><span class="pre">celery.schedules</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.signals.html"><code class="docutils literal notranslate"><span class="pre">celery.signals</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.security.html"><code class="docutils literal notranslate"><span class="pre">celery.security</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.utils.debug.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.debug</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.exceptions.html"><code class="docutils literal notranslate"><span class="pre">celery.exceptions</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.app.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders.app</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.default.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders.default</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.base.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders.base</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html">States</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#sets">Sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#misc">Misc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.FAILURE"><code class="docutils literal notranslate"><span class="pre">FAILURE</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.PENDING"><code class="docutils literal notranslate"><span class="pre">PENDING</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.RECEIVED"><code class="docutils literal notranslate"><span class="pre">RECEIVED</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.RETRY"><code class="docutils literal notranslate"><span class="pre">RETRY</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.REVOKED"><code class="docutils literal notranslate"><span class="pre">REVOKED</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.STARTED"><code class="docutils literal notranslate"><span class="pre">STARTED</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.SUCCESS"><code class="docutils literal notranslate"><span class="pre">SUCCESS</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.precedence"><code class="docutils literal notranslate"><span class="pre">precedence()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.state"><code class="docutils literal notranslate"><span class="pre">state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.abortable.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.abortable</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.django.task.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.django.task</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.migrate.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.migrate</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.pytest.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.pytest</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.sphinx.html">celery.contrib.sphinx</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.app.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.app</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.manager.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.manager</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.mocks.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.mocks</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.rdb.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.rdb</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.html"><code class="docutils literal notranslate"><span class="pre">celery.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.receiver.html"><code class="docutils literal notranslate"><span class="pre">celery.events.receiver</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.dispatcher.html"><code class="docutils literal notranslate"><span class="pre">celery.events.state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.event.html"><code class="docutils literal notranslate"><span class="pre">celery.events.event</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.state.html"><code class="docutils literal notranslate"><span class="pre">celery.events.state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.beat.html"><code class="docutils literal notranslate"><span class="pre">celery.beat</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.apps.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.apps.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.apps.beat.html"><code class="docutils literal notranslate"><span class="pre">celery.apps.beat</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.apps.multi.html"><code class="docutils literal notranslate"><span class="pre">celery.apps.multi</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.request.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.request</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.state.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.strategy.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.strategy</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.agent.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.agent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.connection.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.connection</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.consumer.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.consumer</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.control.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.control</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.events.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.gossip.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.gossip</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.heart.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.heart</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.mingle.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.mingle</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.tasks.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.tasks</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.base.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.base</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.celery.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.celery</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.beat.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.beat</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.events.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.logtool.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.logtool</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.amqp.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.amqp</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.graph.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.graph</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.multi.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.multi</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.call.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.call</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.control.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.control</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.list.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.list</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.migrate.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.migrate</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.purge.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.purge</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.result.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.result</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.shell.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.shell</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.upgrade.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.upgrade</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../internals/index.html">内部</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of 内部</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../internals/guide.html">代码贡献指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/deprecation.html">Celery 弃用时间表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/worker.html">内部的 worker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/protocol.html">消息协议</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/app-overview.html">“大实例”重构</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../internals/reference/index.html">内部模块参考</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 内部模块参考</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.components.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.components</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.loops.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.loops</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.heartbeat.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.heartbeat</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.control.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.control</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.pidbox.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.pidbox</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.autoscale.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.autoscale</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.solo.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.solo</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.prefork.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.prefork</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.eventlet.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.eventlet</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.gevent.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.gevent</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.thread.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.thread</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.base.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.base</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.html"><code class="docutils literal notranslate"><span class="pre">celery.backends</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.base.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.base</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.asynchronous.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.asynchronous</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.azureblockblob.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.azureblockblob</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.rpc.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.rpc</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.database.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.database</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.cache.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.cache</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.consul.html">celery.backends.consul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.couchdb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.couchdb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.mongodb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.mongodb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.elasticsearch.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.elasticsearch</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.redis.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.redis</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.cassandra.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.cassandra</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.couchbase.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.couchbase</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.arangodb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.arangodb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.dynamodb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.dynamodb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.filesystem.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.filesystem</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.cosmosdbsql.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.cosmosdbsql</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.s3.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.s3</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.gcs.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.gcs</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.app.trace.html"><code class="docutils literal notranslate"><span class="pre">celery.app.trace</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.app.annotations.html"><code class="docutils literal notranslate"><span class="pre">celery.app.annotations</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.app.routes.html"><code class="docutils literal notranslate"><span class="pre">celery.app.routes</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.certificate.html"><code class="docutils literal notranslate"><span class="pre">celery.security.certificate</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.key.html"><code class="docutils literal notranslate"><span class="pre">celery.security.key</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.serialization.html"><code class="docutils literal notranslate"><span class="pre">celery.security.serialization</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.utils.html"><code class="docutils literal notranslate"><span class="pre">celery.security.utils</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.events.snapshot.html"><code class="docutils literal notranslate"><span class="pre">celery.events.snapshot</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.events.cursesmon.html"><code class="docutils literal notranslate"><span class="pre">celery.events.cursesmon</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.events.dumper.html"><code class="docutils literal notranslate"><span class="pre">celery.events.dumper</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.database.models.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.database.models</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.database.session.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.database.session</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.html"><code class="docutils literal notranslate"><span class="pre">celery.utils</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.abstract.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.abstract</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.collections.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.collections</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.nodenames.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.nodenames</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.deprecated.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.deprecated</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.functional.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.functional</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.graph.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.graph</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.objects.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.objects</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.term.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.term</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.time.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.time</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.iso8601.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.iso8601</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.saferepr.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.saferepr</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.serialization.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.serialization</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.sysinfo.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.sysinfo</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.threads.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.threads</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.timer2.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.timer2</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.imports.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.imports</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.log.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.log</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.text.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.text</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.dispatch.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.dispatch</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.dispatch.signal.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.dispatch.signal</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.platforms.html"><code class="docutils literal notranslate"><span class="pre">celery.platforms</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery._state.html"><code class="docutils literal notranslate"><span class="pre">celery._state</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../history/index.html">历史</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 历史</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-5.5.html">What's new in Celery 5.5 (Immunity)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-5.5.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-5.4.html">What's new in Celery 5.4 (Opalescent)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-5.4.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-5.3.html">What's new in Celery 5.3 (Emerald Rush)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-5.3.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-5.1.html">What's new in Celery 5.1 (Sun Harmonics)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-5.1.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-5.0.html">What's new in Celery 5.0 (singularity)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-5.0.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-4.4.html">What's new in Celery 4.4 (Cliffs)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-4.4.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-4.3.html">What's new in Celery 4.3 (rhubarb)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-4.3.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-4.2.html">What's new in Celery 4.2 (windowlicker)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-4.2.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-4.1.html">What's new in Celery 4.1 (latentcall)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-4.1.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-4.0.html">What's new in Celery 4.0 (latentcall)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-4.0.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-3.1.html">What's new in Celery 3.1 (Cipater)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-3.1.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-3.0.html">What's new in Celery 3.0 (Chiastic Slide)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-3.0.html">Change history for Celery 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/whatsnew-2.5.html">What's new in Celery 2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-2.5.html">Change history for Celery 2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-2.4.html">Change history for Celery 2.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-2.3.html">Change history for Celery 2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-2.2.html">Change history for Celery 2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-2.1.html">Change history for Celery 2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-2.0.html">Change history for Celery 2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history/changelog-1.0.html">Change history for Celery 1.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">术语</a></li>
</ul>

</div>
<!-- <iframe src="https://ghbtns.com/github-btn.html?user=celery&repo=celery&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe> -->
<div id="donate">
  <h5>捐赠</h5>
  <p>请捐赠以支持这个社区项目</p>
  <a href="https://opencollective.com/celery/donate" target="_blank">
    <!-- <img src="https://opencollective.com/celery/donate/button@2x.png?color=blue" /> -->
    <img src="https://opencollective.com/celery/donate/button.png?color=blue" />
  </a>
</div></div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/userguide/configuration.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="configuration">
<span id="id1"></span><h1>配置和默认值<a class="headerlink" href="#configuration" title="Link to this heading">¶</a></h1>
<p>Configuration and defaults</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">中文</label><div class="tab-content docutils container">
<p>本文档描述了可用的配置选项。</p>
<p>如果你正在使用默认的加载器，则必须创建一个 <code class="file docutils literal notranslate"><span class="pre">celeryconfig.py</span></code> 模块，
并确保该模块在 Python 路径上可用。</p>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">英文</label><div class="tab-content docutils container">
<p>This document describes the configuration options available.</p>
<p>If you're using the default loader, you must create the <code class="file docutils literal notranslate"><span class="pre">celeryconfig.py</span></code>
module and make sure it's available on the Python path.</p>
</div>
</div>
<section id="conf-example">
<span id="id2"></span><h2>示例配置文件<a class="headerlink" href="#conf-example" title="Link to this heading">¶</a></h2>
<p>Example configuration file</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">中文</label><div class="tab-content docutils container">
<p>以下是一个配置文件示例，供你入门使用。
它应当包含运行一个基础 Celery 设置所需的全部内容。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## Broker 设置。</span>
<span class="n">broker_url</span> <span class="o">=</span> <span class="s1">&#39;amqp://guest:guest@localhost:5672//&#39;</span>

<span class="c1"># 当 Celery worker 启动时要导入的模块列表。</span>
<span class="n">imports</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;myapp.tasks&#39;</span><span class="p">,)</span>

<span class="c1">## 使用数据库存储任务状态和结果。</span>
<span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;db+sqlite:///results.db&#39;</span>

<span class="n">task_annotations</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;tasks.add&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;rate_limit&#39;</span><span class="p">:</span> <span class="s1">&#39;10/s&#39;</span><span class="p">}}</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">英文</label><div class="tab-content docutils container">
<p>This is an example configuration file to get you started.
It should contain all you need to run a basic Celery set-up.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## Broker settings.</span>
<span class="n">broker_url</span> <span class="o">=</span> <span class="s1">&#39;amqp://guest:guest@localhost:5672//&#39;</span>

<span class="c1"># List of modules to import when the Celery worker starts.</span>
<span class="n">imports</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;myapp.tasks&#39;</span><span class="p">,)</span>

<span class="c1">## Using the database to store task state and results.</span>
<span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;db+sqlite:///results.db&#39;</span>

<span class="n">task_annotations</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;tasks.add&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;rate_limit&#39;</span><span class="p">:</span> <span class="s1">&#39;10/s&#39;</span><span class="p">}}</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="conf-old-settings-map">
<span id="id3"></span><h2>新的小写设置<a class="headerlink" href="#conf-old-settings-map" title="Link to this heading">¶</a></h2>
<p>New lowercase settings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--2-input--1" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--1">中文</label><div class="tab-content docutils container">
<p>在 4.0 版本中，引入了新的小写配置项及配置结构。</p>
<p>与早期版本相比，主要的区别在于配置项名称从大写变为小写，
以及一些前缀被重命名，例如 <code class="docutils literal notranslate"><span class="pre">celery_beat_</span></code> 改为 <code class="docutils literal notranslate"><span class="pre">beat_</span></code>，
<code class="docutils literal notranslate"><span class="pre">celeryd_</span></code> 改为 <code class="docutils literal notranslate"><span class="pre">worker_</span></code>，并且大多数顶层的 <code class="docutils literal notranslate"><span class="pre">celery_</span></code> 配置项
都被移动到了新的 <code class="docutils literal notranslate"><span class="pre">task_</span></code> 前缀下。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>Celery 仍然能够读取旧版的配置文件，直到 Celery 6.0。
此后将不再支持旧的配置方式。
我们提供了 <code class="docutils literal notranslate"><span class="pre">celery</span> <span class="pre">upgrade</span></code> 命令，用于处理大量的升级情况
（包括 <a class="reference internal" href="../history/whatsnew-4.0.html#latentcall-django-admonition"><span class="std std-ref">Django</span></a>）。</p>
<p>请尽快迁移到新的配置结构。</p>
</div>
</div>
<input class="tab-input" id="tab-set--2-input--2" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--2">英文</label><div class="tab-content docutils container">
<p>Version 4.0 introduced new lower case settings and setting organization.</p>
<p>The major difference between previous versions, apart from the lower case
names, are the renaming of some prefixes, like <code class="docutils literal notranslate"><span class="pre">celery_beat_</span></code> to <code class="docutils literal notranslate"><span class="pre">beat_</span></code>,
<code class="docutils literal notranslate"><span class="pre">celeryd_</span></code> to <code class="docutils literal notranslate"><span class="pre">worker_</span></code>, and most of the top level <code class="docutils literal notranslate"><span class="pre">celery_</span></code> settings
have been moved into a new  <code class="docutils literal notranslate"><span class="pre">task_</span></code> prefix.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>Celery will still be able to read old configuration files until Celery 6.0.
Afterwards, support for the old configuration files will be removed.
We provide the <code class="docutils literal notranslate"><span class="pre">celery</span> <span class="pre">upgrade</span></code> command that should handle
plenty of cases (including <a class="reference internal" href="../history/whatsnew-4.0.html#latentcall-django-admonition"><span class="std std-ref">Django</span></a>).</p>
<p>Please migrate to the new configuration scheme as soon as possible.</p>
</div>
</div>
</div>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Setting name</strong></p></th>
<th class="head"><p><strong>Replace with</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_ACCEPT_CONTENT</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-accept_content"><code class="xref std std-setting docutils literal notranslate"><span class="pre">accept_content</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_ENABLE_UTC</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-enable_utc"><code class="xref std std-setting docutils literal notranslate"><span class="pre">enable_utc</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_IMPORTS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-imports"><code class="xref std std-setting docutils literal notranslate"><span class="pre">imports</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_INCLUDE</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-include"><code class="xref std std-setting docutils literal notranslate"><span class="pre">include</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_TIMEZONE</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-timezone"><code class="xref std std-setting docutils literal notranslate"><span class="pre">timezone</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYBEAT_MAX_LOOP_INTERVAL</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-beat_max_loop_interval"><code class="xref std std-setting docutils literal notranslate"><span class="pre">beat_max_loop_interval</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYBEAT_SCHEDULE</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-beat_schedule"><code class="xref std std-setting docutils literal notranslate"><span class="pre">beat_schedule</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYBEAT_SCHEDULER</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-beat_scheduler"><code class="xref std std-setting docutils literal notranslate"><span class="pre">beat_scheduler</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYBEAT_SCHEDULE_FILENAME</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-beat_schedule_filename"><code class="xref std std-setting docutils literal notranslate"><span class="pre">beat_schedule_filename</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYBEAT_SYNC_EVERY</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-beat_sync_every"><code class="xref std std-setting docutils literal notranslate"><span class="pre">beat_sync_every</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BROKER_URL</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-broker_url"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_url</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BROKER_TRANSPORT</span></code></p></td>
<td><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_transport</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BROKER_TRANSPORT_OPTIONS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-broker_transport_options"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_transport_options</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BROKER_CONNECTION_TIMEOUT</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-broker_connection_timeout"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_connection_timeout</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BROKER_CONNECTION_RETRY</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-broker_connection_retry"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_connection_retry</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BROKER_CONNECTION_MAX_RETRIES</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-broker_connection_max_retries"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_connection_max_retries</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BROKER_FAILOVER_STRATEGY</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-broker_failover_strategy"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_failover_strategy</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BROKER_HEARTBEAT</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-broker_heartbeat"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_heartbeat</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BROKER_LOGIN_METHOD</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-broker_login_method"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_login_method</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BROKER_NATIVE_DELAYED_DELIVERY_QUEUE_TYPE</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-broker_native_delayed_delivery_queue_type"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_native_delayed_delivery_queue_type</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BROKER_POOL_LIMIT</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-broker_pool_limit"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_pool_limit</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BROKER_USE_SSL</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-broker_use_ssl"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_use_ssl</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_CACHE_BACKEND</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-cache_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cache_backend</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_CACHE_BACKEND_OPTIONS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-cache_backend_options"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cache_backend_options</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CASSANDRA_COLUMN_FAMILY</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-cassandra_table"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cassandra_table</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CASSANDRA_ENTRY_TTL</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-cassandra_entry_ttl"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cassandra_entry_ttl</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CASSANDRA_KEYSPACE</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-cassandra_keyspace"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cassandra_keyspace</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CASSANDRA_PORT</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-cassandra_port"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cassandra_port</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CASSANDRA_READ_CONSISTENCY</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-cassandra_read_consistency"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cassandra_read_consistency</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CASSANDRA_SERVERS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-cassandra_servers"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cassandra_servers</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CASSANDRA_WRITE_CONSISTENCY</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-cassandra_write_consistency"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cassandra_write_consistency</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CASSANDRA_OPTIONS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-cassandra_options"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cassandra_options</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">S3_ACCESS_KEY_ID</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-s3_access_key_id"><code class="xref std std-setting docutils literal notranslate"><span class="pre">s3_access_key_id</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">S3_SECRET_ACCESS_KEY</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-s3_secret_access_key"><code class="xref std std-setting docutils literal notranslate"><span class="pre">s3_secret_access_key</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">S3_BUCKET</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-s3_bucket"><code class="xref std std-setting docutils literal notranslate"><span class="pre">s3_bucket</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">S3_BASE_PATH</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-s3_base_path"><code class="xref std std-setting docutils literal notranslate"><span class="pre">s3_base_path</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">S3_ENDPOINT_URL</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-s3_endpoint_url"><code class="xref std std-setting docutils literal notranslate"><span class="pre">s3_endpoint_url</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">S3_REGION</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-s3_region"><code class="xref std std-setting docutils literal notranslate"><span class="pre">s3_region</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_COUCHBASE_BACKEND_SETTINGS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-couchbase_backend_settings"><code class="xref std std-setting docutils literal notranslate"><span class="pre">couchbase_backend_settings</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_ARANGODB_BACKEND_SETTINGS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-arangodb_backend_settings"><code class="xref std std-setting docutils literal notranslate"><span class="pre">arangodb_backend_settings</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_MONGODB_BACKEND_SETTINGS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-mongodb_backend_settings"><code class="xref std std-setting docutils literal notranslate"><span class="pre">mongodb_backend_settings</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_EVENT_QUEUE_EXPIRES</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-event_queue_expires"><code class="xref std std-setting docutils literal notranslate"><span class="pre">event_queue_expires</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_EVENT_QUEUE_TTL</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-event_queue_ttl"><code class="xref std std-setting docutils literal notranslate"><span class="pre">event_queue_ttl</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_EVENT_QUEUE_PREFIX</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-event_queue_prefix"><code class="xref std std-setting docutils literal notranslate"><span class="pre">event_queue_prefix</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_EVENT_SERIALIZER</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-event_serializer"><code class="xref std std-setting docutils literal notranslate"><span class="pre">event_serializer</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_REDIS_DB</span></code></p></td>
<td><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">redis_db</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_REDIS_HOST</span></code></p></td>
<td><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">redis_host</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_REDIS_MAX_CONNECTIONS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-redis_max_connections"><code class="xref std std-setting docutils literal notranslate"><span class="pre">redis_max_connections</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_REDIS_USERNAME</span></code></p></td>
<td><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">redis_username</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_REDIS_PASSWORD</span></code></p></td>
<td><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">redis_password</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_REDIS_PORT</span></code></p></td>
<td><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">redis_port</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_REDIS_BACKEND_USE_SSL</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-redis_backend_use_ssl"><code class="xref std std-setting docutils literal notranslate"><span class="pre">redis_backend_use_ssl</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_RESULT_BACKEND</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_MAX_CACHED_RESULTS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-result_cache_max"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_cache_max</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_MESSAGE_COMPRESSION</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-result_compression"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_compression</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_RESULT_EXCHANGE</span></code></p></td>
<td><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_exchange</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_RESULT_EXCHANGE_TYPE</span></code></p></td>
<td><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_exchange_type</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_RESULT_EXPIRES</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-result_expires"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_expires</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_RESULT_PERSISTENT</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-result_persistent"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_persistent</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_RESULT_SERIALIZER</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-result_serializer"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_serializer</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_RESULT_DBURI</span></code></p></td>
<td><p>Use <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> instead.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_RESULT_ENGINE_OPTIONS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-database_engine_options"><code class="xref std std-setting docutils literal notranslate"><span class="pre">database_engine_options</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">[...]_DB_SHORT_LIVED_SESSIONS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-database_short_lived_sessions"><code class="xref std std-setting docutils literal notranslate"><span class="pre">database_short_lived_sessions</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_RESULT_DB_TABLE_NAMES</span></code></p></td>
<td><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">database_db_names</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_SECURITY_CERTIFICATE</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-security_certificate"><code class="xref std std-setting docutils literal notranslate"><span class="pre">security_certificate</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_SECURITY_CERT_STORE</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-security_cert_store"><code class="xref std std-setting docutils literal notranslate"><span class="pre">security_cert_store</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_SECURITY_KEY</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-security_key"><code class="xref std std-setting docutils literal notranslate"><span class="pre">security_key</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_SECURITY_KEY_PASSWORD</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-security_key_password"><code class="xref std std-setting docutils literal notranslate"><span class="pre">security_key_password</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_ACKS_LATE</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_acks_late"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_acks_late</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_ACKS_ON_FAILURE_OR_TIMEOUT</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_acks_on_failure_or_timeout"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_acks_on_failure_or_timeout</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_TASK_ALWAYS_EAGER</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_always_eager"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_always_eager</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_ANNOTATIONS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_annotations"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_annotations</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_COMPRESSION</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_compression"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_compression</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_CREATE_MISSING_QUEUES</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_create_missing_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_create_missing_queues</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_DEFAULT_DELIVERY_MODE</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_default_delivery_mode"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_default_delivery_mode</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_DEFAULT_EXCHANGE</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_default_exchange"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_default_exchange</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_DEFAULT_EXCHANGE_TYPE</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_default_exchange_type"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_default_exchange_type</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_DEFAULT_QUEUE</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_default_queue"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_default_queue</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_DEFAULT_QUEUE_TYPE</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_default_queue_type"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_default_queue_type</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_DEFAULT_RATE_LIMIT</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_default_rate_limit"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_default_rate_limit</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_DEFAULT_ROUTING_KEY</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_default_routing_key"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_default_routing_key</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_EAGER_PROPAGATES</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_eager_propagates"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_eager_propagates</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_IGNORE_RESULT</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_ignore_result"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_ignore_result</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_PUBLISH_RETRY</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_publish_retry"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_publish_retry</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_PUBLISH_RETRY_POLICY</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_publish_retry_policy"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_publish_retry_policy</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_QUEUES</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_ROUTES</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_routes"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_routes</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_SEND_SENT_EVENT</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_send_sent_event"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_send_sent_event</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_TASK_SERIALIZER</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_serializer"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_serializer</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_SOFT_TIME_LIMIT</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_soft_time_limit"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_soft_time_limit</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_TASK_TRACK_STARTED</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_track_started"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_track_started</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_TASK_REJECT_ON_WORKER_LOST</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_reject_on_worker_lost"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_reject_on_worker_lost</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_TIME_LIMIT</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_time_limit"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_time_limit</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_ALLOW_ERROR_CB_ON_CHORD_HEADER</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-task_allow_error_cb_on_chord_header"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_allow_error_cb_on_chord_header</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_AGENT</span></code></p></td>
<td><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_agent</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_AUTOSCALER</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_autoscaler"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_autoscaler</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_CONCURRENCY</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_concurrency"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_concurrency</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_CONSUMER</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_consumer"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_consumer</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_WORKER_DIRECT</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_direct"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_direct</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_DISABLE_RATE_LIMITS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_disable_rate_limits"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_disable_rate_limits</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_ENABLE_REMOTE_CONTROL</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_enable_remote_control"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_enable_remote_control</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_HIJACK_ROOT_LOGGER</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_hijack_root_logger"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_hijack_root_logger</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_LOG_COLOR</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_log_color"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_log_color</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_WORKER_LOG_FORMAT</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_log_format"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_log_format</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_WORKER_LOST_WAIT</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_lost_wait"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_lost_wait</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_MAX_TASKS_PER_CHILD</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_max_tasks_per_child"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_max_tasks_per_child</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_POOL</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_pool"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_pool</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_POOL_PUTLOCKS</span></code></p></td>
<td><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_pool_putlocks</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_POOL_RESTARTS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_pool_restarts"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_pool_restarts</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_PREFETCH_MULTIPLIER</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_prefetch_multiplier"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_prefetch_multiplier</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_ENABLE_PREFETCH_COUNT_REDUCTION</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_enable_prefetch_count_reduction"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_enable_prefetch_count_reduction</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_REDIRECT_STDOUTS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_redirect_stdouts"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_redirect_stdouts</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_REDIRECT_STDOUTS_LEVEL</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_redirect_stdouts_level"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_redirect_stdouts_level</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_SEND_EVENTS</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_send_task_events"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_send_task_events</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_STATE_DB</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_state_db"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_state_db</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERY_WORKER_TASK_LOG_FORMAT</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_task_log_format"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_task_log_format</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_TIMER</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_timer"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_timer</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_TIMER_PRECISION</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_timer_precision"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_timer_precision</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CELERYD_DETECT_QUORUM_QUEUES</span></code></p></td>
<td><p><a class="reference internal" href="#std-setting-worker_detect_quorum_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_detect_quorum_queues</span></code></a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id4">
<h2>配置指令<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h2>
<p>Configuration Directives</p>
<section id="conf-datetime">
<span id="id5"></span><h3>常规设置<a class="headerlink" href="#conf-datetime" title="Link to this heading">¶</a></h3>
<p>General settings</p>
<section id="accept-content">
<span id="std-setting-accept_content"></span><h4><code class="docutils literal notranslate"><span class="pre">accept_content</span></code><a class="headerlink" href="#accept-content" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">{'json'}</span></code>  (set, list, or tuple).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--3-input--1" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--1">中文</label><div class="tab-content docutils container">
<p>允许的内容类型/序列化器白名单。</p>
<p>如果收到的消息不在此列表中，则
该消息将被丢弃并产生错误。</p>
<p>默认情况下，仅启用 json，但可以添加任何内容类型，
包括 pickle 和 yaml；在这种情况下，确保
未经授权的人员无法访问您的代理。
有关更多信息，请参见 <a class="reference internal" href="security.html#guide-security"><span class="std std-ref">安全</span></a>。</p>
<p>示例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 使用序列化器名称</span>
<span class="n">accept_content</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;json&#39;</span><span class="p">]</span>

<span class="c1"># 或者使用实际的内容类型（MIME）</span>
<span class="n">accept_content</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;application/json&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--3-input--2" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--2">英文</label><div class="tab-content docutils container">
<p>A white-list of content-types/serializers to allow.</p>
<p>If a message is received that's not in this list then
the message will be discarded with an error.</p>
<p>By default only json is enabled but any content type can be added,
including pickle and yaml; when this is the case make sure
untrusted parties don't have access to your broker.
See <a class="reference internal" href="security.html#guide-security"><span class="std std-ref">安全</span></a> for more.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># using serializer name</span>
<span class="n">accept_content</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;json&#39;</span><span class="p">]</span>

<span class="c1"># or the actual content-type (MIME)</span>
<span class="n">accept_content</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;application/json&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="result-accept-content">
<span id="std-setting-result_accept_content"></span><h4><code class="docutils literal notranslate"><span class="pre">result_accept_content</span></code><a class="headerlink" href="#result-accept-content" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">None</span></code> (can be set, list or tuple).</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 4.3.</span></p>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--4-input--1" name="tab-set--4" type="radio"><label class="tab-label" for="tab-set--4-input--1">中文</label><div class="tab-content docutils container">
<p>结果后端的内容类型/序列化器白名单。</p>
<p>如果收到的消息不在此列表中，则
该消息将被丢弃并产生错误。</p>
<p>默认情况下，它与 <code class="docutils literal notranslate"><span class="pre">accept_content</span></code> 使用相同的序列化器。
但是，可以为结果后端的接受内容指定不同的序列化器。
通常，当使用签名消息且结果以未签名形式存储在结果后端时，
需要这样做。
有关更多信息，请参见 <a class="reference internal" href="security.html#guide-security"><span class="std std-ref">安全</span></a>。</p>
<p>示例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 使用序列化器名称</span>
<span class="n">result_accept_content</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;json&#39;</span><span class="p">]</span>

<span class="c1"># 或者使用实际的内容类型（MIME）</span>
<span class="n">result_accept_content</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;application/json&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--4-input--2" name="tab-set--4" type="radio"><label class="tab-label" for="tab-set--4-input--2">英文</label><div class="tab-content docutils container">
<p>A white-list of content-types/serializers to allow for the result backend.</p>
<p>If a message is received that's not in this list then
the message will be discarded with an error.</p>
<p>By default it is the same serializer as <code class="docutils literal notranslate"><span class="pre">accept_content</span></code>.
However, a different serializer for accepted content of the result backend
can be specified.
Usually this is needed if signed messaging is used and the result is stored
unsigned in the result backend.
See <a class="reference internal" href="security.html#guide-security"><span class="std std-ref">安全</span></a> for more.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># using serializer name</span>
<span class="n">result_accept_content</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;json&#39;</span><span class="p">]</span>

<span class="c1"># or the actual content-type (MIME)</span>
<span class="n">result_accept_content</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;application/json&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="id6">
<h3>时间和日期设置<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h3>
<p>Time and date settings</p>
<section id="enable-utc">
<span id="std-setting-enable_utc"></span><h4><code class="docutils literal notranslate"><span class="pre">enable_utc</span></code><a class="headerlink" href="#enable-utc" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.5.</span></p>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--5-input--1" name="tab-set--5" type="radio"><label class="tab-label" for="tab-set--5-input--1">中文</label><div class="tab-content docutils container">
<p>默认值：自版本 3.0 起默认启用。</p>
<p>如果启用，消息中的日期和时间将转换为使用
UTC 时区。</p>
<p>请注意，运行低于 2.5 版本的 Celery 的工作进程会将所有消息假设为本地
时区，因此只有当所有工作进程都已升级时才启用此选项。</p>
</div>
<input class="tab-input" id="tab-set--5-input--2" name="tab-set--5" type="radio"><label class="tab-label" for="tab-set--5-input--2">英文</label><div class="tab-content docutils container">
<p>Default: Enabled by default since version 3.0.</p>
<p>If enabled dates and times in messages will be converted to use
the UTC timezone.</p>
<p>Note that workers running Celery versions below 2.5 will assume a local
timezone for all messages, so only enable if all workers have been
upgraded.</p>
</div>
</div>
</section>
<section id="timezone">
<span id="std-setting-timezone"></span><h4><code class="docutils literal notranslate"><span class="pre">timezone</span></code><a class="headerlink" href="#timezone" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.5.</span></p>
</div>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;UTC&quot;</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--6-input--1" name="tab-set--6" type="radio"><label class="tab-label" for="tab-set--6-input--1">中文</label><div class="tab-content docutils container">
<p>配置 Celery 使用自定义时区。
时区值可以是 <a class="reference external" href="https://docs.python.org/3/library/zoneinfo.html">ZoneInfo</a>
库支持的任何时区。</p>
<p>如果未设置，则使用 UTC 时区。为了向后兼容，
还有一个 <a class="reference internal" href="#std-setting-enable_utc"><code class="xref std std-setting docutils literal notranslate"><span class="pre">enable_utc</span></code></a> 设置，当此设置为
false 时，使用系统本地时区。</p>
</div>
<input class="tab-input" id="tab-set--6-input--2" name="tab-set--6" type="radio"><label class="tab-label" for="tab-set--6-input--2">英文</label><div class="tab-content docutils container">
<p>Configure Celery to use a custom time zone.
The timezone value can be any time zone supported by the <a class="reference external" href="https://docs.python.org/3/library/zoneinfo.html">ZoneInfo</a>
library.</p>
<p>If not set the UTC timezone is used. For backwards compatibility
there's also a <a class="reference internal" href="#std-setting-enable_utc"><code class="xref std std-setting docutils literal notranslate"><span class="pre">enable_utc</span></code></a> setting, and when this is set
to false the system local timezone is used instead.</p>
</div>
</div>
</section>
</section>
<section id="conf-tasks">
<span id="id8"></span><h3>任务设置<a class="headerlink" href="#conf-tasks" title="Link to this heading">¶</a></h3>
<p>Task settings</p>
<section id="task-annotations">
<span id="std-setting-task_annotations"></span><h4><code class="docutils literal notranslate"><span class="pre">task_annotations</span></code><a class="headerlink" href="#task-annotations" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.5.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--7-input--1" name="tab-set--7" type="radio"><label class="tab-label" for="tab-set--7-input--1">中文</label><div class="tab-content docutils container">
<p>此设置可用于从配置中重写任何任务属性。该设置可以是一个字典，或是一个任务过滤器的注解对象列表，返回一个要更改的属性映射。</p>
<p>这将更改 <code class="docutils literal notranslate"><span class="pre">tasks.add</span></code> 任务的 <code class="docutils literal notranslate"><span class="pre">rate_limit</span></code> 属性：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">task_annotations</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;tasks.add&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;rate_limit&#39;</span><span class="p">:</span> <span class="s1">&#39;10/s&#39;</span><span class="p">}}</span>
</pre></div>
</div>
<p>或者更改所有任务的相同属性：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">task_annotations</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;*&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;rate_limit&#39;</span><span class="p">:</span> <span class="s1">&#39;10/s&#39;</span><span class="p">}}</span>
</pre></div>
</div>
<p>您还可以更改方法，例如 <code class="docutils literal notranslate"><span class="pre">on_failure</span></code> 处理器：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">my_on_failure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc</span><span class="p">,</span> <span class="n">task_id</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">einfo</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;哦，不！任务失败: </span><span class="si">{0!r}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exc</span><span class="p">))</span>

<span class="n">task_annotations</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;*&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;on_failure&#39;</span><span class="p">:</span> <span class="n">my_on_failure</span><span class="p">}}</span>
</pre></div>
</div>
<p>如果您需要更多灵活性，您可以使用对象而不是字典来选择要注解的任务：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyAnnotate</span><span class="p">:</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">annotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;tasks.&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;rate_limit&#39;</span><span class="p">:</span> <span class="s1">&#39;10/s&#39;</span><span class="p">}</span>

<span class="n">task_annotations</span> <span class="o">=</span> <span class="p">(</span><span class="n">MyAnnotate</span><span class="p">(),</span> <span class="p">{</span><span class="n">other</span><span class="p">,})</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--7-input--2" name="tab-set--7" type="radio"><label class="tab-label" for="tab-set--7-input--2">英文</label><div class="tab-content docutils container">
<p>This setting can be used to rewrite any task attribute from the
configuration. The setting can be a dict, or a list of annotation
objects that filter for tasks and return a map of attributes
to change.</p>
<p>This will change the <code class="docutils literal notranslate"><span class="pre">rate_limit</span></code> attribute for the <code class="docutils literal notranslate"><span class="pre">tasks.add</span></code>
task:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">task_annotations</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;tasks.add&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;rate_limit&#39;</span><span class="p">:</span> <span class="s1">&#39;10/s&#39;</span><span class="p">}}</span>
</pre></div>
</div>
<p>or change the same for all tasks:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">task_annotations</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;*&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;rate_limit&#39;</span><span class="p">:</span> <span class="s1">&#39;10/s&#39;</span><span class="p">}}</span>
</pre></div>
</div>
<p>You can change methods too, for example the <code class="docutils literal notranslate"><span class="pre">on_failure</span></code> handler:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">my_on_failure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exc</span><span class="p">,</span> <span class="n">task_id</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">einfo</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Oh no! Task failed: </span><span class="si">{0!r}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exc</span><span class="p">))</span>

<span class="n">task_annotations</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;*&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;on_failure&#39;</span><span class="p">:</span> <span class="n">my_on_failure</span><span class="p">}}</span>
</pre></div>
</div>
<p>If you need more flexibility then you can use objects
instead of a dict to choose the tasks to annotate:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyAnnotate</span><span class="p">:</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">annotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;tasks.&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;rate_limit&#39;</span><span class="p">:</span> <span class="s1">&#39;10/s&#39;</span><span class="p">}</span>

<span class="n">task_annotations</span> <span class="o">=</span> <span class="p">(</span><span class="n">MyAnnotate</span><span class="p">(),</span> <span class="p">{</span><span class="n">other</span><span class="p">,})</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="task-compression">
<span id="std-setting-task_compression"></span><h4><code class="docutils literal notranslate"><span class="pre">task_compression</span></code><a class="headerlink" href="#task-compression" title="Link to this heading">¶</a></h4>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--8-input--1" name="tab-set--8" type="radio"><label class="tab-label" for="tab-set--8-input--1">中文</label><div class="tab-content docutils container">
<p>任务消息的默认压缩格式。
可以是 <code class="docutils literal notranslate"><span class="pre">gzip</span></code>， <code class="docutils literal notranslate"><span class="pre">bzip2</span></code> （如果可用），或在 Kombu 压缩注册表中注册的任何自定义压缩方案。</p>
<p>默认情况下，发送的是未压缩的消息。</p>
</div>
<input class="tab-input" id="tab-set--8-input--2" name="tab-set--8" type="radio"><label class="tab-label" for="tab-set--8-input--2">英文</label><div class="tab-content docutils container">
<p>Default compression used for task messages.
Can be <code class="docutils literal notranslate"><span class="pre">gzip</span></code>, <code class="docutils literal notranslate"><span class="pre">bzip2</span></code> (if available), or any custom
compression schemes registered in the Kombu compression registry.</p>
<p>The default is to send uncompressed messages.</p>
</div>
</div>
</section>
<section id="task-protocol">
<span id="std-setting-task_protocol"></span><h4><code class="docutils literal notranslate"><span class="pre">task_protocol</span></code><a class="headerlink" href="#task-protocol" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 4.0.</span></p>
</div>
<p>Default: 2 (since 4.0).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--9-input--1" name="tab-set--9" type="radio"><label class="tab-label" for="tab-set--9-input--1">中文</label><div class="tab-content docutils container">
<p>设置用于发送任务的默认任务消息协议版本。
支持协议：1 和 2。</p>
<p>协议 2 支持 3.1.24 和 4.x+。</p>
</div>
<input class="tab-input" id="tab-set--9-input--2" name="tab-set--9" type="radio"><label class="tab-label" for="tab-set--9-input--2">英文</label><div class="tab-content docutils container">
<p>Set the default task message protocol version used to send tasks.
Supports protocols: 1 and 2.</p>
<p>Protocol 2 is supported by 3.1.24 and 4.x+.</p>
</div>
</div>
</section>
<section id="task-serializer">
<span id="std-setting-task_serializer"></span><h4><code class="docutils literal notranslate"><span class="pre">task_serializer</span></code><a class="headerlink" href="#task-serializer" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;json&quot;</span></code> (since 4.0, earlier: pickle).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--10-input--1" name="tab-set--10" type="radio"><label class="tab-label" for="tab-set--10-input--1">中文</label><div class="tab-content docutils container">
<p>一个字符串，标识用于的默认序列化方法。可以是
<cite>json</cite> （默认）， <cite>pickle</cite>， <cite>yaml</cite>， <cite>msgpack</cite>，或任何已注册的自定义序列化
方法，注册在 <code class="xref py py-mod docutils literal notranslate"><span class="pre">kombu.serialization.registry</span></code> 中。</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="calling.html#calling-serializers"><span class="std std-ref">序列化器</span></a>。</p>
</div>
</div>
<input class="tab-input" id="tab-set--10-input--2" name="tab-set--10" type="radio"><label class="tab-label" for="tab-set--10-input--2">英文</label><div class="tab-content docutils container">
<p>A string identifying the default serialization method to use. Can be
<cite>json</cite> (default), <cite>pickle</cite>, <cite>yaml</cite>, <cite>msgpack</cite>, or any custom serialization
methods that have been registered with <code class="xref py py-mod docutils literal notranslate"><span class="pre">kombu.serialization.registry</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="calling.html#calling-serializers"><span class="std std-ref">序列化器</span></a>.</p>
</div>
</div>
</div>
</section>
<section id="task-publish-retry">
<span id="std-setting-task_publish_retry"></span><h4><code class="docutils literal notranslate"><span class="pre">task_publish_retry</span></code><a class="headerlink" href="#task-publish-retry" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.2.</span></p>
</div>
<p>Default: Enabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--11-input--1" name="tab-set--11" type="radio"><label class="tab-label" for="tab-set--11-input--1">中文</label><div class="tab-content docutils container">
<p>决定在发生连接丢失或其他连接错误的情况下，是否重试发布任务消息。
另请参见 <a class="reference internal" href="#std-setting-task_publish_retry_policy"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_publish_retry_policy</span></code></a>。</p>
</div>
<input class="tab-input" id="tab-set--11-input--2" name="tab-set--11" type="radio"><label class="tab-label" for="tab-set--11-input--2">英文</label><div class="tab-content docutils container">
<p>Decides if publishing task messages will be retried in the case
of connection loss or other connection errors.
See also <a class="reference internal" href="#std-setting-task_publish_retry_policy"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_publish_retry_policy</span></code></a>.</p>
</div>
</div>
</section>
<section id="task-publish-retry-policy">
<span id="std-setting-task_publish_retry_policy"></span><h4><code class="docutils literal notranslate"><span class="pre">task_publish_retry_policy</span></code><a class="headerlink" href="#task-publish-retry-policy" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.2.</span></p>
</div>
<p>Default: See <a class="reference internal" href="calling.html#calling-retry"><span class="std std-ref">消息发送重试</span></a>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--12-input--1" name="tab-set--12" type="radio"><label class="tab-label" for="tab-set--12-input--1">中文</label><div class="tab-content docutils container">
<p>定义在连接丢失或其他连接错误的情况下重试发布任务消息时的默认策略。</p>
</div>
<input class="tab-input" id="tab-set--12-input--2" name="tab-set--12" type="radio"><label class="tab-label" for="tab-set--12-input--2">英文</label><div class="tab-content docutils container">
<p>Defines the default policy when retrying publishing a task message in
the case of connection loss or other connection errors.</p>
</div>
</div>
</section>
</section>
<section id="conf-task-execution">
<span id="id9"></span><h3>任务执行设置<a class="headerlink" href="#conf-task-execution" title="Link to this heading">¶</a></h3>
<p>Task execution settings</p>
<section id="task-always-eager">
<span id="std-setting-task_always_eager"></span><h4><code class="docutils literal notranslate"><span class="pre">task_always_eager</span></code><a class="headerlink" href="#task-always-eager" title="Link to this heading">¶</a></h4>
<p>Default: Disabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--13-input--1" name="tab-set--13" type="radio"><label class="tab-label" for="tab-set--13-input--1">中文</label><div class="tab-content docutils container">
<p>如果此项为 <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>，所有任务将通过本地执行，直到
任务返回为止。<code class="docutils literal notranslate"><span class="pre">apply_async()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">Task.delay()</span></code> 将返回
一个 <a class="reference internal" href="../reference/celery.result.html#celery.result.EagerResult" title="celery.result.EagerResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">EagerResult</span></code></a> 实例，该实例模拟
<a class="reference internal" href="../reference/celery.result.html#celery.result.AsyncResult" title="celery.result.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a> 的 API
和行为，但结果已经被评估。</p>
<p>也就是说，任务将被本地执行，而不是发送到
队列中。</p>
</div>
<input class="tab-input" id="tab-set--13-input--2" name="tab-set--13" type="radio"><label class="tab-label" for="tab-set--13-input--2">英文</label><div class="tab-content docutils container">
<p>If this is <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>, all tasks will be executed locally by blocking until
the task returns. <code class="docutils literal notranslate"><span class="pre">apply_async()</span></code> and <code class="docutils literal notranslate"><span class="pre">Task.delay()</span></code> will return
an <a class="reference internal" href="../reference/celery.result.html#celery.result.EagerResult" title="celery.result.EagerResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">EagerResult</span></code></a> instance, that emulates the API
and behavior of <a class="reference internal" href="../reference/celery.result.html#celery.result.AsyncResult" title="celery.result.AsyncResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code></a>, except the result
is already evaluated.</p>
<p>That is, tasks will be executed locally instead of being sent to
the queue.</p>
</div>
</div>
</section>
<section id="task-eager-propagates">
<span id="std-setting-task_eager_propagates"></span><h4><code class="docutils literal notranslate"><span class="pre">task_eager_propagates</span></code><a class="headerlink" href="#task-eager-propagates" title="Link to this heading">¶</a></h4>
<p>Default: Disabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--14-input--1" name="tab-set--14" type="radio"><label class="tab-label" for="tab-set--14-input--1">中文</label><div class="tab-content docutils container">
<p>如果此项为 <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>，则急切执行的任务（通过 <cite>task.apply()</cite> 应用，
或启用了 <a class="reference internal" href="#std-setting-task_always_eager"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_always_eager</span></code></a> 设置时），将
传播异常。</p>
<p>这相当于始终以 <code class="docutils literal notranslate"><span class="pre">throw=True</span></code> 运行 <code class="docutils literal notranslate"><span class="pre">apply()</span></code>。</p>
</div>
<input class="tab-input" id="tab-set--14-input--2" name="tab-set--14" type="radio"><label class="tab-label" for="tab-set--14-input--2">英文</label><div class="tab-content docutils container">
<p>If this is <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>, eagerly executed tasks (applied by <cite>task.apply()</cite>,
or when the <a class="reference internal" href="#std-setting-task_always_eager"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_always_eager</span></code></a> setting is enabled), will
propagate exceptions.</p>
<p>It's the same as always running <code class="docutils literal notranslate"><span class="pre">apply()</span></code> with <code class="docutils literal notranslate"><span class="pre">throw=True</span></code>.</p>
</div>
</div>
</section>
<section id="task-store-eager-result">
<span id="std-setting-task_store_eager_result"></span><h4><code class="docutils literal notranslate"><span class="pre">task_store_eager_result</span></code><a class="headerlink" href="#task-store-eager-result" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.1.</span></p>
</div>
<p>Default: Disabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--15-input--1" name="tab-set--15" type="radio"><label class="tab-label" for="tab-set--15-input--1">中文</label><div class="tab-content docutils container">
<p>如果此项为 <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>，且 <a class="reference internal" href="#std-setting-task_always_eager"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_always_eager</span></code></a> 为 <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>
且 <a class="reference internal" href="#std-setting-task_ignore_result"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_ignore_result</span></code></a> 为 <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code>，
急切执行任务的结果将被保存到后端。</p>
<p>默认情况下，即使 <a class="reference internal" href="#std-setting-task_always_eager"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_always_eager</span></code></a> 设置为 <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>
且 <a class="reference internal" href="#std-setting-task_ignore_result"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_ignore_result</span></code></a> 设置为 <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code>，
结果也不会被保存。</p>
</div>
<input class="tab-input" id="tab-set--15-input--2" name="tab-set--15" type="radio"><label class="tab-label" for="tab-set--15-input--2">英文</label><div class="tab-content docutils container">
<p>If this is <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code> and <a class="reference internal" href="#std-setting-task_always_eager"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_always_eager</span></code></a> is <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>
and <a class="reference internal" href="#std-setting-task_ignore_result"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_ignore_result</span></code></a> is <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code>,
the results of eagerly executed tasks will be saved to the backend.</p>
<p>By default, even with <a class="reference internal" href="#std-setting-task_always_eager"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_always_eager</span></code></a> set to <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>
and <a class="reference internal" href="#std-setting-task_ignore_result"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_ignore_result</span></code></a> set to <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code>,
the result will not be saved.</p>
</div>
</div>
</section>
<section id="task-remote-tracebacks">
<span id="std-setting-task_remote_tracebacks"></span><h4><code class="docutils literal notranslate"><span class="pre">task_remote_tracebacks</span></code><a class="headerlink" href="#task-remote-tracebacks" title="Link to this heading">¶</a></h4>
<p>Default: Disabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--16-input--1" name="tab-set--16" type="radio"><label class="tab-label" for="tab-set--16-input--1">中文</label><div class="tab-content docutils container">
<p>如果启用，任务结果将包含工作者的堆栈信息，以便在重新抛出任务错误时进行追踪。</p>
<p>这需要 <a class="extlink-pypi reference external" href="https://pypi.org/project/tblib/">https://pypi.org/project/tblib/</a> 库，可以通过
<strong class="command">pip</strong> 安装：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>tblib<span class="o">]</span>
</pre></div>
</div>
<p>有关如何组合多个扩展要求的信息，请参见 <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a>。</p>
</div>
<input class="tab-input" id="tab-set--16-input--2" name="tab-set--16" type="radio"><label class="tab-label" for="tab-set--16-input--2">英文</label><div class="tab-content docutils container">
<p>If enabled task results will include the workers stack when re-raising
task errors.</p>
<p>This requires the <a class="extlink-pypi reference external" href="https://pypi.org/project/tblib/">https://pypi.org/project/tblib/</a> library, that can be installed using
<strong class="command">pip</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>tblib<span class="o">]</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a> for information on combining multiple extension
requirements.</p>
</div>
</div>
</section>
<section id="task-ignore-result">
<span id="std-setting-task_ignore_result"></span><h4><code class="docutils literal notranslate"><span class="pre">task_ignore_result</span></code><a class="headerlink" href="#task-ignore-result" title="Link to this heading">¶</a></h4>
<p>Default: Disabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--17-input--1" name="tab-set--17" type="radio"><label class="tab-label" for="tab-set--17-input--1">中文</label><div class="tab-content docutils container">
<p>是否存储任务返回值（墓碑/tombstones）。如果您仍然希望存储错误，而不是成功返回值，可以设置 <a class="reference internal" href="#std-setting-task_store_errors_even_if_ignored"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_store_errors_even_if_ignored</span></code></a> 。</p>
</div>
<input class="tab-input" id="tab-set--17-input--2" name="tab-set--17" type="radio"><label class="tab-label" for="tab-set--17-input--2">英文</label><div class="tab-content docutils container">
<p>Whether to store the task return values or not (tombstones). If you still want to store errors, just not successful return values, you can set <a class="reference internal" href="#std-setting-task_store_errors_even_if_ignored"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_store_errors_even_if_ignored</span></code></a>.</p>
</div>
</div>
</section>
<section id="task-store-errors-even-if-ignored">
<span id="std-setting-task_store_errors_even_if_ignored"></span><h4><code class="docutils literal notranslate"><span class="pre">task_store_errors_even_if_ignored</span></code><a class="headerlink" href="#task-store-errors-even-if-ignored" title="Link to this heading">¶</a></h4>
<p>Default: Disabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--18-input--1" name="tab-set--18" type="radio"><label class="tab-label" for="tab-set--18-input--1">中文</label><div class="tab-content docutils container">
<p>如果设置了此项，即使 <a class="reference internal" href="../reference/celery.app.task.html#celery.app.task.Task.ignore_result" title="celery.app.task.Task.ignore_result"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Task.ignore_result</span></code></a> 已启用，工作者也会将所有任务错误存储在结果存储中。</p>
</div>
<input class="tab-input" id="tab-set--18-input--2" name="tab-set--18" type="radio"><label class="tab-label" for="tab-set--18-input--2">英文</label><div class="tab-content docutils container">
<p>If set, the worker stores all task errors in the result store even if
<a class="reference internal" href="../reference/celery.app.task.html#celery.app.task.Task.ignore_result" title="celery.app.task.Task.ignore_result"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Task.ignore_result</span></code></a> is on.</p>
</div>
</div>
</section>
<section id="task-track-started">
<span id="std-setting-task_track_started"></span><h4><code class="docutils literal notranslate"><span class="pre">task_track_started</span></code><a class="headerlink" href="#task-track-started" title="Link to this heading">¶</a></h4>
<p>Default: Disabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--19-input--1" name="tab-set--19" type="radio"><label class="tab-label" for="tab-set--19-input--1">中文</label><div class="tab-content docutils container">
<p>如果 <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>，任务在被工作者执行时将报告其状态为“已开始”。默认值为 <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code>，因为正常行为是不报告如此细粒度的状态。任务通常是挂起、已完成或等待重试。拥有“已开始”状态对长时间运行的任务特别有用，因为需要报告当前正在运行的任务。</p>
</div>
<input class="tab-input" id="tab-set--19-input--2" name="tab-set--19" type="radio"><label class="tab-label" for="tab-set--19-input--2">英文</label><div class="tab-content docutils container">
<p>If <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code> the task will report its status as 'started' when the
task is executed by a worker. The default value is <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code> as
the normal behavior is to not report that level of granularity. Tasks
are either pending, finished, or waiting to be retried. Having a 'started'
state can be useful for when there are long running tasks and there's a
need to report what task is currently running.</p>
</div>
</div>
</section>
<section id="task-time-limit">
<span id="std-setting-task_time_limit"></span><h4><code class="docutils literal notranslate"><span class="pre">task_time_limit</span></code><a class="headerlink" href="#task-time-limit" title="Link to this heading">¶</a></h4>
<p>Default: No time limit.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--20-input--1" name="tab-set--20" type="radio"><label class="tab-label" for="tab-set--20-input--1">中文</label><div class="tab-content docutils container">
<p>任务硬时间限制，单位为秒。当任务处理超过此时间时，处理该任务的工作者将被终止，并由一个新的工作者替换。</p>
</div>
<input class="tab-input" id="tab-set--20-input--2" name="tab-set--20" type="radio"><label class="tab-label" for="tab-set--20-input--2">英文</label><div class="tab-content docutils container">
<p>Task hard time limit in seconds. The worker processing the task will
be killed and replaced with a new one when this is exceeded.</p>
</div>
</div>
</section>
<section id="task-allow-error-cb-on-chord-header">
<span id="std-setting-task_allow_error_cb_on_chord_header"></span><h4><code class="docutils literal notranslate"><span class="pre">task_allow_error_cb_on_chord_header</span></code><a class="headerlink" href="#task-allow-error-cb-on-chord-header" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.3.</span></p>
</div>
<p>Default: Disabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--21-input--1" name="tab-set--21" type="radio"><label class="tab-label" for="tab-set--21-input--1">中文</label><div class="tab-content docutils container">
<p>启用此标志将允许将错误回调链接到一个 Chord 头部，默认情况下，使用 <code class="code docutils literal notranslate"><span class="pre">link_error()</span></code> 时不会进行链接，且如果头部中的任何任务失败，将阻止 Chord 的主体执行。</p>
<p>考虑以下画布，在该标志禁用时（默认行为）：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">header</span> <span class="o">=</span> <span class="n">group</span><span class="p">([</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">])</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">t3</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">chord</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">link_error</span><span class="p">(</span><span class="n">error_callback_sig</span><span class="p">)</span>
</pre></div>
</div>
<p>如果 <em>任何</em> 头部任务失败（ <code class="code docutils literal notranslate"><span class="pre">t1</span></code> 或 <code class="code docutils literal notranslate"><span class="pre">t2</span></code> ），默认情况下，Chord 主体（<code class="code docutils literal notranslate"><span class="pre">t3</span></code>）将 <strong>不执行</strong>，并且 <code class="code docutils literal notranslate"><span class="pre">error_callback_sig</span></code> 将 <strong>仅调用一次</strong> （针对主体）。</p>
<p>启用此标志将改变上述行为：</p>
<ol class="arabic simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">error_callback_sig</span></code> 将被链接到 <code class="code docutils literal notranslate"><span class="pre">t1</span></code> 和 <code class="code docutils literal notranslate"><span class="pre">t2</span></code> （以及 <code class="code docutils literal notranslate"><span class="pre">t3</span></code>）。</p></li>
<li><p>如果 <em>任何</em> 头部任务失败，<code class="code docutils literal notranslate"><span class="pre">error_callback_sig</span></code> 将 <strong>针对每个失败的头部任务调用一次</strong>，并且也会针对 <code class="code docutils literal notranslate"><span class="pre">body</span></code> 调用一次（即使主体没有执行）。</p></li>
</ol>
<p>现在，考虑启用此标志后的画布：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">header</span> <span class="o">=</span> <span class="n">group</span><span class="p">([</span><span class="n">failingT1</span><span class="p">,</span> <span class="n">failingT2</span><span class="p">])</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">t3</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">chord</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">link_error</span><span class="p">(</span><span class="n">error_callback_sig</span><span class="p">)</span>
</pre></div>
</div>
<p>如果 <em>所有</em> 头部任务失败（<code class="code docutils literal notranslate"><span class="pre">failingT1</span></code> 和 <code class="code docutils literal notranslate"><span class="pre">failingT2</span></code>），那么 Chord 主体（<code class="code docutils literal notranslate"><span class="pre">t3</span></code>）将 <strong>不执行</strong>，并且 <code class="code docutils literal notranslate"><span class="pre">error_callback_sig</span></code> 将被 <strong>调用 3 次</strong> （两次针对头部，一次针对主体）。</p>
<p>最后，考虑启用此标志的画布：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">header</span> <span class="o">=</span> <span class="n">group</span><span class="p">([</span><span class="n">failingT1</span><span class="p">,</span> <span class="n">failingT2</span><span class="p">])</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">t3</span>
<span class="n">upgraded_chord</span> <span class="o">=</span> <span class="n">chain</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
<span class="n">upgraded_chord</span><span class="o">.</span><span class="n">link_error</span><span class="p">(</span><span class="n">error_callback_sig</span><span class="p">)</span>
</pre></div>
</div>
<p>此画布的行为将与之前的完全相同，因为 <code class="code docutils literal notranslate"><span class="pre">chain</span></code> 会在内部被升级为 <code class="code docutils literal notranslate"><span class="pre">chord</span></code>。</p>
</div>
<input class="tab-input" id="tab-set--21-input--2" name="tab-set--21" type="radio"><label class="tab-label" for="tab-set--21-input--2">英文</label><div class="tab-content docutils container">
<p>Enabling this flag will allow linking an error callback to a chord header,
which by default will not link when using <code class="code docutils literal notranslate"><span class="pre">link_error()</span></code>, and preventing
from the chord's body to execute if any of the tasks in the header fails.</p>
<p>Consider the following canvas with the flag disabled (default behavior):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">header</span> <span class="o">=</span> <span class="n">group</span><span class="p">([</span><span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">])</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">t3</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">chord</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">link_error</span><span class="p">(</span><span class="n">error_callback_sig</span><span class="p">)</span>
</pre></div>
</div>
<p>If <em>any</em> of the header tasks failed (<code class="code docutils literal notranslate"><span class="pre">t1</span></code> or <code class="code docutils literal notranslate"><span class="pre">t2</span></code>), by default, the chord body (<code class="code docutils literal notranslate"><span class="pre">t3</span></code>) would <strong>not execute</strong>, and <code class="code docutils literal notranslate"><span class="pre">error_callback_sig</span></code> will be called <strong>once</strong> (for the body).</p>
<p>Enabling this flag will change the above behavior by:</p>
<ol class="arabic simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">error_callback_sig</span></code> will be linked to <code class="code docutils literal notranslate"><span class="pre">t1</span></code> and <code class="code docutils literal notranslate"><span class="pre">t2</span></code> (as well as <code class="code docutils literal notranslate"><span class="pre">t3</span></code>).</p></li>
<li><p>If <em>any</em> of the header tasks failed, <code class="code docutils literal notranslate"><span class="pre">error_callback_sig</span></code> will be called <strong>for each</strong> failed header task <strong>and</strong> the <code class="code docutils literal notranslate"><span class="pre">body</span></code> (even if the body didn't run).</p></li>
</ol>
<p>Consider now the following canvas with the flag enabled:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">header</span> <span class="o">=</span> <span class="n">group</span><span class="p">([</span><span class="n">failingT1</span><span class="p">,</span> <span class="n">failingT2</span><span class="p">])</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">t3</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">chord</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">link_error</span><span class="p">(</span><span class="n">error_callback_sig</span><span class="p">)</span>
</pre></div>
</div>
<p>If <em>all</em> of the header tasks failed (<code class="code docutils literal notranslate"><span class="pre">failingT1</span></code> and <code class="code docutils literal notranslate"><span class="pre">failingT2</span></code>), then the chord body (<code class="code docutils literal notranslate"><span class="pre">t3</span></code>) would <strong>not execute</strong>, and <code class="code docutils literal notranslate"><span class="pre">error_callback_sig</span></code> will be called <strong>3 times</strong> (two times for the header and one time for the body).</p>
<p>Lastly, consider the following canvas with the flag enabled:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">header</span> <span class="o">=</span> <span class="n">group</span><span class="p">([</span><span class="n">failingT1</span><span class="p">,</span> <span class="n">failingT2</span><span class="p">])</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">t3</span>
<span class="n">upgraded_chord</span> <span class="o">=</span> <span class="n">chain</span><span class="p">(</span><span class="n">header</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span>
<span class="n">upgraded_chord</span><span class="o">.</span><span class="n">link_error</span><span class="p">(</span><span class="n">error_callback_sig</span><span class="p">)</span>
</pre></div>
</div>
<p>This canvas will behave exactly the same as the previous one, since the <code class="code docutils literal notranslate"><span class="pre">chain</span></code> will be upgraded to a <code class="code docutils literal notranslate"><span class="pre">chord</span></code> internally.</p>
</div>
</div>
</section>
<section id="task-soft-time-limit">
<span id="std-setting-task_soft_time_limit"></span><h4><code class="docutils literal notranslate"><span class="pre">task_soft_time_limit</span></code><a class="headerlink" href="#task-soft-time-limit" title="Link to this heading">¶</a></h4>
<p>Default: No soft time limit.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--22-input--1" name="tab-set--22" type="radio"><label class="tab-label" for="tab-set--22-input--1">中文</label><div class="tab-content docutils container">
<p>任务软时间限制，单位为秒。</p>
<p>当超过软时间限制时，将引发 <a class="reference internal" href="../reference/celery.exceptions.html#celery.exceptions.SoftTimeLimitExceeded" title="celery.exceptions.SoftTimeLimitExceeded"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SoftTimeLimitExceeded</span></code></a> 异常。例如，任务可以捕获此异常并在硬时间限制到达之前进行清理：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">SoftTimeLimitExceeded</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">task</span>
<span class="k">def</span><span class="w"> </span><span class="nf">mytask</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">do_work</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">SoftTimeLimitExceeded</span><span class="p">:</span>
        <span class="n">cleanup_in_a_hurry</span><span class="p">()</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--22-input--2" name="tab-set--22" type="radio"><label class="tab-label" for="tab-set--22-input--2">英文</label><div class="tab-content docutils container">
<p>Task soft time limit in seconds.</p>
<p>The <a class="reference internal" href="../reference/celery.exceptions.html#celery.exceptions.SoftTimeLimitExceeded" title="celery.exceptions.SoftTimeLimitExceeded"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SoftTimeLimitExceeded</span></code></a> exception will be
raised when this is exceeded. For example, the task can catch this to
clean up before the hard time limit comes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">SoftTimeLimitExceeded</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">task</span>
<span class="k">def</span><span class="w"> </span><span class="nf">mytask</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">do_work</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">SoftTimeLimitExceeded</span><span class="p">:</span>
        <span class="n">cleanup_in_a_hurry</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="task-acks-late">
<span id="std-setting-task_acks_late"></span><h4><code class="docutils literal notranslate"><span class="pre">task_acks_late</span></code><a class="headerlink" href="#task-acks-late" title="Link to this heading">¶</a></h4>
<p>Default: Disabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--23-input--1" name="tab-set--23" type="radio"><label class="tab-label" for="tab-set--23-input--1">中文</label><div class="tab-content docutils container">
<p>延迟确认意味着任务消息将在任务执行 <strong>后</strong> 被确认，而不是 <em>在执行前</em> （默认行为）。</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p>FAQ: <a class="reference internal" href="../faq.html#faq-acks-late-vs-retry"><span class="std std-ref">我应该使用 retry 还是 acks_late？</span></a>。</p>
</div>
</div>
<input class="tab-input" id="tab-set--23-input--2" name="tab-set--23" type="radio"><label class="tab-label" for="tab-set--23-input--2">英文</label><div class="tab-content docutils container">
<p>Late ack means the task messages will be acknowledged <strong>after</strong> the task
has been executed, not <em>right before</em> (the default behavior).</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p>FAQ: <a class="reference internal" href="../faq.html#faq-acks-late-vs-retry"><span class="std std-ref">我应该使用 retry 还是 acks_late？</span></a>.</p>
</div>
</div>
</div>
</section>
<section id="task-acks-on-failure-or-timeout">
<span id="std-setting-task_acks_on_failure_or_timeout"></span><h4><code class="docutils literal notranslate"><span class="pre">task_acks_on_failure_or_timeout</span></code><a class="headerlink" href="#task-acks-on-failure-or-timeout" title="Link to this heading">¶</a></h4>
<p>Default: Enabled</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--24-input--1" name="tab-set--24" type="radio"><label class="tab-label" for="tab-set--24-input--1">中文</label><div class="tab-content docutils container">
<p>启用此项后，所有任务的消息即使失败或超时，也会被确认。</p>
<p>此设置仅适用于在任务执行 <strong>后</strong> 被确认的任务，并且仅当 <a class="reference internal" href="#std-setting-task_acks_late"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_acks_late</span></code></a> 启用时生效。</p>
</div>
<input class="tab-input" id="tab-set--24-input--2" name="tab-set--24" type="radio"><label class="tab-label" for="tab-set--24-input--2">英文</label><div class="tab-content docutils container">
<p>When enabled messages for all tasks will be acknowledged even if they
fail or time out.</p>
<p>Configuring this setting only applies to tasks that are
acknowledged <strong>after</strong> they have been executed and only if
<a class="reference internal" href="#std-setting-task_acks_late"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_acks_late</span></code></a> is enabled.</p>
</div>
</div>
</section>
<section id="task-reject-on-worker-lost">
<span id="std-setting-task_reject_on_worker_lost"></span><h4><code class="docutils literal notranslate"><span class="pre">task_reject_on_worker_lost</span></code><a class="headerlink" href="#task-reject-on-worker-lost" title="Link to this heading">¶</a></h4>
<p>Default: Disabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--25-input--1" name="tab-set--25" type="radio"><label class="tab-label" for="tab-set--25-input--1">中文</label><div class="tab-content docutils container">
<p>即使 <a class="reference internal" href="#std-setting-task_acks_late"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_acks_late</span></code></a> 启用，当执行任务的工作者进程突然退出或收到信号（例如 <code class="xref std std-sig docutils literal notranslate"><span class="pre">KILL</span></code> / <code class="xref std std-sig docutils literal notranslate"><span class="pre">INT</span></code> 等）时，工作者仍会确认任务。</p>
<p>将此设置为 <cite>true</cite> 允许将消息重新排队，从而使任务由同一工作者或其他工作者重新执行。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>启用此项可能会导致消息循环；确保了解你在做什么。</p>
</div>
</div>
<input class="tab-input" id="tab-set--25-input--2" name="tab-set--25" type="radio"><label class="tab-label" for="tab-set--25-input--2">英文</label><div class="tab-content docutils container">
<p>Even if <a class="reference internal" href="#std-setting-task_acks_late"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_acks_late</span></code></a> is enabled, the worker will
acknowledge tasks when the worker process executing them abruptly
exits or is signaled (e.g., <code class="xref std std-sig docutils literal notranslate"><span class="pre">KILL</span></code>/<code class="xref std std-sig docutils literal notranslate"><span class="pre">INT</span></code>, etc).</p>
<p>Setting this to true allows the message to be re-queued instead,
so that the task will execute again by the same worker, or another
worker.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>Enabling this can cause message loops; make sure you know
what you're doing.</p>
</div>
</div>
</div>
</section>
<section id="task-default-rate-limit">
<span id="std-setting-task_default_rate_limit"></span><h4><code class="docutils literal notranslate"><span class="pre">task_default_rate_limit</span></code><a class="headerlink" href="#task-default-rate-limit" title="Link to this heading">¶</a></h4>
<p>Default: No rate limit.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--26-input--1" name="tab-set--26" type="radio"><label class="tab-label" for="tab-set--26-input--1">中文</label><div class="tab-content docutils container">
<p>任务的全局默认速率限制。</p>
<p>该值用于没有自定义速率限制的任务。</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="#std-setting-worker_disable_rate_limits"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_disable_rate_limits</span></code></a> 设置可以禁用所有速率限制。</p>
</div>
</div>
<input class="tab-input" id="tab-set--26-input--2" name="tab-set--26" type="radio"><label class="tab-label" for="tab-set--26-input--2">英文</label><div class="tab-content docutils container">
<p>The global default rate limit for tasks.</p>
<p>This value is used for tasks that doesn't have a custom rate limit</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p>The <a class="reference internal" href="#std-setting-worker_disable_rate_limits"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_disable_rate_limits</span></code></a> setting can
disable all rate limits.</p>
</div>
</div>
</div>
</section>
</section>
<section id="conf-result-backend">
<span id="id10"></span><h3>任务结果后端设置<a class="headerlink" href="#conf-result-backend" title="Link to this heading">¶</a></h3>
<p>Task result backend settings</p>
<section id="result-backend">
<span id="std-setting-result_backend"></span><h4><code class="docutils literal notranslate"><span class="pre">result_backend</span></code><a class="headerlink" href="#result-backend" title="Link to this heading">¶</a></h4>
<p>Default: No result backend enabled by default.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--27-input--1" name="tab-set--27" type="radio"><label class="tab-label" for="tab-set--27-input--1">中文</label><div class="tab-content docutils container">
<p>用于存储任务结果（墓碑）的后端。
可以是以下之一：</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">rpc</span></code></dt><dd><p>通过 AMQP 消息返回结果。
请参见 <a class="reference internal" href="#conf-rpc-result-backend"><span class="std std-ref">RPC 后段设置</span></a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">database</span></code></dt><dd><p>使用 <a class="reference external" href="http://sqlalchemy.org">SQLAlchemy</a> 支持的关系型数据库。
请参见 <a class="reference internal" href="#conf-database-result-backend"><span class="std std-ref">数据库后端设置</span></a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">redis</span></code></dt><dd><p>使用 <a class="reference external" href="https://redis.io">Redis</a> 存储结果。
请参见 <a class="reference internal" href="#conf-redis-result-backend"><span class="std std-ref">Redis 后端设置</span></a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">cache</span></code></dt><dd><p>使用 <a class="reference external" href="http://memcached.org">Memcached</a> 存储结果。
请参见 <a class="reference internal" href="#conf-cache-result-backend"><span class="std std-ref">缓存后端设置</span></a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">mongodb</span></code></dt><dd><p>使用 <a class="reference external" href="http://mongodb.org">MongoDB</a> 存储结果。
请参见 <a class="reference internal" href="#conf-mongodb-result-backend"><span class="std std-ref">MongoDB 后端设置</span></a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">cassandra</span></code></dt><dd><p>使用 <a class="reference external" href="http://cassandra.apache.org/">Cassandra</a> 存储结果。
请参见 <a class="reference internal" href="#conf-cassandra-result-backend"><span class="std std-ref">Cassandra/AstraDB 后端设置</span></a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch</span></code></dt><dd><p>使用 <a class="reference external" href="https://aws.amazon.com/elasticsearch-service/">Elasticsearch</a> 存储结果。
请参见 <a class="reference internal" href="#conf-elasticsearch-result-backend"><span class="std std-ref">Elasticsearch 后端设置</span></a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ironcache</span></code></dt><dd><p>使用 <a class="reference external" href="http://www.iron.io/cache">IronCache</a> 存储结果。
请参见 <a class="reference internal" href="#conf-ironcache-result-backend"><span class="std std-ref">IronCache 后端设置</span></a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">couchbase</span></code></dt><dd><p>使用 <a class="reference external" href="https://www.couchbase.com/">Couchbase</a> 存储结果。
请参见 <a class="reference internal" href="#conf-couchbase-result-backend"><span class="std std-ref">Couchbase 后端设置</span></a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">arangodb</span></code></dt><dd><p>使用 <a class="reference external" href="https://www.arangodb.com/">ArangoDB</a> 存储结果。
请参见 <a class="reference internal" href="#conf-arangodb-result-backend"><span class="std std-ref">ArangoDB 后端设置</span></a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">couchdb</span></code></dt><dd><p>使用 <a class="reference external" href="http://www.couchdb.com/">CouchDB</a> 存储结果。
请参见 <a class="reference internal" href="#conf-couchdb-result-backend"><span class="std std-ref">CouchDB 后端设置</span></a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">cosmosdbsql</span> <span class="pre">(experimental)</span></code></dt><dd><p>使用 <a class="reference external" href="https://azure.microsoft.com/en-us/services/cosmos-db/">CosmosDB</a> PaaS 存储结果。
请参见 <a class="reference internal" href="#conf-cosmosdbsql-result-backend"><span class="std std-ref">CosmosDB 后端设置（实验性）</span></a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filesystem</span></code></dt><dd><p>使用共享目录存储结果。
请参见 <a class="reference internal" href="#conf-filesystem-result-backend"><span class="std std-ref">文件系统后端设置</span></a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">consul</span></code></dt><dd><p>使用 <a class="reference external" href="https://consul.io/">Consul</a> K/V 存储结果。
请参见 <a class="reference internal" href="#conf-consul-result-backend"><span class="std std-ref">Consul 键值存储后端设置</span></a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">azureblockblob</span></code></dt><dd><p>使用 <a class="reference external" href="https://azure.microsoft.com/en-us/services/storage/blobs/">AzureBlockBlob</a> PaaS 存储结果。
请参见 <a class="reference internal" href="#conf-azureblockblob-result-backend"><span class="std std-ref">Azure Block Blob 后端设置</span></a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">s3</span></code></dt><dd><p>使用 <a class="reference external" href="https://aws.amazon.com/s3/">S3</a> 存储结果。
请参见 <a class="reference internal" href="#conf-s3-result-backend"><span class="std std-ref">S3 后端设置</span></a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">gcs</span></code></dt><dd><p>使用 <a class="reference external" href="https://cloud.google.com/storage/">GCS</a> 存储结果。
请参见 <a class="reference internal" href="#conf-gcs-result-backend"><span class="std std-ref">GCS 后端设置</span></a>。</p>
</dd>
</dl>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>虽然 AMQP 结果后端非常高效，但您必须确保只接收一次相同的结果。请参阅 <span class="xref std std-doc">userguide/calling</span>。</p>
</div>
</div>
<input class="tab-input" id="tab-set--27-input--2" name="tab-set--27" type="radio"><label class="tab-label" for="tab-set--27-input--2">英文</label><div class="tab-content docutils container">
<p>The backend used to store task results (tombstones).
Can be one of the following:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">rpc</span></code></dt><dd><p>Send results back as AMQP messages
See <a class="reference internal" href="#conf-rpc-result-backend"><span class="std std-ref">RPC 后段设置</span></a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">database</span></code></dt><dd><p>Use a relational database supported by <a class="reference external" href="http://sqlalchemy.org">SQLAlchemy</a>.
See <a class="reference internal" href="#conf-database-result-backend"><span class="std std-ref">数据库后端设置</span></a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">redis</span></code></dt><dd><p>Use <a class="reference external" href="https://redis.io">Redis</a> to store the results.
See <a class="reference internal" href="#conf-redis-result-backend"><span class="std std-ref">Redis 后端设置</span></a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">cache</span></code></dt><dd><p>Use <a class="reference external" href="http://memcached.org">Memcached</a> to store the results.
See <a class="reference internal" href="#conf-cache-result-backend"><span class="std std-ref">缓存后端设置</span></a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">mongodb</span></code></dt><dd><p>Use <a class="reference external" href="http://mongodb.org">MongoDB</a> to store the results.
See <a class="reference internal" href="#conf-mongodb-result-backend"><span class="std std-ref">MongoDB 后端设置</span></a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">cassandra</span></code></dt><dd><p>Use <a class="reference external" href="http://cassandra.apache.org/">Cassandra</a> to store the results.
See <a class="reference internal" href="#conf-cassandra-result-backend"><span class="std std-ref">Cassandra/AstraDB 后端设置</span></a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">elasticsearch</span></code></dt><dd><p>Use <a class="reference external" href="https://aws.amazon.com/elasticsearch-service/">Elasticsearch</a> to store the results.
See <a class="reference internal" href="#conf-elasticsearch-result-backend"><span class="std std-ref">Elasticsearch 后端设置</span></a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ironcache</span></code></dt><dd><p>Use <a class="reference external" href="http://www.iron.io/cache">IronCache</a> to store the results.
See <a class="reference internal" href="#conf-ironcache-result-backend"><span class="std std-ref">IronCache 后端设置</span></a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">couchbase</span></code></dt><dd><p>Use <a class="reference external" href="https://www.couchbase.com/">Couchbase</a> to store the results.
See <a class="reference internal" href="#conf-couchbase-result-backend"><span class="std std-ref">Couchbase 后端设置</span></a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">arangodb</span></code></dt><dd><p>Use <a class="reference external" href="https://www.arangodb.com/">ArangoDB</a> to store the results.
See <a class="reference internal" href="#conf-arangodb-result-backend"><span class="std std-ref">ArangoDB 后端设置</span></a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">couchdb</span></code></dt><dd><p>Use <a class="reference external" href="http://www.couchdb.com/">CouchDB</a> to store the results.
See <a class="reference internal" href="#conf-couchdb-result-backend"><span class="std std-ref">CouchDB 后端设置</span></a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">cosmosdbsql</span> <span class="pre">(experimental)</span></code></dt><dd><p>Use the <a class="reference external" href="https://azure.microsoft.com/en-us/services/cosmos-db/">CosmosDB</a> PaaS to store the results.
See <a class="reference internal" href="#conf-cosmosdbsql-result-backend"><span class="std std-ref">CosmosDB 后端设置（实验性）</span></a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">filesystem</span></code></dt><dd><p>Use a shared directory to store the results.
See <a class="reference internal" href="#conf-filesystem-result-backend"><span class="std std-ref">文件系统后端设置</span></a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">consul</span></code></dt><dd><p>Use the <a class="reference external" href="https://consul.io/">Consul</a> K/V store to store the results
See <a class="reference internal" href="#conf-consul-result-backend"><span class="std std-ref">Consul 键值存储后端设置</span></a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">azureblockblob</span></code></dt><dd><p>Use the <a class="reference external" href="https://azure.microsoft.com/en-us/services/storage/blobs/">AzureBlockBlob</a> PaaS store to store the results
See <a class="reference internal" href="#conf-azureblockblob-result-backend"><span class="std std-ref">Azure Block Blob 后端设置</span></a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">s3</span></code></dt><dd><p>Use the <a class="reference external" href="https://aws.amazon.com/s3/">S3</a> to store the results
See <a class="reference internal" href="#conf-s3-result-backend"><span class="std std-ref">S3 后端设置</span></a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">gcs</span></code></dt><dd><p>Use the <a class="reference external" href="https://cloud.google.com/storage/">GCS</a> to store the results
See <a class="reference internal" href="#conf-gcs-result-backend"><span class="std std-ref">GCS 后端设置</span></a>.</p>
</dd>
</dl>
</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>While the AMQP result backend is very efficient, you must make sure
you only receive the same result once. See <span class="xref std std-doc">userguide/calling</span>).</p>
</div>
</div>
</div>
</section>
<section id="result-backend-always-retry">
<span id="std-setting-result_backend_always_retry"></span><h4><code class="docutils literal notranslate"><span class="pre">result_backend_always_retry</span></code><a class="headerlink" href="#result-backend-always-retry" title="Link to this heading">¶</a></h4>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--28-input--1" name="tab-set--28" type="radio"><label class="tab-label" for="tab-set--28-input--1">中文</label><div class="tab-content docutils container">
<p>如果启用，后端将在可恢复异常发生时尝试重试，而不是传播异常。
它将在两次重试之间使用指数退避的睡眠时间。</p>
</div>
<input class="tab-input" id="tab-set--28-input--2" name="tab-set--28" type="radio"><label class="tab-label" for="tab-set--28-input--2">英文</label><div class="tab-content docutils container">
<p>If enable, backend will try to retry on the event of recoverable exceptions instead of propagating the exception.
It will use an exponential backoff sleep time between 2 retries.</p>
</div>
</div>
</section>
<section id="result-backend-max-sleep-between-retries-ms">
<span id="std-setting-result_backend_max_sleep_between_retries_ms"></span><h4><code class="docutils literal notranslate"><span class="pre">result_backend_max_sleep_between_retries_ms</span></code><a class="headerlink" href="#result-backend-max-sleep-between-retries-ms" title="Link to this heading">¶</a></h4>
<p>Default: 10000</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--29-input--1" name="tab-set--29" type="radio"><label class="tab-label" for="tab-set--29-input--1">中文</label><div class="tab-content docutils container">
<p>此项指定两次后端操作重试之间的最大睡眠时间。</p>
</div>
<input class="tab-input" id="tab-set--29-input--2" name="tab-set--29" type="radio"><label class="tab-label" for="tab-set--29-input--2">英文</label><div class="tab-content docutils container">
<p>This specifies the maximum sleep time between two backend operation retry.</p>
</div>
</div>
</section>
<section id="result-backend-base-sleep-between-retries-ms">
<span id="std-setting-result_backend_base_sleep_between_retries_ms"></span><h4><code class="docutils literal notranslate"><span class="pre">result_backend_base_sleep_between_retries_ms</span></code><a class="headerlink" href="#result-backend-base-sleep-between-retries-ms" title="Link to this heading">¶</a></h4>
<p>Default: 10</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--30-input--1" name="tab-set--30" type="radio"><label class="tab-label" for="tab-set--30-input--1">中文</label><div class="tab-content docutils container">
<p>此项指定两次后端操作重试之间的基础睡眠时间。</p>
</div>
<input class="tab-input" id="tab-set--30-input--2" name="tab-set--30" type="radio"><label class="tab-label" for="tab-set--30-input--2">英文</label><div class="tab-content docutils container">
<p>This specifies the base amount of sleep time between two backend operation retry.</p>
</div>
</div>
</section>
<section id="result-backend-max-retries">
<span id="std-setting-result_backend_max_retries"></span><h4><code class="docutils literal notranslate"><span class="pre">result_backend_max_retries</span></code><a class="headerlink" href="#result-backend-max-retries" title="Link to this heading">¶</a></h4>
<p>Default: Inf</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--31-input--1" name="tab-set--31" type="radio"><label class="tab-label" for="tab-set--31-input--1">中文</label><div class="tab-content docutils container">
<p>这是在发生可恢复异常时的最大重试次数。</p>
</div>
<input class="tab-input" id="tab-set--31-input--2" name="tab-set--31" type="radio"><label class="tab-label" for="tab-set--31-input--2">英文</label><div class="tab-content docutils container">
<p>This is the maximum of retries in case of recoverable exceptions.</p>
</div>
</div>
</section>
<section id="result-backend-thread-safe">
<span id="std-setting-result_backend_thread_safe"></span><h4><code class="docutils literal notranslate"><span class="pre">result_backend_thread_safe</span></code><a class="headerlink" href="#result-backend-thread-safe" title="Link to this heading">¶</a></h4>
<p>Default: False</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--32-input--1" name="tab-set--32" type="radio"><label class="tab-label" for="tab-set--32-input--1">中文</label><div class="tab-content docutils container">
<p>如果为 True，则后端对象将在多个线程之间共享。
这对于使用共享连接池而不是为每个线程创建一个连接可能很有用。</p>
</div>
<input class="tab-input" id="tab-set--32-input--2" name="tab-set--32" type="radio"><label class="tab-label" for="tab-set--32-input--2">英文</label><div class="tab-content docutils container">
<p>If True, then the backend object is shared across threads.
This may be useful for using a shared connection pool instead of creating
a connection for every thread.</p>
</div>
</div>
</section>
<section id="result-backend-transport-options">
<span id="std-setting-result_backend_transport_options"></span><h4><code class="docutils literal notranslate"><span class="pre">result_backend_transport_options</span></code><a class="headerlink" href="#result-backend-transport-options" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code> (empty mapping).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--33-input--1" name="tab-set--33" type="radio"><label class="tab-label" for="tab-set--33-input--1">中文</label><div class="tab-content docutils container">
<p>一个传递给底层传输的附加选项字典。</p>
<p>请参阅你的传输用户手册以了解支持的选项（如果有的话）。</p>
<p>例如设置可见性超时（Redis 和 SQS 传输支持）：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend_transport_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;visibility_timeout&#39;</span><span class="p">:</span> <span class="mi">18000</span><span class="p">}</span>  <span class="c1"># 5小时</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--33-input--2" name="tab-set--33" type="radio"><label class="tab-label" for="tab-set--33-input--2">英文</label><div class="tab-content docutils container">
<p>A dict of additional options passed to the underlying transport.</p>
<p>See your transport user manual for supported options (if any).</p>
<p>Example setting the visibility timeout (supported by Redis and SQS
transports):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend_transport_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;visibility_timeout&#39;</span><span class="p">:</span> <span class="mi">18000</span><span class="p">}</span>  <span class="c1"># 5 hours</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="result-serializer">
<span id="std-setting-result_serializer"></span><h4><code class="docutils literal notranslate"><span class="pre">result_serializer</span></code><a class="headerlink" href="#result-serializer" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">json</span></code> since 4.0 (earlier: pickle).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--34-input--1" name="tab-set--34" type="radio"><label class="tab-label" for="tab-set--34-input--1">中文</label><div class="tab-content docutils container">
<p>结果序列化格式。</p>
<p>请参阅 <a class="reference internal" href="calling.html#calling-serializers"><span class="std std-ref">序列化器</span></a> 获取关于支持的序列化格式的更多信息。</p>
</div>
<input class="tab-input" id="tab-set--34-input--2" name="tab-set--34" type="radio"><label class="tab-label" for="tab-set--34-input--2">英文</label><div class="tab-content docutils container">
<p>Result serialization format.</p>
<p>See <a class="reference internal" href="calling.html#calling-serializers"><span class="std std-ref">序列化器</span></a> for information about supported
serialization formats.</p>
</div>
</div>
</section>
<section id="result-compression">
<span id="std-setting-result_compression"></span><h4><code class="docutils literal notranslate"><span class="pre">result_compression</span></code><a class="headerlink" href="#result-compression" title="Link to this heading">¶</a></h4>
<p>Default: No compression.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--35-input--1" name="tab-set--35" type="radio"><label class="tab-label" for="tab-set--35-input--1">中文</label><div class="tab-content docutils container">
<p>用于任务结果的可选压缩方法。
支持与 <a class="reference internal" href="#std-setting-task_compression"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_compression</span></code></a> 设置相同的选项。</p>
</div>
<input class="tab-input" id="tab-set--35-input--2" name="tab-set--35" type="radio"><label class="tab-label" for="tab-set--35-input--2">英文</label><div class="tab-content docutils container">
<p>Optional compression method used for task results.
Supports the same options as the <a class="reference internal" href="#std-setting-task_compression"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_compression</span></code></a> setting.</p>
</div>
</div>
</section>
<section id="result-extended">
<span id="std-setting-result_extended"></span><h4><code class="docutils literal notranslate"><span class="pre">result_extended</span></code><a class="headerlink" href="#result-extended" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">False</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--36-input--1" name="tab-set--36" type="radio"><label class="tab-label" for="tab-set--36-input--1">中文</label><div class="tab-content docutils container">
<p>启用后，可以将扩展的任务结果属性（名称、参数、关键字参数、工作者、重试次数、队列、投递信息）写入后端。</p>
</div>
<input class="tab-input" id="tab-set--36-input--2" name="tab-set--36" type="radio"><label class="tab-label" for="tab-set--36-input--2">英文</label><div class="tab-content docutils container">
<p>Enables extended task result attributes (name, args, kwargs, worker,
retries, queue, delivery_info) to be written to backend.</p>
</div>
</div>
</section>
<section id="result-expires">
<span id="std-setting-result_expires"></span><h4><code class="docutils literal notranslate"><span class="pre">result_expires</span></code><a class="headerlink" href="#result-expires" title="Link to this heading">¶</a></h4>
<p>Default: Expire after 1 day.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--37-input--1" name="tab-set--37" type="radio"><label class="tab-label" for="tab-set--37-input--1">中文</label><div class="tab-content docutils container">
<p>存储的任务墓碑将在此时间（以秒为单位，或 <a class="reference external" href="https://docs.python.org/dev/library/datetime.html#datetime.timedelta" title="（在 Python v3.15）"><code class="xref py py-class docutils literal notranslate"><span class="pre">timedelta</span></code></a> 对象）后被删除。</p>
<p>内建的定期任务将在此时间后删除结果（<code class="docutils literal notranslate"><span class="pre">celery.backend_cleanup</span></code>），前提是启用了 <code class="docutils literal notranslate"><span class="pre">celery</span> <span class="pre">beat</span></code>。该任务每天早上4点运行。</p>
<p>如果设置为 <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code> 或 0，表示结果永远不会过期（具体取决于后端的规范）。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>目前，这仅适用于 AMQP、数据库、缓存、Couchbase 和 Redis 后端。</p>
<p>当使用数据库后端时，必须运行 <code class="docutils literal notranslate"><span class="pre">celery</span> <span class="pre">beat</span></code>，以便结果能够过期。</p>
</div>
</div>
<input class="tab-input" id="tab-set--37-input--2" name="tab-set--37" type="radio"><label class="tab-label" for="tab-set--37-input--2">英文</label><div class="tab-content docutils container">
<p>Time (in seconds, or a <a class="reference external" href="https://docs.python.org/dev/library/datetime.html#datetime.timedelta" title="（在 Python v3.15）"><code class="xref py py-class docutils literal notranslate"><span class="pre">timedelta</span></code></a> object) for when after
stored task tombstones will be deleted.</p>
<p>A built-in periodic task will delete the results after this time
(<code class="docutils literal notranslate"><span class="pre">celery.backend_cleanup</span></code>), assuming that <code class="docutils literal notranslate"><span class="pre">celery</span> <span class="pre">beat</span></code> is
enabled. The task runs daily at 4am.</p>
<p>A value of <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code> or 0 means results will never expire (depending
on backend specifications).</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>For the moment this only works with the AMQP, database, cache, Couchbase,
and Redis backends.</p>
<p>When using the database backend, <code class="docutils literal notranslate"><span class="pre">celery</span> <span class="pre">beat</span></code> must be
running for the results to be expired.</p>
</div>
</div>
</div>
</section>
<section id="result-cache-max">
<span id="std-setting-result_cache_max"></span><h4><code class="docutils literal notranslate"><span class="pre">result_cache_max</span></code><a class="headerlink" href="#result-cache-max" title="Link to this heading">¶</a></h4>
<p>Default: Disabled by default.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--38-input--1" name="tab-set--38" type="radio"><label class="tab-label" for="tab-set--38-input--1">中文</label><div class="tab-content docutils container">
<p>启用客户端结果缓存。</p>
<p>这对于旧版已弃用的 'amqp' 后端非常有用，因为当一个结果实例被消费后，结果将不再可用。</p>
<p>这是在旧结果被逐出之前要缓存的结果总数。
值为 0 或 None 表示没有限制，值为 <code class="xref py py-const docutils literal notranslate"><span class="pre">-1</span></code> 将禁用缓存。</p>
<p>默认情况下禁用。</p>
</div>
<input class="tab-input" id="tab-set--38-input--2" name="tab-set--38" type="radio"><label class="tab-label" for="tab-set--38-input--2">英文</label><div class="tab-content docutils container">
<p>Enables client caching of results.</p>
<p>This can be useful for the old deprecated
'amqp' backend where the result is unavailable as soon as one result instance
consumes it.</p>
<p>This is the total number of results to cache before older results are evicted.
A value of 0 or None means no limit, and a value of <code class="xref py py-const docutils literal notranslate"><span class="pre">-1</span></code>
will disable the cache.</p>
<p>Disabled by default.</p>
</div>
</div>
</section>
<section id="result-chord-join-timeout">
<span id="std-setting-result_chord_join_timeout"></span><h4><code class="docutils literal notranslate"><span class="pre">result_chord_join_timeout</span></code><a class="headerlink" href="#result-chord-join-timeout" title="Link to this heading">¶</a></h4>
<p>Default: 3.0.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--39-input--1" name="tab-set--39" type="radio"><label class="tab-label" for="tab-set--39-input--1">中文</label><div class="tab-content docutils container">
<p>在加入一个组的结果时的超时时间（秒，int/float）。</p>
</div>
<input class="tab-input" id="tab-set--39-input--2" name="tab-set--39" type="radio"><label class="tab-label" for="tab-set--39-input--2">英文</label><div class="tab-content docutils container">
<p>The timeout in seconds (int/float) when joining a group's results within a chord.</p>
</div>
</div>
</section>
<section id="result-chord-retry-interval">
<span id="std-setting-result_chord_retry_interval"></span><h4><code class="docutils literal notranslate"><span class="pre">result_chord_retry_interval</span></code><a class="headerlink" href="#result-chord-retry-interval" title="Link to this heading">¶</a></h4>
<p>Default: 1.0.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--40-input--1" name="tab-set--40" type="radio"><label class="tab-label" for="tab-set--40-input--1">中文</label><div class="tab-content docutils container">
<p>重试和弦任务的默认间隔。</p>
</div>
<input class="tab-input" id="tab-set--40-input--2" name="tab-set--40" type="radio"><label class="tab-label" for="tab-set--40-input--2">英文</label><div class="tab-content docutils container">
<p>Default interval for retrying chord tasks.</p>
</div>
</div>
</section>
<section id="override-backends">
<span id="std-setting-override_backends"></span><h4><code class="docutils literal notranslate"><span class="pre">override_backends</span></code><a class="headerlink" href="#override-backends" title="Link to this heading">¶</a></h4>
<p>Default: Disabled by default.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--41-input--1" name="tab-set--41" type="radio"><label class="tab-label" for="tab-set--41-input--1">中文</label><div class="tab-content docutils container">
<p>实现后端的类的路径。</p>
<p>允许覆盖后端实现。
如果你需要存储执行任务的附加元数据、覆盖重试策略等，这可能会很有用。</p>
<p>示例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">override_backends</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;db&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_module.backend.class&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--41-input--2" name="tab-set--41" type="radio"><label class="tab-label" for="tab-set--41-input--2">英文</label><div class="tab-content docutils container">
<p>Path to class that implements backend.</p>
<p>Allows to override backend implementation.
This can be useful if you need to store additional metadata about executed tasks,
override retry policies, etc.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">override_backends</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;db&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_module.backend.class&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="conf-database-result-backend">
<span id="id11"></span><h3>数据库后端设置<a class="headerlink" href="#conf-database-result-backend" title="Link to this heading">¶</a></h3>
<p>Database backend settings</p>
<section id="url">
<h4>数据库 URL 示例<a class="headerlink" href="#url" title="Link to this heading">¶</a></h4>
<p>Database URL Examples</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--42-input--1" name="tab-set--42" type="radio"><label class="tab-label" for="tab-set--42-input--1">中文</label><div class="tab-content docutils container">
<p>要使用数据库后端，必须使用连接 URL 配置 <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> 设置，并使用 <code class="docutils literal notranslate"><span class="pre">db+</span></code> 前缀：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;db+scheme://user:password@host:port/dbname&#39;</span>
</pre></div>
</div>
<p>示例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># sqlite（文件名）</span>
<span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;db+sqlite:///results.sqlite&#39;</span>

<span class="c1"># mysql</span>
<span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;db+mysql://scott:tiger@localhost/foo&#39;</span>

<span class="c1"># postgresql</span>
<span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;db+postgresql://scott:tiger@localhost/mydatabase&#39;</span>

<span class="c1"># oracle</span>
<span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;db+oracle://scott:tiger@127.0.0.1:1521/sidname&#39;</span>
</pre></div>
</div>
<p>请参阅 <a class="reference external" href="https://hellowac.github.io/sqlalchemy-zh-cn/core/engines.html#supported-dbapis">支持的数据库</a> 获取支持的数据库表格，
并参阅 <a class="reference external" href="https://hellowac.github.io/sqlalchemy-zh-cn/core/engines.html#url">连接字符串</a> 获取有关连接字符串的更多信息（即 URI 中 <code class="docutils literal notranslate"><span class="pre">db+</span></code> 前缀之后的部分）。</p>
</div>
<input class="tab-input" id="tab-set--42-input--2" name="tab-set--42" type="radio"><label class="tab-label" for="tab-set--42-input--2">英文</label><div class="tab-content docutils container">
<p>To use the database backend you have to configure the
<a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> setting with a connection URL and the <code class="docutils literal notranslate"><span class="pre">db+</span></code>
prefix:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;db+scheme://user:password@host:port/dbname&#39;</span>
</pre></div>
</div>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># sqlite (filename)</span>
<span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;db+sqlite:///results.sqlite&#39;</span>

<span class="c1"># mysql</span>
<span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;db+mysql://scott:tiger@localhost/foo&#39;</span>

<span class="c1"># postgresql</span>
<span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;db+postgresql://scott:tiger@localhost/mydatabase&#39;</span>

<span class="c1"># oracle</span>
<span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;db+oracle://scott:tiger@127.0.0.1:1521/sidname&#39;</span>
</pre></div>
</div>
<p>Please see <a class="reference external" href="http://www.sqlalchemy.org/docs/core/engines.html#supported-databases">Supported Databases</a> for a table of supported databases,
and <a class="reference external" href="http://www.sqlalchemy.org/docs/core/engines.html#database-urls">Connection String</a> for more information about connection
strings (this is the part of the URI that comes after the <code class="docutils literal notranslate"><span class="pre">db+</span></code> prefix).</p>
</div>
</div>
</section>
<section id="database-create-tables-at-setup">
<span id="std-setting-database_create_tables_at_setup"></span><h4><code class="docutils literal notranslate"><span class="pre">database_create_tables_at_setup</span></code><a class="headerlink" href="#database-create-tables-at-setup" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.5.0.</span></p>
</div>
<p>Default: True by default.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--43-input--1" name="tab-set--43" type="radio"><label class="tab-label" for="tab-set--43-input--1">中文</label><div class="tab-content docutils container">
<ul class="simple">
<li><p>如果为 <cite>True</cite>，Celery 将在设置时创建数据库中的表。</p></li>
<li><p>如果为 <cite>False</cite>，Celery 将延迟创建表，即等待第一个任务执行后再创建表。</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>在 Celery 5.5 之前，表是延迟创建的，即相当于将 <cite>database_create_tables_at_setup</cite> 设置为 False。</p>
</div>
</div>
<input class="tab-input" id="tab-set--43-input--2" name="tab-set--43" type="radio"><label class="tab-label" for="tab-set--43-input--2">英文</label><div class="tab-content docutils container">
<ul class="simple">
<li><p>If <cite>True</cite>, Celery will create the tables in the database during setup.</p></li>
<li><p>If <cite>False</cite>, Celery will create the tables lazily, i.e. wait for the first task to be executed before creating the tables.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Before celery 5.5, the tables were created lazily i.e. it was equivalent to
<cite>database_create_tables_at_setup</cite> set to False.</p>
</div>
</div>
</div>
</section>
<section id="database-engine-options">
<span id="std-setting-database_engine_options"></span><h4><code class="docutils literal notranslate"><span class="pre">database_engine_options</span></code><a class="headerlink" href="#database-engine-options" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code> (empty mapping).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--44-input--1" name="tab-set--44" type="radio"><label class="tab-label" for="tab-set--44-input--1">中文</label><div class="tab-content docutils container">
<p>要指定额外的 SQLAlchemy 数据库引擎选项，可以使用 <a class="reference internal" href="#std-setting-database_engine_options"><code class="xref std std-setting docutils literal notranslate"><span class="pre">database_engine_options</span></code></a> 设置:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># echo 启用 SQLAlchemy 的详细日志记录。</span>
<span class="n">app</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">database_engine_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;echo&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--44-input--2" name="tab-set--44" type="radio"><label class="tab-label" for="tab-set--44-input--2">英文</label><div class="tab-content docutils container">
<p>To specify additional SQLAlchemy database engine options you can use
the <a class="reference internal" href="#std-setting-database_engine_options"><code class="xref std std-setting docutils literal notranslate"><span class="pre">database_engine_options</span></code></a> setting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># echo enables verbose logging from SQLAlchemy.</span>
<span class="n">app</span><span class="o">.</span><span class="n">conf</span><span class="o">.</span><span class="n">database_engine_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;echo&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="database-short-lived-sessions">
<span id="std-setting-database_short_lived_sessions"></span><h4><code class="docutils literal notranslate"><span class="pre">database_short_lived_sessions</span></code><a class="headerlink" href="#database-short-lived-sessions" title="Link to this heading">¶</a></h4>
<p>Default: Disabled by default.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--45-input--1" name="tab-set--45" type="radio"><label class="tab-label" for="tab-set--45-input--1">中文</label><div class="tab-content docutils container">
<p>短生命周期会话默认情况下是禁用的。如果启用，它们可能会大幅降低性能，尤其是在处理大量任务的系统上。这个选项在低流量的 worker 上非常有用，特别是当因数据库连接由于不活跃而变得过时而导致错误时。例如，间歇性的错误如 <cite>(OperationalError) (2006, 'MySQL server has gone away')</cite> 可以通过启用短生命周期会话来修复。此选项仅影响数据库后端。</p>
</div>
<input class="tab-input" id="tab-set--45-input--2" name="tab-set--45" type="radio"><label class="tab-label" for="tab-set--45-input--2">英文</label><div class="tab-content docutils container">
<p>Short lived sessions are disabled by default. If enabled they can drastically reduce
performance, especially on systems processing lots of tasks. This option is useful
on low-traffic workers that experience errors as a result of cached database connections
going stale through inactivity. For example, intermittent errors like
<cite>(OperationalError) (2006, 'MySQL server has gone away')</cite> can be fixed by enabling
short lived sessions. This option only affects the database backend.</p>
</div>
</div>
</section>
<section id="database-table-schemas">
<span id="std-setting-database_table_schemas"></span><h4><code class="docutils literal notranslate"><span class="pre">database_table_schemas</span></code><a class="headerlink" href="#database-table-schemas" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code> (empty mapping).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--46-input--1" name="tab-set--46" type="radio"><label class="tab-label" for="tab-set--46-input--1">中文</label><div class="tab-content docutils container">
<p>当 SQLAlchemy 配置为结果后端时，Celery 会自动创建两个表来存储任务的结果元数据。此设置允许您自定义表的模式：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 为数据库结果后端使用自定义模式。</span>
<span class="n">database_table_schemas</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;task&#39;</span><span class="p">:</span> <span class="s1">&#39;celery&#39;</span><span class="p">,</span>
    <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="s1">&#39;celery&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--46-input--2" name="tab-set--46" type="radio"><label class="tab-label" for="tab-set--46-input--2">英文</label><div class="tab-content docutils container">
<p>When SQLAlchemy is configured as the result backend, Celery automatically
creates two tables to store result meta-data for tasks. This setting allows
you to customize the schema of the tables:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># use custom schema for the database result backend.</span>
<span class="n">database_table_schemas</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;task&#39;</span><span class="p">:</span> <span class="s1">&#39;celery&#39;</span><span class="p">,</span>
    <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="s1">&#39;celery&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="database-table-names">
<span id="std-setting-database_table_names"></span><h4><code class="docutils literal notranslate"><span class="pre">database_table_names</span></code><a class="headerlink" href="#database-table-names" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code> (empty mapping).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--47-input--1" name="tab-set--47" type="radio"><label class="tab-label" for="tab-set--47-input--1">中文</label><div class="tab-content docutils container">
<p>当 SQLAlchemy 配置为结果后端时，Celery 会自动创建两个表来存储任务的结果元数据。此设置允许您自定义表名：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 为数据库结果后端使用自定义表名。</span>
<span class="n">database_table_names</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;task&#39;</span><span class="p">:</span> <span class="s1">&#39;myapp_taskmeta&#39;</span><span class="p">,</span>
    <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="s1">&#39;myapp_groupmeta&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--47-input--2" name="tab-set--47" type="radio"><label class="tab-label" for="tab-set--47-input--2">英文</label><div class="tab-content docutils container">
<p>When SQLAlchemy is configured as the result backend, Celery automatically
creates two tables to store result meta-data for tasks. This setting allows
you to customize the table names:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># use custom table names for the database result backend.</span>
<span class="n">database_table_names</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;task&#39;</span><span class="p">:</span> <span class="s1">&#39;myapp_taskmeta&#39;</span><span class="p">,</span>
    <span class="s1">&#39;group&#39;</span><span class="p">:</span> <span class="s1">&#39;myapp_groupmeta&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="rpc">
<span id="conf-rpc-result-backend"></span><h3>RPC 后段设置<a class="headerlink" href="#rpc" title="Link to this heading">¶</a></h3>
<p>RPC backend settings</p>
<section id="result-persistent">
<span id="std-setting-result_persistent"></span><h4><code class="docutils literal notranslate"><span class="pre">result_persistent</span></code><a class="headerlink" href="#result-persistent" title="Link to this heading">¶</a></h4>
<p>Default: Disabled by default (transient messages).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--48-input--1" name="tab-set--48" type="radio"><label class="tab-label" for="tab-set--48-input--1">中文</label><div class="tab-content docutils container">
<p>如果设置为 <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>，结果消息将是持久的。这意味着消息在代理重启后不会丢失。</p>
</div>
<input class="tab-input" id="tab-set--48-input--2" name="tab-set--48" type="radio"><label class="tab-label" for="tab-set--48-input--2">英文</label><div class="tab-content docutils container">
<p>If set to <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>, result messages will be persistent. This means the
messages won't be lost after a broker restart.</p>
</div>
</div>
</section>
<section id="id14">
<h4>示例配置<a class="headerlink" href="#id14" title="Link to this heading">¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;rpc://&#39;</span>
<span class="n">result_persistent</span> <span class="o">=</span> <span class="kc">False</span>
</pre></div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--49-input--1" name="tab-set--49" type="radio"><label class="tab-label" for="tab-set--49-input--1">中文</label><div class="tab-content docutils container">
<p><strong>请注意</strong>：使用此后端可能会触发 <code class="docutils literal notranslate"><span class="pre">celery.backends.rpc.BacklogLimitExceeded</span></code> 错误，如果任务墓碑太 <em>旧</em> 。</p>
<p>例如：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">debug_task</span><span class="o">.</span><span class="n">delay</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>  <span class="c1"># 这将引发 celery.backends.rpc.BacklogLimitExceeded</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--49-input--2" name="tab-set--49" type="radio"><label class="tab-label" for="tab-set--49-input--2">英文</label><div class="tab-content docutils container">
<p><strong>Please note</strong>: using this backend could trigger the raise of <code class="docutils literal notranslate"><span class="pre">celery.backends.rpc.BacklogLimitExceeded</span></code> if the task tombstone is too <em>old</em>.</p>
<p>E.g.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">debug_task</span><span class="o">.</span><span class="n">delay</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>  <span class="c1"># this would raise celery.backends.rpc.BacklogLimitExceeded</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="conf-cache-result-backend">
<span id="id15"></span><h3>缓存后端设置<a class="headerlink" href="#conf-cache-result-backend" title="Link to this heading">¶</a></h3>
<p>Cache backend settings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--50-input--1" name="tab-set--50" type="radio"><label class="tab-label" for="tab-set--50-input--1">中文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>缓存后端支持 <a class="extlink-pypi reference external" href="https://pypi.org/project/pylibmc/">https://pypi.org/project/pylibmc/</a> 和 <a class="extlink-pypi reference external" href="https://pypi.org/project/python-memcached/">https://pypi.org/project/python-memcached/</a> 库。如果未安装 <a class="extlink-pypi reference external" href="https://pypi.org/project/pylibmc/">https://pypi.org/project/pylibmc/</a>，则使用后者。</p>
</div>
<p>使用单个 Memcached 服务器：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;cache+memcached://127.0.0.1:11211/&#39;</span>
</pre></div>
</div>
<p>使用多个 Memcached 服务器：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    cache+memcached://172.19.26.240:11211;172.19.26.242:11211/</span>
<span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
<p>&quot;memory&quot; 后端仅将缓存存储在内存中：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;cache&#39;</span>
<span class="n">cache_backend</span> <span class="o">=</span> <span class="s1">&#39;memory&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--50-input--2" name="tab-set--50" type="radio"><label class="tab-label" for="tab-set--50-input--2">英文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The cache backend supports the <a class="extlink-pypi reference external" href="https://pypi.org/project/pylibmc/">https://pypi.org/project/pylibmc/</a> and <a class="extlink-pypi reference external" href="https://pypi.org/project/python-memcached/">https://pypi.org/project/python-memcached/</a>
libraries. The latter is used only if <a class="extlink-pypi reference external" href="https://pypi.org/project/pylibmc/">https://pypi.org/project/pylibmc/</a> isn't installed.</p>
</div>
<p>Using a single Memcached server:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;cache+memcached://127.0.0.1:11211/&#39;</span>
</pre></div>
</div>
<p>Using multiple Memcached servers:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    cache+memcached://172.19.26.240:11211;172.19.26.242:11211/</span>
<span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
<p>The &quot;memory&quot; backend stores the cache in memory only:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;cache&#39;</span>
<span class="n">cache_backend</span> <span class="o">=</span> <span class="s1">&#39;memory&#39;</span>
</pre></div>
</div>
</div>
</div>
<section id="cache-backend-options">
<span id="std-setting-cache_backend_options"></span><h4><code class="docutils literal notranslate"><span class="pre">cache_backend_options</span></code><a class="headerlink" href="#cache-backend-options" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code> (empty mapping).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--51-input--1" name="tab-set--51" type="radio"><label class="tab-label" for="tab-set--51-input--1">中文</label><div class="tab-content docutils container">
<p>您可以使用 <a class="reference internal" href="#std-setting-cache_backend_options"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cache_backend_options</span></code></a> 设置来配置 <a class="extlink-pypi reference external" href="https://pypi.org/project/pylibmc/">https://pypi.org/project/pylibmc/</a> 选项：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cache_backend_options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;binary&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;behaviors&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;tcp_nodelay&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--51-input--2" name="tab-set--51" type="radio"><label class="tab-label" for="tab-set--51-input--2">英文</label><div class="tab-content docutils container">
<p>You can set <a class="extlink-pypi reference external" href="https://pypi.org/project/pylibmc/">https://pypi.org/project/pylibmc/</a> options using the <a class="reference internal" href="#std-setting-cache_backend_options"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cache_backend_options</span></code></a>
setting:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cache_backend_options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;binary&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;behaviors&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;tcp_nodelay&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="cache-backend">
<span id="std-setting-cache_backend"></span><h4><code class="docutils literal notranslate"><span class="pre">cache_backend</span></code><a class="headerlink" href="#cache-backend" title="Link to this heading">¶</a></h4>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--52-input--1" name="tab-set--52" type="radio"><label class="tab-label" for="tab-set--52-input--1">中文</label><div class="tab-content docutils container">
<p>此设置不再用于 Celery 的内建后端，因为现在可以直接在 <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> 设置中指定缓存后端。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p><a class="reference internal" href="../django/first-steps-with-django.html#django-celery-results"><span class="std std-ref">django-celery-results - 使用 Django ORM/Cache 作为结果后端</span></a> 库使用 <code class="docutils literal notranslate"><span class="pre">cache_backend</span></code> 来选择 Django 缓存。</p>
</div>
</div>
<input class="tab-input" id="tab-set--52-input--2" name="tab-set--52" type="radio"><label class="tab-label" for="tab-set--52-input--2">英文</label><div class="tab-content docutils container">
<p>This setting is no longer used in celery's builtin backends as it's now possible to specify
the cache backend directly in the <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> setting.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The <a class="reference internal" href="../django/first-steps-with-django.html#django-celery-results"><span class="std std-ref">django-celery-results - 使用 Django ORM/Cache 作为结果后端</span></a> library uses <code class="docutils literal notranslate"><span class="pre">cache_backend</span></code> for choosing django caches.</p>
</div>
</div>
</div>
</section>
</section>
<section id="conf-mongodb-result-backend">
<span id="id16"></span><h3>MongoDB 后端设置<a class="headerlink" href="#conf-mongodb-result-backend" title="Link to this heading">¶</a></h3>
<p>MongoDB backend settings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--53-input--1" name="tab-set--53" type="radio"><label class="tab-label" for="tab-set--53-input--1">中文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>MongoDB 后端需要 <code class="xref py py-mod docutils literal notranslate"><span class="pre">pymongo</span></code> 库：
<a class="reference external" href="http://github.com/mongodb/mongo-python-driver/tree/master">http://github.com/mongodb/mongo-python-driver/tree/master</a></p>
</div>
</div>
<input class="tab-input" id="tab-set--53-input--2" name="tab-set--53" type="radio"><label class="tab-label" for="tab-set--53-input--2">英文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The MongoDB backend requires the <code class="xref py py-mod docutils literal notranslate"><span class="pre">pymongo</span></code> library:
<a class="reference external" href="http://github.com/mongodb/mongo-python-driver/tree/master">http://github.com/mongodb/mongo-python-driver/tree/master</a></p>
</div>
</div>
</div>
<section id="mongodb-backend-settings">
<span id="std-setting-mongodb_backend_settings"></span><h4>mongodb_backend_settings<a class="headerlink" href="#mongodb-backend-settings" title="Link to this heading">¶</a></h4>
<p>mongodb_backend_settings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--54-input--1" name="tab-set--54" type="radio"><label class="tab-label" for="tab-set--54-input--1">中文</label><div class="tab-content docutils container">
<p>这是一个支持以下键的字典：</p>
<ul class="simple">
<li><dl class="simple">
<dt>database</dt><dd><p>要连接的数据库名称。默认值为 <code class="docutils literal notranslate"><span class="pre">celery</span></code>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>taskmeta_collection</dt><dd><p>存储任务元数据的集合名称。默认值为 <code class="docutils literal notranslate"><span class="pre">celery_taskmeta</span></code>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>max_pool_size</dt><dd><p>传递给 PyMongo 的 Connection 或 MongoClient 构造函数的 max_pool_size。它是一次保持与 MongoDB 开放的最大 TCP 连接数。如果打开的连接数超过 max_pool_size，套接字将在释放时关闭。默认值为 10。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>options</dt><dd><p>传递给 MongoDB 连接构造函数的附加关键字参数。请参阅 <code class="xref py py-mod docutils literal notranslate"><span class="pre">pymongo</span></code> 文档以查看支持的参数列表。</p>
</dd>
</dl>
</li>
</ul>
</div>
<input class="tab-input" id="tab-set--54-input--2" name="tab-set--54" type="radio"><label class="tab-label" for="tab-set--54-input--2">英文</label><div class="tab-content docutils container">
<p>This is a dict supporting the following keys:</p>
<ul class="simple">
<li><dl class="simple">
<dt>database</dt><dd><p>The database name to connect to. Defaults to <code class="docutils literal notranslate"><span class="pre">celery</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>taskmeta_collection</dt><dd><p>The collection name to store task meta data.
Defaults to <code class="docutils literal notranslate"><span class="pre">celery_taskmeta</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>max_pool_size</dt><dd><p>Passed as max_pool_size to PyMongo's Connection or MongoClient
constructor. It is the maximum number of TCP connections to keep
open to MongoDB at a given time. If there are more open connections
than max_pool_size, sockets will be closed when they are released.
Defaults to 10.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>options</dt><dd><p>Additional keyword arguments to pass to the mongodb connection
constructor.  See the <code class="xref py py-mod docutils literal notranslate"><span class="pre">pymongo</span></code> docs to see a list of arguments
supported.</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
</section>
<section id="example-mongodb-result-config">
<span id="id17"></span><h4>示例配置<a class="headerlink" href="#example-mongodb-result-config" title="Link to this heading">¶</a></h4>
<p>Example configuration</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;mongodb://localhost:27017/&#39;</span>
<span class="n">mongodb_backend_settings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;database&#39;</span><span class="p">:</span> <span class="s1">&#39;mydb&#39;</span><span class="p">,</span>
    <span class="s1">&#39;taskmeta_collection&#39;</span><span class="p">:</span> <span class="s1">&#39;my_taskmeta_collection&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="conf-redis-result-backend">
<span id="id18"></span><h3>Redis 后端设置<a class="headerlink" href="#conf-redis-result-backend" title="Link to this heading">¶</a></h3>
<p>Redis backend settings</p>
<section id="id19">
<h4>配置后端 URL<a class="headerlink" href="#id19" title="Link to this heading">¶</a></h4>
<p>Configuring the backend URL</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--55-input--1" name="tab-set--55" type="radio"><label class="tab-label" for="tab-set--55-input--1">中文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Redis 后端需要 <a class="extlink-pypi reference external" href="https://pypi.org/project/redis/">https://pypi.org/project/redis/</a> 库。</p>
<p>要安装此包，请使用 <strong class="command">pip</strong>：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>redis<span class="o">]</span>
</pre></div>
</div>
<p>请参见 <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a> 了解有关组合多个扩展要求的信息。</p>
</div>
<p>此后端要求将 <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a>
设置为 Redis 或 <a class="reference external" href="https://www.iana.org/assignments/uri-schemes/prov/rediss">Redis over TLS</a> URL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;redis://username:password@host:port/db&#39;</span>
</pre></div>
</div>
<p>例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;redis://localhost/0&#39;</span>
</pre></div>
</div>
<p>与此相同:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;redis://&#39;</span>
</pre></div>
</div>
<p>使用 <code class="docutils literal notranslate"><span class="pre">rediss://</span></code> 协议通过 TLS 连接 Redis:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;rediss://username:password@host:port/db?ssl_cert_reqs=required&#39;</span>
</pre></div>
</div>
<p>请注意，<code class="docutils literal notranslate"><span class="pre">ssl_cert_reqs</span></code> 字符串应为 <code class="docutils literal notranslate"><span class="pre">required</span></code>，
<code class="docutils literal notranslate"><span class="pre">optional</span></code> 或 <code class="docutils literal notranslate"><span class="pre">none</span></code> 之一（尽管为了与旧版本的 Celery 向后兼容，该字符串
也可以是 <code class="docutils literal notranslate"><span class="pre">CERT_REQUIRED</span></code>、<code class="docutils literal notranslate"><span class="pre">CERT_OPTIONAL</span></code>、<code class="docutils literal notranslate"><span class="pre">CERT_NONE</span></code>，
但这些值仅适用于 Celery，而不适用于 Redis 本身）。</p>
<p>如果需要使用 Unix 套接字连接，URL 格式应为:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;socket:///path/to/redis.sock&#39;</span>
</pre></div>
</div>
<p>URL 的各个字段定义如下：</p>
<ol class="arabic">
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">username</span></code></dt><dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 5.1.0.</span></p>
</div>
<p>用于连接数据库的用户名。</p>
<p>请注意，这仅在 Redis&gt;=6.0 且已安装 py-redis&gt;=3.4.0 时支持。</p>
<p>如果您使用的是较旧的数据库版本或较旧的客户端版本
可以省略用户名:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;redis://:password@host:port/db&#39;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">password</span></code></dt><dd><p>用于连接数据库的密码。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">host</span></code></dt><dd><p>Redis 服务器的主机名或 IP 地址（例如，<cite>localhost</cite>）。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">port</span></code></dt><dd><p>Redis 服务器的端口。默认值为 6379。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">db</span></code></dt><dd><p>要使用的数据库编号。默认值为 0。
数据库编号可以包括可选的前导斜杠。</p>
</dd>
</dl>
</li>
</ol>
<p>使用 TLS 连接时（协议为 <code class="docutils literal notranslate"><span class="pre">rediss://</span></code>），可以将 <a class="reference internal" href="#std-setting-broker_use_ssl"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_use_ssl</span></code></a> 中的所有值作为查询参数传递。证书路径必须进行 URL 编码，且 <code class="docutils literal notranslate"><span class="pre">ssl_cert_reqs</span></code> 是必需的。示例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;rediss://:password@host:port/db?</span><span class="se">\</span>
<span class="s1">    ssl_cert_reqs=required</span><span class="se">\</span>
<span class="s1">    &amp;ssl_ca_certs=</span><span class="si">%2F</span><span class="s1">var</span><span class="si">%2F</span><span class="s1">ssl</span><span class="si">%2F</span><span class="s1">myca.pem\                  # /var/ssl/myca.pem</span>
    <span class="o">&amp;</span><span class="n">ssl_certfile</span><span class="o">=%</span><span class="mi">2</span><span class="n">Fvar</span><span class="o">%</span><span class="mi">2</span><span class="n">Fssl</span><span class="o">%</span><span class="mi">2</span><span class="n">Fredis</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">cert</span><span class="o">.</span><span class="n">pem</span>\     <span class="c1"># /var/ssl/redis-server-cert.pem</span>
    <span class="o">&amp;</span><span class="n">ssl_keyfile</span><span class="o">=%</span><span class="mi">2</span><span class="n">Fvar</span><span class="o">%</span><span class="mi">2</span><span class="n">Fssl</span><span class="o">%</span><span class="mi">2</span><span class="n">Fprivate</span><span class="o">%</span><span class="mi">2</span><span class="n">Fworker</span><span class="o">-</span><span class="n">key</span><span class="o">.</span><span class="n">pem</span><span class="s1">&#39;   # /var/ssl/private/worker-key.pem</span>
</pre></div>
</div>
<p>请注意， <code class="docutils literal notranslate"><span class="pre">ssl_cert_reqs</span></code> 字符串应为 <code class="docutils literal notranslate"><span class="pre">required</span></code>，
<code class="docutils literal notranslate"><span class="pre">optional</span></code> 或 <code class="docutils literal notranslate"><span class="pre">none</span></code> 之一（尽管为了向后兼容，字符串
也可以是 <code class="docutils literal notranslate"><span class="pre">CERT_REQUIRED</span></code>、 <code class="docutils literal notranslate"><span class="pre">CERT_OPTIONAL</span></code>、 <code class="docutils literal notranslate"><span class="pre">CERT_NONE</span></code>）。</p>
</div>
<input class="tab-input" id="tab-set--55-input--2" name="tab-set--55" type="radio"><label class="tab-label" for="tab-set--55-input--2">英文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The Redis backend requires the <a class="extlink-pypi reference external" href="https://pypi.org/project/redis/">https://pypi.org/project/redis/</a> library.</p>
<p>To install this package use <strong class="command">pip</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>redis<span class="o">]</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a> for information on combining multiple extension
requirements.</p>
</div>
<p>This backend requires the <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a>
setting to be set to a Redis or <a class="reference external" href="https://www.iana.org/assignments/uri-schemes/prov/rediss">Redis over TLS</a> URL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;redis://username:password@host:port/db&#39;</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;redis://localhost/0&#39;</span>
</pre></div>
</div>
<p>is the same as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;redis://&#39;</span>
</pre></div>
</div>
<p>Use the <code class="docutils literal notranslate"><span class="pre">rediss://</span></code> protocol to connect to redis over TLS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;rediss://username:password@host:port/db?ssl_cert_reqs=required&#39;</span>
</pre></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">ssl_cert_reqs</span></code> string should be one of <code class="docutils literal notranslate"><span class="pre">required</span></code>,
<code class="docutils literal notranslate"><span class="pre">optional</span></code>, or <code class="docutils literal notranslate"><span class="pre">none</span></code> (though, for backwards compatibility with older Celery versions, the string
may also be one of <code class="docutils literal notranslate"><span class="pre">CERT_REQUIRED</span></code>, <code class="docutils literal notranslate"><span class="pre">CERT_OPTIONAL</span></code>, <code class="docutils literal notranslate"><span class="pre">CERT_NONE</span></code>, but those values
only work for Celery, not for Redis directly).</p>
<p>If a Unix socket connection should be used, the URL needs to be in the format::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;socket:///path/to/redis.sock&#39;</span>
</pre></div>
</div>
<p>The fields of the URL are defined as follows:</p>
<ol class="arabic">
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">username</span></code></dt><dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 5.1.0.</span></p>
</div>
<p>Username used to connect to the database.</p>
<p>Note that this is only supported in Redis&gt;=6.0 and with py-redis&gt;=3.4.0
installed.</p>
<p>If you use an older database version or an older client version
you can omit the username:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;redis://:password@host:port/db&#39;</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">password</span></code></dt><dd><p>Password used to connect to the database.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">host</span></code></dt><dd><p>Host name or IP address of the Redis server (e.g., <cite>localhost</cite>).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">port</span></code></dt><dd><p>Port to the Redis server. Default is 6379.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">db</span></code></dt><dd><p>Database number to use. Default is 0.
The db can include an optional leading slash.</p>
</dd>
</dl>
</li>
</ol>
<p>When using a TLS connection (protocol is <code class="docutils literal notranslate"><span class="pre">rediss://</span></code>), you may pass in all values in <a class="reference internal" href="#std-setting-broker_use_ssl"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_use_ssl</span></code></a> as query parameters. Paths to certificates must be URL encoded, and <code class="docutils literal notranslate"><span class="pre">ssl_cert_reqs</span></code> is required. Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;rediss://:password@host:port/db?</span><span class="se">\</span>
<span class="s1">    ssl_cert_reqs=required</span><span class="se">\</span>
<span class="s1">    &amp;ssl_ca_certs=</span><span class="si">%2F</span><span class="s1">var</span><span class="si">%2F</span><span class="s1">ssl</span><span class="si">%2F</span><span class="s1">myca.pem\                  # /var/ssl/myca.pem</span>
    <span class="o">&amp;</span><span class="n">ssl_certfile</span><span class="o">=%</span><span class="mi">2</span><span class="n">Fvar</span><span class="o">%</span><span class="mi">2</span><span class="n">Fssl</span><span class="o">%</span><span class="mi">2</span><span class="n">Fredis</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">cert</span><span class="o">.</span><span class="n">pem</span>\     <span class="c1"># /var/ssl/redis-server-cert.pem</span>
    <span class="o">&amp;</span><span class="n">ssl_keyfile</span><span class="o">=%</span><span class="mi">2</span><span class="n">Fvar</span><span class="o">%</span><span class="mi">2</span><span class="n">Fssl</span><span class="o">%</span><span class="mi">2</span><span class="n">Fprivate</span><span class="o">%</span><span class="mi">2</span><span class="n">Fworker</span><span class="o">-</span><span class="n">key</span><span class="o">.</span><span class="n">pem</span><span class="s1">&#39;   # /var/ssl/private/worker-key.pem</span>
</pre></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">ssl_cert_reqs</span></code> string should be one of <code class="docutils literal notranslate"><span class="pre">required</span></code>,
<code class="docutils literal notranslate"><span class="pre">optional</span></code>, or <code class="docutils literal notranslate"><span class="pre">none</span></code> (though, for backwards compatibility, the string
may also be one of <code class="docutils literal notranslate"><span class="pre">CERT_REQUIRED</span></code>, <code class="docutils literal notranslate"><span class="pre">CERT_OPTIONAL</span></code>, <code class="docutils literal notranslate"><span class="pre">CERT_NONE</span></code>).</p>
</div>
</div>
<div class="versionadded" id="std-setting-redis_backend_health_check_interval">
<p><span class="versionmodified added">Added in version 5.1.0.</span></p>
</div>
</section>
<section id="redis-backend-health-check-interval">
<h4><code class="docutils literal notranslate"><span class="pre">redis_backend_health_check_interval</span></code><a class="headerlink" href="#redis-backend-health-check-interval" title="Link to this heading">¶</a></h4>
<p>Default: Not configured</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--56-input--1" name="tab-set--56" type="radio"><label class="tab-label" for="tab-set--56-input--1">中文</label><div class="tab-content docutils container">
<p>Redis 后端支持健康检查。此值必须设置为整数，表示健康检查之间的秒数。如果在健康检查过程中遇到 ConnectionError 或 TimeoutError，
连接将重新建立，并且命令将再次重试一次。</p>
</div>
<input class="tab-input" id="tab-set--56-input--2" name="tab-set--56" type="radio"><label class="tab-label" for="tab-set--56-input--2">英文</label><div class="tab-content docutils container">
<p>The Redis backend supports health checks.  This value must be
set as an integer whose value is the number of seconds between
health checks.  If a ConnectionError or a TimeoutError is
encountered during the health check, the connection will be
re-established and the command retried exactly once.</p>
</div>
</div>
</section>
<section id="redis-backend-use-ssl">
<span id="std-setting-redis_backend_use_ssl"></span><h4><code class="docutils literal notranslate"><span class="pre">redis_backend_use_ssl</span></code><a class="headerlink" href="#redis-backend-use-ssl" title="Link to this heading">¶</a></h4>
<p>Default: Disabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--57-input--1" name="tab-set--57" type="radio"><label class="tab-label" for="tab-set--57-input--1">中文</label><div class="tab-content docutils container">
<p>Redis 后端支持 SSL。此值必须以字典的形式设置。有效的键值对与
在 <a class="reference internal" href="#std-setting-broker_use_ssl"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_use_ssl</span></code></a> 下的 <code class="docutils literal notranslate"><span class="pre">redis</span></code> 子部分中提到的键值对相同。</p>
</div>
<input class="tab-input" id="tab-set--57-input--2" name="tab-set--57" type="radio"><label class="tab-label" for="tab-set--57-input--2">英文</label><div class="tab-content docutils container">
<p>The Redis backend supports SSL. This value must be set in
the form of a dictionary. The valid key-value pairs are
the same as the ones mentioned in the <code class="docutils literal notranslate"><span class="pre">redis</span></code> sub-section
under <a class="reference internal" href="#std-setting-broker_use_ssl"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_use_ssl</span></code></a>.</p>
</div>
</div>
</section>
<section id="redis-max-connections">
<span id="std-setting-redis_max_connections"></span><h4><code class="docutils literal notranslate"><span class="pre">redis_max_connections</span></code><a class="headerlink" href="#redis-max-connections" title="Link to this heading">¶</a></h4>
<p>Default: No limit.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--58-input--1" name="tab-set--58" type="radio"><label class="tab-label" for="tab-set--58-input--1">中文</label><div class="tab-content docutils container">
<p>Redis 连接池中用于发送和接收结果的最大连接数。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>如果并发连接数超过最大值，Redis 将引发 <cite>ConnectionError</cite>。</p>
</div>
</div>
<input class="tab-input" id="tab-set--58-input--2" name="tab-set--58" type="radio"><label class="tab-label" for="tab-set--58-input--2">英文</label><div class="tab-content docutils container">
<p>Maximum number of connections available in the Redis connection
pool used for sending and retrieving results.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>Redis will raise a <cite>ConnectionError</cite> if the number of concurrent
connections exceeds the maximum.</p>
</div>
</div>
</div>
</section>
<section id="redis-socket-connect-timeout">
<span id="std-setting-redis_socket_connect_timeout"></span><h4><code class="docutils literal notranslate"><span class="pre">redis_socket_connect_timeout</span></code><a class="headerlink" href="#redis-socket-connect-timeout" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 4.0.1.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--59-input--1" name="tab-set--59" type="radio"><label class="tab-label" for="tab-set--59-input--1">中文</label><div class="tab-content docutils container">
<p>结果后端连接 Redis 的套接字超时（以秒为单位，int/float）。</p>
</div>
<input class="tab-input" id="tab-set--59-input--2" name="tab-set--59" type="radio"><label class="tab-label" for="tab-set--59-input--2">英文</label><div class="tab-content docutils container">
<p>Socket timeout for connections to Redis from the result backend
in seconds (int/float)</p>
</div>
</div>
</section>
<section id="redis-socket-timeout">
<span id="std-setting-redis_socket_timeout"></span><h4><code class="docutils literal notranslate"><span class="pre">redis_socket_timeout</span></code><a class="headerlink" href="#redis-socket-timeout" title="Link to this heading">¶</a></h4>
<p>Default: 120.0 seconds.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--60-input--1" name="tab-set--60" type="radio"><label class="tab-label" for="tab-set--60-input--1">中文</label><div class="tab-content docutils container">
<p>用于 Redis 服务器读/写操作的套接字超时时间（单位为秒，int/float），适用于 Redis 结果后端。</p>
</div>
<input class="tab-input" id="tab-set--60-input--2" name="tab-set--60" type="radio"><label class="tab-label" for="tab-set--60-input--2">英文</label><div class="tab-content docutils container">
<p>Socket timeout for reading/writing operations to the Redis server
in seconds (int/float), used by the redis result backend.</p>
</div>
</div>
</section>
<section id="redis-retry-on-timeout">
<span id="std-setting-redis_retry_on_timeout"></span><h4><code class="docutils literal notranslate"><span class="pre">redis_retry_on_timeout</span></code><a class="headerlink" href="#redis-retry-on-timeout" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 4.4.1.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--61-input--1" name="tab-set--61" type="radio"><label class="tab-label" for="tab-set--61-input--1">中文</label><div class="tab-content docutils container">
<p>用于在遇到 TimeoutError 时重试 Redis 服务器的读/写操作，适用于 Redis 结果后端。如果使用 Unix 套接字连接 Redis，则不应设置该变量。</p>
</div>
<input class="tab-input" id="tab-set--61-input--2" name="tab-set--61" type="radio"><label class="tab-label" for="tab-set--61-input--2">英文</label><div class="tab-content docutils container">
<p>To retry reading/writing operations on TimeoutError to the Redis server,
used by the redis result backend. Shouldn't set this variable if using Redis
connection by unix socket.</p>
</div>
</div>
</section>
<section id="redis-socket-keepalive">
<span id="std-setting-redis_socket_keepalive"></span><h4><code class="docutils literal notranslate"><span class="pre">redis_socket_keepalive</span></code><a class="headerlink" href="#redis-socket-keepalive" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 4.4.1.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--62-input--1" name="tab-set--62" type="radio"><label class="tab-label" for="tab-set--62-input--1">中文</label><div class="tab-content docutils container">
<p>用于保持与 Redis 服务器连接健康状态的 Socket TCP keepalive，适用于 Redis 结果后端。</p>
</div>
<input class="tab-input" id="tab-set--62-input--2" name="tab-set--62" type="radio"><label class="tab-label" for="tab-set--62-input--2">英文</label><div class="tab-content docutils container">
<p>Socket TCP keepalive to keep connections healthy to the Redis server,
used by the redis result backend.</p>
</div>
</div>
</section>
</section>
<section id="cassandra-astradb">
<span id="conf-cassandra-result-backend"></span><h3>Cassandra/AstraDB 后端设置<a class="headerlink" href="#cassandra-astradb" title="Link to this heading">¶</a></h3>
<p>Cassandra/AstraDB backend settings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--63-input--1" name="tab-set--63" type="radio"><label class="tab-label" for="tab-set--63-input--1">中文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>此 Cassandra 后端驱动依赖 <a class="extlink-pypi reference external" href="https://pypi.org/project/cassandra-driver/">https://pypi.org/project/cassandra-driver/</a>。</p>
<p>此后端既可用于常规的 Cassandra 部署，也可用于托管的 Astra DB 实例。根据所用的后端环境，必须在 <a class="reference internal" href="#std-setting-cassandra_servers"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cassandra_servers</span></code></a> 和
<a class="reference internal" href="#std-setting-cassandra_secure_bundle_path"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cassandra_secure_bundle_path</span></code></a> 中选择其一进行配置（二者不可同时设置）。</p>
<p>要安装，请使用 <strong class="command">pip</strong>：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>cassandra<span class="o">]</span>
</pre></div>
</div>
<p>请参见 <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a> 了解有关组合多个扩展要求的信息。</p>
</div>
<p>此后端需要配置以下参数：</p>
</div>
<input class="tab-input" id="tab-set--63-input--2" name="tab-set--63" type="radio"><label class="tab-label" for="tab-set--63-input--2">英文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>This Cassandra backend driver requires <a class="extlink-pypi reference external" href="https://pypi.org/project/cassandra-driver/">https://pypi.org/project/cassandra-driver/</a>.</p>
<p>This backend can refer to either a regular Cassandra installation
or a managed Astra DB instance. Depending on which one, exactly one
between the <a class="reference internal" href="#std-setting-cassandra_servers"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cassandra_servers</span></code></a> and
<a class="reference internal" href="#std-setting-cassandra_secure_bundle_path"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cassandra_secure_bundle_path</span></code></a> settings must be provided
(but not both).</p>
<p>To install, use <strong class="command">pip</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>cassandra<span class="o">]</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a> for information on combining multiple extension
requirements.</p>
</div>
<p>This backend requires the following configuration directives to be set.</p>
</div>
</div>
<section id="cassandra-servers">
<span id="std-setting-cassandra_servers"></span><h4><code class="docutils literal notranslate"><span class="pre">cassandra_servers</span></code><a class="headerlink" href="#cassandra-servers" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">[]</span></code> (empty list).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--64-input--1" name="tab-set--64" type="radio"><label class="tab-label" for="tab-set--64-input--1">中文</label><div class="tab-content docutils container">
<p>Cassandra 服务器的 <code class="docutils literal notranslate"><span class="pre">host</span></code> 列表。当连接 Cassandra 集群时必须提供该项。此项与 <a class="reference internal" href="#std-setting-cassandra_secure_bundle_path"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cassandra_secure_bundle_path</span></code></a> 互斥。例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cassandra_servers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;localhost&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--64-input--2" name="tab-set--64" type="radio"><label class="tab-label" for="tab-set--64-input--2">英文</label><div class="tab-content docutils container">
<p>List of <code class="docutils literal notranslate"><span class="pre">host</span></code> Cassandra servers. This must be provided when connecting to
a Cassandra cluster. Passing this setting is strictly exclusive
to <a class="reference internal" href="#std-setting-cassandra_secure_bundle_path"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cassandra_secure_bundle_path</span></code></a>. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cassandra_servers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;localhost&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="cassandra-secure-bundle-path">
<span id="std-setting-cassandra_secure_bundle_path"></span><h4><code class="docutils literal notranslate"><span class="pre">cassandra_secure_bundle_path</span></code><a class="headerlink" href="#cassandra-secure-bundle-path" title="Link to this heading">¶</a></h4>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--65-input--1" name="tab-set--65" type="radio"><label class="tab-label" for="tab-set--65-input--1">中文</label><div class="tab-content docutils container">
<p>连接 Astra DB 实例所需的 secure-connect-bundle zip 文件的绝对路径。此项与 <a class="reference internal" href="#std-setting-cassandra_servers"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cassandra_servers</span></code></a> 互斥。
例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cassandra_secure_bundle_path</span> <span class="o">=</span> <span class="s1">&#39;/home/user/bundles/secure-connect.zip&#39;</span>
</pre></div>
</div>
<p>连接 Astra DB 时，必须指定明文认证提供程序（plain-text auth provider）以及相关的用户名和密码，
其值分别为 Astra DB 实例所生成有效令牌的 Client ID 和 Client Secret。
请参考下方 Astra DB 配置示例。</p>
</div>
<input class="tab-input" id="tab-set--65-input--2" name="tab-set--65" type="radio"><label class="tab-label" for="tab-set--65-input--2">英文</label><div class="tab-content docutils container">
<p>Absolute path to the secure-connect-bundle zip file to connect
to an Astra DB instance. Passing this setting is strictly exclusive
to <a class="reference internal" href="#std-setting-cassandra_servers"><code class="xref std std-setting docutils literal notranslate"><span class="pre">cassandra_servers</span></code></a>.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cassandra_secure_bundle_path</span> <span class="o">=</span> <span class="s1">&#39;/home/user/bundles/secure-connect.zip&#39;</span>
</pre></div>
</div>
<p>When connecting to Astra DB, it is necessary to specify
the plain-text auth provider and the associated username and password,
which take the value of the Client ID and the Client Secret, respectively,
of a valid token generated for the Astra DB instance.
See below for an Astra DB configuration example.</p>
</div>
</div>
</section>
<section id="cassandra-port">
<span id="std-setting-cassandra_port"></span><h4><code class="docutils literal notranslate"><span class="pre">cassandra_port</span></code><a class="headerlink" href="#cassandra-port" title="Link to this heading">¶</a></h4>
<p>Default: 9042.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--66-input--1" name="tab-set--66" type="radio"><label class="tab-label" for="tab-set--66-input--1">中文</label><div class="tab-content docutils container">
<p>与 Cassandra 服务器通信所用的端口。</p>
</div>
<input class="tab-input" id="tab-set--66-input--2" name="tab-set--66" type="radio"><label class="tab-label" for="tab-set--66-input--2">英文</label><div class="tab-content docutils container">
<p>Port to contact the Cassandra servers on.</p>
</div>
</div>
</section>
<section id="cassandra-keyspace">
<span id="std-setting-cassandra_keyspace"></span><h4><code class="docutils literal notranslate"><span class="pre">cassandra_keyspace</span></code><a class="headerlink" href="#cassandra-keyspace" title="Link to this heading">¶</a></h4>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--67-input--1" name="tab-set--67" type="radio"><label class="tab-label" for="tab-set--67-input--1">中文</label><div class="tab-content docutils container">
<p>用于存储结果的 keyspace。例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cassandra_keyspace</span> <span class="o">=</span> <span class="s1">&#39;tasks_keyspace&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--67-input--2" name="tab-set--67" type="radio"><label class="tab-label" for="tab-set--67-input--2">英文</label><div class="tab-content docutils container">
<p>The keyspace in which to store the results. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cassandra_keyspace</span> <span class="o">=</span> <span class="s1">&#39;tasks_keyspace&#39;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="cassandra-table">
<span id="std-setting-cassandra_table"></span><h4><code class="docutils literal notranslate"><span class="pre">cassandra_table</span></code><a class="headerlink" href="#cassandra-table" title="Link to this heading">¶</a></h4>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--68-input--1" name="tab-set--68" type="radio"><label class="tab-label" for="tab-set--68-input--1">中文</label><div class="tab-content docutils container">
<p>用于存储结果的表（列族）。例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cassandra_table</span> <span class="o">=</span> <span class="s1">&#39;tasks&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--68-input--2" name="tab-set--68" type="radio"><label class="tab-label" for="tab-set--68-input--2">英文</label><div class="tab-content docutils container">
<p>The table (column family) in which to store the results. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cassandra_table</span> <span class="o">=</span> <span class="s1">&#39;tasks&#39;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="cassandra-read-consistency">
<span id="std-setting-cassandra_read_consistency"></span><h4><code class="docutils literal notranslate"><span class="pre">cassandra_read_consistency</span></code><a class="headerlink" href="#cassandra-read-consistency" title="Link to this heading">¶</a></h4>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--69-input--1" name="tab-set--69" type="radio"><label class="tab-label" for="tab-set--69-input--1">中文</label><div class="tab-content docutils container">
<p>读取一致性级别。可选值包括 <code class="docutils literal notranslate"><span class="pre">ONE</span></code>, <code class="docutils literal notranslate"><span class="pre">TWO</span></code>, <code class="docutils literal notranslate"><span class="pre">THREE</span></code>, <code class="docutils literal notranslate"><span class="pre">QUORUM</span></code>, <code class="docutils literal notranslate"><span class="pre">ALL</span></code>,
<code class="docutils literal notranslate"><span class="pre">LOCAL_QUORUM</span></code>, <code class="docutils literal notranslate"><span class="pre">EACH_QUORUM</span></code>, <code class="docutils literal notranslate"><span class="pre">LOCAL_ONE</span></code>.</p>
</div>
<input class="tab-input" id="tab-set--69-input--2" name="tab-set--69" type="radio"><label class="tab-label" for="tab-set--69-input--2">英文</label><div class="tab-content docutils container">
<p>The read consistency used. Values can be <code class="docutils literal notranslate"><span class="pre">ONE</span></code>, <code class="docutils literal notranslate"><span class="pre">TWO</span></code>, <code class="docutils literal notranslate"><span class="pre">THREE</span></code>, <code class="docutils literal notranslate"><span class="pre">QUORUM</span></code>, <code class="docutils literal notranslate"><span class="pre">ALL</span></code>,
<code class="docutils literal notranslate"><span class="pre">LOCAL_QUORUM</span></code>, <code class="docutils literal notranslate"><span class="pre">EACH_QUORUM</span></code>, <code class="docutils literal notranslate"><span class="pre">LOCAL_ONE</span></code>.</p>
</div>
</div>
</section>
<section id="cassandra-write-consistency">
<span id="std-setting-cassandra_write_consistency"></span><h4><code class="docutils literal notranslate"><span class="pre">cassandra_write_consistency</span></code><a class="headerlink" href="#cassandra-write-consistency" title="Link to this heading">¶</a></h4>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--70-input--1" name="tab-set--70" type="radio"><label class="tab-label" for="tab-set--70-input--1">中文</label><div class="tab-content docutils container">
<p>写入一致性级别。可选值包括 <code class="docutils literal notranslate"><span class="pre">ONE</span></code>, <code class="docutils literal notranslate"><span class="pre">TWO</span></code>, <code class="docutils literal notranslate"><span class="pre">THREE</span></code>, <code class="docutils literal notranslate"><span class="pre">QUORUM</span></code>, <code class="docutils literal notranslate"><span class="pre">ALL</span></code>,
<code class="docutils literal notranslate"><span class="pre">LOCAL_QUORUM</span></code>, <code class="docutils literal notranslate"><span class="pre">EACH_QUORUM</span></code>, <code class="docutils literal notranslate"><span class="pre">LOCAL_ONE</span></code>.</p>
</div>
<input class="tab-input" id="tab-set--70-input--2" name="tab-set--70" type="radio"><label class="tab-label" for="tab-set--70-input--2">英文</label><div class="tab-content docutils container">
<p>The write consistency used. Values can be <code class="docutils literal notranslate"><span class="pre">ONE</span></code>, <code class="docutils literal notranslate"><span class="pre">TWO</span></code>, <code class="docutils literal notranslate"><span class="pre">THREE</span></code>, <code class="docutils literal notranslate"><span class="pre">QUORUM</span></code>, <code class="docutils literal notranslate"><span class="pre">ALL</span></code>,
<code class="docutils literal notranslate"><span class="pre">LOCAL_QUORUM</span></code>, <code class="docutils literal notranslate"><span class="pre">EACH_QUORUM</span></code>, <code class="docutils literal notranslate"><span class="pre">LOCAL_ONE</span></code>.</p>
</div>
</div>
</section>
<section id="cassandra-entry-ttl">
<span id="std-setting-cassandra_entry_ttl"></span><h4><code class="docutils literal notranslate"><span class="pre">cassandra_entry_ttl</span></code><a class="headerlink" href="#cassandra-entry-ttl" title="Link to this heading">¶</a></h4>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--71-input--1" name="tab-set--71" type="radio"><label class="tab-label" for="tab-set--71-input--1">中文</label><div class="tab-content docutils container">
<p>状态条目的存活时间（TTL），单位为秒。超过该时间后条目将过期并被移除。
默认值为 <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>，表示永不过期。</p>
</div>
<input class="tab-input" id="tab-set--71-input--2" name="tab-set--71" type="radio"><label class="tab-label" for="tab-set--71-input--2">英文</label><div class="tab-content docutils container">
<p>Time-to-live for status entries. They will expire and be removed after that many seconds
after adding. A value of <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code> (default) means they will never expire.</p>
</div>
</div>
</section>
<section id="cassandra-auth-provider">
<span id="std-setting-cassandra_auth_provider"></span><h4><code class="docutils literal notranslate"><span class="pre">cassandra_auth_provider</span></code><a class="headerlink" href="#cassandra-auth-provider" title="Link to this heading">¶</a></h4>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--72-input--1" name="tab-set--72" type="radio"><label class="tab-label" for="tab-set--72-input--1">中文</label><div class="tab-content docutils container">
<p>在 <code class="docutils literal notranslate"><span class="pre">cassandra.auth</span></code> 模块中用于认证的 AuthProvider 类。可选值包括
<code class="docutils literal notranslate"><span class="pre">PlainTextAuthProvider</span></code> 或 <code class="docutils literal notranslate"><span class="pre">SaslAuthProvider</span></code>。</p>
</div>
<input class="tab-input" id="tab-set--72-input--2" name="tab-set--72" type="radio"><label class="tab-label" for="tab-set--72-input--2">英文</label><div class="tab-content docutils container">
<p>AuthProvider class within <code class="docutils literal notranslate"><span class="pre">cassandra.auth</span></code> module to use. Values can be
<code class="docutils literal notranslate"><span class="pre">PlainTextAuthProvider</span></code> or <code class="docutils literal notranslate"><span class="pre">SaslAuthProvider</span></code>.</p>
</div>
</div>
</section>
<section id="cassandra-auth-kwargs">
<span id="std-setting-cassandra_auth_kwargs"></span><h4><code class="docutils literal notranslate"><span class="pre">cassandra_auth_kwargs</span></code><a class="headerlink" href="#cassandra-auth-kwargs" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code> (empty mapping).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--73-input--1" name="tab-set--73" type="radio"><label class="tab-label" for="tab-set--73-input--1">中文</label><div class="tab-content docutils container">
<p>传递给认证提供程序的命名参数。例如：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cassandra_auth_kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">username</span><span class="p">:</span> <span class="s1">&#39;cassandra&#39;</span><span class="p">,</span>
    <span class="n">password</span><span class="p">:</span> <span class="s1">&#39;cassandra&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--73-input--2" name="tab-set--73" type="radio"><label class="tab-label" for="tab-set--73-input--2">英文</label><div class="tab-content docutils container">
<p>Named arguments to pass into the authentication provider. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cassandra_auth_kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">username</span><span class="p">:</span> <span class="s1">&#39;cassandra&#39;</span><span class="p">,</span>
    <span class="n">password</span><span class="p">:</span> <span class="s1">&#39;cassandra&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="cassandra-options">
<span id="std-setting-cassandra_options"></span><h4><code class="docutils literal notranslate"><span class="pre">cassandra_options</span></code><a class="headerlink" href="#cassandra-options" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code> (empty mapping).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--74-input--1" name="tab-set--74" type="radio"><label class="tab-label" for="tab-set--74-input--1">中文</label><div class="tab-content docutils container">
<p>传递给 <code class="docutils literal notranslate"><span class="pre">cassandra.cluster</span></code> 类的命名参数。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cassandra_options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;cql_version&#39;</span><span class="p">:</span> <span class="s1">&#39;3.2.1&#39;</span>
    <span class="s1">&#39;protocol_version&#39;</span><span class="p">:</span> <span class="mi">3</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--74-input--2" name="tab-set--74" type="radio"><label class="tab-label" for="tab-set--74-input--2">英文</label><div class="tab-content docutils container">
<p>Named arguments to pass into the <code class="docutils literal notranslate"><span class="pre">cassandra.cluster</span></code> class.</p>
</div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cassandra_options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;cql_version&#39;</span><span class="p">:</span> <span class="s1">&#39;3.2.1&#39;</span>
    <span class="s1">&#39;protocol_version&#39;</span><span class="p">:</span> <span class="mi">3</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id20">
<h4>示例配置 (Cassandra)<a class="headerlink" href="#id20" title="Link to this heading">¶</a></h4>
<p>Example configuration (Cassandra)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;cassandra://&#39;</span>
<span class="n">cassandra_servers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;localhost&#39;</span><span class="p">]</span>
<span class="n">cassandra_keyspace</span> <span class="o">=</span> <span class="s1">&#39;celery&#39;</span>
<span class="n">cassandra_table</span> <span class="o">=</span> <span class="s1">&#39;tasks&#39;</span>
<span class="n">cassandra_read_consistency</span> <span class="o">=</span> <span class="s1">&#39;QUORUM&#39;</span>
<span class="n">cassandra_write_consistency</span> <span class="o">=</span> <span class="s1">&#39;QUORUM&#39;</span>
<span class="n">cassandra_entry_ttl</span> <span class="o">=</span> <span class="mi">86400</span>
</pre></div>
</div>
</section>
<section id="astra-db">
<h4>示例配置 (Astra DB)<a class="headerlink" href="#astra-db" title="Link to this heading">¶</a></h4>
<p>Example configuration (Astra DB)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;cassandra://&#39;</span>
<span class="n">cassandra_keyspace</span> <span class="o">=</span> <span class="s1">&#39;celery&#39;</span>
<span class="n">cassandra_table</span> <span class="o">=</span> <span class="s1">&#39;tasks&#39;</span>
<span class="n">cassandra_read_consistency</span> <span class="o">=</span> <span class="s1">&#39;QUORUM&#39;</span>
<span class="n">cassandra_write_consistency</span> <span class="o">=</span> <span class="s1">&#39;QUORUM&#39;</span>
<span class="n">cassandra_auth_provider</span> <span class="o">=</span> <span class="s1">&#39;PlainTextAuthProvider&#39;</span>
<span class="n">cassandra_auth_kwargs</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;username&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;&lt;CLIENT_ID_FROM_ASTRA_DB_TOKEN&gt;&gt;&#39;</span><span class="p">,</span>
  <span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;&lt;CLIENT_SECRET_FROM_ASTRA_DB_TOKEN&gt;&gt;&#39;</span>
<span class="p">}</span>
<span class="n">cassandra_secure_bundle_path</span> <span class="o">=</span> <span class="s1">&#39;/path/to/secure-connect-bundle.zip&#39;</span>
<span class="n">cassandra_entry_ttl</span> <span class="o">=</span> <span class="mi">86400</span>
</pre></div>
</div>
</section>
<section id="id21">
<h4>其他配置<a class="headerlink" href="#id21" title="Link to this heading">¶</a></h4>
<p>Additional configuration</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--75-input--1" name="tab-set--75" type="radio"><label class="tab-label" for="tab-set--75-input--1">中文</label><div class="tab-content docutils container">
<p>在建立连接时，Cassandra 驱动程序会与服务器协商协议版本。
同时，还会自动使用一个负载均衡策略（默认值为 <code class="docutils literal notranslate"><span class="pre">DCAwareRoundRobinPolicy</span></code>，其含有一个由驱动自动确定的 <code class="docutils literal notranslate"><span class="pre">local_dc</span></code> 设置）。
当可能时，应在配置中显式提供这些参数：
此外，Cassandra 驱动的未来版本将要求至少指定负载均衡策略
（可通过 <a class="reference external" href="https://docs.datastax.com/en/developer/python-driver/3.25/execution_profiles/">execution profiles</a> 进行配置，如下所示）。</p>
<p>因此，一个完整的 Cassandra 后端配置将包含以下附加配置：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.policies</span><span class="w"> </span><span class="kn">import</span> <span class="n">DCAwareRoundRobinPolicy</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.cluster</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExecutionProfile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.cluster</span><span class="w"> </span><span class="kn">import</span> <span class="n">EXEC_PROFILE_DEFAULT</span>
<span class="n">myEProfile</span> <span class="o">=</span> <span class="n">ExecutionProfile</span><span class="p">(</span>
<span class="n">load_balancing_policy</span><span class="o">=</span><span class="n">DCAwareRoundRobinPolicy</span><span class="p">(</span>
    <span class="n">local_dc</span><span class="o">=</span><span class="s1">&#39;datacenter1&#39;</span><span class="p">,</span> <span class="c1"># 替换为您的数据中心名称</span>
<span class="p">)</span>
<span class="p">)</span>
<span class="n">cassandra_options</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;protocol_version&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>    <span class="c1"># 适用于 Cassandra 4，如有需要可更改</span>
<span class="s1">&#39;execution_profiles&#39;</span><span class="p">:</span> <span class="p">{</span><span class="n">EXEC_PROFILE_DEFAULT</span><span class="p">:</span> <span class="n">myEProfile</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>对于 Astra DB，配置方式类似：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.policies</span><span class="w"> </span><span class="kn">import</span> <span class="n">DCAwareRoundRobinPolicy</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.cluster</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExecutionProfile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.cluster</span><span class="w"> </span><span class="kn">import</span> <span class="n">EXEC_PROFILE_DEFAULT</span>
<span class="n">myEProfile</span> <span class="o">=</span> <span class="n">ExecutionProfile</span><span class="p">(</span>
<span class="n">load_balancing_policy</span><span class="o">=</span><span class="n">DCAwareRoundRobinPolicy</span><span class="p">(</span>
    <span class="n">local_dc</span><span class="o">=</span><span class="s1">&#39;europe-west1&#39;</span><span class="p">,</span>  <span class="c1"># 对于 Astra DB，region 名即为 dc 名</span>
<span class="p">)</span>
<span class="p">)</span>
<span class="n">cassandra_options</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;protocol_version&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>      <span class="c1"># 适用于 Astra DB</span>
<span class="s1">&#39;execution_profiles&#39;</span><span class="p">:</span> <span class="p">{</span><span class="n">EXEC_PROFILE_DEFAULT</span><span class="p">:</span> <span class="n">myEProfile</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--75-input--2" name="tab-set--75" type="radio"><label class="tab-label" for="tab-set--75-input--2">英文</label><div class="tab-content docutils container">
<p>The Cassandra driver, when establishing the connection, undergoes a stage
of negotiating the protocol version with the server(s). Similarly,
a load-balancing policy is automatically supplied (by default
<code class="docutils literal notranslate"><span class="pre">DCAwareRoundRobinPolicy</span></code>, which in turn has a <code class="docutils literal notranslate"><span class="pre">local_dc</span></code> setting, also
determined by the driver upon connection).
When possible, one should explicitly provide these in the configuration:
moreover, future versions of the Cassandra driver will require at least the
load-balancing policy to be specified (using <a class="reference external" href="https://docs.datastax.com/en/developer/python-driver/3.25/execution_profiles/">execution profiles</a>,
as shown below).</p>
<p>A full configuration for the Cassandra backend would thus have the
following additional lines:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.policies</span><span class="w"> </span><span class="kn">import</span> <span class="n">DCAwareRoundRobinPolicy</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.cluster</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExecutionProfile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.cluster</span><span class="w"> </span><span class="kn">import</span> <span class="n">EXEC_PROFILE_DEFAULT</span>
<span class="n">myEProfile</span> <span class="o">=</span> <span class="n">ExecutionProfile</span><span class="p">(</span>
<span class="n">load_balancing_policy</span><span class="o">=</span><span class="n">DCAwareRoundRobinPolicy</span><span class="p">(</span>
    <span class="n">local_dc</span><span class="o">=</span><span class="s1">&#39;datacenter1&#39;</span><span class="p">,</span> <span class="c1"># replace with your DC name</span>
<span class="p">)</span>
<span class="p">)</span>
<span class="n">cassandra_options</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;protocol_version&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>    <span class="c1"># for Cassandra 4, change if needed</span>
<span class="s1">&#39;execution_profiles&#39;</span><span class="p">:</span> <span class="p">{</span><span class="n">EXEC_PROFILE_DEFAULT</span><span class="p">:</span> <span class="n">myEProfile</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And similarly for Astra DB:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.policies</span><span class="w"> </span><span class="kn">import</span> <span class="n">DCAwareRoundRobinPolicy</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.cluster</span><span class="w"> </span><span class="kn">import</span> <span class="n">ExecutionProfile</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">cassandra.cluster</span><span class="w"> </span><span class="kn">import</span> <span class="n">EXEC_PROFILE_DEFAULT</span>
<span class="n">myEProfile</span> <span class="o">=</span> <span class="n">ExecutionProfile</span><span class="p">(</span>
<span class="n">load_balancing_policy</span><span class="o">=</span><span class="n">DCAwareRoundRobinPolicy</span><span class="p">(</span>
    <span class="n">local_dc</span><span class="o">=</span><span class="s1">&#39;europe-west1&#39;</span><span class="p">,</span>  <span class="c1"># for Astra DB, region name = dc name</span>
<span class="p">)</span>
<span class="p">)</span>
<span class="n">cassandra_options</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;protocol_version&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>      <span class="c1"># for Astra DB</span>
<span class="s1">&#39;execution_profiles&#39;</span><span class="p">:</span> <span class="p">{</span><span class="n">EXEC_PROFILE_DEFAULT</span><span class="p">:</span> <span class="n">myEProfile</span><span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="conf-s3-result-backend">
<span id="id23"></span><h3>S3 后端设置<a class="headerlink" href="#conf-s3-result-backend" title="Link to this heading">¶</a></h3>
<p>S3 backend settings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--76-input--1" name="tab-set--76" type="radio"><label class="tab-label" for="tab-set--76-input--1">中文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>此 S3 后端驱动依赖 <a class="extlink-pypi reference external" href="https://pypi.org/project/s3/">https://pypi.org/project/s3/</a>。</p>
<p>要安装，请使用 <strong class="command">s3</strong>：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>s3<span class="o">]</span>
</pre></div>
</div>
<p>请参见 <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a> 了解有关组合多个扩展依赖项的信息。</p>
</div>
<p>此后端需要配置以下参数：</p>
</div>
<input class="tab-input" id="tab-set--76-input--2" name="tab-set--76" type="radio"><label class="tab-label" for="tab-set--76-input--2">英文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>This s3 backend driver requires <a class="extlink-pypi reference external" href="https://pypi.org/project/s3/">https://pypi.org/project/s3/</a>.</p>
<p>To install, use <strong class="command">s3</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>s3<span class="o">]</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a> for information on combining multiple extension
requirements.</p>
</div>
<p>This backend requires the following configuration directives to be set.</p>
</div>
</div>
<section id="s3-access-key-id">
<span id="std-setting-s3_access_key_id"></span><h4><code class="docutils literal notranslate"><span class="pre">s3_access_key_id</span></code><a class="headerlink" href="#s3-access-key-id" title="Link to this heading">¶</a></h4>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--77-input--1" name="tab-set--77" type="radio"><label class="tab-label" for="tab-set--77-input--1">中文</label><div class="tab-content docutils container">
<p>S3 的访问密钥 ID。例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s3_access_key_id</span> <span class="o">=</span> <span class="s1">&#39;access_key_id&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--77-input--2" name="tab-set--77" type="radio"><label class="tab-label" for="tab-set--77-input--2">英文</label><div class="tab-content docutils container">
<p>The s3 access key id. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s3_access_key_id</span> <span class="o">=</span> <span class="s1">&#39;access_key_id&#39;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="s3-secret-access-key">
<span id="std-setting-s3_secret_access_key"></span><h4><code class="docutils literal notranslate"><span class="pre">s3_secret_access_key</span></code><a class="headerlink" href="#s3-secret-access-key" title="Link to this heading">¶</a></h4>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--78-input--1" name="tab-set--78" type="radio"><label class="tab-label" for="tab-set--78-input--1">中文</label><div class="tab-content docutils container">
<p>S3 的访问密钥。例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s3_secret_access_key</span> <span class="o">=</span> <span class="s1">&#39;access_secret_access_key&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--78-input--2" name="tab-set--78" type="radio"><label class="tab-label" for="tab-set--78-input--2">英文</label><div class="tab-content docutils container">
<p>The s3 secret access key. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s3_secret_access_key</span> <span class="o">=</span> <span class="s1">&#39;access_secret_access_key&#39;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="s3-bucket">
<span id="std-setting-s3_bucket"></span><h4><code class="docutils literal notranslate"><span class="pre">s3_bucket</span></code><a class="headerlink" href="#s3-bucket" title="Link to this heading">¶</a></h4>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--79-input--1" name="tab-set--79" type="radio"><label class="tab-label" for="tab-set--79-input--1">中文</label><div class="tab-content docutils container">
<p>S3 的存储桶名称。例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s3_bucket</span> <span class="o">=</span> <span class="s1">&#39;bucket_name&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--79-input--2" name="tab-set--79" type="radio"><label class="tab-label" for="tab-set--79-input--2">英文</label><div class="tab-content docutils container">
<p>The s3 bucket name. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s3_bucket</span> <span class="o">=</span> <span class="s1">&#39;bucket_name&#39;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="s3-base-path">
<span id="std-setting-s3_base_path"></span><h4><code class="docutils literal notranslate"><span class="pre">s3_base_path</span></code><a class="headerlink" href="#s3-base-path" title="Link to this heading">¶</a></h4>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--80-input--1" name="tab-set--80" type="radio"><label class="tab-label" for="tab-set--80-input--1">中文</label><div class="tab-content docutils container">
<p>用于存储结果键的 S3 存储桶中的基础路径。例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s3_base_path</span> <span class="o">=</span> <span class="s1">&#39;/prefix&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--80-input--2" name="tab-set--80" type="radio"><label class="tab-label" for="tab-set--80-input--2">英文</label><div class="tab-content docutils container">
<p>A base path in the s3 bucket to use to store result keys. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s3_base_path</span> <span class="o">=</span> <span class="s1">&#39;/prefix&#39;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="s3-endpoint-url">
<span id="std-setting-s3_endpoint_url"></span><h4><code class="docutils literal notranslate"><span class="pre">s3_endpoint_url</span></code><a class="headerlink" href="#s3-endpoint-url" title="Link to this heading">¶</a></h4>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--81-input--1" name="tab-set--81" type="radio"><label class="tab-label" for="tab-set--81-input--1">中文</label><div class="tab-content docutils container">
<p>自定义的 S3 端点 URL。可用于连接自托管的 S3 兼容后端（如 Ceph、Scality 等）。例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s3_endpoint_url</span> <span class="o">=</span> <span class="s1">&#39;https://.s3.custom.url&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--81-input--2" name="tab-set--81" type="radio"><label class="tab-label" for="tab-set--81-input--2">英文</label><div class="tab-content docutils container">
<p>A custom s3 endpoint url. Use it to connect to a custom self-hosted s3 compatible backend (Ceph, Scality...). For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s3_endpoint_url</span> <span class="o">=</span> <span class="s1">&#39;https://.s3.custom.url&#39;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="s3-region">
<span id="std-setting-s3_region"></span><h4><code class="docutils literal notranslate"><span class="pre">s3_region</span></code><a class="headerlink" href="#s3-region" title="Link to this heading">¶</a></h4>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--82-input--1" name="tab-set--82" type="radio"><label class="tab-label" for="tab-set--82-input--1">中文</label><div class="tab-content docutils container">
<p>S3 使用的 AWS 区域。例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s3_region</span> <span class="o">=</span> <span class="s1">&#39;us-east-1&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--82-input--2" name="tab-set--82" type="radio"><label class="tab-label" for="tab-set--82-input--2">英文</label><div class="tab-content docutils container">
<p>The s3 aws region. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s3_region</span> <span class="o">=</span> <span class="s1">&#39;us-east-1&#39;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="id24">
<h4>示例配置<a class="headerlink" href="#id24" title="Link to this heading">¶</a></h4>
<p>Example configuration</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s3_access_key_id</span> <span class="o">=</span> <span class="s1">&#39;s3-access-key-id&#39;</span>
<span class="n">s3_secret_access_key</span> <span class="o">=</span> <span class="s1">&#39;s3-secret-access-key&#39;</span>
<span class="n">s3_bucket</span> <span class="o">=</span> <span class="s1">&#39;mybucket&#39;</span>
<span class="n">s3_base_path</span> <span class="o">=</span> <span class="s1">&#39;/celery_result_backend&#39;</span>
<span class="n">s3_endpoint_url</span> <span class="o">=</span> <span class="s1">&#39;https://endpoint_url&#39;</span>
</pre></div>
</div>
</div></blockquote>
</section>
</section>
<section id="azure-block-blob">
<span id="conf-azureblockblob-result-backend"></span><h3>Azure Block Blob 后端设置<a class="headerlink" href="#azure-block-blob" title="Link to this heading">¶</a></h3>
<p>Azure Block Blob backend settings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--83-input--1" name="tab-set--83" type="radio"><label class="tab-label" for="tab-set--83-input--1">中文</label><div class="tab-content docutils container">
<p>要使用 <a class="reference external" href="https://azure.microsoft.com/en-us/services/storage/blobs/">AzureBlockBlob</a> 作为结果后端，只需将 <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> 配置为正确的 URL。</p>
<p>所需的 URL 格式为 <code class="docutils literal notranslate"><span class="pre">azureblockblob://</span></code>，后跟存储连接字符串。你可以在 Azure 门户中存储帐户资源的 <code class="docutils literal notranslate"><span class="pre">Access</span> <span class="pre">Keys</span></code> 面板中找到该连接字符串。</p>
</div>
<input class="tab-input" id="tab-set--83-input--2" name="tab-set--83" type="radio"><label class="tab-label" for="tab-set--83-input--2">英文</label><div class="tab-content docutils container">
<p>To use <a class="reference external" href="https://azure.microsoft.com/en-us/services/storage/blobs/">AzureBlockBlob</a> as the result backend you simply need to
configure the <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> setting with the correct URL.</p>
<p>The required URL format is <code class="docutils literal notranslate"><span class="pre">azureblockblob://</span></code> followed by the storage
connection string. You can find the storage connection string in the
<code class="docutils literal notranslate"><span class="pre">Access</span> <span class="pre">Keys</span></code> pane of your storage account resource in the Azure Portal.</p>
</div>
</div>
<section id="id25">
<h4>示例配置<a class="headerlink" href="#id25" title="Link to this heading">¶</a></h4>
<p>Example configuration</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;azureblockblob://DefaultEndpointsProtocol=https;AccountName=somename;AccountKey=Lou...bzg==;EndpointSuffix=core.windows.net&#39;</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="azureblockblob-container-name">
<span id="std-setting-azureblockblob_container_name"></span><h4><code class="docutils literal notranslate"><span class="pre">azureblockblob_container_name</span></code><a class="headerlink" href="#azureblockblob-container-name" title="Link to this heading">¶</a></h4>
<p>Default: celery.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--84-input--1" name="tab-set--84" type="radio"><label class="tab-label" for="tab-set--84-input--1">中文</label><div class="tab-content docutils container">
<p>用于存储结果的存储容器名称。</p>
</div>
<input class="tab-input" id="tab-set--84-input--2" name="tab-set--84" type="radio"><label class="tab-label" for="tab-set--84-input--2">英文</label><div class="tab-content docutils container">
<p>The name for the storage container in which to store the results.</p>
</div>
</div>
</section>
<section id="azureblockblob-base-path">
<span id="std-setting-azureblockblob_base_path"></span><h4><code class="docutils literal notranslate"><span class="pre">azureblockblob_base_path</span></code><a class="headerlink" href="#azureblockblob-base-path" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.1.</span></p>
</div>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--85-input--1" name="tab-set--85" type="radio"><label class="tab-label" for="tab-set--85-input--1">中文</label><div class="tab-content docutils container">
<p>存储容器中用于存放结果键的基础路径。例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">azureblockblob_base_path</span> <span class="o">=</span> <span class="s1">&#39;prefix/&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--85-input--2" name="tab-set--85" type="radio"><label class="tab-label" for="tab-set--85-input--2">英文</label><div class="tab-content docutils container">
<p>A base path in the storage container to use to store result keys. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">azureblockblob_base_path</span> <span class="o">=</span> <span class="s1">&#39;prefix/&#39;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="azureblockblob-retry-initial-backoff-sec">
<span id="std-setting-azureblockblob_retry_initial_backoff_sec"></span><h4><code class="docutils literal notranslate"><span class="pre">azureblockblob_retry_initial_backoff_sec</span></code><a class="headerlink" href="#azureblockblob-retry-initial-backoff-sec" title="Link to this heading">¶</a></h4>
<p>Default: 2.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--86-input--1" name="tab-set--86" type="radio"><label class="tab-label" for="tab-set--86-input--1">中文</label><div class="tab-content docutils container">
<p>第一次重试的初始退避时间（以秒为单位）。
后续重试将采用指数退避策略。</p>
</div>
<input class="tab-input" id="tab-set--86-input--2" name="tab-set--86" type="radio"><label class="tab-label" for="tab-set--86-input--2">英文</label><div class="tab-content docutils container">
<p>The initial backoff interval, in seconds, for the first retry.
Subsequent retries are attempted with an exponential strategy.</p>
</div>
</div>
</section>
<section id="azureblockblob-retry-increment-base">
<span id="std-setting-azureblockblob_retry_increment_base"></span><h4><code class="docutils literal notranslate"><span class="pre">azureblockblob_retry_increment_base</span></code><a class="headerlink" href="#azureblockblob-retry-increment-base" title="Link to this heading">¶</a></h4>
<p>Default: 2.</p>
</section>
<section id="azureblockblob-retry-max-attempts">
<span id="std-setting-azureblockblob_retry_max_attempts"></span><h4><code class="docutils literal notranslate"><span class="pre">azureblockblob_retry_max_attempts</span></code><a class="headerlink" href="#azureblockblob-retry-max-attempts" title="Link to this heading">¶</a></h4>
<p>Default: 3.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--87-input--1" name="tab-set--87" type="radio"><label class="tab-label" for="tab-set--87-input--1">中文</label><div class="tab-content docutils container">
<p>最大重试次数。</p>
</div>
<input class="tab-input" id="tab-set--87-input--2" name="tab-set--87" type="radio"><label class="tab-label" for="tab-set--87-input--2">英文</label><div class="tab-content docutils container">
<p>The maximum number of retry attempts.</p>
</div>
</div>
</section>
<section id="azureblockblob-connection-timeout">
<span id="std-setting-azureblockblob_connection_timeout"></span><h4><code class="docutils literal notranslate"><span class="pre">azureblockblob_connection_timeout</span></code><a class="headerlink" href="#azureblockblob-connection-timeout" title="Link to this heading">¶</a></h4>
<p>Default: 20.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--88-input--1" name="tab-set--88" type="radio"><label class="tab-label" for="tab-set--88-input--1">中文</label><div class="tab-content docutils container">
<p>建立 Azure Block Blob 连接的超时时间（秒）。</p>
</div>
<input class="tab-input" id="tab-set--88-input--2" name="tab-set--88" type="radio"><label class="tab-label" for="tab-set--88-input--2">英文</label><div class="tab-content docutils container">
<p>Timeout in seconds for establishing the azure block blob connection.</p>
</div>
</div>
</section>
<section id="azureblockblob-read-timeout">
<span id="std-setting-azureblockblob_read_timeout"></span><h4><code class="docutils literal notranslate"><span class="pre">azureblockblob_read_timeout</span></code><a class="headerlink" href="#azureblockblob-read-timeout" title="Link to this heading">¶</a></h4>
<p>Default: 120.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--89-input--1" name="tab-set--89" type="radio"><label class="tab-label" for="tab-set--89-input--1">中文</label><div class="tab-content docutils container">
<p>读取 Azure Block Blob 的超时时间（秒）。</p>
</div>
<input class="tab-input" id="tab-set--89-input--2" name="tab-set--89" type="radio"><label class="tab-label" for="tab-set--89-input--2">英文</label><div class="tab-content docutils container">
<p>Timeout in seconds for reading of an azure block blob.</p>
</div>
</div>
</section>
</section>
<section id="conf-gcs-result-backend">
<span id="id26"></span><h3>GCS 后端设置<a class="headerlink" href="#conf-gcs-result-backend" title="Link to this heading">¶</a></h3>
<p>GCS backend settings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--90-input--1" name="tab-set--90" type="radio"><label class="tab-label" for="tab-set--90-input--1">中文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>此 GCS 后端驱动依赖 <a class="extlink-pypi reference external" href="https://pypi.org/project/google-cloud-storage/">https://pypi.org/project/google-cloud-storage/</a> 和 <a class="extlink-pypi reference external" href="https://pypi.org/project/google-cloud-firestore/">https://pypi.org/project/google-cloud-firestore/</a>。</p>
<p>要安装，请使用 <strong class="command">gcs</strong>：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>gcs<span class="o">]</span>
</pre></div>
</div>
<p>请参阅 <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a> 获取关于组合多个扩展依赖项的信息。</p>
</div>
<p>可以通过 <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> 中提供的 URL 配置 GCS，例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;gs://mybucket/some-prefix?gcs_project=myproject&amp;ttl=600&#39;</span>
<span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;gs://mybucket/some-prefix?gcs_project=myproject?firestore_project=myproject2&amp;ttl=600&#39;</span>
</pre></div>
</div>
<p>此后端需要配置以下参数：</p>
</div>
<input class="tab-input" id="tab-set--90-input--2" name="tab-set--90" type="radio"><label class="tab-label" for="tab-set--90-input--2">英文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>This gcs backend driver requires <a class="extlink-pypi reference external" href="https://pypi.org/project/google-cloud-storage/">https://pypi.org/project/google-cloud-storage/</a> and <a class="extlink-pypi reference external" href="https://pypi.org/project/google-cloud-firestore/">https://pypi.org/project/google-cloud-firestore/</a>.</p>
<p>To install, use <strong class="command">gcs</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>gcs<span class="o">]</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a> for information on combining multiple extension
requirements.</p>
</div>
<p>GCS could be configured via the URL provided in <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a>, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;gs://mybucket/some-prefix?gcs_project=myproject&amp;ttl=600&#39;</span>
<span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;gs://mybucket/some-prefix?gcs_project=myproject?firestore_project=myproject2&amp;ttl=600&#39;</span>
</pre></div>
</div>
<p>This backend requires the following configuration directives to be set:</p>
</div>
</div>
<section id="gcs-bucket">
<span id="std-setting-gcs_bucket"></span><h4><code class="docutils literal notranslate"><span class="pre">gcs_bucket</span></code><a class="headerlink" href="#gcs-bucket" title="Link to this heading">¶</a></h4>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--91-input--1" name="tab-set--91" type="radio"><label class="tab-label" for="tab-set--91-input--1">中文</label><div class="tab-content docutils container">
<p>GCS 的存储桶名称。例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcs_bucket</span> <span class="o">=</span> <span class="s1">&#39;bucket_name&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--91-input--2" name="tab-set--91" type="radio"><label class="tab-label" for="tab-set--91-input--2">英文</label><div class="tab-content docutils container">
<p>The gcs bucket name. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcs_bucket</span> <span class="o">=</span> <span class="s1">&#39;bucket_name&#39;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="gcs-project">
<span id="std-setting-gcs_project"></span><h4><code class="docutils literal notranslate"><span class="pre">gcs_project</span></code><a class="headerlink" href="#gcs-project" title="Link to this heading">¶</a></h4>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--92-input--1" name="tab-set--92" type="radio"><label class="tab-label" for="tab-set--92-input--1">中文</label><div class="tab-content docutils container">
<p>GCS 的项目名称。例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcs_project</span> <span class="o">=</span> <span class="s1">&#39;test-project&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--92-input--2" name="tab-set--92" type="radio"><label class="tab-label" for="tab-set--92-input--2">英文</label><div class="tab-content docutils container">
<p>The gcs project name. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcs_project</span> <span class="o">=</span> <span class="s1">&#39;test-project&#39;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="gcs-base-path">
<span id="std-setting-gcs_base_path"></span><h4><code class="docutils literal notranslate"><span class="pre">gcs_base_path</span></code><a class="headerlink" href="#gcs-base-path" title="Link to this heading">¶</a></h4>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--93-input--1" name="tab-set--93" type="radio"><label class="tab-label" for="tab-set--93-input--1">中文</label><div class="tab-content docutils container">
<p>GCS 存储桶中用于存储所有结果键的基础路径。例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcs_base_path</span> <span class="o">=</span> <span class="s1">&#39;/prefix&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--93-input--2" name="tab-set--93" type="radio"><label class="tab-label" for="tab-set--93-input--2">英文</label><div class="tab-content docutils container">
<p>A base path in the gcs bucket to use to store all result keys. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcs_base_path</span> <span class="o">=</span> <span class="s1">&#39;/prefix&#39;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="gcs-ttl">
<h4><code class="docutils literal notranslate"><span class="pre">gcs_ttl</span></code><a class="headerlink" href="#gcs-ttl" title="Link to this heading">¶</a></h4>
<p>Default: 0.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--94-input--1" name="tab-set--94" type="radio"><label class="tab-label" for="tab-set--94-input--1">中文</label><div class="tab-content docutils container">
<p>结果 Blob 的生存时间（秒）。
要求 GCS 存储桶启用 “删除” 对象生命周期管理操作。
可用于在 Cloud Storage 中自动删除结果。</p>
<p>例如，若要在 24 小时后自动删除结果:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcs_ttl</span> <span class="o">=</span> <span class="mi">86400</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--94-input--2" name="tab-set--94" type="radio"><label class="tab-label" for="tab-set--94-input--2">英文</label><div class="tab-content docutils container">
<p>The time to live in seconds for the results blobs.
Requires a GCS bucket with &quot;Delete&quot; Object Lifecycle Management action enabled.
Use it to automatically delete results from Cloud Storage Buckets.</p>
<p>For example to auto remove results after 24 hours:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcs_ttl</span> <span class="o">=</span> <span class="mi">86400</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="gcs-threadpool-maxsize">
<h4><code class="docutils literal notranslate"><span class="pre">gcs_threadpool_maxsize</span></code><a class="headerlink" href="#gcs-threadpool-maxsize" title="Link to this heading">¶</a></h4>
<p>Default: 10.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--95-input--1" name="tab-set--95" type="radio"><label class="tab-label" for="tab-set--95-input--1">中文</label><div class="tab-content docutils container">
<p>用于 GCS 操作的线程池大小。该值也决定连接池大小。
允许控制并发操作的数量。例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcs_threadpool_maxsize</span> <span class="o">=</span> <span class="mi">20</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--95-input--2" name="tab-set--95" type="radio"><label class="tab-label" for="tab-set--95-input--2">英文</label><div class="tab-content docutils container">
<p>Threadpool size for GCS operations. Same value defines the connection pool size.
Allows to control the number of concurrent operations. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcs_threadpool_maxsize</span> <span class="o">=</span> <span class="mi">20</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="firestore-project">
<h4><code class="docutils literal notranslate"><span class="pre">firestore_project</span></code><a class="headerlink" href="#firestore-project" title="Link to this heading">¶</a></h4>
<p>Default: gcs_project.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--96-input--1" name="tab-set--96" type="radio"><label class="tab-label" for="tab-set--96-input--1">中文</label><div class="tab-content docutils container">
<p>用于 Chord 引用计数的 Firestore 项目名称。启用原生 Chord 引用计数。
若未指定，默认为 <a class="reference internal" href="#std-setting-gcs_project"><code class="xref std std-setting docutils literal notranslate"><span class="pre">gcs_project</span></code></a>。
例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">firestore_project</span> <span class="o">=</span> <span class="s1">&#39;test-project2&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--96-input--2" name="tab-set--96" type="radio"><label class="tab-label" for="tab-set--96-input--2">英文</label><div class="tab-content docutils container">
<p>The Firestore project for Chord reference counting. Allows native chord ref counts.
If not specified defaults to <a class="reference internal" href="#std-setting-gcs_project"><code class="xref std std-setting docutils literal notranslate"><span class="pre">gcs_project</span></code></a>.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">firestore_project</span> <span class="o">=</span> <span class="s1">&#39;test-project2&#39;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="id27">
<h4>示例配置<a class="headerlink" href="#id27" title="Link to this heading">¶</a></h4>
<p>Example configuration</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gcs_bucket</span> <span class="o">=</span> <span class="s1">&#39;mybucket&#39;</span>
<span class="n">gcs_project</span> <span class="o">=</span> <span class="s1">&#39;myproject&#39;</span>
<span class="n">gcs_base_path</span> <span class="o">=</span> <span class="s1">&#39;/celery_result_backend&#39;</span>
<span class="n">gcs_ttl</span> <span class="o">=</span> <span class="mi">86400</span>
</pre></div>
</div>
</section>
</section>
<section id="conf-elasticsearch-result-backend">
<span id="id28"></span><h3>Elasticsearch 后端设置<a class="headerlink" href="#conf-elasticsearch-result-backend" title="Link to this heading">¶</a></h3>
<p>Elasticsearch backend settings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--97-input--1" name="tab-set--97" type="radio"><label class="tab-label" for="tab-set--97-input--1">中文</label><div class="tab-content docutils container">
<p>要使用 <a class="reference external" href="https://aws.amazon.com/elasticsearch-service/">Elasticsearch</a> 作为结果后端，只需将 <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> 配置为正确的 URL。</p>
</div>
<input class="tab-input" id="tab-set--97-input--2" name="tab-set--97" type="radio"><label class="tab-label" for="tab-set--97-input--2">英文</label><div class="tab-content docutils container">
<p>To use <a class="reference external" href="https://aws.amazon.com/elasticsearch-service/">Elasticsearch</a> as the result backend you simply need to
configure the <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> setting with the correct URL.</p>
</div>
</div>
<section id="id29">
<h4>示例配置<a class="headerlink" href="#id29" title="Link to this heading">¶</a></h4>
<p>Example configuration</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;elasticsearch://example.com:9200/index_name/doc_type&#39;</span>
</pre></div>
</div>
</section>
<section id="elasticsearch-retry-on-timeout">
<span id="std-setting-elasticsearch_retry_on_timeout"></span><h4><code class="docutils literal notranslate"><span class="pre">elasticsearch_retry_on_timeout</span></code><a class="headerlink" href="#elasticsearch-retry-on-timeout" title="Link to this heading">¶</a></h4>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--98-input--1" name="tab-set--98" type="radio"><label class="tab-label" for="tab-set--98-input--1">中文</label><div class="tab-content docutils container">
<p>是否在超时后尝试切换到其他节点进行重试？</p>
</div>
<input class="tab-input" id="tab-set--98-input--2" name="tab-set--98" type="radio"><label class="tab-label" for="tab-set--98-input--2">英文</label><div class="tab-content docutils container">
<p>Should timeout trigger a retry on different node?</p>
</div>
</div>
</section>
<section id="elasticsearch-max-retries">
<span id="std-setting-elasticsearch_max_retries"></span><h4><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_retries</span></code><a class="headerlink" href="#elasticsearch-max-retries" title="Link to this heading">¶</a></h4>
<p>Default: 3.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--99-input--1" name="tab-set--99" type="radio"><label class="tab-label" for="tab-set--99-input--1">中文</label><div class="tab-content docutils container">
<p>在抛出异常前允许的最大重试次数。</p>
</div>
<input class="tab-input" id="tab-set--99-input--2" name="tab-set--99" type="radio"><label class="tab-label" for="tab-set--99-input--2">英文</label><div class="tab-content docutils container">
<p>Maximum number of retries before an exception is propagated.</p>
</div>
</div>
</section>
<section id="elasticsearch-timeout">
<span id="std-setting-elasticsearch_timeout"></span><h4><code class="docutils literal notranslate"><span class="pre">elasticsearch_timeout</span></code><a class="headerlink" href="#elasticsearch-timeout" title="Link to this heading">¶</a></h4>
<p>Default: 10.0 seconds.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--100-input--1" name="tab-set--100" type="radio"><label class="tab-label" for="tab-set--100-input--1">中文</label><div class="tab-content docutils container">
<p>Elasticsearch 结果后端使用的全局超时时间。</p>
</div>
<input class="tab-input" id="tab-set--100-input--2" name="tab-set--100" type="radio"><label class="tab-label" for="tab-set--100-input--2">英文</label><div class="tab-content docutils container">
<p>Global timeout,used by the elasticsearch result backend.</p>
</div>
</div>
</section>
<section id="elasticsearch-save-meta-as-text">
<span id="std-setting-elasticsearch_save_meta_as_text"></span><h4><code class="docutils literal notranslate"><span class="pre">elasticsearch_save_meta_as_text</span></code><a class="headerlink" href="#elasticsearch-save-meta-as-text" title="Link to this heading">¶</a></h4>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--101-input--1" name="tab-set--101" type="radio"><label class="tab-label" for="tab-set--101-input--1">中文</label><div class="tab-content docutils container">
<p>元数据应以文本还是原生 JSON 格式保存。
结果始终以文本形式序列化。</p>
</div>
<input class="tab-input" id="tab-set--101-input--2" name="tab-set--101" type="radio"><label class="tab-label" for="tab-set--101-input--2">英文</label><div class="tab-content docutils container">
<p>Should meta saved as text or as native json.
Result is always serialized as text.</p>
</div>
</div>
</section>
</section>
<section id="aws-dynamodb">
<span id="conf-dynamodb-result-backend"></span><h3>AWS DynamoDB 后端设置<a class="headerlink" href="#aws-dynamodb" title="Link to this heading">¶</a></h3>
<p>AWS DynamoDB backend settings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--102-input--1" name="tab-set--102" type="radio"><label class="tab-label" for="tab-set--102-input--1">中文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Dynamodb 后端需要依赖 <a class="extlink-pypi reference external" href="https://pypi.org/project/boto3/">https://pypi.org/project/boto3/</a> 库。</p>
<p>要安装此软件包，请使用 <strong class="command">pip</strong>：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>dynamodb<span class="o">]</span>
</pre></div>
</div>
<p>请参阅 <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a> 获取关于组合多个扩展依赖项的信息。</p>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>Dynamodb 后端与定义了排序键（sort key）的表不兼容。</p>
<p>如果你希望基于分区键以外的字段查询结果表，请使用全局二级索引（GSI）。</p>
</div>
<p>此后端要求通过 <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> 设置一个 DynamoDB URL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;dynamodb://aws_access_key_id:aws_secret_access_key@region:port/table?read=n&amp;write=m&#39;</span>
</pre></div>
</div>
<p>例如，指定 AWS 区域和表名:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;dynamodb://@us-east-1/celery_results&#39;</span>
</pre></div>
</div>
<p>或从环境变量中读取 AWS 配置参数，使用默认表名（<code class="docutils literal notranslate"><span class="pre">celery</span></code>）并设置读写吞吐量:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;dynamodb://@/?read=5&amp;write=5&#39;</span>
</pre></div>
</div>
<p>或使用 <a class="reference external" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.html">可下载版本</a>
在本地部署的 <a class="reference external" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.Endpoint.html">DynamoDB</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;dynamodb://@localhost:8000&#39;</span>
</pre></div>
</div>
<p>或使用可下载版本或其他部署在任意主机上的兼容 API 服务:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;dynamodb://@us-east-1&#39;</span>
<span class="n">dynamodb_endpoint_url</span> <span class="o">=</span> <span class="s1">&#39;http://192.168.0.40:8000&#39;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">result_backend</span></code> 中的 DynamoDB URL 字段定义如下：</p>
<ol class="arabic simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">aws_access_key_id</span> <span class="pre">&amp;</span> <span class="pre">aws_secret_access_key</span></code></dt><dd><p>用于访问 AWS API 资源的凭据。也可通过 <a class="extlink-pypi reference external" href="https://pypi.org/project/boto3/">https://pypi.org/project/boto3/</a> 库从多种来源解析，
详见 <a class="reference external" href="http://boto3.readthedocs.io/en/latest/guide/configuration.html#configuring-credentials">此处</a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">region</span></code></dt><dd><p>AWS 区域，例如 <code class="docutils literal notranslate"><span class="pre">us-east-1</span></code>，或 <a class="reference external" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.html">可下载版本</a> 使用的 <code class="docutils literal notranslate"><span class="pre">localhost</span></code>。
可参考 <a class="extlink-pypi reference external" href="https://pypi.org/project/boto3/">https://pypi.org/project/boto3/</a> 的 <a class="reference external" href="http://boto3.readthedocs.io/en/latest/guide/configuration.html#environment-variable-configuration">文档</a> 获取可选值定义。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">port</span></code></dt><dd><p>如果使用的是本地版本，此为本地 DynamoDB 实例的监听端口。
如果 <code class="docutils literal notranslate"><span class="pre">region</span></code> 未设置为 <code class="docutils literal notranslate"><span class="pre">localhost</span></code>，此参数将 <strong>不起作用</strong>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">table</span></code></dt><dd><p>使用的表名，默认值为 <code class="docutils literal notranslate"><span class="pre">celery</span></code>。
表名的允许字符与长度要求可参考
<a class="reference external" href="http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Limits.html#limits-naming-rules">DynamoDB 命名规则</a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">read</span> <span class="pre">&amp;</span> <span class="pre">write</span></code></dt><dd><p>创建的 DynamoDB 表的读/写容量单位，默认均为 <code class="docutils literal notranslate"><span class="pre">1</span></code>。
详细说明可参考 <a class="reference external" href="http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.ProvisionedThroughput.html">吞吐量配置文档</a>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ttl_seconds</span></code></dt><dd><p>结果在过期前的存活时间（秒）。默认不设置过期，并且不修改 DynamoDB 表的 TTL 设置。
如果设置为正数，结果将在该时间后过期；
如果设置为负数，则表示不设置过期，并主动禁用表的 TTL 设置。
注意：短时间内频繁修改 TTL 设置可能会导致限速错误。
详见 <a class="reference external" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/TTL.html">DynamoDB TTL 文档</a>。</p>
</dd>
</dl>
</li>
</ol>
</div>
<input class="tab-input" id="tab-set--102-input--2" name="tab-set--102" type="radio"><label class="tab-label" for="tab-set--102-input--2">英文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The Dynamodb backend requires the <a class="extlink-pypi reference external" href="https://pypi.org/project/boto3/">https://pypi.org/project/boto3/</a> library.</p>
<p>To install this package use <strong class="command">pip</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>dynamodb<span class="o">]</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a> for information on combining multiple extension
requirements.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>The Dynamodb backend is not compatible with tables that have a sort key defined.</p>
<p>If you want to query the results table based on something other than the partition key,
please define a global secondary index (GSI) instead.</p>
</div>
<p>This backend requires the <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a>
setting to be set to a DynamoDB URL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;dynamodb://aws_access_key_id:aws_secret_access_key@region:port/table?read=n&amp;write=m&#39;</span>
</pre></div>
</div>
<p>For example, specifying the AWS region and the table name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;dynamodb://@us-east-1/celery_results&#39;</span>
</pre></div>
</div>
<p>or retrieving AWS configuration parameters from the environment, using the default table name (<code class="docutils literal notranslate"><span class="pre">celery</span></code>)
and specifying read and write provisioned throughput:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;dynamodb://@/?read=5&amp;write=5&#39;</span>
</pre></div>
</div>
<p>or using the <a class="reference external" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.html">downloadable version</a>
of DynamoDB
<a class="reference external" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.Endpoint.html">locally</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;dynamodb://@localhost:8000&#39;</span>
</pre></div>
</div>
<p>or using downloadable version or other service with conforming API deployed on any host:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;dynamodb://@us-east-1&#39;</span>
<span class="n">dynamodb_endpoint_url</span> <span class="o">=</span> <span class="s1">&#39;http://192.168.0.40:8000&#39;</span>
</pre></div>
</div>
<p>The fields of the DynamoDB URL in <code class="docutils literal notranslate"><span class="pre">result_backend</span></code> are defined as follows:</p>
<ol class="arabic simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">aws_access_key_id</span> <span class="pre">&amp;</span> <span class="pre">aws_secret_access_key</span></code></dt><dd><p>The credentials for accessing AWS API resources. These can also be resolved
by the <a class="extlink-pypi reference external" href="https://pypi.org/project/boto3/">https://pypi.org/project/boto3/</a> library from various sources, as
described <a class="reference external" href="http://boto3.readthedocs.io/en/latest/guide/configuration.html#configuring-credentials">here</a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">region</span></code></dt><dd><p>The AWS region, e.g. <code class="docutils literal notranslate"><span class="pre">us-east-1</span></code> or <code class="docutils literal notranslate"><span class="pre">localhost</span></code> for the <a class="reference external" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DynamoDBLocal.html">Downloadable Version</a>.
See the <a class="extlink-pypi reference external" href="https://pypi.org/project/boto3/">https://pypi.org/project/boto3/</a> library <a class="reference external" href="http://boto3.readthedocs.io/en/latest/guide/configuration.html#environment-variable-configuration">documentation</a>
for definition options.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">port</span></code></dt><dd><p>The listening port of the local DynamoDB instance, if you are using the downloadable version.
If you have not specified the <code class="docutils literal notranslate"><span class="pre">region</span></code> parameter as <code class="docutils literal notranslate"><span class="pre">localhost</span></code>,
setting this parameter has <strong>no effect</strong>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">table</span></code></dt><dd><p>Table name to use. Default is <code class="docutils literal notranslate"><span class="pre">celery</span></code>.
See the <a class="reference external" href="http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Limits.html#limits-naming-rules">DynamoDB Naming Rules</a>
for information on the allowed characters and length.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">read</span> <span class="pre">&amp;</span> <span class="pre">write</span></code></dt><dd><p>The Read &amp; Write Capacity Units for the created DynamoDB table. Default is <code class="docutils literal notranslate"><span class="pre">1</span></code> for both read and write.
More details can be found in the <a class="reference external" href="http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.ProvisionedThroughput.html">Provisioned Throughput documentation</a>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ttl_seconds</span></code></dt><dd><p>Time-to-live (in seconds) for results before they expire. The default is to
not expire results, while also leaving the DynamoDB table's Time to Live
settings untouched. If <code class="docutils literal notranslate"><span class="pre">ttl_seconds</span></code> is set to a positive value, results
will expire after the specified number of seconds. Setting <code class="docutils literal notranslate"><span class="pre">ttl_seconds</span></code>
to a negative value means to not expire results, and also to actively
disable the DynamoDB table's Time to Live setting. Note that trying to
change a table's Time to Live setting multiple times in quick succession
will cause a throttling error. More details can be found in the
<a class="reference external" href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/TTL.html">DynamoDB TTL documentation</a></p>
</dd>
</dl>
</li>
</ol>
</div>
</div>
</section>
<section id="conf-ironcache-result-backend">
<span id="id37"></span><h3>IronCache 后端设置<a class="headerlink" href="#conf-ironcache-result-backend" title="Link to this heading">¶</a></h3>
<p>IronCache backend settings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--103-input--1" name="tab-set--103" type="radio"><label class="tab-label" for="tab-set--103-input--1">中文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>IronCache 后端需要 <a class="extlink-pypi reference external" href="https://pypi.org/project/iron_celery/">https://pypi.org/project/iron_celery/</a> 库：</p>
<p>要安装此软件包，请使用 <strong class="command">pip</strong>：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>iron_celery
</pre></div>
</div>
</div>
<p>IronCache 可通过 <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> 中提供的 URL 配置，例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;ironcache://project_id:token@&#39;</span>
</pre></div>
</div>
<p>或修改缓存名称:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ironcache</span><span class="p">::</span><span class="o">//</span><span class="n">project_id</span><span class="p">:</span><span class="n">token</span><span class="o">@/</span><span class="n">awesomecache</span>
</pre></div>
</div>
<p>更多信息参见： <a class="reference external" href="https://github.com/iron-io/iron_celery">https://github.com/iron-io/iron_celery</a></p>
</div>
<input class="tab-input" id="tab-set--103-input--2" name="tab-set--103" type="radio"><label class="tab-label" for="tab-set--103-input--2">英文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The IronCache backend requires the <a class="extlink-pypi reference external" href="https://pypi.org/project/iron_celery/">https://pypi.org/project/iron_celery/</a> library:</p>
<p>To install this package use <strong class="command">pip</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>iron_celery
</pre></div>
</div>
</div>
<p>IronCache is configured via the URL provided in <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a>, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;ironcache://project_id:token@&#39;</span>
</pre></div>
</div>
<p>Or to change the cache name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ironcache</span><span class="p">::</span><span class="o">//</span><span class="n">project_id</span><span class="p">:</span><span class="n">token</span><span class="o">@/</span><span class="n">awesomecache</span>
</pre></div>
</div>
<p>For more information, see: <a class="reference external" href="https://github.com/iron-io/iron_celery">https://github.com/iron-io/iron_celery</a></p>
</div>
</div>
</section>
<section id="conf-couchbase-result-backend">
<span id="id38"></span><h3>Couchbase 后端设置<a class="headerlink" href="#conf-couchbase-result-backend" title="Link to this heading">¶</a></h3>
<p>Couchbase backend settings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--104-input--1" name="tab-set--104" type="radio"><label class="tab-label" for="tab-set--104-input--1">中文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Couchbase 后端依赖 <a class="extlink-pypi reference external" href="https://pypi.org/project/couchbase/">https://pypi.org/project/couchbase/</a> 库。</p>
<p>安装该库可使用 <strong class="command">pip</strong> 命令：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>couchbase<span class="o">]</span>
</pre></div>
</div>
<p>有关如何组合多个扩展依赖项的说明，请参见 <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a>。</p>
</div>
<p>该后端可通过 <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> 设置为 Couchbase URL 进行配置：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;couchbase://username:password@host:port/bucket&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--104-input--2" name="tab-set--104" type="radio"><label class="tab-label" for="tab-set--104-input--2">英文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The Couchbase backend requires the <a class="extlink-pypi reference external" href="https://pypi.org/project/couchbase/">https://pypi.org/project/couchbase/</a> library.</p>
<p>To install this package use <strong class="command">pip</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>couchbase<span class="o">]</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a> for instructions how to combine multiple extension
requirements.</p>
</div>
<p>This backend can be configured via the <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a>
set to a Couchbase URL:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;couchbase://username:password@host:port/bucket&#39;</span>
</pre></div>
</div>
</div>
</div>
<section id="couchbase-backend-settings">
<span id="std-setting-couchbase_backend_settings"></span><h4><code class="docutils literal notranslate"><span class="pre">couchbase_backend_settings</span></code><a class="headerlink" href="#couchbase-backend-settings" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code> (empty mapping).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--105-input--1" name="tab-set--105" type="radio"><label class="tab-label" for="tab-set--105-input--1">中文</label><div class="tab-content docutils container">
<p>这是一个字典，支持以下键：</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">host</span></code></dt><dd><p>Couchbase 服务器的主机名，默认为 <code class="docutils literal notranslate"><span class="pre">localhost</span></code>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">port</span></code></dt><dd><p>Couchbase 服务器监听的端口，默认为 <code class="docutils literal notranslate"><span class="pre">8091</span></code>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">bucket</span></code></dt><dd><p>Couchbase 服务器写入的默认 bucket，默认为 <code class="docutils literal notranslate"><span class="pre">default</span></code>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">username</span></code></dt><dd><p>用于认证 Couchbase 服务器的用户名（可选）。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">password</span></code></dt><dd><p>用于认证 Couchbase 服务器的密码（可选）。</p>
</dd>
</dl>
</li>
</ul>
</div>
<input class="tab-input" id="tab-set--105-input--2" name="tab-set--105" type="radio"><label class="tab-label" for="tab-set--105-input--2">英文</label><div class="tab-content docutils container">
<p>This is a dict supporting the following keys:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">host</span></code></dt><dd><p>Host name of the Couchbase server. Defaults to <code class="docutils literal notranslate"><span class="pre">localhost</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">port</span></code></dt><dd><p>The port the Couchbase server is listening to. Defaults to <code class="docutils literal notranslate"><span class="pre">8091</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">bucket</span></code></dt><dd><p>The default bucket the Couchbase server is writing to.
Defaults to <code class="docutils literal notranslate"><span class="pre">default</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">username</span></code></dt><dd><p>User name to authenticate to the Couchbase server as (optional).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">password</span></code></dt><dd><p>Password to authenticate to the Couchbase server (optional).</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
</section>
</section>
<section id="conf-arangodb-result-backend">
<span id="id39"></span><h3>ArangoDB 后端设置<a class="headerlink" href="#conf-arangodb-result-backend" title="Link to this heading">¶</a></h3>
<p>ArangoDB backend settings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--106-input--1" name="tab-set--106" type="radio"><label class="tab-label" for="tab-set--106-input--1">中文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>ArangoDB 后端依赖 <a class="extlink-pypi reference external" href="https://pypi.org/project/pyArango/">https://pypi.org/project/pyArango/</a> 库。</p>
<p>安装该库可使用 <strong class="command">pip</strong> 命令：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>arangodb<span class="o">]</span>
</pre></div>
</div>
<p>有关如何组合多个扩展依赖项的说明，请参见 <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a>。</p>
</div>
<p>该后端可通过 <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> 设置为 ArangoDB URL 进行配置：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;arangodb://username:password@host:port/database/collection&#39;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--106-input--2" name="tab-set--106" type="radio"><label class="tab-label" for="tab-set--106-input--2">英文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The ArangoDB backend requires the <a class="extlink-pypi reference external" href="https://pypi.org/project/pyArango/">https://pypi.org/project/pyArango/</a> library.</p>
<p>To install this package use <strong class="command">pip</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>arangodb<span class="o">]</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a> for instructions how to combine multiple extension
requirements.</p>
</div>
<p>This backend can be configured via the <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a>
set to a ArangoDB URL:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;arangodb://username:password@host:port/database/collection&#39;</span>
</pre></div>
</div>
</div>
</div>
<section id="arangodb-backend-settings">
<span id="std-setting-arangodb_backend_settings"></span><h4><code class="docutils literal notranslate"><span class="pre">arangodb_backend_settings</span></code><a class="headerlink" href="#arangodb-backend-settings" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code> (empty mapping).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--107-input--1" name="tab-set--107" type="radio"><label class="tab-label" for="tab-set--107-input--1">中文</label><div class="tab-content docutils container">
<p>这是一个字典，支持以下键：</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">host</span></code></dt><dd><p>ArangoDB 服务器的主机名，默认为 <code class="docutils literal notranslate"><span class="pre">localhost</span></code>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">port</span></code></dt><dd><p>ArangoDB 服务器监听的端口，默认为 <code class="docutils literal notranslate"><span class="pre">8529</span></code>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">database</span></code></dt><dd><p>ArangoDB 服务器写入的默认数据库，默认为 <code class="docutils literal notranslate"><span class="pre">celery</span></code>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">collection</span></code></dt><dd><p>ArangoDB 数据库中写入的默认集合，默认为 <code class="docutils literal notranslate"><span class="pre">celery</span></code>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">username</span></code></dt><dd><p>用于认证 ArangoDB 服务器的用户名（可选）。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">password</span></code></dt><dd><p>用于认证 ArangoDB 服务器的密码（可选）。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">http_protocol</span></code></dt><dd><p>ArangoDB 连接中使用的 HTTP 协议，默认为 <code class="docutils literal notranslate"><span class="pre">http</span></code>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">verify</span></code></dt><dd><p>建立 ArangoDB HTTPS 连接时是否执行证书校验，默认为 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
</dd>
</dl>
</li>
</ul>
</div>
<input class="tab-input" id="tab-set--107-input--2" name="tab-set--107" type="radio"><label class="tab-label" for="tab-set--107-input--2">英文</label><div class="tab-content docutils container">
<p>This is a dict supporting the following keys:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">host</span></code></p>
<blockquote>
<div><p>Host name of the ArangoDB server. Defaults to <code class="docutils literal notranslate"><span class="pre">localhost</span></code>.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">port</span></code></p>
<blockquote>
<div><p>The port the ArangoDB server is listening to. Defaults to <code class="docutils literal notranslate"><span class="pre">8529</span></code>.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">database</span></code></p>
<blockquote>
<div><p>The default database in the ArangoDB server is writing to.
Defaults to <code class="docutils literal notranslate"><span class="pre">celery</span></code>.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">collection</span></code></p>
<blockquote>
<div><p>The default collection in the ArangoDB servers database is writing to.
Defaults to <code class="docutils literal notranslate"><span class="pre">celery</span></code>.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">username</span></code></p>
<blockquote>
<div><p>User name to authenticate to the ArangoDB server as (optional).</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">password</span></code></p>
<blockquote>
<div><p>Password to authenticate to the ArangoDB server (optional).</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">http_protocol</span></code></p>
<blockquote>
<div><p>HTTP Protocol in ArangoDB server connection.
Defaults to <code class="docutils literal notranslate"><span class="pre">http</span></code>.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">verify</span></code></p>
<blockquote>
<div><p>HTTPS Verification check while creating the ArangoDB connection.
Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</div></blockquote>
</li>
</ul>
</div>
</div>
</section>
</section>
<section id="conf-cosmosdbsql-result-backend">
<span id="id40"></span><h3>CosmosDB 后端设置（实验性）<a class="headerlink" href="#conf-cosmosdbsql-result-backend" title="Link to this heading">¶</a></h3>
<p>CosmosDB backend settings (experimental)</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--108-input--1" name="tab-set--108" type="radio"><label class="tab-label" for="tab-set--108-input--1">中文</label><div class="tab-content docutils container">
<p>要使用 <a class="reference external" href="https://azure.microsoft.com/en-us/services/cosmos-db/">CosmosDB</a> 作为结果后端，仅需将 <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> 设置为正确的 URL 即可。</p>
</div>
<input class="tab-input" id="tab-set--108-input--2" name="tab-set--108" type="radio"><label class="tab-label" for="tab-set--108-input--2">英文</label><div class="tab-content docutils container">
<p>To use <a class="reference external" href="https://azure.microsoft.com/en-us/services/cosmos-db/">CosmosDB</a> as the result backend, you simply need to configure the
<a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> setting with the correct URL.</p>
</div>
</div>
<section id="id41">
<h4>示例配置<a class="headerlink" href="#id41" title="Link to this heading">¶</a></h4>
<p>Example configuration</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;cosmosdbsql://:</span><span class="si">{InsertAccountPrimaryKeyHere}</span><span class="s1">@</span><span class="si">{InsertAccountNameHere}</span><span class="s1">.documents.azure.com&#39;</span>
</pre></div>
</div>
</section>
<section id="cosmosdbsql-database-name">
<span id="std-setting-cosmosdbsql_database_name"></span><h4><code class="docutils literal notranslate"><span class="pre">cosmosdbsql_database_name</span></code><a class="headerlink" href="#cosmosdbsql-database-name" title="Link to this heading">¶</a></h4>
<p>Default: celerydb.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--109-input--1" name="tab-set--109" type="radio"><label class="tab-label" for="tab-set--109-input--1">中文</label><div class="tab-content docutils container">
<p>存储结果的数据库名称。</p>
</div>
<input class="tab-input" id="tab-set--109-input--2" name="tab-set--109" type="radio"><label class="tab-label" for="tab-set--109-input--2">英文</label><div class="tab-content docutils container">
<p>The name for the database in which to store the results.</p>
</div>
</div>
</section>
<section id="cosmosdbsql-collection-name">
<span id="std-setting-cosmosdbsql_collection_name"></span><h4><code class="docutils literal notranslate"><span class="pre">cosmosdbsql_collection_name</span></code><a class="headerlink" href="#cosmosdbsql-collection-name" title="Link to this heading">¶</a></h4>
<p>Default: celerycol.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--110-input--1" name="tab-set--110" type="radio"><label class="tab-label" for="tab-set--110-input--1">中文</label><div class="tab-content docutils container">
<p>存储结果的集合名称。</p>
</div>
<input class="tab-input" id="tab-set--110-input--2" name="tab-set--110" type="radio"><label class="tab-label" for="tab-set--110-input--2">英文</label><div class="tab-content docutils container">
<p>The name of the collection in which to store the results.</p>
</div>
</div>
</section>
<section id="cosmosdbsql-consistency-level">
<span id="std-setting-cosmosdbsql_consistency_level"></span><h4><code class="docutils literal notranslate"><span class="pre">cosmosdbsql_consistency_level</span></code><a class="headerlink" href="#cosmosdbsql-consistency-level" title="Link to this heading">¶</a></h4>
<p>Default: Session.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--111-input--1" name="tab-set--111" type="radio"><label class="tab-label" for="tab-set--111-input--1">中文</label><div class="tab-content docutils container">
<p>表示 Azure Cosmos DB 客户端操作支持的一致性级别。</p>
<p>一致性级别按强度顺序为：Strong、BoundedStaleness、Session、ConsistentPrefix 和 Eventual。</p>
</div>
<input class="tab-input" id="tab-set--111-input--2" name="tab-set--111" type="radio"><label class="tab-label" for="tab-set--111-input--2">英文</label><div class="tab-content docutils container">
<p>Represents the consistency levels supported for Azure Cosmos DB client operations.</p>
<p>Consistency levels by order of strength are: Strong, BoundedStaleness, Session, ConsistentPrefix and Eventual.</p>
</div>
</div>
</section>
<section id="cosmosdbsql-max-retry-attempts">
<span id="std-setting-cosmosdbsql_max_retry_attempts"></span><h4><code class="docutils literal notranslate"><span class="pre">cosmosdbsql_max_retry_attempts</span></code><a class="headerlink" href="#cosmosdbsql-max-retry-attempts" title="Link to this heading">¶</a></h4>
<p>Default: 9.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--112-input--1" name="tab-set--112" type="radio"><label class="tab-label" for="tab-set--112-input--1">中文</label><div class="tab-content docutils container">
<p>执行请求的最大重试次数。</p>
</div>
<input class="tab-input" id="tab-set--112-input--2" name="tab-set--112" type="radio"><label class="tab-label" for="tab-set--112-input--2">英文</label><div class="tab-content docutils container">
<p>Maximum number of retries to be performed for a request.</p>
</div>
</div>
</section>
<section id="cosmosdbsql-max-retry-wait-time">
<span id="std-setting-cosmosdbsql_max_retry_wait_time"></span><h4><code class="docutils literal notranslate"><span class="pre">cosmosdbsql_max_retry_wait_time</span></code><a class="headerlink" href="#cosmosdbsql-max-retry-wait-time" title="Link to this heading">¶</a></h4>
<p>Default: 30.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--113-input--1" name="tab-set--113" type="radio"><label class="tab-label" for="tab-set--113-input--1">中文</label><div class="tab-content docutils container">
<p>在重试期间等待请求完成的最大等待时间（单位为秒）。</p>
</div>
<input class="tab-input" id="tab-set--113-input--2" name="tab-set--113" type="radio"><label class="tab-label" for="tab-set--113-input--2">英文</label><div class="tab-content docutils container">
<p>Maximum wait time in seconds to wait for a request while the retries are happening.</p>
</div>
</div>
</section>
</section>
<section id="conf-couchdb-result-backend">
<span id="id42"></span><h3>CouchDB 后端设置<a class="headerlink" href="#conf-couchdb-result-backend" title="Link to this heading">¶</a></h3>
<p>CouchDB backend settings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--114-input--1" name="tab-set--114" type="radio"><label class="tab-label" for="tab-set--114-input--1">中文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>CouchDB 后端依赖 <a class="extlink-pypi reference external" href="https://pypi.org/project/pycouchdb/">https://pypi.org/project/pycouchdb/</a> 库：</p>
<p>安装该 CouchDB 库可使用 <strong class="command">pip</strong> 命令：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>couchdb<span class="o">]</span>
</pre></div>
</div>
<p>有关如何组合多个扩展依赖项的说明，请参见 <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a>。</p>
</div>
<p>该后端可通过 <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a> 设置为 CouchDB URL 进行配置:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;couchdb://username:password@host:port/container&#39;</span>
</pre></div>
</div>
<p>URL 由以下部分组成：</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">username</span></code></dt><dd><p>用于认证 CouchDB 服务器的用户名（可选）。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">password</span></code></dt><dd><p>用于认证 CouchDB 服务器的密码（可选）。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">host</span></code></dt><dd><p>CouchDB 服务器的主机名，默认为 <code class="docutils literal notranslate"><span class="pre">localhost</span></code>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">port</span></code></dt><dd><p>CouchDB 服务器监听的端口，默认为 <code class="docutils literal notranslate"><span class="pre">8091</span></code>。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">container</span></code></dt><dd><p>CouchDB 服务器写入的默认容器，默认为 <code class="docutils literal notranslate"><span class="pre">default</span></code>。</p>
</dd>
</dl>
</li>
</ul>
</div>
<input class="tab-input" id="tab-set--114-input--2" name="tab-set--114" type="radio"><label class="tab-label" for="tab-set--114-input--2">英文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The CouchDB backend requires the <a class="extlink-pypi reference external" href="https://pypi.org/project/pycouchdb/">https://pypi.org/project/pycouchdb/</a> library:</p>
<p>To install this Couchbase package use <strong class="command">pip</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>celery<span class="o">[</span>couchdb<span class="o">]</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../getting-started/introduction.html#bundles"><span class="std std-ref">软件包</span></a> for information on combining multiple extension
requirements.</p>
</div>
<p>This backend can be configured via the <a class="reference internal" href="#std-setting-result_backend"><code class="xref std std-setting docutils literal notranslate"><span class="pre">result_backend</span></code></a>
set to a CouchDB URL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;couchdb://username:password@host:port/container&#39;</span>
</pre></div>
</div>
<p>The URL is formed out of the following parts:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">username</span></code></dt><dd><p>User name to authenticate to the CouchDB server as (optional).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">password</span></code></dt><dd><p>Password to authenticate to the CouchDB server (optional).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">host</span></code></dt><dd><p>Host name of the CouchDB server. Defaults to <code class="docutils literal notranslate"><span class="pre">localhost</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">port</span></code></dt><dd><p>The port the CouchDB server is listening to. Defaults to <code class="docutils literal notranslate"><span class="pre">8091</span></code>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">container</span></code></dt><dd><p>The default container the CouchDB server is writing to.
Defaults to <code class="docutils literal notranslate"><span class="pre">default</span></code>.</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
</section>
<section id="conf-filesystem-result-backend">
<span id="id43"></span><h3>文件系统后端设置<a class="headerlink" href="#conf-filesystem-result-backend" title="Link to this heading">¶</a></h3>
<p>File-system backend settings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--115-input--1" name="tab-set--115" type="radio"><label class="tab-label" for="tab-set--115-input--1">中文</label><div class="tab-content docutils container">
<p>该后端也可以使用文件 URL 配置，例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CELERY_RESULT_BACKEND</span> <span class="o">=</span> <span class="s1">&#39;file:///var/celery/results&#39;</span>
</pre></div>
</div>
<p>所配置的目录必须对使用该后端的所有服务器可共享并具有可写权限。</p>
<p>如果你仅在单机上试用 Celery，可以直接使用该后端而无需额外配置。
对于大型集群，你可以使用 NFS、 <a class="reference external" href="http://www.gluster.org/">GlusterFS</a>、 CIFS、 <a class="reference external" href="http://hadoop.apache.org/">HDFS</a> （使用 FUSE）或其他任何文件系统。</p>
</div>
<input class="tab-input" id="tab-set--115-input--2" name="tab-set--115" type="radio"><label class="tab-label" for="tab-set--115-input--2">英文</label><div class="tab-content docutils container">
<p>This backend can be configured using a file URL, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CELERY_RESULT_BACKEND</span> <span class="o">=</span> <span class="s1">&#39;file:///var/celery/results&#39;</span>
</pre></div>
</div>
<p>The configured directory needs to be shared and writable by all servers using
the backend.</p>
<p>If you're trying Celery on a single system you can simply use the backend
without any further configuration. For larger clusters you could use NFS,
<a class="reference external" href="http://www.gluster.org/">GlusterFS</a>, CIFS, <a class="reference external" href="http://hadoop.apache.org/">HDFS</a> (using FUSE), or any other file-system.</p>
</div>
</div>
</section>
<section id="conf-consul-result-backend">
<span id="id44"></span><h3>Consul 键值存储后端设置<a class="headerlink" href="#conf-consul-result-backend" title="Link to this heading">¶</a></h3>
<p>Consul K/V store backend settings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--116-input--1" name="tab-set--116" type="radio"><label class="tab-label" for="tab-set--116-input--1">中文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Consul 后端需要安装 <a class="extlink-pypi reference external" href="https://pypi.org/project/python-consul2/">https://pypi.org/project/python-consul2/</a> 库：</p>
<p>使用 <strong class="command">pip</strong> 安装此软件包：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>python-consul2
</pre></div>
</div>
</div>
<p>Consul 后端可以通过 URL 进行配置，例如:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CELERY_RESULT_BACKEND</span> <span class="o">=</span> <span class="s1">&#39;consul://localhost:8500/&#39;</span>
</pre></div>
</div>
<p>或:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;consul://localhost:8500/&#39;</span>
</pre></div>
</div>
<p>该后端将在 Consul 的 K/V 存储中以独立键的形式存储结果。
该后端支持使用 Consul 中的 TTL 自动过期结果。
URL 的完整语法如下：</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>consul://host:port[?one_client=1]
</pre></div>
</div>
<p>该 URL 由以下部分组成：</p>
<ul>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">host</span></code></dt><dd><p>Consul 服务器的主机名。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">port</span></code></dt><dd><p>Consul 服务器监听的端口。</p>
</dd>
</dl>
</li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">one_client</span></code></dt><dd><p>默认情况下，为了确保正确性，该后端在每次操作时都会使用独立的客户端连接。
在负载极高的情况下，频繁创建新连接可能导致 Consul 服务器返回 HTTP 429 “连接过多” 错误。
推荐的处理方式是参考此补丁为 <code class="docutils literal notranslate"><span class="pre">python-consul2</span></code> 启用重试功能：
<a class="reference external" href="https://github.com/poppyred/python-consul2/pull/31">https://github.com/poppyred/python-consul2/pull/31</a>。</p>
<p>或者，如果设置了 <code class="docutils literal notranslate"><span class="pre">one_client</span></code> 参数，则所有操作将复用单个客户端连接。
这样可以避免 HTTP 429 错误，但后端存储结果的可靠性可能会降低。</p>
</dd>
</dl>
</li>
</ul>
</div>
<input class="tab-input" id="tab-set--116-input--2" name="tab-set--116" type="radio"><label class="tab-label" for="tab-set--116-input--2">英文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The Consul backend requires the <a class="extlink-pypi reference external" href="https://pypi.org/project/python-consul2/">https://pypi.org/project/python-consul2/</a> library:</p>
<p>To install this package use <strong class="command">pip</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>python-consul2
</pre></div>
</div>
</div>
<p>The Consul backend can be configured using a URL, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CELERY_RESULT_BACKEND</span> <span class="o">=</span> <span class="s1">&#39;consul://localhost:8500/&#39;</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_backend</span> <span class="o">=</span> <span class="s1">&#39;consul://localhost:8500/&#39;</span>
</pre></div>
</div>
<p>The backend will store results in the K/V store of Consul
as individual keys. The backend supports auto expire of results using TTLs in
Consul. The full syntax of the URL is:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>consul://host:port[?one_client=1]
</pre></div>
</div>
<p>The URL is formed out of the following parts:</p>
<ul>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">host</span></code></dt><dd><p>Host name of the Consul server.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">port</span></code></dt><dd><p>The port the Consul server is listening to.</p>
</dd>
</dl>
</li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">one_client</span></code></dt><dd><p>By default, for correctness, the backend uses a separate client connection
per operation. In cases of extreme load, the rate of creation of new
connections can cause HTTP 429 &quot;too many connections&quot; error responses from
the Consul server when under load. The recommended way to handle this is to
enable retries in <code class="docutils literal notranslate"><span class="pre">python-consul2</span></code> using the patch at
<a class="reference external" href="https://github.com/poppyred/python-consul2/pull/31">https://github.com/poppyred/python-consul2/pull/31</a>.</p>
<p>Alternatively, if <code class="docutils literal notranslate"><span class="pre">one_client</span></code> is set, a single client connection will be
used for all operations instead. This should eliminate the HTTP 429 errors,
but the storage of results in the backend can become unreliable.</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
</section>
<section id="conf-messaging">
<span id="id45"></span><h3>消息路由<a class="headerlink" href="#conf-messaging" title="Link to this heading">¶</a></h3>
<p>Message Routin</p>
<section id="task-queues">
<span id="std-setting-task_queues"></span><span id="conf-messaging-routing"></span><h4><code class="docutils literal notranslate"><span class="pre">task_queues</span></code><a class="headerlink" href="#task-queues" title="Link to this heading">¶</a></h4>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--117-input--1" name="tab-set--117" type="radio"><label class="tab-label" for="tab-set--117-input--1">中文</label><div class="tab-content docutils container">
<p>默认值：<code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code> （队列将从默认队列设置中获取）。</p>
<p>大多数用户无需手动设置此选项，而应使用
<a class="reference internal" href="routing.html#routing-automatic"><span class="std std-ref">自动路由机制</span></a>。</p>
<p>如果确实需要配置高级路由策略，该设置应为
一个由 <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/main/reference/kombu.html#kombu.Queue" title="（在 Kombu v5.5）"><code class="xref py py-class docutils literal notranslate"><span class="pre">kombu.Queue</span></code></a> 对象组成的列表，Worker 将从中消费任务。</p>
<p>需要注意的是，Worker 可通过 <a class="reference internal" href="../reference/cli.html#cmdoption-celery-worker-Q"><code class="xref std std-option docutils literal notranslate"><span class="pre">-Q</span></code></a> 选项覆盖该设置，
或使用 <a class="reference internal" href="../reference/cli.html#cmdoption-celery-worker-X"><code class="xref std std-option docutils literal notranslate"><span class="pre">-X</span></code></a> 选项排除该列表中的部分队列（按名称）。</p>
<p>详见 <a class="reference internal" href="routing.html#routing-basics"><span class="std std-ref">基础知识</span></a> 了解更多信息。</p>
<p>默认使用名为 <code class="docutils literal notranslate"><span class="pre">celery</span></code> 的队列/交换机/绑定键，
交换机类型为 <code class="docutils literal notranslate"><span class="pre">direct</span></code>。</p>
<p>另见 <a class="reference internal" href="#std-setting-task_routes"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_routes</span></code></a></p>
</div>
<input class="tab-input" id="tab-set--117-input--2" name="tab-set--117" type="radio"><label class="tab-label" for="tab-set--117-input--2">英文</label><div class="tab-content docutils container">
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code> (queue taken from default queue settings).</p>
<p>Most users will not want to specify this setting and should rather use
the <a class="reference internal" href="routing.html#routing-automatic"><span class="std std-ref">automatic routing facilities</span></a>.</p>
<p>If you really want to configure advanced routing, this setting should
be a list of <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/main/reference/kombu.html#kombu.Queue" title="（在 Kombu v5.5）"><code class="xref py py-class docutils literal notranslate"><span class="pre">kombu.Queue</span></code></a> objects the worker will consume from.</p>
<p>Note that workers can be overridden this setting via the
<a class="reference internal" href="../reference/cli.html#cmdoption-celery-worker-Q"><code class="xref std std-option docutils literal notranslate"><span class="pre">-Q</span></code></a> option, or individual queues from this
list (by name) can be excluded using the <a class="reference internal" href="../reference/cli.html#cmdoption-celery-worker-X"><code class="xref std std-option docutils literal notranslate"><span class="pre">-X</span></code></a>
option.</p>
<p>Also see <a class="reference internal" href="routing.html#routing-basics"><span class="std std-ref">基础知识</span></a> for more information.</p>
<p>The default is a queue/exchange/binding key of <code class="docutils literal notranslate"><span class="pre">celery</span></code>, with
exchange type <code class="docutils literal notranslate"><span class="pre">direct</span></code>.</p>
<p>See also <a class="reference internal" href="#std-setting-task_routes"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_routes</span></code></a></p>
</div>
</div>
</section>
<section id="task-routes">
<span id="std-setting-task_routes"></span><h4><code class="docutils literal notranslate"><span class="pre">task_routes</span></code><a class="headerlink" href="#task-routes" title="Link to this heading">¶</a></h4>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--118-input--1" name="tab-set--118" type="radio"><label class="tab-label" for="tab-set--118-input--1">中文</label><div class="tab-content docutils container">
<p>默认值：<code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>。</p>
<p>该设置应为一个路由器列表，或一个用于将任务路由到队列的路由器。
在确定任务最终投递位置时，系统会按顺序调用这些路由器。</p>
<p>路由器可按以下几种形式指定：</p>
<ul class="simple">
<li><p>函数，签名为 <code class="docutils literal notranslate"><span class="pre">(name,</span> <span class="pre">args,</span> <span class="pre">kwargs,</span> <span class="pre">options,</span> <span class="pre">task=None,</span> <span class="pre">**kwargs)</span></code></p></li>
<li><p>字符串，提供指向路由函数的路径。</p></li>
<li><p>字典，包含路由器说明：将转换为 <code class="xref py py-class docutils literal notranslate"><span class="pre">celery.routes.MapRoute</span></code> 实例。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(pattern,</span> <span class="pre">route)</span></code> 元组组成的列表：将转换为 <code class="xref py py-class docutils literal notranslate"><span class="pre">celery.routes.MapRoute</span></code> 实例。</p></li>
</ul>
<p>示例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">task_routes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;celery.ping&#39;</span><span class="p">:</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
    <span class="s1">&#39;mytasks.add&#39;</span><span class="p">:</span> <span class="s1">&#39;cpu-bound&#39;</span><span class="p">,</span>
    <span class="s1">&#39;feed.tasks.*&#39;</span><span class="p">:</span> <span class="s1">&#39;feeds&#39;</span><span class="p">,</span>                           <span class="c1"># &lt;-- 通配符模式</span>
    <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(image|video)\.tasks\..*&#39;</span><span class="p">):</span> <span class="s1">&#39;media&#39;</span><span class="p">,</span>  <span class="c1"># &lt;-- 正则表达式</span>
    <span class="s1">&#39;video.encode&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;queue&#39;</span><span class="p">:</span> <span class="s1">&#39;video&#39;</span><span class="p">,</span>
        <span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="s1">&#39;media&#39;</span><span class="p">,</span>
        <span class="s1">&#39;routing_key&#39;</span><span class="p">:</span> <span class="s1">&#39;media.video.encode&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="n">task_routes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;myapp.tasks.route_task&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;celery.ping&#39;</span><span class="p">:</span> <span class="s1">&#39;default&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>其中 <code class="docutils literal notranslate"><span class="pre">myapp.tasks.route_task</span></code> 可以是：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">route_task</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">task</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">task</span> <span class="o">==</span> <span class="s1">&#39;celery.ping&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;queue&#39;</span><span class="p">:</span> <span class="s1">&#39;default&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">route_task</span></code> 可返回字符串或字典。
字符串表示 <a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a> 中的队列名；
字典表示自定义路由设置。</p>
<p>在发送任务时，系统将依序查询各路由器。
第一个返回非 <code class="docutils literal notranslate"><span class="pre">None</span></code> 的路由器即为选中路由，
任务消息的选项将与该路由配置合并，任务设置优先。</p>
<p>例如，调用 <code class="xref py py-func docutils literal notranslate"><span class="pre">apply_async()</span></code> 传入如下参数：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<dl class="simple">
<dt>Task.apply_async(immediate=False, exchange='video',</dt><dd><p>routing_key='video.compress')</p>
</dd>
</dl>
<p>而某路由器返回：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;immediate&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="s1">&#39;urgent&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>则最终消息选项为：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">immediate</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s1">&#39;video&#39;</span><span class="p">,</span> <span class="n">routing_key</span><span class="o">=</span><span class="s1">&#39;video.compress&#39;</span>
</pre></div>
</div>
<p>（还包括 <a class="reference internal" href="../reference/celery.app.task.html#celery.app.task.Task" title="celery.app.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a> 类中定义的默认消息选项）</p>
<p>在合并 <a class="reference internal" href="#std-setting-task_routes"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_routes</span></code></a> 与 <a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a> 的设置时，
前者具有更高优先级。</p>
<p>例如，设置如下：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">task_queues</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;cpubound&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="s1">&#39;cpubound&#39;</span><span class="p">,</span>
        <span class="s1">&#39;routing_key&#39;</span><span class="p">:</span> <span class="s1">&#39;cpubound&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="n">task_routes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;tasks.add&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;queue&#39;</span><span class="p">:</span> <span class="s1">&#39;cpubound&#39;</span><span class="p">,</span>
        <span class="s1">&#39;routing_key&#39;</span><span class="p">:</span> <span class="s1">&#39;tasks.add&#39;</span><span class="p">,</span>
        <span class="s1">&#39;serializer&#39;</span><span class="p">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>则 <code class="docutils literal notranslate"><span class="pre">tasks.add</span></code> 的最终路由选项为：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;exchange&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;cpubound&#39;</span><span class="p">,</span>
<span class="s1">&#39;routing_key&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;tasks.add&#39;</span><span class="p">,</span>
<span class="s1">&#39;serializer&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;json&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>参见 <a class="reference internal" href="routing.html#routers"><span class="std std-ref">路由器</span></a> 获取更多示例。</p>
</div>
<input class="tab-input" id="tab-set--118-input--2" name="tab-set--118" type="radio"><label class="tab-label" for="tab-set--118-input--2">英文</label><div class="tab-content docutils container">
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>A list of routers, or a single router used to route tasks to queues.
When deciding the final destination of a task the routers are consulted
in order.</p>
<p>A router can be specified as either:</p>
<ul class="simple">
<li><p>A function with the signature <code class="docutils literal notranslate"><span class="pre">(name,</span> <span class="pre">args,</span> <span class="pre">kwargs,</span> <span class="pre">options,</span> <span class="pre">task=None,</span> <span class="pre">**kwargs)</span></code></p></li>
<li><p>A string providing the path to a router function.</p></li>
<li><p>A dict containing router specification: Will be converted to a <code class="xref py py-class docutils literal notranslate"><span class="pre">celery.routes.MapRoute</span></code> instance.</p></li>
<li><p>A list of <code class="docutils literal notranslate"><span class="pre">(pattern,</span> <span class="pre">route)</span></code> tuples: Will be converted to a <code class="xref py py-class docutils literal notranslate"><span class="pre">celery.routes.MapRoute</span></code> instance.</p></li>
</ul>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">task_routes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;celery.ping&#39;</span><span class="p">:</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
    <span class="s1">&#39;mytasks.add&#39;</span><span class="p">:</span> <span class="s1">&#39;cpu-bound&#39;</span><span class="p">,</span>
    <span class="s1">&#39;feed.tasks.*&#39;</span><span class="p">:</span> <span class="s1">&#39;feeds&#39;</span><span class="p">,</span>                           <span class="c1"># &lt;-- glob pattern</span>
    <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(image|video)\.tasks\..*&#39;</span><span class="p">):</span> <span class="s1">&#39;media&#39;</span><span class="p">,</span>  <span class="c1"># &lt;-- regex</span>
    <span class="s1">&#39;video.encode&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;queue&#39;</span><span class="p">:</span> <span class="s1">&#39;video&#39;</span><span class="p">,</span>
        <span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="s1">&#39;media&#39;</span><span class="p">,</span>
        <span class="s1">&#39;routing_key&#39;</span><span class="p">:</span> <span class="s1">&#39;media.video.encode&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="n">task_routes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;myapp.tasks.route_task&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;celery.ping&#39;</span><span class="p">:</span> <span class="s1">&#39;default&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">myapp.tasks.route_task</span></code> could be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">route_task</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">task</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">task</span> <span class="o">==</span> <span class="s1">&#39;celery.ping&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;queue&#39;</span><span class="p">:</span> <span class="s1">&#39;default&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">route_task</span></code> may return a string or a dict. A string then means
it's a queue name in <a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a>, a dict means it's a custom route.</p>
<p>When sending tasks, the routers are consulted in order. The first
router that doesn't return <code class="docutils literal notranslate"><span class="pre">None</span></code> is the route to use. The message options
is then merged with the found route settings, where the task's settings
have priority.</p>
<p>Example if <code class="xref py py-func docutils literal notranslate"><span class="pre">apply_async()</span></code> has these arguments:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<dl class="simple">
<dt>Task.apply_async(immediate=False, exchange='video',</dt><dd><p>routing_key='video.compress')</p>
</dd>
</dl>
<p>and a router returns:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;immediate&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="s1">&#39;urgent&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>the final message options will be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">immediate</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s1">&#39;video&#39;</span><span class="p">,</span> <span class="n">routing_key</span><span class="o">=</span><span class="s1">&#39;video.compress&#39;</span>
</pre></div>
</div>
<p>(and any default message options defined in the
<a class="reference internal" href="../reference/celery.app.task.html#celery.app.task.Task" title="celery.app.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a> class)</p>
<p>Values defined in <a class="reference internal" href="#std-setting-task_routes"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_routes</span></code></a> have precedence over values defined in
<a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a> when merging the two.</p>
<p>With the follow settings:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">task_queues</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;cpubound&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="s1">&#39;cpubound&#39;</span><span class="p">,</span>
        <span class="s1">&#39;routing_key&#39;</span><span class="p">:</span> <span class="s1">&#39;cpubound&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>

<span class="n">task_routes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;tasks.add&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;queue&#39;</span><span class="p">:</span> <span class="s1">&#39;cpubound&#39;</span><span class="p">,</span>
        <span class="s1">&#39;routing_key&#39;</span><span class="p">:</span> <span class="s1">&#39;tasks.add&#39;</span><span class="p">,</span>
        <span class="s1">&#39;serializer&#39;</span><span class="p">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The final routing options for <code class="docutils literal notranslate"><span class="pre">tasks.add</span></code> will become:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;exchange&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;cpubound&#39;</span><span class="p">,</span>
<span class="s1">&#39;routing_key&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;tasks.add&#39;</span><span class="p">,</span>
<span class="s1">&#39;serializer&#39;</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;json&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="routing.html#routers"><span class="std std-ref">路由器</span></a> for more examples.</p>
</div>
</div>
</section>
<section id="task-queue-max-priority">
<span id="std-setting-task_queue_max_priority"></span><h4><code class="docutils literal notranslate"><span class="pre">task_queue_max_priority</span></code><a class="headerlink" href="#task-queue-max-priority" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">brokers<span class="colon">:</span></dt>
<dd class="field-odd"><p>RabbitMQ</p>
</dd>
</dl>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>See <a class="reference internal" href="routing.html#routing-options-rabbitmq-priorities"><span class="std std-ref">RabbitMQ 消息优先级</span></a>.</p>
</section>
<section id="task-default-priority">
<span id="std-setting-task_default_priority"></span><h4><code class="docutils literal notranslate"><span class="pre">task_default_priority</span></code><a class="headerlink" href="#task-default-priority" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">brokers<span class="colon">:</span></dt>
<dd class="field-odd"><p>RabbitMQ, Redis</p>
</dd>
</dl>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>See <a class="reference internal" href="routing.html#routing-options-rabbitmq-priorities"><span class="std std-ref">RabbitMQ 消息优先级</span></a>.</p>
</section>
<section id="task-inherit-parent-priority">
<span id="std-setting-task_inherit_parent_priority"></span><h4><code class="docutils literal notranslate"><span class="pre">task_inherit_parent_priority</span></code><a class="headerlink" href="#task-inherit-parent-priority" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">brokers<span class="colon">:</span></dt>
<dd class="field-odd"><p>RabbitMQ</p>
</dd>
</dl>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--119-input--1" name="tab-set--119" type="radio"><label class="tab-label" for="tab-set--119-input--1">中文</label><div class="tab-content docutils container">
<p>默认值：<code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code>。</p>
<p>如果启用，子任务将继承父任务的优先级。</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 链中最后一个任务也将具有优先级 5。</span>
<span class="n">chain</span> <span class="o">=</span> <span class="n">celery</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">priority</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<p>在使用 <cite>delay</cite> 或 <cite>apply_async</cite> 从父任务调用子任务时，优先级继承同样适用。</p>
<p>参见 <a class="reference internal" href="routing.html#routing-options-rabbitmq-priorities"><span class="std std-ref">RabbitMQ 消息优先级</span></a>。</p>
</div>
<input class="tab-input" id="tab-set--119-input--2" name="tab-set--119" type="radio"><label class="tab-label" for="tab-set--119-input--2">英文</label><div class="tab-content docutils container">
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>If enabled, child tasks will inherit priority of the parent task.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># The last task in chain will also have priority set to 5.</span>
<span class="n">chain</span> <span class="o">=</span> <span class="n">celery</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">priority</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<p>Priority inheritance also works when calling child tasks from a parent task
with <cite>delay</cite> or <cite>apply_async</cite>.</p>
<p>See <a class="reference internal" href="routing.html#routing-options-rabbitmq-priorities"><span class="std std-ref">RabbitMQ 消息优先级</span></a>.</p>
</div>
</div>
</section>
<section id="worker-direct">
<span id="std-setting-worker_direct"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_direct</span></code><a class="headerlink" href="#worker-direct" title="Link to this heading">¶</a></h4>
<p>Default: Disabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--120-input--1" name="tab-set--120" type="radio"><label class="tab-label" for="tab-set--120-input--1">中文</label><div class="tab-content docutils container">
<p>此选项允许为每个 worker 创建一个专用队列，以便可以将任务路由到特定的 worker。</p>
<p>每个 worker 的队列名称是基于 worker 的主机名并添加 <code class="docutils literal notranslate"><span class="pre">.dq</span></code> 后缀自动生成的，使用的是 <code class="docutils literal notranslate"><span class="pre">C.dq2</span></code> 交换机。</p>
<p>例如，节点名称为 <code class="docutils literal notranslate"><span class="pre">w1&#64;example.com</span></code> 的 worker 对应的队列名称为:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">w1</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">dq</span>
</pre></div>
</div>
<p>然后你可以通过指定主机名作为路由键，并使用 <code class="docutils literal notranslate"><span class="pre">C.dq2</span></code> 交换机将任务路由到该 worker:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">task_routes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;tasks.add&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="s1">&#39;C.dq2&#39;</span><span class="p">,</span> <span class="s1">&#39;routing_key&#39;</span><span class="p">:</span> <span class="s1">&#39;w1@example.com&#39;</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--120-input--2" name="tab-set--120" type="radio"><label class="tab-label" for="tab-set--120-input--2">英文</label><div class="tab-content docutils container">
<p>This option enables so that every worker has a dedicated queue,
so that tasks can be routed to specific workers.</p>
<p>The queue name for each worker is automatically generated based on
the worker hostname and a <code class="docutils literal notranslate"><span class="pre">.dq</span></code> suffix, using the <code class="docutils literal notranslate"><span class="pre">C.dq2</span></code> exchange.</p>
<p>For example the queue name for the worker with node name <code class="docutils literal notranslate"><span class="pre">w1&#64;example.com</span></code>
becomes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">w1</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">dq</span>
</pre></div>
</div>
<p>Then you can route the task to the worker by specifying the hostname
as the routing key and the <code class="docutils literal notranslate"><span class="pre">C.dq2</span></code> exchange:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">task_routes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;tasks.add&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="s1">&#39;C.dq2&#39;</span><span class="p">,</span> <span class="s1">&#39;routing_key&#39;</span><span class="p">:</span> <span class="s1">&#39;w1@example.com&#39;</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="task-create-missing-queues">
<span id="std-setting-task_create_missing_queues"></span><h4><code class="docutils literal notranslate"><span class="pre">task_create_missing_queues</span></code><a class="headerlink" href="#task-create-missing-queues" title="Link to this heading">¶</a></h4>
<p>Default: Enabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--121-input--1" name="tab-set--121" type="radio"><label class="tab-label" for="tab-set--121-input--1">中文</label><div class="tab-content docutils container">
<p>如果启用（默认启用），任何未在 <a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a> 中定义的队列将被自动创建。参见 <a class="reference internal" href="routing.html#routing-automatic"><span class="std std-ref">自动路由</span></a>。</p>
</div>
<input class="tab-input" id="tab-set--121-input--2" name="tab-set--121" type="radio"><label class="tab-label" for="tab-set--121-input--2">英文</label><div class="tab-content docutils container">
<p>If enabled (default), any queues specified that aren't defined in
<a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a> will be automatically created. See
<a class="reference internal" href="routing.html#routing-automatic"><span class="std std-ref">自动路由</span></a>.</p>
</div>
</div>
</section>
<section id="task-default-queue">
<span id="std-setting-task_default_queue"></span><h4><code class="docutils literal notranslate"><span class="pre">task_default_queue</span></code><a class="headerlink" href="#task-default-queue" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;celery&quot;</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--122-input--1" name="tab-set--122" type="radio"><label class="tab-label" for="tab-set--122-input--1">中文</label><div class="tab-content docutils container">
<p><cite>.apply_async</cite> 在消息没有指定路由或没有自定义队列的情况下所使用的默认队列名称。</p>
<p>该队列必须在 <a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a> 中列出。
如果未指定 <a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a>，则会自动创建一个包含该队列名称的队列条目。</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="routing.html#routing-changing-default-queue"><span class="std std-ref">更改默认队列的名称</span></a></p>
</div>
</div>
<input class="tab-input" id="tab-set--122-input--2" name="tab-set--122" type="radio"><label class="tab-label" for="tab-set--122-input--2">英文</label><div class="tab-content docutils container">
<p>The name of the default queue used by <cite>.apply_async</cite> if the message has
no route or no custom queue has been specified.</p>
<p>This queue must be listed in <a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a>.
If <a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a> isn't specified then it's automatically
created containing one queue entry, where this name is used as the name of
that queue.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="routing.html#routing-changing-default-queue"><span class="std std-ref">更改默认队列的名称</span></a></p>
</div>
</div>
</div>
</section>
<section id="task-default-queue-type">
<span id="std-setting-task_default_queue_type"></span><h4><code class="docutils literal notranslate"><span class="pre">task_default_queue_type</span></code><a class="headerlink" href="#task-default-queue-type" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.5.</span></p>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--123-input--1" name="tab-set--123" type="radio"><label class="tab-label" for="tab-set--123-input--1">中文</label><div class="tab-content docutils container">
<p>默认值： <code class="docutils literal notranslate"><span class="pre">&quot;classic&quot;</span></code>。</p>
<p>该设置用于更改 <a class="reference internal" href="#std-setting-task_default_queue"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_default_queue</span></code></a> 所使用的默认队列类型。另一个可用选项是 <code class="docutils literal notranslate"><span class="pre">&quot;quorum&quot;</span></code>，仅在 RabbitMQ 中支持，会使用队列参数 <code class="docutils literal notranslate"><span class="pre">x-queue-type</span></code> 将队列类型设置为 <code class="docutils literal notranslate"><span class="pre">quorum</span></code>。</p>
<p>如果启用了 <a class="reference internal" href="#std-setting-worker_detect_quorum_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_detect_quorum_queues</span></code></a> 设置，worker 将自动检测队列类型并相应地禁用全局 QoS。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>quorum 队列需要启用 confirm publish。
使用 <a class="reference internal" href="#std-setting-broker_transport_options"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_transport_options</span></code></a> 设置以启用 confirm publish：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">broker_transport_options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;confirm_publish&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</pre></div>
</div>
<p>更多信息请参见 <a class="reference external" href="https://www.rabbitmq.com/docs/quorum-queues#use-cases">RabbitMQ 官方文档</a>。</p>
</div>
</div>
<input class="tab-input" id="tab-set--123-input--2" name="tab-set--123" type="radio"><label class="tab-label" for="tab-set--123-input--2">英文</label><div class="tab-content docutils container">
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;classic&quot;</span></code>.</p>
<p>This setting is used to allow changing the default queue type for the
<a class="reference internal" href="#std-setting-task_default_queue"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_default_queue</span></code></a> queue. The other viable option is <code class="docutils literal notranslate"><span class="pre">&quot;quorum&quot;</span></code> which
is only supported by RabbitMQ and sets the queue type to <code class="docutils literal notranslate"><span class="pre">quorum</span></code> using the <code class="docutils literal notranslate"><span class="pre">x-queue-type</span></code>
queue argument.</p>
<p>If the <a class="reference internal" href="#std-setting-worker_detect_quorum_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_detect_quorum_queues</span></code></a> setting is enabled, the worker will
automatically detect the queue type and disable the global QoS accordingly.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>Quorum queues require confirm publish to be enabled.
Use <a class="reference internal" href="#std-setting-broker_transport_options"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_transport_options</span></code></a> to enable confirm publish by setting:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">broker_transport_options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;confirm_publish&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</pre></div>
</div>
<p>For more information, see <a class="reference external" href="https://www.rabbitmq.com/docs/quorum-queues#use-cases">RabbitMQ documentation</a>.</p>
</div>
</div>
</div>
</section>
<section id="task-default-exchange">
<span id="std-setting-task_default_exchange"></span><h4><code class="docutils literal notranslate"><span class="pre">task_default_exchange</span></code><a class="headerlink" href="#task-default-exchange" title="Link to this heading">¶</a></h4>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--124-input--1" name="tab-set--124" type="radio"><label class="tab-label" for="tab-set--124-input--1">中文</label><div class="tab-content docutils container">
<p>默认值：使用 <a class="reference internal" href="#std-setting-task_default_queue"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_default_queue</span></code></a> 的值。</p>
<p>在没有为 <a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a> 中的条目指定自定义交换机时所使用的默认交换机名称。</p>
</div>
<input class="tab-input" id="tab-set--124-input--2" name="tab-set--124" type="radio"><label class="tab-label" for="tab-set--124-input--2">英文</label><div class="tab-content docutils container">
<p>Default: Uses the value set for <a class="reference internal" href="#std-setting-task_default_queue"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_default_queue</span></code></a>.</p>
<p>Name of the default exchange to use when no custom exchange is
specified for a key in the <a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a> setting.</p>
</div>
</div>
</section>
<section id="task-default-exchange-type">
<span id="std-setting-task_default_exchange_type"></span><h4><code class="docutils literal notranslate"><span class="pre">task_default_exchange_type</span></code><a class="headerlink" href="#task-default-exchange-type" title="Link to this heading">¶</a></h4>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--125-input--1" name="tab-set--125" type="radio"><label class="tab-label" for="tab-set--125-input--1">中文</label><div class="tab-content docutils container">
<p>默认值： <code class="docutils literal notranslate"><span class="pre">&quot;direct&quot;</span></code>。</p>
<p>在没有为 <a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a> 中的条目指定自定义交换机类型时所使用的默认交换机类型。</p>
</div>
<input class="tab-input" id="tab-set--125-input--2" name="tab-set--125" type="radio"><label class="tab-label" for="tab-set--125-input--2">英文</label><div class="tab-content docutils container">
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;direct&quot;</span></code>.</p>
<p>Default exchange type used when no custom exchange type is specified
for a key in the <a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a> setting.</p>
</div>
</div>
</section>
<section id="task-default-routing-key">
<span id="std-setting-task_default_routing_key"></span><h4><code class="docutils literal notranslate"><span class="pre">task_default_routing_key</span></code><a class="headerlink" href="#task-default-routing-key" title="Link to this heading">¶</a></h4>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--126-input--1" name="tab-set--126" type="radio"><label class="tab-label" for="tab-set--126-input--1">中文</label><div class="tab-content docutils container">
<p>默认值：使用 <a class="reference internal" href="#std-setting-task_default_queue"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_default_queue</span></code></a> 的值。</p>
<p>在没有为 <a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a> 中的条目指定自定义路由键时所使用的默认路由键。</p>
</div>
<input class="tab-input" id="tab-set--126-input--2" name="tab-set--126" type="radio"><label class="tab-label" for="tab-set--126-input--2">英文</label><div class="tab-content docutils container">
<p>Default: Uses the value set for <a class="reference internal" href="#std-setting-task_default_queue"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_default_queue</span></code></a>.</p>
<p>The default routing key used when no custom routing key
is specified for a key in the <a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a> setting.</p>
</div>
</div>
</section>
<section id="task-default-delivery-mode">
<span id="std-setting-task_default_delivery_mode"></span><h4><code class="docutils literal notranslate"><span class="pre">task_default_delivery_mode</span></code><a class="headerlink" href="#task-default-delivery-mode" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;persistent&quot;</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--127-input--1" name="tab-set--127" type="radio"><label class="tab-label" for="tab-set--127-input--1">中文</label><div class="tab-content docutils container">
<p>可以为 <cite>transient</cite> （消息不写入磁盘）或 <cite>persistent</cite> （写入磁盘）。</p>
</div>
<input class="tab-input" id="tab-set--127-input--2" name="tab-set--127" type="radio"><label class="tab-label" for="tab-set--127-input--2">英文</label><div class="tab-content docutils container">
<p>Can be <cite>transient</cite> (messages not written to disk) or <cite>persistent</cite> (written to
disk).</p>
</div>
</div>
</section>
</section>
<section id="broker">
<span id="conf-broker-settings"></span><h3>Broker 设置<a class="headerlink" href="#broker" title="Link to this heading">¶</a></h3>
<p>Broker Settings</p>
<section id="broker-url">
<span id="std-setting-broker_url"></span><h4><code class="docutils literal notranslate"><span class="pre">broker_url</span></code><a class="headerlink" href="#broker-url" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;amqp://&quot;</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--128-input--1" name="tab-set--128" type="radio"><label class="tab-label" for="tab-set--128-input--1">中文</label><div class="tab-content docutils container">
<p>默认的 broker URL。它必须是以下格式的 URL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">transport</span><span class="p">:</span><span class="o">//</span><span class="n">userid</span><span class="p">:</span><span class="n">password</span><span class="nd">@hostname</span><span class="p">:</span><span class="n">port</span><span class="o">/</span><span class="n">virtual_host</span>
</pre></div>
</div>
<p>仅 scheme 部分（<code class="docutils literal notranslate"><span class="pre">transport://</span></code>）是必须的，其余部分是可选的，若未提供，则使用所选传输方式的默认值。</p>
<p>transport 部分表示所使用的 broker 实现，默认是 <code class="docutils literal notranslate"><span class="pre">amqp</span></code> （如果安装了 <code class="docutils literal notranslate"><span class="pre">librabbitmq</span></code> 则使用之，否则回退至 <code class="docutils literal notranslate"><span class="pre">pyamqp</span></code>）。还支持其他选项，如：<code class="docutils literal notranslate"><span class="pre">redis://</span></code>、<code class="docutils literal notranslate"><span class="pre">sqs://</span></code> 和 <code class="docutils literal notranslate"><span class="pre">qpid://</span></code>。</p>
<p>scheme 也可以是你自定义传输实现的完整路径:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">broker_url</span> <span class="o">=</span> <span class="s1">&#39;proj.transports.MyTransport://localhost&#39;</span>
</pre></div>
</div>
<p>还可以指定多个相同传输方式的 broker URL。
这些 broker URL 可以作为用分号分隔的单个字符串传入:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">broker_url</span> <span class="o">=</span> <span class="s1">&#39;transport://userid:password@hostname:port//;transport://userid:password@hostname:port//&#39;</span>
</pre></div>
</div>
<p>也可以作为列表指定:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">broker_url</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;transport://userid:password@localhost:port//&#39;</span><span class="p">,</span>
    <span class="s1">&#39;transport://userid:password@hostname:port//&#39;</span>
<span class="p">]</span>
</pre></div>
</div>
<p>这些 broker 将按 <a class="reference internal" href="#std-setting-broker_failover_strategy"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_failover_strategy</span></code></a> 设置使用。</p>
<p>更多信息参见 Kombu 文档中的 <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/main/userguide/connections.html#connection-urls" title="（在 Kombu v5.5）"><span>Celery with SQS</span></a>。</p>
</div>
<input class="tab-input" id="tab-set--128-input--2" name="tab-set--128" type="radio"><label class="tab-label" for="tab-set--128-input--2">英文</label><div class="tab-content docutils container">
<p>Default broker URL. This must be a URL in the form of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">transport</span><span class="p">:</span><span class="o">//</span><span class="n">userid</span><span class="p">:</span><span class="n">password</span><span class="nd">@hostname</span><span class="p">:</span><span class="n">port</span><span class="o">/</span><span class="n">virtual_host</span>
</pre></div>
</div>
<p>Only the scheme part (<code class="docutils literal notranslate"><span class="pre">transport://</span></code>) is required, the rest
is optional, and defaults to the specific transports default values.</p>
<p>The transport part is the broker implementation to use, and the
default is <code class="docutils literal notranslate"><span class="pre">amqp</span></code>, (uses <code class="docutils literal notranslate"><span class="pre">librabbitmq</span></code> if installed or falls back to
<code class="docutils literal notranslate"><span class="pre">pyamqp</span></code>). There are also other choices available, including;
<code class="docutils literal notranslate"><span class="pre">redis://</span></code>, <code class="docutils literal notranslate"><span class="pre">sqs://</span></code>, and <code class="docutils literal notranslate"><span class="pre">qpid://</span></code>.</p>
<p>The scheme can also be a fully qualified path to your own transport
implementation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">broker_url</span> <span class="o">=</span> <span class="s1">&#39;proj.transports.MyTransport://localhost&#39;</span>
</pre></div>
</div>
<p>More than one broker URL, of the same transport, can also be specified.
The broker URLs can be passed in as a single string that's semicolon delimited:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">broker_url</span> <span class="o">=</span> <span class="s1">&#39;transport://userid:password@hostname:port//;transport://userid:password@hostname:port//&#39;</span>
</pre></div>
</div>
<p>Or as a list:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">broker_url</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;transport://userid:password@localhost:port//&#39;</span><span class="p">,</span>
    <span class="s1">&#39;transport://userid:password@hostname:port//&#39;</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The brokers will then be used in the <a class="reference internal" href="#std-setting-broker_failover_strategy"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_failover_strategy</span></code></a>.</p>
<p>See <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/main/userguide/connections.html#connection-urls" title="（在 Kombu v5.5）"><span>Celery with SQS</span></a> in the Kombu documentation for more
information.</p>
</div>
</div>
</section>
<section id="broker-read-url-broker-write-url">
<span id="std-setting-broker_write_url"></span><span id="std-setting-broker_read_url"></span><h4><code class="docutils literal notranslate"><span class="pre">broker_read_url</span></code> / <code class="docutils literal notranslate"><span class="pre">broker_write_url</span></code><a class="headerlink" href="#broker-read-url-broker-write-url" title="Link to this heading">¶</a></h4>
<p>Default: Taken from <a class="reference internal" href="#std-setting-broker_url"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_url</span></code></a>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--129-input--1" name="tab-set--129" type="radio"><label class="tab-label" for="tab-set--129-input--1">中文</label><div class="tab-content docutils container">
<p>以下设置可用于替代 <a class="reference internal" href="#std-setting-broker_url"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_url</span></code></a>，分别指定用于消费和生产的连接参数。</p>
<p>示例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">broker_read_url</span> <span class="o">=</span> <span class="s1">&#39;amqp://user:pass@broker.example.com:56721&#39;</span>
<span class="n">broker_write_url</span> <span class="o">=</span> <span class="s1">&#39;amqp://user:pass@broker.example.com:56722&#39;</span>
</pre></div>
</div>
<p>这两个选项也可以指定为列表以实现故障转移备用，更多信息参见 <a class="reference internal" href="#std-setting-broker_url"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_url</span></code></a>。</p>
</div>
<input class="tab-input" id="tab-set--129-input--2" name="tab-set--129" type="radio"><label class="tab-label" for="tab-set--129-input--2">英文</label><div class="tab-content docutils container">
<p>These settings can be configured, instead of <a class="reference internal" href="#std-setting-broker_url"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_url</span></code></a> to specify
different connection parameters for broker connections used for consuming and
producing.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">broker_read_url</span> <span class="o">=</span> <span class="s1">&#39;amqp://user:pass@broker.example.com:56721&#39;</span>
<span class="n">broker_write_url</span> <span class="o">=</span> <span class="s1">&#39;amqp://user:pass@broker.example.com:56722&#39;</span>
</pre></div>
</div>
<p>Both options can also be specified as a list for failover alternates, see
<a class="reference internal" href="#std-setting-broker_url"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_url</span></code></a> for more information.</p>
</div>
</div>
</section>
<section id="broker-failover-strategy">
<span id="std-setting-broker_failover_strategy"></span><h4><code class="docutils literal notranslate"><span class="pre">broker_failover_strategy</span></code><a class="headerlink" href="#broker-failover-strategy" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;round-robin&quot;</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--130-input--1" name="tab-set--130" type="radio"><label class="tab-label" for="tab-set--130-input--1">中文</label><div class="tab-content docutils container">
<p>用于 broker Connection 对象的默认故障转移策略。如果提供的值是字符串，则应映射至 'kombu.connection.failover_strategies' 中的键；也可以是一个方法引用，该方法从提供的列表中生成单个项。</p>
<p>示例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 随机故障转移策略</span>
<span class="k">def</span><span class="w"> </span><span class="nf">random_failover_strategy</span><span class="p">(</span><span class="n">servers</span><span class="p">):</span>
    <span class="n">it</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">servers</span><span class="p">)</span>  <span class="c1"># 不修改调用方的列表</span>
    <span class="n">shuffle</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">repeat</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">shuffle</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">it</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">broker_failover_strategy</span> <span class="o">=</span> <span class="n">random_failover_strategy</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--130-input--2" name="tab-set--130" type="radio"><label class="tab-label" for="tab-set--130-input--2">英文</label><div class="tab-content docutils container">
<p>Default failover strategy for the broker Connection object. If supplied,
may map to a key in 'kombu.connection.failover_strategies', or be a reference
to any method that yields a single item from a supplied list.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Random failover strategy</span>
<span class="k">def</span><span class="w"> </span><span class="nf">random_failover_strategy</span><span class="p">(</span><span class="n">servers</span><span class="p">):</span>
    <span class="n">it</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">servers</span><span class="p">)</span>  <span class="c1"># don&#39;t modify callers list</span>
    <span class="n">shuffle</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">repeat</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">shuffle</span><span class="p">(</span><span class="n">it</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">it</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">broker_failover_strategy</span> <span class="o">=</span> <span class="n">random_failover_strategy</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="broker-heartbeat">
<span id="std-setting-broker_heartbeat"></span><h4><code class="docutils literal notranslate"><span class="pre">broker_heartbeat</span></code><a class="headerlink" href="#broker-heartbeat" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">transports supported<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">pyamqp</span></code></p>
</dd>
</dl>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--131-input--1" name="tab-set--131" type="radio"><label class="tab-label" for="tab-set--131-input--1">中文</label><div class="tab-content docutils container">
<p>默认值：<code class="docutils literal notranslate"><span class="pre">120.0</span></code> （由服务器协商）。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>此值仅由 Worker 使用，客户端当前不会使用心跳机制。</p>
</div>
<p>仅通过 TCP/IP 并不总能及时检测连接丢失，因此 AMQP 定义了一种称为心跳（heartbeat）的机制，
由客户端和 broker 双方使用，以检测连接是否已关闭。</p>
<p>如果心跳值设置为 10 秒，那么心跳检测的间隔由 <a class="reference internal" href="#std-setting-broker_heartbeat_checkrate"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_heartbeat_checkrate</span></code></a> 设置控制
（默认值是心跳值的两倍速率，也就是说，对于 10 秒的心跳值，心跳会每 5 秒检测一次）。</p>
</div>
<input class="tab-input" id="tab-set--131-input--2" name="tab-set--131" type="radio"><label class="tab-label" for="tab-set--131-input--2">英文</label><div class="tab-content docutils container">
<p>Default: <code class="docutils literal notranslate"><span class="pre">120.0</span></code> (negotiated by server).</p>
<p>Note: This value is only used by the worker, clients do not use
a heartbeat at the moment.</p>
<p>It's not always possible to detect connection loss in a timely
manner using TCP/IP alone, so AMQP defines something called heartbeats
that's is used both by the client and the broker to detect if
a connection was closed.</p>
<p>If the heartbeat value is 10 seconds, then
the heartbeat will be monitored at the interval specified
by the <a class="reference internal" href="#std-setting-broker_heartbeat_checkrate"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_heartbeat_checkrate</span></code></a> setting (by default
this is set to double the rate of the heartbeat value,
so for the 10 seconds, the heartbeat is checked every 5 seconds).</p>
</div>
</div>
</section>
<section id="broker-heartbeat-checkrate">
<span id="std-setting-broker_heartbeat_checkrate"></span><h4><code class="docutils literal notranslate"><span class="pre">broker_heartbeat_checkrate</span></code><a class="headerlink" href="#broker-heartbeat-checkrate" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">transports supported<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">pyamqp</span></code></p>
</dd>
</dl>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--132-input--1" name="tab-set--132" type="radio"><label class="tab-label" for="tab-set--132-input--1">中文</label><div class="tab-content docutils container">
<p>Default: 2.0.</p>
<p>Worker 会周期性地监控 broker 是否丢失过多心跳。该检查的速率通过将 <a class="reference internal" href="#std-setting-broker_heartbeat"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_heartbeat</span></code></a>
除以该设置值计算得出，所以如果心跳为 10.0 且检测速率为默认的 2.0，检查将每 5 秒执行一次
（即发送心跳的两倍速率）。</p>
</div>
<input class="tab-input" id="tab-set--132-input--2" name="tab-set--132" type="radio"><label class="tab-label" for="tab-set--132-input--2">英文</label><div class="tab-content docutils container">
<p>Default: 2.0.</p>
<p>At intervals the worker will monitor that the broker hasn't missed
too many heartbeats. The rate at which this is checked is calculated
by dividing the <a class="reference internal" href="#std-setting-broker_heartbeat"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_heartbeat</span></code></a> value with this value,
so if the heartbeat is 10.0 and the rate is the default 2.0, the check
will be performed every 5 seconds (twice the heartbeat sending rate).</p>
</div>
</div>
</section>
<section id="broker-use-ssl">
<span id="std-setting-broker_use_ssl"></span><h4><code class="docutils literal notranslate"><span class="pre">broker_use_ssl</span></code><a class="headerlink" href="#broker-use-ssl" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">transports supported<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">pyamqp</span></code>, <code class="docutils literal notranslate"><span class="pre">redis</span></code></p>
</dd>
</dl>
<p>Default: Disabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--133-input--1" name="tab-set--133" type="radio"><label class="tab-label" for="tab-set--133-input--1">中文</label><div class="tab-content docutils container">
<p>切换 broker 连接上的 SSL 使用与相关设置。</p>
<p>该选项的有效值取决于所用的传输类型。</p>
</div>
<input class="tab-input" id="tab-set--133-input--2" name="tab-set--133" type="radio"><label class="tab-label" for="tab-set--133-input--2">英文</label><div class="tab-content docutils container">
<p>Toggles SSL usage on broker connection and SSL settings.</p>
<p>The valid values for this option vary by transport.</p>
</div>
</div>
<section id="pyamqp">
<h5><code class="docutils literal notranslate"><span class="pre">pyamqp</span></code><a class="headerlink" href="#pyamqp" title="Link to this heading">¶</a></h5>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--134-input--1" name="tab-set--134" type="radio"><label class="tab-label" for="tab-set--134-input--1">中文</label><div class="tab-content docutils container">
<p>如果为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，连接将使用默认 SSL 设置启用 SSL。
如果为字典，将根据给定策略配置 SSL 连接，格式为 Python 的 <code class="xref py py-func docutils literal notranslate"><span class="pre">ssl.wrap_socket()</span></code> 选项格式。</p>
<p>请注意，SSL 套接字通常由 broker 提供服务于单独的端口。</p>
<p>以下是一个提供客户端证书并使用自定义 CA 验证服务端证书的示例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">ssl</span>

<span class="n">broker_use_ssl</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;keyfile&#39;</span><span class="p">:</span> <span class="s1">&#39;/var/ssl/private/worker-key.pem&#39;</span><span class="p">,</span>
<span class="s1">&#39;certfile&#39;</span><span class="p">:</span> <span class="s1">&#39;/var/ssl/amqp-server-cert.pem&#39;</span><span class="p">,</span>
<span class="s1">&#39;ca_certs&#39;</span><span class="p">:</span> <span class="s1">&#39;/var/ssl/myca.pem&#39;</span><span class="p">,</span>
<span class="s1">&#39;cert_reqs&#39;</span><span class="p">:</span> <span class="n">ssl</span><span class="o">.</span><span class="n">CERT_REQUIRED</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.1: </span>从 Celery 5.1 开始，py-amqp 将始终验证从服务器收到的证书，
因此不再需要手动设置 <code class="docutils literal notranslate"><span class="pre">cert_reqs</span></code> 为 <code class="docutils literal notranslate"><span class="pre">ssl.CERT_REQUIRED</span></code>。</p>
<p>之前的默认值 <code class="docutils literal notranslate"><span class="pre">ssl.CERT_NONE</span></code> 是不安全的，应避免使用。
如果你希望恢复之前不安全的默认行为，可将 <code class="docutils literal notranslate"><span class="pre">cert_reqs</span></code> 设置为 <code class="docutils literal notranslate"><span class="pre">ssl.CERT_NONE</span></code>。</p>
</div>
</div>
<input class="tab-input" id="tab-set--134-input--2" name="tab-set--134" type="radio"><label class="tab-label" for="tab-set--134-input--2">英文</label><div class="tab-content docutils container">
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> the connection will use SSL with default SSL settings.
If set to a dict, will configure SSL connection according to the specified
policy. The format used is Python's <code class="xref py py-func docutils literal notranslate"><span class="pre">ssl.wrap_socket()</span></code> options.</p>
<p>Note that SSL socket is generally served on a separate port by the broker.</p>
<p>Example providing a client cert and validating the server cert against a custom
certificate authority:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">ssl</span>

<span class="n">broker_use_ssl</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;keyfile&#39;</span><span class="p">:</span> <span class="s1">&#39;/var/ssl/private/worker-key.pem&#39;</span><span class="p">,</span>
<span class="s1">&#39;certfile&#39;</span><span class="p">:</span> <span class="s1">&#39;/var/ssl/amqp-server-cert.pem&#39;</span><span class="p">,</span>
<span class="s1">&#39;ca_certs&#39;</span><span class="p">:</span> <span class="s1">&#39;/var/ssl/myca.pem&#39;</span><span class="p">,</span>
<span class="s1">&#39;cert_reqs&#39;</span><span class="p">:</span> <span class="n">ssl</span><span class="o">.</span><span class="n">CERT_REQUIRED</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.1: </span>Starting from Celery 5.1, py-amqp will always validate certificates received from the server
and it is no longer required to manually set <code class="docutils literal notranslate"><span class="pre">cert_reqs</span></code> to <code class="docutils literal notranslate"><span class="pre">ssl.CERT_REQUIRED</span></code>.</p>
<p>The previous default, <code class="docutils literal notranslate"><span class="pre">ssl.CERT_NONE</span></code> is insecure and we its usage should be discouraged.
If you'd like to revert to the previous insecure default set <code class="docutils literal notranslate"><span class="pre">cert_reqs</span></code> to <code class="docutils literal notranslate"><span class="pre">ssl.CERT_NONE</span></code></p>
</div>
</div>
</div>
</section>
<section id="id46">
<h5><code class="docutils literal notranslate"><span class="pre">redis</span></code><a class="headerlink" href="#id46" title="Link to this heading">¶</a></h5>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--135-input--1" name="tab-set--135" type="radio"><label class="tab-label" for="tab-set--135-input--1">中文</label><div class="tab-content docutils container">
<p>该设置必须是包含以下键的字典：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ssl_cert_reqs</span></code> （必需）：为 <code class="docutils literal notranslate"><span class="pre">SSLContext.verify_mode</span></code> 中的一个值：</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ssl.CERT_NONE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ssl.CERT_OPTIONAL</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ssl.CERT_REQUIRED</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ssl_ca_certs</span></code> （可选）：CA 证书路径</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ssl_certfile</span></code> （可选）：客户端证书路径</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ssl_keyfile</span></code> （可选）：客户端密钥路径</p></li>
</ul>
</div>
<input class="tab-input" id="tab-set--135-input--2" name="tab-set--135" type="radio"><label class="tab-label" for="tab-set--135-input--2">英文</label><div class="tab-content docutils container">
<p>The setting must be a dict with the following keys:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ssl_cert_reqs</span></code> (required): one of the <code class="docutils literal notranslate"><span class="pre">SSLContext.verify_mode</span></code> values:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ssl.CERT_NONE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ssl.CERT_OPTIONAL</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ssl.CERT_REQUIRED</span></code></p></li>
</ul>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ssl_ca_certs</span></code> (optional): path to the CA certificate</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ssl_certfile</span></code> (optional): path to the client certificate</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ssl_keyfile</span></code> (optional): path to the client key</p></li>
</ul>
</div>
</div>
</section>
</section>
<section id="broker-pool-limit">
<span id="std-setting-broker_pool_limit"></span><h4><code class="docutils literal notranslate"><span class="pre">broker_pool_limit</span></code><a class="headerlink" href="#broker-pool-limit" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.3.</span></p>
</div>
<p>Default: 10.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--136-input--1" name="tab-set--136" type="radio"><label class="tab-label" for="tab-set--136-input--1">中文</label><div class="tab-content docutils container">
<p>连接池中可同时打开的最大连接数。</p>
<p>自 2.5 版本起，连接池默认启用，默认限制为 10 个连接。
该数值可根据使用连接的线程 / green-thread 数量（如 eventlet / gevent）进行调整。
例如，当使用 eventlet 并拥有 1000 个使用 broker 连接的 greenlet 时，可能会产生争用，
此时应考虑提高连接池上限。</p>
<p>若设置为 <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code> 或 0，则连接池将被禁用，且每次使用时都会建立并关闭连接。</p>
</div>
<input class="tab-input" id="tab-set--136-input--2" name="tab-set--136" type="radio"><label class="tab-label" for="tab-set--136-input--2">英文</label><div class="tab-content docutils container">
<p>The maximum number of connections that can be open in the connection pool.</p>
<p>The pool is enabled by default since version 2.5, with a default limit of ten
connections. This number can be tweaked depending on the number of
threads/green-threads (eventlet/gevent) using a connection. For example
running eventlet with 1000 greenlets that use a connection to the broker,
contention can arise and you should consider increasing the limit.</p>
<p>If set to <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code> or 0 the connection pool will be disabled and
connections will be established and closed for every use.</p>
</div>
</div>
</section>
<section id="broker-connection-timeout">
<span id="std-setting-broker_connection_timeout"></span><h4><code class="docutils literal notranslate"><span class="pre">broker_connection_timeout</span></code><a class="headerlink" href="#broker-connection-timeout" title="Link to this heading">¶</a></h4>
<p>Default: 4.0.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--137-input--1" name="tab-set--137" type="radio"><label class="tab-label" for="tab-set--137-input--1">中文</label><div class="tab-content docutils container">
<p>建立与 AMQP 服务器连接时的默认超时时间（单位：秒）。使用 gevent 时此设置将被禁用。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>broker 连接超时仅适用于 Worker 尝试连接 broker 的场景。
它不适用于生产者（producer）发送任务的情况。有关该场景中如何设置超时，
请参见 <a class="reference internal" href="#std-setting-broker_transport_options"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_transport_options</span></code></a>。</p>
</div>
</div>
<input class="tab-input" id="tab-set--137-input--2" name="tab-set--137" type="radio"><label class="tab-label" for="tab-set--137-input--2">英文</label><div class="tab-content docutils container">
<p>The default timeout in seconds before we give up establishing a connection
to the AMQP server. This setting is disabled when using
gevent.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The broker connection timeout only applies to a worker attempting to
connect to the broker. It does not apply to producer sending a task, see
<a class="reference internal" href="#std-setting-broker_transport_options"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_transport_options</span></code></a> for how to provide a timeout for that
situation.</p>
</div>
</div>
</div>
</section>
<section id="broker-connection-retry">
<span id="std-setting-broker_connection_retry"></span><h4><code class="docutils literal notranslate"><span class="pre">broker_connection_retry</span></code><a class="headerlink" href="#broker-connection-retry" title="Link to this heading">¶</a></h4>
<p>Default: Enabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--138-input--1" name="tab-set--138" type="radio"><label class="tab-label" for="tab-set--138-input--1">中文</label><div class="tab-content docutils container">
<p>在初次建立连接后，如果连接丢失，将自动尝试重新连接到 AMQP broker。</p>
<p>重试之间的间隔会逐次递增，直到超过 <a class="reference internal" href="#std-setting-broker_connection_max_retries"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_connection_max_retries</span></code></a> 设置的最大重试次数。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>从 Celery 6.0 起，配置项 <code class="docutils literal notranslate"><span class="pre">broker_connection_retry</span></code> 将不再决定
启动期间是否进行连接重试。
如果你希望在启动时不进行连接重试，应将 <code class="docutils literal notranslate"><span class="pre">broker_connection_retry_on_startup</span></code> 设置为 <code class="docutils literal notranslate"><span class="pre">False</span></code>。</p>
</div>
</div>
<input class="tab-input" id="tab-set--138-input--2" name="tab-set--138" type="radio"><label class="tab-label" for="tab-set--138-input--2">英文</label><div class="tab-content docutils container">
<p>Automatically try to re-establish the connection to the AMQP broker if lost
after the initial connection is made.</p>
<p>The time between retries is increased for each retry, and is
not exhausted before <a class="reference internal" href="#std-setting-broker_connection_max_retries"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_connection_max_retries</span></code></a> is
exceeded.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>The broker_connection_retry configuration setting will no longer determine
whether broker connection retries are made during startup in Celery 6.0 and above.
If you wish to refrain from retrying connections on startup,
you should set broker_connection_retry_on_startup to False instead.</p>
</div>
</div>
</div>
</section>
<section id="broker-connection-retry-on-startup">
<span id="std-setting-broker_connection_retry_on_startup"></span><h4><code class="docutils literal notranslate"><span class="pre">broker_connection_retry_on_startup</span></code><a class="headerlink" href="#broker-connection-retry-on-startup" title="Link to this heading">¶</a></h4>
<p>Default: Enabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--139-input--1" name="tab-set--139" type="radio"><label class="tab-label" for="tab-set--139-input--1">中文</label><div class="tab-content docutils container">
<p>在 Celery 启动时，如果 broker 不可用，将自动尝试连接 AMQP broker。</p>
<p>重试之间的间隔会逐次递增，直到超过 <a class="reference internal" href="#std-setting-broker_connection_max_retries"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_connection_max_retries</span></code></a> 设置的最大重试次数。</p>
</div>
<input class="tab-input" id="tab-set--139-input--2" name="tab-set--139" type="radio"><label class="tab-label" for="tab-set--139-input--2">英文</label><div class="tab-content docutils container">
<p>Automatically try to establish the connection to the AMQP broker on Celery startup if it is unavailable.</p>
<p>The time between retries is increased for each retry, and is
not exhausted before <a class="reference internal" href="#std-setting-broker_connection_max_retries"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_connection_max_retries</span></code></a> is
exceeded.</p>
</div>
</div>
</section>
<section id="broker-connection-max-retries">
<span id="std-setting-broker_connection_max_retries"></span><h4><code class="docutils literal notranslate"><span class="pre">broker_connection_max_retries</span></code><a class="headerlink" href="#broker-connection-max-retries" title="Link to this heading">¶</a></h4>
<p>Default: 100.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--140-input--1" name="tab-set--140" type="radio"><label class="tab-label" for="tab-set--140-input--1">中文</label><div class="tab-content docutils container">
<p>在放弃重新连接 AMQP broker 之前的最大重试次数。</p>
<p>如果设置为 <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>，则将永久重试，直到连接成功。</p>
</div>
<input class="tab-input" id="tab-set--140-input--2" name="tab-set--140" type="radio"><label class="tab-label" for="tab-set--140-input--2">英文</label><div class="tab-content docutils container">
<p>Maximum number of retries before we give up re-establishing a connection
to the AMQP broker.</p>
<p>If this is set to <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>, we'll retry forever.</p>
</div>
</div>
</section>
<section id="broker-channel-error-retry">
<h4><code class="docutils literal notranslate"><span class="pre">broker_channel_error_retry</span></code><a class="headerlink" href="#broker-channel-error-retry" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.3.</span></p>
</div>
<p>Default: Disabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--141-input--1" name="tab-set--141" type="radio"><label class="tab-label" for="tab-set--141-input--1">中文</label><div class="tab-content docutils container">
<p>在收到无效响应时，自动尝试重新连接 AMQP broker。</p>
<p>该选项的重试次数和间隔与 <code class="docutils literal notranslate"><span class="pre">broker_connection_retry</span></code> 相同。
此外，当 <code class="docutils literal notranslate"><span class="pre">broker_connection_retry</span></code> 为 <code class="docutils literal notranslate"><span class="pre">False</span></code> 时，此选项也不会生效。</p>
</div>
<input class="tab-input" id="tab-set--141-input--2" name="tab-set--141" type="radio"><label class="tab-label" for="tab-set--141-input--2">英文</label><div class="tab-content docutils container">
<p>Automatically try to re-establish the connection to the AMQP broker
if any invalid response has been returned.</p>
<p>The retry count and interval is the same as that of <cite>broker_connection_retry</cite>.
Also, this option doesn't work when <cite>broker_connection_retry</cite> is <cite>False</cite>.</p>
</div>
</div>
</section>
<section id="broker-login-method">
<span id="std-setting-broker_login_method"></span><h4><code class="docutils literal notranslate"><span class="pre">broker_login_method</span></code><a class="headerlink" href="#broker-login-method" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;AMQPLAIN&quot;</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--142-input--1" name="tab-set--142" type="radio"><label class="tab-label" for="tab-set--142-input--1">中文</label><div class="tab-content docutils container">
<p>设置自定义 AMQP 登录方式。</p>
</div>
<input class="tab-input" id="tab-set--142-input--2" name="tab-set--142" type="radio"><label class="tab-label" for="tab-set--142-input--2">英文</label><div class="tab-content docutils container">
<p>Set custom amqp login method.</p>
</div>
</div>
</section>
<section id="broker-native-delayed-delivery-queue-type">
<span id="std-setting-broker_native_delayed_delivery_queue_type"></span><h4><code class="docutils literal notranslate"><span class="pre">broker_native_delayed_delivery_queue_type</span></code><a class="headerlink" href="#broker-native-delayed-delivery-queue-type" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.5.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">transports supported<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">pyamqp</span></code></p>
</dd>
</dl>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;quorum&quot;</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--143-input--1" name="tab-set--143" type="radio"><label class="tab-label" for="tab-set--143-input--1">中文</label><div class="tab-content docutils container">
<p>此设置用于更改原生延迟投递队列的默认队列类型。
另一个可用的选项为 <code class="docutils literal notranslate"><span class="pre">&quot;classic&quot;</span></code>，仅 RabbitMQ 支持，
它会通过 <code class="docutils literal notranslate"><span class="pre">x-queue-type</span></code> 队列参数将队列类型设置为 <code class="docutils literal notranslate"><span class="pre">classic</span></code>。</p>
</div>
<input class="tab-input" id="tab-set--143-input--2" name="tab-set--143" type="radio"><label class="tab-label" for="tab-set--143-input--2">英文</label><div class="tab-content docutils container">
<p>This setting is used to allow changing the default queue type for the
native delayed delivery queues. The other viable option is <code class="docutils literal notranslate"><span class="pre">&quot;classic&quot;</span></code> which
is only supported by RabbitMQ and sets the queue type to <code class="docutils literal notranslate"><span class="pre">classic</span></code> using the <code class="docutils literal notranslate"><span class="pre">x-queue-type</span></code>
queue argument.</p>
</div>
</div>
</section>
<section id="broker-transport-options">
<span id="std-setting-broker_transport_options"></span><h4><code class="docutils literal notranslate"><span class="pre">broker_transport_options</span></code><a class="headerlink" href="#broker-transport-options" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.2.</span></p>
</div>
<p>Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code> (empty mapping).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--144-input--1" name="tab-set--144" type="radio"><label class="tab-label" for="tab-set--144-input--1">中文</label><div class="tab-content docutils container">
<p>传递给底层传输机制的额外选项字典。</p>
<p>请参考所用传输方式的用户手册，以了解支持的选项（如有）。</p>
<p>以下示例为设置可见性超时（Redis 和 SQS 传输支持）：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">broker_transport_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;visibility_timeout&#39;</span><span class="p">:</span> <span class="mi">18000</span><span class="p">}</span>  <span class="c1"># 5 小时</span>
</pre></div>
</div>
<p>以下示例为设置生产者连接的最大重试次数
（这样在首次任务执行时，如果 broker 不可用，生产者不会无限重试）：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">broker_transport_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;max_retries&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--144-input--2" name="tab-set--144" type="radio"><label class="tab-label" for="tab-set--144-input--2">英文</label><div class="tab-content docutils container">
<p>A dict of additional options passed to the underlying transport.</p>
<p>See your transport user manual for supported options (if any).</p>
<p>Example setting the visibility timeout (supported by Redis and SQS
transports):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">broker_transport_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;visibility_timeout&#39;</span><span class="p">:</span> <span class="mi">18000</span><span class="p">}</span>  <span class="c1"># 5 hours</span>
</pre></div>
</div>
<p>Example setting the producer connection maximum number of retries (so producers
won't retry forever if the broker isn't available at the first task execution):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">broker_transport_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;max_retries&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="worker">
<span id="conf-worker"></span><h3>Worker<a class="headerlink" href="#worker" title="Link to this heading">¶</a></h3>
<section id="imports">
<span id="std-setting-imports"></span><h4><code class="docutils literal notranslate"><span class="pre">imports</span></code><a class="headerlink" href="#imports" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">[]</span></code> (empty list).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--145-input--1" name="tab-set--145" type="radio"><label class="tab-label" for="tab-set--145-input--1">中文</label><div class="tab-content docutils container">
<p>Worker 启动时要导入的一组模块序列。</p>
<p>该设置用于指定要导入的任务模块，同时也可用于导入信号处理器、扩展远程控制命令等。</p>
<p>模块将按照定义顺序依次导入。</p>
</div>
<input class="tab-input" id="tab-set--145-input--2" name="tab-set--145" type="radio"><label class="tab-label" for="tab-set--145-input--2">英文</label><div class="tab-content docutils container">
<p>A sequence of modules to import when the worker starts.</p>
<p>This is used to specify the task modules to import, but also
to import signal handlers and additional remote control commands, etc.</p>
<p>The modules will be imported in the original order.</p>
</div>
</div>
</section>
<section id="include">
<span id="std-setting-include"></span><h4><code class="docutils literal notranslate"><span class="pre">include</span></code><a class="headerlink" href="#include" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">[]</span></code> (empty list).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--146-input--1" name="tab-set--146" type="radio"><label class="tab-label" for="tab-set--146-input--1">中文</label><div class="tab-content docutils container">
<p>该设置语义与 <a class="reference internal" href="#std-setting-imports"><code class="xref std std-setting docutils literal notranslate"><span class="pre">imports</span></code></a> 完全相同，但可用于区分类别不同的导入项。</p>
<p>此设置中的模块会在 <a class="reference internal" href="#std-setting-imports"><code class="xref std std-setting docutils literal notranslate"><span class="pre">imports</span></code></a> 中定义的模块之后导入。</p>
</div>
<input class="tab-input" id="tab-set--146-input--2" name="tab-set--146" type="radio"><label class="tab-label" for="tab-set--146-input--2">英文</label><div class="tab-content docutils container">
<p>Exact same semantics as <a class="reference internal" href="#std-setting-imports"><code class="xref std std-setting docutils literal notranslate"><span class="pre">imports</span></code></a>, but can be used as a means
to have different import categories.</p>
<p>The modules in this setting are imported after the modules in
<a class="reference internal" href="#std-setting-imports"><code class="xref std std-setting docutils literal notranslate"><span class="pre">imports</span></code></a>.</p>
</div>
</div>
</section>
<section id="worker-deduplicate-successful-tasks">
<span id="std-setting-worker_deduplicate_successful_tasks"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_deduplicate_successful_tasks</span></code><a class="headerlink" href="#worker-deduplicate-successful-tasks" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.1.</span></p>
</div>
<p>Default: False</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--147-input--1" name="tab-set--147" type="radio"><label class="tab-label" for="tab-set--147-input--1">中文</label><div class="tab-content docutils container">
<p>在每次任务执行前，指示 Worker 检查该任务是否为重复消息。</p>
<p>去重仅适用于以下任务：具有相同的标识符、启用了延迟确认（late acknowledgment）、由消息代理重新投递，并且其状态在结果后端为 <code class="docutils literal notranslate"><span class="pre">SUCCESS</span></code>。</p>
<p>为避免在结果后端产生过多查询，Worker 会在查询结果后端之前先检查本地缓存，以判断任务是否已在本地成功执行过。</p>
<p>可通过设置 <a class="reference internal" href="#std-setting-worker_state_db"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_state_db</span></code></a> 使此缓存持久化。</p>
<p>如果结果后端不是 <a class="reference external" href="https://github.com/celery/celery/blob/main/celery/backends/base.py#L102">持久化的</a>
（如 RPC 后端），此设置将被忽略。</p>
</div>
<input class="tab-input" id="tab-set--147-input--2" name="tab-set--147" type="radio"><label class="tab-label" for="tab-set--147-input--2">英文</label><div class="tab-content docutils container">
<p>Before each task execution, instruct the worker to check if this task is
a duplicate message.</p>
<p>Deduplication occurs only with tasks that have the same identifier,
enabled late acknowledgment, were redelivered by the message broker
and their state is <code class="docutils literal notranslate"><span class="pre">SUCCESS</span></code> in the result backend.</p>
<p>To avoid overflowing the result backend with queries, a local cache of
successfully executed tasks is checked before querying the result backend
in case the task was already successfully executed by the same worker that
received the task.</p>
<p>This cache can be made persistent by setting the <a class="reference internal" href="#std-setting-worker_state_db"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_state_db</span></code></a>
setting.</p>
<p>If the result backend is not <a class="reference external" href="https://github.com/celery/celery/blob/main/celery/backends/base.py#L102">persistent</a>
(the RPC backend, for example), this setting is ignored.</p>
</div>
</div>
</section>
<section id="worker-concurrency">
<span id="std-setting-worker_concurrency"></span><span id="conf-concurrency"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_concurrency</span></code><a class="headerlink" href="#worker-concurrency" title="Link to this heading">¶</a></h4>
<p>Default: Number of CPU cores.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--148-input--1" name="tab-set--148" type="radio"><label class="tab-label" for="tab-set--148-input--1">中文</label><div class="tab-content docutils container">
<p>同时执行任务的并发 Worker 进程/线程/协程数量。</p>
<p>如果任务主要是 I/O 密集型，可设置更多并发；
但如果是 CPU 密集型，建议将该值设为与主机 CPU 核心数接近。
如果未设置，则使用主机的 CPU 核心数。</p>
</div>
<input class="tab-input" id="tab-set--148-input--2" name="tab-set--148" type="radio"><label class="tab-label" for="tab-set--148-input--2">英文</label><div class="tab-content docutils container">
<p>The number of concurrent worker processes/threads/green threads executing
tasks.</p>
<p>If you're doing mostly I/O you can have more processes,
but if mostly CPU-bound, try to keep it close to the
number of CPUs on your machine. If not set, the number of CPUs/cores
on the host will be used.</p>
</div>
</div>
</section>
<section id="worker-prefetch-multiplier">
<span id="std-setting-worker_prefetch_multiplier"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_prefetch_multiplier</span></code><a class="headerlink" href="#worker-prefetch-multiplier" title="Link to this heading">¶</a></h4>
<p>Default: 4.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--149-input--1" name="tab-set--149" type="radio"><label class="tab-label" for="tab-set--149-input--1">中文</label><div class="tab-content docutils container">
<p>每个进程可预取的消息数量，乘以并发进程数量。默认值为 4（即每个进程预取 4 条消息）。
此默认设置通常是合适的，但若任务运行时间很长，并且你在 Worker 启动后才开始处理，
注意第一个启动的 Worker 将一次性接收 4 倍数量的消息，可能导致任务分配不均。</p>
<p>若要禁用预取行为，将 <a class="reference internal" href="#std-setting-worker_prefetch_multiplier"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_prefetch_multiplier</span></code></a> 设置为 1。
如果设置为 0，则允许 Worker 不受限制地持续消费消息。</p>
<p>有关预取机制的详细信息，请参阅 <a class="reference internal" href="optimizing.html#optimizing-prefetch-limit"><span class="std std-ref">预取限制</span></a></p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>带 ETA/countdown 的任务不受预取限制影响。</p>
</div>
</div>
<input class="tab-input" id="tab-set--149-input--2" name="tab-set--149" type="radio"><label class="tab-label" for="tab-set--149-input--2">英文</label><div class="tab-content docutils container">
<p>How many messages to prefetch at a time multiplied by the number of
concurrent processes. The default is 4 (four messages for each
process). The default setting is usually a good choice, however -- if you
have very long running tasks waiting in the queue and you have to start the
workers, note that the first worker to start will receive four times the
number of messages initially. Thus the tasks may not be fairly distributed
to the workers.</p>
<p>To disable prefetching, set <a class="reference internal" href="#std-setting-worker_prefetch_multiplier"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_prefetch_multiplier</span></code></a> to 1.
Changing that setting to 0 will allow the worker to keep consuming
as many messages as it wants.</p>
<p>For more on prefetching, read <a class="reference internal" href="optimizing.html#optimizing-prefetch-limit"><span class="std std-ref">预取限制</span></a></p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Tasks with ETA/countdown aren't affected by prefetch limits.</p>
</div>
</div>
</div>
</section>
<section id="worker-enable-prefetch-count-reduction">
<span id="std-setting-worker_enable_prefetch_count_reduction"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_enable_prefetch_count_reduction</span></code><a class="headerlink" href="#worker-enable-prefetch-count-reduction" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: Enabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--150-input--1" name="tab-set--150" type="radio"><label class="tab-label" for="tab-set--150-input--1">中文</label><div class="tab-content docutils container">
<p>设置项 <code class="docutils literal notranslate"><span class="pre">worker_enable_prefetch_count_reduction</span></code> 控制在与消息代理断开连接后，
Worker 是否会将预取计数恢复至最大允许值。默认该设置是启用的。</p>
<p>当连接丢失时，Celery 会自动尝试重新连接 broker，前提是
<a class="reference internal" href="#std-setting-broker_connection_retry_on_startup"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_connection_retry_on_startup</span></code></a> 或 <a class="reference internal" href="#std-setting-broker_connection_retry"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_connection_retry</span></code></a> 没有被设为 False。
在连接丢失期间，消息代理不会追踪已被获取的任务数量。为合理控制任务负载并防止过载，
Celery 会根据当前正在运行的任务数来减少预取计数。</p>
<p>预取计数是指 Worker 从 broker 一次性获取的消息数量。
在重连期间降低预取计数有助于避免消息被过量获取。</p>
<p>当 <code class="docutils literal notranslate"><span class="pre">worker_enable_prefetch_count_reduction</span></code> 保持默认启用状态时，每当一个在连接丢失前已启动的任务完成时，
预取计数将逐步恢复到最大值。此机制有助于在 Worker 之间保持任务的合理分布，并有效管理负载。</p>
<p>若要禁用此机制，即禁止在重连后减少和恢复预取计数，
可将 <code class="docutils literal notranslate"><span class="pre">worker_enable_prefetch_count_reduction</span></code> 设置为 False。
在某些场景下，例如需要使用固定预取计数来控制任务处理速率或管理 Worker 负载，
特别是在网络连接波动的环境中，禁用此设置可能更合适。</p>
<p><code class="docutils literal notranslate"><span class="pre">worker_enable_prefetch_count_reduction</span></code> 提供了一种方式，
用于控制在连接丢失后恢复预取计数的行为，从而帮助在 Worker 之间维持任务平衡和负载管理。</p>
</div>
<input class="tab-input" id="tab-set--150-input--2" name="tab-set--150" type="radio"><label class="tab-label" for="tab-set--150-input--2">英文</label><div class="tab-content docutils container">
<p>The <code class="docutils literal notranslate"><span class="pre">worker_enable_prefetch_count_reduction</span></code> setting governs the restoration behavior of the
prefetch count to its maximum allowable value following a connection loss to the message
broker. By default, this setting is enabled.</p>
<p>Upon a connection loss, Celery will attempt to reconnect to the broker automatically,
provided the <a class="reference internal" href="#std-setting-broker_connection_retry_on_startup"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_connection_retry_on_startup</span></code></a> or <a class="reference internal" href="#std-setting-broker_connection_retry"><code class="xref std std-setting docutils literal notranslate"><span class="pre">broker_connection_retry</span></code></a>
is not set to False. During the period of lost connection, the message broker does not keep track
of the number of tasks already fetched. Therefore, to manage the task load effectively and prevent
overloading, Celery reduces the prefetch count based on the number of tasks that are
currently running.</p>
<p>The prefetch count is the number of messages that a worker will fetch from the broker at
a time. The reduced prefetch count helps ensure that tasks are not fetched excessively
during periods of reconnection.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">worker_enable_prefetch_count_reduction</span></code> set to its default value (Enabled), the prefetch
count will be gradually restored to its maximum allowed value each time a task that was
running before the connection was lost is completed. This behavior helps maintain a
balanced distribution of tasks among the workers while managing the load effectively.</p>
<p>To disable the reduction and restoration of the prefetch count to its maximum allowed value on
reconnection, set <code class="docutils literal notranslate"><span class="pre">worker_enable_prefetch_count_reduction</span></code> to False. Disabling this setting might
be useful in scenarios where a fixed prefetch count is desired to control the rate of task
processing or manage the worker load, especially in environments with fluctuating connectivity.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">worker_enable_prefetch_count_reduction</span></code> setting provides a way to control the
restoration behavior of the prefetch count following a connection loss, aiding in
maintaining a balanced task distribution and effective load management across the workers.</p>
</div>
</div>
</section>
<section id="worker-lost-wait">
<span id="std-setting-worker_lost_wait"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_lost_wait</span></code><a class="headerlink" href="#worker-lost-wait" title="Link to this heading">¶</a></h4>
<p>Default: 10.0 seconds.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--151-input--1" name="tab-set--151" type="radio"><label class="tab-label" for="tab-set--151-input--1">中文</label><div class="tab-content docutils container">
<p>在某些情况下，Worker 可能被异常终止，未能正常清理资源，
并且可能在终止前已发布了任务结果。
此设置值指定在引发 <a class="reference internal" href="../reference/celery.exceptions.html#celery.exceptions.WorkerLostError" title="celery.exceptions.WorkerLostError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">WorkerLostError</span></code></a> 异常前，等待缺失结果的最大时长。</p>
</div>
<input class="tab-input" id="tab-set--151-input--2" name="tab-set--151" type="radio"><label class="tab-label" for="tab-set--151-input--2">英文</label><div class="tab-content docutils container">
<p>In some cases a worker may be killed without proper cleanup,
and the worker may have published a result before terminating.
This value specifies how long we wait for any missing results before
raising a <a class="reference internal" href="../reference/celery.exceptions.html#celery.exceptions.WorkerLostError" title="celery.exceptions.WorkerLostError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">WorkerLostError</span></code></a> exception.</p>
</div>
</div>
</section>
<section id="worker-max-tasks-per-child">
<span id="std-setting-worker_max_tasks_per_child"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_max_tasks_per_child</span></code><a class="headerlink" href="#worker-max-tasks-per-child" title="Link to this heading">¶</a></h4>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--152-input--1" name="tab-set--152" type="radio"><label class="tab-label" for="tab-set--152-input--1">中文</label><div class="tab-content docutils container">
<p>每个进程池中的 Worker 子进程在被替换前最多可执行的任务数。默认没有限制。</p>
</div>
<input class="tab-input" id="tab-set--152-input--2" name="tab-set--152" type="radio"><label class="tab-label" for="tab-set--152-input--2">英文</label><div class="tab-content docutils container">
<p>Maximum number of tasks a pool worker process can execute before
it's replaced with a new one. Default is no limit.</p>
</div>
</div>
</section>
<section id="worker-max-memory-per-child">
<span id="std-setting-worker_max_memory_per_child"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_max_memory_per_child</span></code><a class="headerlink" href="#worker-max-memory-per-child" title="Link to this heading">¶</a></h4>
<p>Default: No limit.
Type: int (kilobytes)</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--153-input--1" name="tab-set--153" type="radio"><label class="tab-label" for="tab-set--153-input--1">中文</label><div class="tab-content docutils container">
<p>Worker 进程允许使用的最大常驻内存量（以 KB 为单位，1 KB = 1024 字节），
超出该限制后 Worker 将被替换为新的进程。
若单个任务导致该限制被超出，该任务会先完成，然后 Worker 被替换。</p>
<p>示例：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">worker_max_memory_per_child</span> <span class="o">=</span> <span class="mi">12288</span>  <span class="c1"># 12 * 1024 = 12 MB</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--153-input--2" name="tab-set--153" type="radio"><label class="tab-label" for="tab-set--153-input--2">英文</label><div class="tab-content docutils container">
<p>Maximum amount of resident memory, in kilobytes (1024 bytes), that may be
consumed by a worker before it will be replaced by a new worker. If a single
task causes a worker to exceed this limit, the task will be completed, and the
worker will be replaced afterwards.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">worker_max_memory_per_child</span> <span class="o">=</span> <span class="mi">12288</span>  <span class="c1"># 12 * 1024 = 12 MB</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="worker-disable-rate-limits">
<span id="std-setting-worker_disable_rate_limits"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_disable_rate_limits</span></code><a class="headerlink" href="#worker-disable-rate-limits" title="Link to this heading">¶</a></h4>
<p>Default: Disabled (rate limits enabled).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--154-input--1" name="tab-set--154" type="radio"><label class="tab-label" for="tab-set--154-input--1">中文</label><div class="tab-content docutils container">
<p>禁用所有速率限制，即使任务显式设置了速率限制也无效。</p>
</div>
<input class="tab-input" id="tab-set--154-input--2" name="tab-set--154" type="radio"><label class="tab-label" for="tab-set--154-input--2">英文</label><div class="tab-content docutils container">
<p>Disable all rate limits, even if tasks has explicit rate limits set.</p>
</div>
</div>
</section>
<section id="worker-state-db">
<span id="std-setting-worker_state_db"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_state_db</span></code><a class="headerlink" href="#worker-state-db" title="Link to this heading">¶</a></h4>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--155-input--1" name="tab-set--155" type="radio"><label class="tab-label" for="tab-set--155-input--1">中文</label><div class="tab-content docutils container">
<p>用于存储 Worker 持久状态（例如被撤销的任务）的文件名。
可以是相对路径或绝对路径，但请注意根据 Python 版本的不同，
文件名可能会自动附加 <cite>.db</cite> 后缀。</p>
<p>也可以通过 <a class="reference internal" href="../reference/cli.html#cmdoption-celery-worker-S"><code class="xref std std-option docutils literal notranslate"><span class="pre">celery</span> <span class="pre">worker</span> <span class="pre">--statedb</span></code></a> 命令行参数进行设置。</p>
</div>
<input class="tab-input" id="tab-set--155-input--2" name="tab-set--155" type="radio"><label class="tab-label" for="tab-set--155-input--2">英文</label><div class="tab-content docutils container">
<p>Name of the file used to stores persistent worker state (like revoked tasks).
Can be a relative or absolute path, but be aware that the suffix <cite>.db</cite>
may be appended to the file name (depending on Python version).</p>
<p>Can also be set via the <a class="reference internal" href="../reference/cli.html#cmdoption-celery-worker-S"><code class="xref std std-option docutils literal notranslate"><span class="pre">celery</span> <span class="pre">worker</span> <span class="pre">--statedb</span></code></a> argument.</p>
</div>
</div>
</section>
<section id="worker-timer-precision">
<span id="std-setting-worker_timer_precision"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_timer_precision</span></code><a class="headerlink" href="#worker-timer-precision" title="Link to this heading">¶</a></h4>
<p>Default: 1.0 seconds.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--156-input--1" name="tab-set--156" type="radio"><label class="tab-label" for="tab-set--156-input--1">中文</label><div class="tab-content docutils container">
<p>设置 ETA 调度器在重新检查调度计划之间最长可休眠的时间（以秒为单位）。</p>
<p>若设置为 1 秒，则调度器的精度为 1 秒；
若需近似毫秒级精度，可将其设置为 0.1。</p>
</div>
<input class="tab-input" id="tab-set--156-input--2" name="tab-set--156" type="radio"><label class="tab-label" for="tab-set--156-input--2">英文</label><div class="tab-content docutils container">
<p>Set the maximum time in seconds that the ETA scheduler can sleep between
rechecking the schedule.</p>
<p>Setting this value to 1 second means the schedulers precision will
be 1 second. If you need near millisecond precision you can set this to 0.1.</p>
</div>
</div>
</section>
<section id="worker-enable-remote-control">
<span id="std-setting-worker_enable_remote_control"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_enable_remote_control</span></code><a class="headerlink" href="#worker-enable-remote-control" title="Link to this heading">¶</a></h4>
<p>Default: Enabled by default.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--157-input--1" name="tab-set--157" type="radio"><label class="tab-label" for="tab-set--157-input--1">中文</label><div class="tab-content docutils container">
<p>指定是否启用对 Worker 的远程控制功能。</p>
</div>
<input class="tab-input" id="tab-set--157-input--2" name="tab-set--157" type="radio"><label class="tab-label" for="tab-set--157-input--2">英文</label><div class="tab-content docutils container">
<p>Specify if remote control of the workers is enabled.</p>
</div>
</div>
</section>
<section id="worker-proc-alive-timeout">
<span id="std-setting-worker_proc_alive_timeout"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_proc_alive_timeout</span></code><a class="headerlink" href="#worker-proc-alive-timeout" title="Link to this heading">¶</a></h4>
<p>Default: 4.0.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--158-input--1" name="tab-set--158" type="radio"><label class="tab-label" for="tab-set--158-input--1">中文</label><div class="tab-content docutils container">
<p>等待新 Worker 进程启动的超时时间（单位为秒，支持整数或浮点数）。</p>
</div>
<input class="tab-input" id="tab-set--158-input--2" name="tab-set--158" type="radio"><label class="tab-label" for="tab-set--158-input--2">英文</label><div class="tab-content docutils container">
<p>The timeout in seconds (int/float) when waiting for a new worker process to start up.</p>
</div>
</div>
</section>
<section id="worker-cancel-long-running-tasks-on-connection-loss">
<span id="std-setting-worker_cancel_long_running_tasks_on_connection_loss"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_cancel_long_running_tasks_on_connection_loss</span></code><a class="headerlink" href="#worker-cancel-long-running-tasks-on-connection-loss" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.1.</span></p>
</div>
<p>Default: Disabled by default.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--159-input--1" name="tab-set--159" type="radio"><label class="tab-label" for="tab-set--159-input--1">中文</label><div class="tab-content docutils container">
<p>在连接丢失时，终止所有启用了延迟确认的长时间运行任务。</p>
<p>由于连接通道丢失，尚未确认的任务将无法完成确认，
并将重新进入队列。因此启用了延迟确认的任务必须是幂等的，
因为它们可能会被执行多次。
在这种情况下，每次连接丢失都会导致任务被重复执行（有时甚至由多个 Worker 并行执行）。</p>
<p>启用此选项后，尚未完成的任务将被取消，其执行会被终止。
在连接丢失前已完成的任务，
只要未启用 <a class="reference internal" href="#std-setting-task_ignore_result"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_ignore_result</span></code></a>，其结果仍会被写入结果后端。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>此特性是将来的破坏性变更。</p>
<p>若未启用，Celery 将发出警告信息。</p>
<p>在 Celery 6.0 中，<a class="reference internal" href="#std-setting-worker_cancel_long_running_tasks_on_connection_loss"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_cancel_long_running_tasks_on_connection_loss</span></code></a>
将默认设为 <code class="docutils literal notranslate"><span class="pre">True</span></code>，因为当前行为引发的问题多于解决的问题。</p>
</div>
</div>
<input class="tab-input" id="tab-set--159-input--2" name="tab-set--159" type="radio"><label class="tab-label" for="tab-set--159-input--2">英文</label><div class="tab-content docutils container">
<p>Kill all long-running tasks with late acknowledgment enabled on connection loss.</p>
<p>Tasks which have not been acknowledged before the connection loss cannot do so
anymore since their channel is gone and the task is redelivered back to the queue.
This is why tasks with late acknowledged enabled must be idempotent as they may be executed more than once.
In this case, the task is being executed twice per connection loss (and sometimes in parallel in other workers).</p>
<p>When turning this option on, those tasks which have not been completed are
cancelled and their execution is terminated.
Tasks which have completed in any way before the connection loss
are recorded as such in the result backend as long as <a class="reference internal" href="#std-setting-task_ignore_result"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_ignore_result</span></code></a> is not enabled.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>This feature was introduced as a future breaking change.
If it is turned off, Celery will emit a warning message.</p>
<p>In Celery 6.0, the <a class="reference internal" href="#std-setting-worker_cancel_long_running_tasks_on_connection_loss"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_cancel_long_running_tasks_on_connection_loss</span></code></a>
will be set to <code class="docutils literal notranslate"><span class="pre">True</span></code> by default as the current behavior leads to more
problems than it solves.</p>
</div>
</div>
</div>
</section>
<section id="worker-detect-quorum-queues">
<span id="std-setting-worker_detect_quorum_queues"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_detect_quorum_queues</span></code><a class="headerlink" href="#worker-detect-quorum-queues" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.5.</span></p>
</div>
<p>Default: Enabled.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--160-input--1" name="tab-set--160" type="radio"><label class="tab-label" for="tab-set--160-input--1">中文</label><div class="tab-content docutils container">
<p>自动检测 <a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a> 中的队列（包括 <a class="reference internal" href="#std-setting-task_default_queue"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_default_queue</span></code></a>）是否为 Quorum 队列，
如果存在任意 Quorum 队列，将禁用全局 QoS。</p>
</div>
<input class="tab-input" id="tab-set--160-input--2" name="tab-set--160" type="radio"><label class="tab-label" for="tab-set--160-input--2">英文</label><div class="tab-content docutils container">
<p>Automatically detect if any of the queues in <a class="reference internal" href="#std-setting-task_queues"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_queues</span></code></a> are quorum queues
(including the <a class="reference internal" href="#std-setting-task_default_queue"><code class="xref std std-setting docutils literal notranslate"><span class="pre">task_default_queue</span></code></a>) and disable the global QoS if any quorum queue is detected.</p>
</div>
</div>
</section>
<section id="worker-soft-shutdown-timeout">
<span id="std-setting-worker_soft_shutdown_timeout"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_soft_shutdown_timeout</span></code><a class="headerlink" href="#worker-soft-shutdown-timeout" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.5.</span></p>
</div>
<p>Default: 0.0.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--161-input--1" name="tab-set--161" type="radio"><label class="tab-label" for="tab-set--161-input--1">中文</label><div class="tab-content docutils container">
<p>标准的 <a class="reference internal" href="workers.html#worker-warm-shutdown"><span class="std std-ref">温关</span></a> 会等待所有任务执行完毕后再关闭，
除非触发冷关。<a class="reference internal" href="workers.html#worker-soft-shutdown"><span class="std std-ref">软关</span></a> 会在启动冷关前加入等待时间。
此设置用于指定 Worker 在冷关启动前的最大等待时长。</p>
<p>即使未先执行温关，Worker 触发 <a class="reference internal" href="workers.html#worker-cold-shutdown"><span class="std std-ref">冷关</span></a> 时也适用此设置。</p>
<p>若该值设为 0.0，则软关将几乎等同于禁用。
无论该值为何，若当前没有运行任务（除非启用 <a class="reference internal" href="#std-setting-worker_enable_soft_shutdown_on_idle"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_enable_soft_shutdown_on_idle</span></code></a>），
软关将被跳过。</p>
<p>建议尝试不同值来找到最适合你任务的优雅退出时间，推荐值包括 10、30、60 秒。
过大的值可能导致 Worker 关闭延迟过长，甚至会被主机系统发送 <code class="xref std std-sig docutils literal notranslate"><span class="pre">KILL</span></code> 信号强制终止。</p>
</div>
<input class="tab-input" id="tab-set--161-input--2" name="tab-set--161" type="radio"><label class="tab-label" for="tab-set--161-input--2">英文</label><div class="tab-content docutils container">
<p>The standard <a class="reference internal" href="workers.html#worker-warm-shutdown"><span class="std std-ref">warm shutdown</span></a> will wait for all tasks to finish before shutting down
unless the cold shutdown is triggered. The <a class="reference internal" href="workers.html#worker-soft-shutdown"><span class="std std-ref">soft shutdown</span></a> will add a waiting time
before the cold shutdown is initiated. This setting specifies how long the worker will wait before the cold shutdown
is initiated and the worker is terminated.</p>
<p>This will apply also when the worker initiate <a class="reference internal" href="workers.html#worker-cold-shutdown"><span class="std std-ref">cold shutdown</span></a> without doing a warm shutdown first.</p>
<p>If the value is set to 0.0, the soft shutdown will be practically disabled. Regardless of the value, the soft shutdown
will be disabled if there are no tasks running (unless <a class="reference internal" href="#std-setting-worker_enable_soft_shutdown_on_idle"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_enable_soft_shutdown_on_idle</span></code></a> is enabled).</p>
<p>Experiment with this value to find the optimal time for your tasks to finish gracefully before the worker is terminated.
Recommended values can be 10, 30, 60 seconds. Too high value can lead to a long waiting time before the worker is terminated
and trigger a <code class="xref std std-sig docutils literal notranslate"><span class="pre">KILL</span></code> signal to forcefully terminate the worker by the host system.</p>
</div>
</div>
</section>
<section id="worker-enable-soft-shutdown-on-idle">
<span id="std-setting-worker_enable_soft_shutdown_on_idle"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_enable_soft_shutdown_on_idle</span></code><a class="headerlink" href="#worker-enable-soft-shutdown-on-idle" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.5.</span></p>
</div>
<p>Default: False.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--162-input--1" name="tab-set--162" type="radio"><label class="tab-label" for="tab-set--162-input--1">中文</label><div class="tab-content docutils container">
<p>若 <a class="reference internal" href="#std-setting-worker_soft_shutdown_timeout"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_soft_shutdown_timeout</span></code></a> 大于 0.0，但当前没有任务运行，
Worker 仍会跳过 <a class="reference internal" href="workers.html#worker-soft-shutdown"><span class="std std-ref">软关</span></a>。启用本设置后，
即使无任务运行也会触发软关行为。</p>
<div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p>当 Worker 收到 ETA 任务，但尚未到达 ETA 时间，同时触发关机时，
如果没有其他任务正在运行，Worker 会 <strong>跳过</strong> 软关，立即进入冷关流程。
这可能导致 ETA 任务在 Worker 关闭过程中无法重新入队。
为避免该问题，启用此设置可确保 Worker 等待一定时间，
为 ETA 任务的重新入队和优雅关闭提供充足时间。</p>
</div>
</div>
<input class="tab-input" id="tab-set--162-input--2" name="tab-set--162" type="radio"><label class="tab-label" for="tab-set--162-input--2">英文</label><div class="tab-content docutils container">
<p>If the <a class="reference internal" href="#std-setting-worker_soft_shutdown_timeout"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_soft_shutdown_timeout</span></code></a> is set to a value greater than 0.0, the worker will skip
the <a class="reference internal" href="workers.html#worker-soft-shutdown"><span class="std std-ref">soft shutdown</span></a> anyways if there are no tasks running. This setting will
enable the soft shutdown even if there are no tasks running.</p>
<div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p>When the worker received ETA tasks, but the ETA has not been reached yet, and a shutdown is initiated,
the worker will <strong>skip</strong> the soft shutdown and initiate the cold shutdown immediately if there are no
tasks running. This may lead to failure in re-queueing the ETA tasks during worker teardown. To mitigate
this, enable this configuration to ensure the worker waits regadless, which gives enough time for a
graceful shutdown and successful re-queueing of the ETA tasks.</p>
</div>
</div>
</div>
</section>
</section>
<section id="events">
<span id="conf-events"></span><h3>Events<a class="headerlink" href="#events" title="Link to this heading">¶</a></h3>
<section id="worker-send-task-events">
<span id="std-setting-worker_send_task_events"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_send_task_events</span></code><a class="headerlink" href="#worker-send-task-events" title="Link to this heading">¶</a></h4>
<p>Default: Disabled by default.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--163-input--1" name="tab-set--163" type="radio"><label class="tab-label" for="tab-set--163-input--1">中文</label><div class="tab-content docutils container">
<p>发送任务相关事件，以便使用如 <cite>flower</cite> 等工具进行监控。
该设置控制 Worker 的默认 <a class="reference internal" href="../reference/cli.html#cmdoption-celery-worker-E"><code class="xref std std-option docutils literal notranslate"><span class="pre">-E</span></code></a> 参数。</p>
</div>
<input class="tab-input" id="tab-set--163-input--2" name="tab-set--163" type="radio"><label class="tab-label" for="tab-set--163-input--2">英文</label><div class="tab-content docutils container">
<p>Send task-related events so that tasks can be monitored using tools like
<cite>flower</cite>. Sets the default value for the workers
<a class="reference internal" href="../reference/cli.html#cmdoption-celery-worker-E"><code class="xref std std-option docutils literal notranslate"><span class="pre">-E</span></code></a> argument.</p>
</div>
</div>
</section>
<section id="task-send-sent-event">
<span id="std-setting-task_send_sent_event"></span><h4><code class="docutils literal notranslate"><span class="pre">task_send_sent_event</span></code><a class="headerlink" href="#task-send-sent-event" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.2.</span></p>
</div>
<p>Default: Disabled by default.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--164-input--1" name="tab-set--164" type="radio"><label class="tab-label" for="tab-set--164-input--1">中文</label><div class="tab-content docutils container">
<p>若启用，则每个任务都会发送 <a class="reference internal" href="monitoring.html#std-event-task-sent"><code class="xref std std-event docutils literal notranslate"><span class="pre">task-sent</span></code></a> 事件，
以便在任务被 Worker 消费前就能进行追踪。</p>
</div>
<input class="tab-input" id="tab-set--164-input--2" name="tab-set--164" type="radio"><label class="tab-label" for="tab-set--164-input--2">英文</label><div class="tab-content docutils container">
<p>If enabled, a <a class="reference internal" href="monitoring.html#std-event-task-sent"><code class="xref std std-event docutils literal notranslate"><span class="pre">task-sent</span></code></a> event will be sent for every task so tasks can be
tracked before they're consumed by a worker.</p>
</div>
</div>
</section>
<section id="event-queue-ttl">
<span id="std-setting-event_queue_ttl"></span><h4><code class="docutils literal notranslate"><span class="pre">event_queue_ttl</span></code><a class="headerlink" href="#event-queue-ttl" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">transports supported<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">amqp</span></code></p>
</dd>
</dl>
<p>Default: 5.0 seconds.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--165-input--1" name="tab-set--165" type="radio"><label class="tab-label" for="tab-set--165-input--1">中文</label><div class="tab-content docutils container">
<p>消息在发送到监控客户端的事件队列后，其过期时间（以秒为单位，支持 int 或 float）。
该设置将被用作消息的 <code class="docutils literal notranslate"><span class="pre">x-message-ttl</span></code> 属性。</p>
<p>例如，若该值设为 10，则投递到该队列的消息将在 10 秒后被删除。</p>
</div>
<input class="tab-input" id="tab-set--165-input--2" name="tab-set--165" type="radio"><label class="tab-label" for="tab-set--165-input--2">英文</label><div class="tab-content docutils container">
<p>Message expiry time in seconds (int/float) for when messages sent to a monitor clients
event queue is deleted (<code class="docutils literal notranslate"><span class="pre">x-message-ttl</span></code>)</p>
<p>For example, if this value is set to 10 then a message delivered to this queue
will be deleted after 10 seconds.</p>
</div>
</div>
</section>
<section id="event-queue-expires">
<span id="std-setting-event_queue_expires"></span><h4><code class="docutils literal notranslate"><span class="pre">event_queue_expires</span></code><a class="headerlink" href="#event-queue-expires" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">transports supported<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">amqp</span></code></p>
</dd>
</dl>
<p>Default: 60.0 seconds.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--166-input--1" name="tab-set--166" type="radio"><label class="tab-label" for="tab-set--166-input--1">中文</label><div class="tab-content docutils container">
<p>监控客户端的事件队列在未使用后被自动删除的过期时间（以秒为单位，支持 int 或 float）。
该设置对应于 <code class="docutils literal notranslate"><span class="pre">x-expires</span></code> 属性。</p>
</div>
<input class="tab-input" id="tab-set--166-input--2" name="tab-set--166" type="radio"><label class="tab-label" for="tab-set--166-input--2">英文</label><div class="tab-content docutils container">
<p>Expiry time in seconds (int/float) for when after a monitor clients
event queue will be deleted (<code class="docutils literal notranslate"><span class="pre">x-expires</span></code>).</p>
</div>
</div>
</section>
<section id="event-queue-prefix">
<span id="std-setting-event_queue_prefix"></span><h4><code class="docutils literal notranslate"><span class="pre">event_queue_prefix</span></code><a class="headerlink" href="#event-queue-prefix" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;celeryev&quot;</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--167-input--1" name="tab-set--167" type="radio"><label class="tab-label" for="tab-set--167-input--1">中文</label><div class="tab-content docutils container">
<p>事件接收器队列名称使用的前缀。</p>
</div>
<input class="tab-input" id="tab-set--167-input--2" name="tab-set--167" type="radio"><label class="tab-label" for="tab-set--167-input--2">英文</label><div class="tab-content docutils container">
<p>The prefix to use for event receiver queue names.</p>
</div>
</div>
</section>
<section id="event-exchange">
<span id="std-setting-event_exchange"></span><h4><code class="docutils literal notranslate"><span class="pre">event_exchange</span></code><a class="headerlink" href="#event-exchange" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;celeryev&quot;</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--168-input--1" name="tab-set--168" type="radio"><label class="tab-label" for="tab-set--168-input--1">中文</label><div class="tab-content docutils container">
<p>事件交换机（exchange）的名称。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>此选项仍处于实验阶段，请谨慎使用。</p>
</div>
</div>
<input class="tab-input" id="tab-set--168-input--2" name="tab-set--168" type="radio"><label class="tab-label" for="tab-set--168-input--2">英文</label><div class="tab-content docutils container">
<p>Name of the event exchange.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>This option is in experimental stage, please use it with caution.</p>
</div>
</div>
</div>
</section>
<section id="event-serializer">
<span id="std-setting-event_serializer"></span><h4><code class="docutils literal notranslate"><span class="pre">event_serializer</span></code><a class="headerlink" href="#event-serializer" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;json&quot;</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--169-input--1" name="tab-set--169" type="radio"><label class="tab-label" for="tab-set--169-input--1">中文</label><div class="tab-content docutils container">
<p>发送事件消息时使用的消息序列化格式。</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="calling.html#calling-serializers"><span class="std std-ref">序列化器</span></a></p>
</div>
</div>
<input class="tab-input" id="tab-set--169-input--2" name="tab-set--169" type="radio"><label class="tab-label" for="tab-set--169-input--2">英文</label><div class="tab-content docutils container">
<p>Message serialization format used when sending event messages.</p>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="calling.html#calling-serializers"><span class="std std-ref">序列化器</span></a>.</p>
</div>
</div>
</div>
</section>
<section id="events-logfile">
<span id="std-setting-events_logfile"></span><h4><code class="docutils literal notranslate"><span class="pre">events_logfile</span></code><a class="headerlink" href="#events-logfile" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--170-input--1" name="tab-set--170" type="radio"><label class="tab-label" for="tab-set--170-input--1">中文</label><div class="tab-content docutils container">
<p>可选项，指定 <strong class="program">celery events</strong> 的日志输出文件路径（默认为输出到 <cite>stdout</cite>）。</p>
</div>
<input class="tab-input" id="tab-set--170-input--2" name="tab-set--170" type="radio"><label class="tab-label" for="tab-set--170-input--2">英文</label><div class="tab-content docutils container">
<p>An optional file path for <strong class="program">celery events</strong> to log into (defaults to <cite>stdout</cite>).</p>
</div>
</div>
</section>
<section id="events-pidfile">
<span id="std-setting-events_pidfile"></span><h4><code class="docutils literal notranslate"><span class="pre">events_pidfile</span></code><a class="headerlink" href="#events-pidfile" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--171-input--1" name="tab-set--171" type="radio"><label class="tab-label" for="tab-set--171-input--1">中文</label><div class="tab-content docutils container">
<p>可选项，指定 <strong class="program">celery events</strong> 的 PID 文件创建/存储路径（默认不创建 PID 文件）。</p>
</div>
<input class="tab-input" id="tab-set--171-input--2" name="tab-set--171" type="radio"><label class="tab-label" for="tab-set--171-input--2">英文</label><div class="tab-content docutils container">
<p>An optional file path for <strong class="program">celery events</strong> to create/store its PID file (default to no PID file created).</p>
</div>
</div>
</section>
<section id="events-uid">
<span id="std-setting-events_uid"></span><h4><code class="docutils literal notranslate"><span class="pre">events_uid</span></code><a class="headerlink" href="#events-uid" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--172-input--1" name="tab-set--172" type="radio"><label class="tab-label" for="tab-set--172-input--1">中文</label><div class="tab-content docutils container">
<p>可选项，<strong class="program">celery events</strong> 在降权运行时使用的用户 ID（默认不更改 UID）。</p>
</div>
<input class="tab-input" id="tab-set--172-input--2" name="tab-set--172" type="radio"><label class="tab-label" for="tab-set--172-input--2">英文</label><div class="tab-content docutils container">
<p>An optional user ID to use when events <strong class="program">celery events</strong> drops its privileges (defaults to no UID change).</p>
</div>
</div>
</section>
<section id="events-gid">
<span id="std-setting-events_gid"></span><h4><code class="docutils literal notranslate"><span class="pre">events_gid</span></code><a class="headerlink" href="#events-gid" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--173-input--1" name="tab-set--173" type="radio"><label class="tab-label" for="tab-set--173-input--1">中文</label><div class="tab-content docutils container">
<p>可选项，<strong class="program">celery events</strong> 以守护进程运行时使用的用户组 ID（默认不更改 GID）。</p>
</div>
<input class="tab-input" id="tab-set--173-input--2" name="tab-set--173" type="radio"><label class="tab-label" for="tab-set--173-input--2">英文</label><div class="tab-content docutils container">
<p>An optional group ID to use when <strong class="program">celery events</strong> daemon drops its privileges (defaults to no GID change).</p>
</div>
</div>
</section>
<section id="events-umask">
<span id="std-setting-events_umask"></span><h4><code class="docutils literal notranslate"><span class="pre">events_umask</span></code><a class="headerlink" href="#events-umask" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--174-input--1" name="tab-set--174" type="radio"><label class="tab-label" for="tab-set--174-input--1">中文</label><div class="tab-content docutils container">
<p>可选项，<strong class="program">celery events</strong> 在守护进程化创建文件（如日志、PID）时使用的 <cite>umask</cite>。</p>
</div>
<input class="tab-input" id="tab-set--174-input--2" name="tab-set--174" type="radio"><label class="tab-label" for="tab-set--174-input--2">英文</label><div class="tab-content docutils container">
<p>An optional <cite>umask</cite> to use when <strong class="program">celery events</strong> creates files (log, pid...) when daemonizing.</p>
</div>
</div>
</section>
<section id="events-executable">
<span id="std-setting-events_executable"></span><h4><code class="docutils literal notranslate"><span class="pre">events_executable</span></code><a class="headerlink" href="#events-executable" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--175-input--1" name="tab-set--175" type="radio"><label class="tab-label" for="tab-set--175-input--1">中文</label><div class="tab-content docutils container">
<p>可选项，<strong class="program">celery events</strong> 守护进程化时使用的 <cite>python</cite> 可执行文件路径
（默认为 <a class="reference external" href="https://docs.python.org/dev/library/sys.html#sys.executable" title="（在 Python v3.15）"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.executable</span></code></a>）。</p>
</div>
<input class="tab-input" id="tab-set--175-input--2" name="tab-set--175" type="radio"><label class="tab-label" for="tab-set--175-input--2">英文</label><div class="tab-content docutils container">
<p>An optional <cite>python</cite> executable path for <strong class="program">celery events</strong> to use when deaemonizing (defaults to <a class="reference external" href="https://docs.python.org/dev/library/sys.html#sys.executable" title="（在 Python v3.15）"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.executable</span></code></a>).</p>
</div>
</div>
</section>
</section>
<section id="conf-control">
<span id="id48"></span><h3>远程控制命令<a class="headerlink" href="#conf-control" title="Link to this heading">¶</a></h3>
<p>Remote Control Commands</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--176-input--1" name="tab-set--176" type="radio"><label class="tab-label" for="tab-set--176-input--1">中文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>如需禁用远程控制命令，请参阅 <a class="reference internal" href="#std-setting-worker_enable_remote_control"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_enable_remote_control</span></code></a> 设置项。</p>
</div>
</div>
<input class="tab-input" id="tab-set--176-input--2" name="tab-set--176" type="radio"><label class="tab-label" for="tab-set--176-input--2">英文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>To disable remote control commands see
the <a class="reference internal" href="#std-setting-worker_enable_remote_control"><code class="xref std std-setting docutils literal notranslate"><span class="pre">worker_enable_remote_control</span></code></a> setting.</p>
</div>
</div>
</div>
<section id="control-queue-ttl">
<span id="std-setting-control_queue_ttl"></span><h4><code class="docutils literal notranslate"><span class="pre">control_queue_ttl</span></code><a class="headerlink" href="#control-queue-ttl" title="Link to this heading">¶</a></h4>
<p>Default: 300.0</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--177-input--1" name="tab-set--177" type="radio"><label class="tab-label" for="tab-set--177-input--1">中文</label><div class="tab-content docutils container">
<p>远程控制命令队列中的消息在发送后将过期的时间（以秒为单位）。</p>
<p>若使用默认值 300 秒，表示如果在 300 秒内没有任何 Worker 消费该远程控制命令，
该命令将被丢弃。</p>
<p>该设置同样适用于远程控制的响应队列。</p>
</div>
<input class="tab-input" id="tab-set--177-input--2" name="tab-set--177" type="radio"><label class="tab-label" for="tab-set--177-input--2">英文</label><div class="tab-content docutils container">
<p>Time in seconds, before a message in a remote control command queue
will expire.</p>
<p>If using the default of 300 seconds, this means that if a remote control
command is sent and no worker picks it up within 300 seconds, the command
is discarded.</p>
<p>This setting also applies to remote control reply queues.</p>
</div>
</div>
</section>
<section id="control-queue-expires">
<span id="std-setting-control_queue_expires"></span><h4><code class="docutils literal notranslate"><span class="pre">control_queue_expires</span></code><a class="headerlink" href="#control-queue-expires" title="Link to this heading">¶</a></h4>
<p>Default: 10.0</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--178-input--1" name="tab-set--178" type="radio"><label class="tab-label" for="tab-set--178-input--1">中文</label><div class="tab-content docutils container">
<p>未使用的远程控制命令队列在多久后从消息代理中删除（单位：秒）。</p>
<p>该设置同样适用于远程控制的响应队列。</p>
</div>
<input class="tab-input" id="tab-set--178-input--2" name="tab-set--178" type="radio"><label class="tab-label" for="tab-set--178-input--2">英文</label><div class="tab-content docutils container">
<p>Time in seconds, before an unused remote control command queue is deleted
from the broker.</p>
<p>This setting also applies to remote control reply queues.</p>
</div>
</div>
</section>
<section id="control-exchange">
<span id="std-setting-control_exchange"></span><h4><code class="docutils literal notranslate"><span class="pre">control_exchange</span></code><a class="headerlink" href="#control-exchange" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;celery&quot;</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--179-input--1" name="tab-set--179" type="radio"><label class="tab-label" for="tab-set--179-input--1">中文</label><div class="tab-content docutils container">
<p>控制命令交换机的名称。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>此选项仍处于实验阶段，请谨慎使用。</p>
</div>
</div>
<input class="tab-input" id="tab-set--179-input--2" name="tab-set--179" type="radio"><label class="tab-label" for="tab-set--179-input--2">英文</label><div class="tab-content docutils container">
<p>Name of the control command exchange.</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>This option is in experimental stage, please use it with caution.</p>
</div>
</div>
</div>
</section>
</section>
<section id="conf-logging">
<span id="id49"></span><h3>日志<a class="headerlink" href="#conf-logging" title="Link to this heading">¶</a></h3>
<p>Logging</p>
<section id="worker-hijack-root-logger">
<span id="std-setting-worker_hijack_root_logger"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_hijack_root_logger</span></code><a class="headerlink" href="#worker-hijack-root-logger" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.2.</span></p>
</div>
<p>Default: Enabled by default (hijack root logger).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--180-input--1" name="tab-set--180" type="radio"><label class="tab-label" for="tab-set--180-input--1">中文</label><div class="tab-content docutils container">
<p>默认情况下，Celery 会移除根日志记录器（root logger）上已存在的所有处理器。
若你希望自定义日志处理器，可以通过将
<cite>worker_hijack_root_logger = False</cite> 来禁用此行为。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>也可以通过监听 <code class="xref std std-signal docutils literal notranslate"><span class="pre">celery.signals.setup_logging</span></code> 信号来自定义日志系统。</p>
</div>
</div>
<input class="tab-input" id="tab-set--180-input--2" name="tab-set--180" type="radio"><label class="tab-label" for="tab-set--180-input--2">英文</label><div class="tab-content docutils container">
<p>By default any previously configured handlers on the root logger will be
removed. If you want to customize your own logging handlers, then you
can disable this behavior by setting
<cite>worker_hijack_root_logger = False</cite>.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Logging can also be customized by connecting to the
<code class="xref std std-signal docutils literal notranslate"><span class="pre">celery.signals.setup_logging</span></code> signal.</p>
</div>
</div>
</div>
</section>
<section id="worker-log-color">
<span id="std-setting-worker_log_color"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_log_color</span></code><a class="headerlink" href="#worker-log-color" title="Link to this heading">¶</a></h4>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--181-input--1" name="tab-set--181" type="radio"><label class="tab-label" for="tab-set--181-input--1">中文</label><div class="tab-content docutils container">
<p>默认值：若应用日志输出到终端，则启用。</p>
<p>是否在 Celery 应用的日志输出中启用颜色显示。</p>
</div>
<input class="tab-input" id="tab-set--181-input--2" name="tab-set--181" type="radio"><label class="tab-label" for="tab-set--181-input--2">英文</label><div class="tab-content docutils container">
<p>Default: Enabled if app is logging to a terminal.</p>
<p>Enables/disables colors in logging output by the Celery apps.</p>
</div>
</div>
</section>
<section id="worker-log-format">
<span id="std-setting-worker_log_format"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_log_format</span></code><a class="headerlink" href="#worker-log-format" title="Link to this heading">¶</a></h4>
<p>Default:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;[%(asctime)s: %(levelname)s/%(processName)s] %(message)s&quot;
</pre></div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--182-input--1" name="tab-set--182" type="radio"><label class="tab-label" for="tab-set--182-input--1">中文</label><div class="tab-content docutils container">
<p>日志消息使用的格式。</p>
<p>有关日志格式的详细信息，请参阅 Python 的 <a class="reference external" href="https://docs.python.org/dev/library/logging.html#module-logging" title="（在 Python v3.15）"><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a> 模块。</p>
</div>
<input class="tab-input" id="tab-set--182-input--2" name="tab-set--182" type="radio"><label class="tab-label" for="tab-set--182-input--2">英文</label><div class="tab-content docutils container">
<p>The format to use for log messages.</p>
<p>See the Python <a class="reference external" href="https://docs.python.org/dev/library/logging.html#module-logging" title="（在 Python v3.15）"><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a> module for more information about log
formats.</p>
</div>
</div>
</section>
<section id="worker-task-log-format">
<span id="std-setting-worker_task_log_format"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_task_log_format</span></code><a class="headerlink" href="#worker-task-log-format" title="Link to this heading">¶</a></h4>
<p>Default:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&quot;[%(asctime)s: %(levelname)s/%(processName)s]
    %(task_name)s[%(task_id)s]: %(message)s&quot;
</pre></div>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--183-input--1" name="tab-set--183" type="radio"><label class="tab-label" for="tab-set--183-input--1">中文</label><div class="tab-content docutils container">
<p>任务中记录日志时使用的日志消息格式。</p>
<p>有关日志格式的详细信息，请参阅 Python 的 <a class="reference external" href="https://docs.python.org/dev/library/logging.html#module-logging" title="（在 Python v3.15）"><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a> 模块。</p>
</div>
<input class="tab-input" id="tab-set--183-input--2" name="tab-set--183" type="radio"><label class="tab-label" for="tab-set--183-input--2">英文</label><div class="tab-content docutils container">
<p>The format to use for log messages logged in tasks.</p>
<p>See the Python <a class="reference external" href="https://docs.python.org/dev/library/logging.html#module-logging" title="（在 Python v3.15）"><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a> module for more information about log
formats.</p>
</div>
</div>
</section>
<section id="worker-redirect-stdouts">
<span id="std-setting-worker_redirect_stdouts"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_redirect_stdouts</span></code><a class="headerlink" href="#worker-redirect-stdouts" title="Link to this heading">¶</a></h4>
<p>Default: Enabled by default.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--184-input--1" name="tab-set--184" type="radio"><label class="tab-label" for="tab-set--184-input--1">中文</label><div class="tab-content docutils container">
<p>若启用此选项，则 <cite>stdout</cite> 与 <cite>stderr</cite> 的输出将被重定向至当前日志记录器。</p>
<p>适用于 <strong class="program">celery worker</strong> 与 <strong class="program">celery beat</strong>。</p>
</div>
<input class="tab-input" id="tab-set--184-input--2" name="tab-set--184" type="radio"><label class="tab-label" for="tab-set--184-input--2">英文</label><div class="tab-content docutils container">
<p>If enabled <cite>stdout</cite> and <cite>stderr</cite> will be redirected
to the current logger.</p>
<p>Used by <strong class="program">celery worker</strong> and <strong class="program">celery beat</strong>.</p>
</div>
</div>
</section>
<section id="worker-redirect-stdouts-level">
<span id="std-setting-worker_redirect_stdouts_level"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_redirect_stdouts_level</span></code><a class="headerlink" href="#worker-redirect-stdouts-level" title="Link to this heading">¶</a></h4>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">WARNING</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--185-input--1" name="tab-set--185" type="radio"><label class="tab-label" for="tab-set--185-input--1">中文</label><div class="tab-content docutils container">
<p>用于记录 <cite>stdout</cite> 与 <cite>stderr</cite> 输出的日志等级。
可选值包括：<code class="xref py py-const docutils literal notranslate"><span class="pre">DEBUG</span></code>、 <code class="xref py py-const docutils literal notranslate"><span class="pre">INFO</span></code>、 <code class="xref py py-const docutils literal notranslate"><span class="pre">WARNING</span></code>、 <code class="xref py py-const docutils literal notranslate"><span class="pre">ERROR</span></code>、 <code class="xref py py-const docutils literal notranslate"><span class="pre">CRITICAL</span></code>。</p>
</div>
<input class="tab-input" id="tab-set--185-input--2" name="tab-set--185" type="radio"><label class="tab-label" for="tab-set--185-input--2">英文</label><div class="tab-content docutils container">
<p>The log level output to <cite>stdout</cite> and <cite>stderr</cite> is logged as.
Can be one of <code class="xref py py-const docutils literal notranslate"><span class="pre">DEBUG</span></code>, <code class="xref py py-const docutils literal notranslate"><span class="pre">INFO</span></code>, <code class="xref py py-const docutils literal notranslate"><span class="pre">WARNING</span></code>,
<code class="xref py py-const docutils literal notranslate"><span class="pre">ERROR</span></code>, or <code class="xref py py-const docutils literal notranslate"><span class="pre">CRITICAL</span></code>.</p>
</div>
</div>
</section>
</section>
<section id="conf-security">
<span id="id50"></span><h3>安全<a class="headerlink" href="#conf-security" title="Link to this heading">¶</a></h3>
<p>Security</p>
<section id="security-key">
<span id="std-setting-security_key"></span><h4><code class="docutils literal notranslate"><span class="pre">security_key</span></code><a class="headerlink" href="#security-key" title="Link to this heading">¶</a></h4>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.5.</span></p>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--186-input--1" name="tab-set--186" type="radio"><label class="tab-label" for="tab-set--186-input--1">中文</label><div class="tab-content docutils container">
<p>当启用 <a class="reference internal" href="security.html#message-signing"><span class="std std-ref">消息签名</span></a> 时，此配置指定用于对消息签名的私钥文件路径（相对或绝对路径）。</p>
</div>
<input class="tab-input" id="tab-set--186-input--2" name="tab-set--186" type="radio"><label class="tab-label" for="tab-set--186-input--2">英文</label><div class="tab-content docutils container">
<p>The relative or absolute path to a file containing the private key
used to sign messages when <a class="reference internal" href="security.html#message-signing"><span class="std std-ref">消息签名</span></a> is used.</p>
</div>
</div>
</section>
<section id="security-key-password">
<span id="std-setting-security_key_password"></span><h4><code class="docutils literal notranslate"><span class="pre">security_key_password</span></code><a class="headerlink" href="#security-key-password" title="Link to this heading">¶</a></h4>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.3.0.</span></p>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--187-input--1" name="tab-set--187" type="radio"><label class="tab-label" for="tab-set--187-input--1">中文</label><div class="tab-content docutils container">
<p>当启用 <a class="reference internal" href="security.html#message-signing"><span class="std std-ref">消息签名</span></a> 时，此配置用于解密私钥的密码。</p>
</div>
<input class="tab-input" id="tab-set--187-input--2" name="tab-set--187" type="radio"><label class="tab-label" for="tab-set--187-input--2">英文</label><div class="tab-content docutils container">
<p>The password used to decrypt the private key when <a class="reference internal" href="security.html#message-signing"><span class="std std-ref">消息签名</span></a>
is used.</p>
</div>
</div>
</section>
<section id="security-certificate">
<span id="std-setting-security_certificate"></span><h4><code class="docutils literal notranslate"><span class="pre">security_certificate</span></code><a class="headerlink" href="#security-certificate" title="Link to this heading">¶</a></h4>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.5.</span></p>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--188-input--1" name="tab-set--188" type="radio"><label class="tab-label" for="tab-set--188-input--1">中文</label><div class="tab-content docutils container">
<p>当启用 <a class="reference internal" href="security.html#message-signing"><span class="std std-ref">消息签名</span></a> 时，此配置指定用于签名消息的 X.509 证书文件路径（相对或绝对路径）。</p>
</div>
<input class="tab-input" id="tab-set--188-input--2" name="tab-set--188" type="radio"><label class="tab-label" for="tab-set--188-input--2">英文</label><div class="tab-content docutils container">
<p>The relative or absolute path to an X.509 certificate file
used to sign messages when <a class="reference internal" href="security.html#message-signing"><span class="std std-ref">消息签名</span></a> is used.</p>
</div>
</div>
</section>
<section id="security-cert-store">
<span id="std-setting-security_cert_store"></span><h4><code class="docutils literal notranslate"><span class="pre">security_cert_store</span></code><a class="headerlink" href="#security-cert-store" title="Link to this heading">¶</a></h4>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.5.</span></p>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--189-input--1" name="tab-set--189" type="radio"><label class="tab-label" for="tab-set--189-input--1">中文</label><div class="tab-content docutils container">
<p>用于 <a class="reference internal" href="security.html#message-signing"><span class="std std-ref">消息签名</span></a> 的 X.509 证书所在目录。可以使用通配符（glob）路径，
例如 <code class="file docutils literal notranslate"><span class="pre">/etc/certs/*.pem</span></code>。</p>
</div>
<input class="tab-input" id="tab-set--189-input--2" name="tab-set--189" type="radio"><label class="tab-label" for="tab-set--189-input--2">英文</label><div class="tab-content docutils container">
<p>The directory containing X.509 certificates used for
<a class="reference internal" href="security.html#message-signing"><span class="std std-ref">消息签名</span></a>. Can be a glob with wild-cards,
(for example <code class="file docutils literal notranslate"><span class="pre">/etc/certs/*.pem</span></code>).</p>
</div>
</div>
</section>
<section id="security-digest">
<span id="std-setting-security_digest"></span><h4><code class="docutils literal notranslate"><span class="pre">security_digest</span></code><a class="headerlink" href="#security-digest" title="Link to this heading">¶</a></h4>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">sha256</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 4.3.</span></p>
</div>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--190-input--1" name="tab-set--190" type="radio"><label class="tab-label" for="tab-set--190-input--1">中文</label><div class="tab-content docutils container">
<p>当启用 <a class="reference internal" href="security.html#message-signing"><span class="std std-ref">消息签名</span></a> 时，使用的消息签名摘要算法。
参见：<a class="reference external" href="https://cryptography.io/en/latest/hazmat/primitives/cryptographic-hashes/#module-cryptography.hazmat.primitives.hashes">https://cryptography.io/en/latest/hazmat/primitives/cryptographic-hashes/#module-cryptography.hazmat.primitives.hashes</a></p>
</div>
<input class="tab-input" id="tab-set--190-input--2" name="tab-set--190" type="radio"><label class="tab-label" for="tab-set--190-input--2">英文</label><div class="tab-content docutils container">
<p>A cryptography digest used to sign messages
when <a class="reference internal" href="security.html#message-signing"><span class="std std-ref">消息签名</span></a> is used.
<a class="reference external" href="https://cryptography.io/en/latest/hazmat/primitives/cryptographic-hashes/#module-cryptography.hazmat.primitives.hashes">https://cryptography.io/en/latest/hazmat/primitives/cryptographic-hashes/#module-cryptography.hazmat.primitives.hashes</a></p>
</div>
</div>
</section>
</section>
<section id="conf-custom-components">
<span id="id51"></span><h3>自定义组件类(高级)<a class="headerlink" href="#conf-custom-components" title="Link to this heading">¶</a></h3>
<p>Custom Component Classes (advanced)</p>
<section id="worker-pool">
<span id="std-setting-worker_pool"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_pool</span></code><a class="headerlink" href="#worker-pool" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;prefork&quot;</span></code> (<code class="docutils literal notranslate"><span class="pre">celery.concurrency.prefork:TaskPool</span></code>).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--191-input--1" name="tab-set--191" type="radio"><label class="tab-label" for="tab-set--191-input--1">中文</label><div class="tab-content docutils container">
<p>Worker 使用的进程池类名称。</p>
<div class="admonition-eventlet-gevent admonition">
<p class="admonition-title">Eventlet/Gevent</p>
<p>请勿使用此选项选择 eventlet 或 gevent 池。
应使用 <a class="reference internal" href="../reference/cli.html#cmdoption-celery-worker-P"><code class="xref std std-option docutils literal notranslate"><span class="pre">-P</span></code></a> 参数传给 <strong class="program">celery worker</strong>，
以确保 monkey patch 能够及时应用，避免因应用顺序错误导致程序异常。</p>
</div>
</div>
<input class="tab-input" id="tab-set--191-input--2" name="tab-set--191" type="radio"><label class="tab-label" for="tab-set--191-input--2">英文</label><div class="tab-content docutils container">
<p>Name of the pool class used by the worker.</p>
<div class="admonition-eventlet-gevent admonition">
<p class="admonition-title">Eventlet/Gevent</p>
<p>Never use this option to select the eventlet or gevent pool.
You must use the <a class="reference internal" href="../reference/cli.html#cmdoption-celery-worker-P"><code class="xref std std-option docutils literal notranslate"><span class="pre">-P</span></code></a> option to
<strong class="program">celery worker</strong> instead, to ensure the monkey patches
aren't applied too late, causing things to break in strange ways.</p>
</div>
</div>
</div>
</section>
<section id="worker-pool-restarts">
<span id="std-setting-worker_pool_restarts"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_pool_restarts</span></code><a class="headerlink" href="#worker-pool-restarts" title="Link to this heading">¶</a></h4>
<p>Default: Disabled by default.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--192-input--1" name="tab-set--192" type="radio"><label class="tab-label" for="tab-set--192-input--1">中文</label><div class="tab-content docutils container">
<p>启用后，可以通过 <code class="xref std std-control docutils literal notranslate"><span class="pre">pool_restart</span></code> 远程控制命令重启 worker 的进程池。</p>
</div>
<input class="tab-input" id="tab-set--192-input--2" name="tab-set--192" type="radio"><label class="tab-label" for="tab-set--192-input--2">英文</label><div class="tab-content docutils container">
<p>If enabled the worker pool can be restarted using the
<code class="xref std std-control docutils literal notranslate"><span class="pre">pool_restart</span></code> remote control command.</p>
</div>
</div>
</section>
<section id="worker-autoscaler">
<span id="std-setting-worker_autoscaler"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_autoscaler</span></code><a class="headerlink" href="#worker-autoscaler" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 2.2.</span></p>
</div>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;celery.worker.autoscale:Autoscaler&quot;</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--193-input--1" name="tab-set--193" type="radio"><label class="tab-label" for="tab-set--193-input--1">中文</label><div class="tab-content docutils container">
<p>用于自动扩缩容的类名称。</p>
</div>
<input class="tab-input" id="tab-set--193-input--2" name="tab-set--193" type="radio"><label class="tab-label" for="tab-set--193-input--2">英文</label><div class="tab-content docutils container">
<p>Name of the autoscaler class to use.</p>
</div>
</div>
</section>
<section id="worker-consumer">
<span id="std-setting-worker_consumer"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_consumer</span></code><a class="headerlink" href="#worker-consumer" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;celery.worker.consumer:Consumer&quot;</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--194-input--1" name="tab-set--194" type="radio"><label class="tab-label" for="tab-set--194-input--1">中文</label><div class="tab-content docutils container">
<p>Worker 使用的消费者（consumer）类名称。</p>
</div>
<input class="tab-input" id="tab-set--194-input--2" name="tab-set--194" type="radio"><label class="tab-label" for="tab-set--194-input--2">英文</label><div class="tab-content docutils container">
<p>Name of the consumer class used by the worker.</p>
</div>
</div>
</section>
<section id="worker-timer">
<span id="std-setting-worker_timer"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_timer</span></code><a class="headerlink" href="#worker-timer" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;kombu.asynchronous.hub.timer:Timer&quot;</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--195-input--1" name="tab-set--195" type="radio"><label class="tab-label" for="tab-set--195-input--1">中文</label><div class="tab-content docutils container">
<p>Worker 使用的 ETA 调度器类名称。
默认由进程池实现指定。</p>
</div>
<input class="tab-input" id="tab-set--195-input--2" name="tab-set--195" type="radio"><label class="tab-label" for="tab-set--195-input--2">英文</label><div class="tab-content docutils container">
<p>Name of the ETA scheduler class used by the worker.
Default is or set by the pool implementation.</p>
</div>
</div>
</section>
<section id="worker-logfile">
<span id="std-setting-worker_logfile"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_logfile</span></code><a class="headerlink" href="#worker-logfile" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--196-input--1" name="tab-set--196" type="radio"><label class="tab-label" for="tab-set--196-input--1">中文</label><div class="tab-content docutils container">
<p><strong class="program">celery worker</strong> 的可选日志输出文件路径（默认为输出到 <cite>stdout</cite>）。</p>
</div>
<input class="tab-input" id="tab-set--196-input--2" name="tab-set--196" type="radio"><label class="tab-label" for="tab-set--196-input--2">英文</label><div class="tab-content docutils container">
<p>An optional file path for <strong class="program">celery worker</strong> to log into (defaults to <cite>stdout</cite>).</p>
</div>
</div>
</section>
<section id="worker-pidfile">
<span id="std-setting-worker_pidfile"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_pidfile</span></code><a class="headerlink" href="#worker-pidfile" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--197-input--1" name="tab-set--197" type="radio"><label class="tab-label" for="tab-set--197-input--1">中文</label><div class="tab-content docutils container">
<p><strong class="program">celery worker</strong> 的可选 PID 文件创建/存储路径（默认不创建 PID 文件）。</p>
</div>
<input class="tab-input" id="tab-set--197-input--2" name="tab-set--197" type="radio"><label class="tab-label" for="tab-set--197-input--2">英文</label><div class="tab-content docutils container">
<p>An optional file path for <strong class="program">celery worker</strong> to create/store its PID file (defaults to no PID file created).</p>
</div>
</div>
</section>
<section id="worker-uid">
<span id="std-setting-worker_uid"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_uid</span></code><a class="headerlink" href="#worker-uid" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--198-input--1" name="tab-set--198" type="radio"><label class="tab-label" for="tab-set--198-input--1">中文</label><div class="tab-content docutils container">
<p>当 <strong class="program">celery worker</strong> 守护进程化运行时，降权使用的用户 ID（默认不更改 UID）。</p>
</div>
<input class="tab-input" id="tab-set--198-input--2" name="tab-set--198" type="radio"><label class="tab-label" for="tab-set--198-input--2">英文</label><div class="tab-content docutils container">
<p>An optional user ID to use when <strong class="program">celery worker</strong> daemon drops its privileges (defaults to no UID change).</p>
</div>
</div>
</section>
<section id="worker-gid">
<span id="std-setting-worker_gid"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_gid</span></code><a class="headerlink" href="#worker-gid" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--199-input--1" name="tab-set--199" type="radio"><label class="tab-label" for="tab-set--199-input--1">中文</label><div class="tab-content docutils container">
<p>当 <strong class="program">celery worker</strong> 守护进程化运行时，降权使用的用户组 ID（默认不更改 GID）。</p>
</div>
<input class="tab-input" id="tab-set--199-input--2" name="tab-set--199" type="radio"><label class="tab-label" for="tab-set--199-input--2">英文</label><div class="tab-content docutils container">
<p>An optional group ID to use when <strong class="program">celery worker</strong> daemon drops its privileges (defaults to no GID change).</p>
</div>
</div>
</section>
<section id="worker-umask">
<span id="std-setting-worker_umask"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_umask</span></code><a class="headerlink" href="#worker-umask" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--200-input--1" name="tab-set--200" type="radio"><label class="tab-label" for="tab-set--200-input--1">中文</label><div class="tab-content docutils container">
<p><strong class="program">celery worker</strong> 守护进程化运行时创建文件（日志、PID 文件等）使用的 <cite>umask</cite> （可选）。</p>
</div>
<input class="tab-input" id="tab-set--200-input--2" name="tab-set--200" type="radio"><label class="tab-label" for="tab-set--200-input--2">英文</label><div class="tab-content docutils container">
<p>An optional <cite>umask</cite> to use when <strong class="program">celery worker</strong> creates files (log, pid...) when daemonizing.</p>
</div>
</div>
</section>
<section id="worker-executable">
<span id="std-setting-worker_executable"></span><h4><code class="docutils literal notranslate"><span class="pre">worker_executable</span></code><a class="headerlink" href="#worker-executable" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--201-input--1" name="tab-set--201" type="radio"><label class="tab-label" for="tab-set--201-input--1">中文</label><div class="tab-content docutils container">
<p><strong class="program">celery worker</strong> 守护进程化运行时使用的 <cite>python</cite> 可执行文件路径（可选，默认为 <a class="reference external" href="https://docs.python.org/dev/library/sys.html#sys.executable" title="（在 Python v3.15）"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.executable</span></code></a>）。</p>
</div>
<input class="tab-input" id="tab-set--201-input--2" name="tab-set--201" type="radio"><label class="tab-label" for="tab-set--201-input--2">英文</label><div class="tab-content docutils container">
<p>An optional <cite>python</cite> executable path for <strong class="program">celery worker</strong> to use when deaemonizing (defaults to <a class="reference external" href="https://docs.python.org/dev/library/sys.html#sys.executable" title="（在 Python v3.15）"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.executable</span></code></a>).</p>
</div>
</div>
</section>
</section>
<section id="celery-beat">
<span id="conf-celerybeat"></span><h3>调度设置 (<strong class="program">celery beat</strong>)<a class="headerlink" href="#celery-beat" title="Link to this heading">¶</a></h3>
<p>Beat Settings (<strong class="program">celery beat</strong>)</p>
<section id="beat-schedule">
<span id="std-setting-beat_schedule"></span><h4><code class="docutils literal notranslate"><span class="pre">beat_schedule</span></code><a class="headerlink" href="#beat-schedule" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">{}</span></code> (empty mapping).</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--202-input--1" name="tab-set--202" type="radio"><label class="tab-label" for="tab-set--202-input--1">中文</label><div class="tab-content docutils container">
<p>由 <a class="reference internal" href="../reference/celery.bin.beat.html#module-celery.bin.beat" title="celery.bin.beat"><code class="xref py py-mod docutils literal notranslate"><span class="pre">beat</span></code></a> 使用的周期性任务调度配置。
参见 <a class="reference internal" href="periodic-tasks.html#beat-entries"><span class="std std-ref">条目</span></a>。</p>
</div>
<input class="tab-input" id="tab-set--202-input--2" name="tab-set--202" type="radio"><label class="tab-label" for="tab-set--202-input--2">英文</label><div class="tab-content docutils container">
<p>The periodic task schedule used by <a class="reference internal" href="../reference/celery.bin.beat.html#module-celery.bin.beat" title="celery.bin.beat"><code class="xref py py-mod docutils literal notranslate"><span class="pre">beat</span></code></a>.
See <a class="reference internal" href="periodic-tasks.html#beat-entries"><span class="std std-ref">条目</span></a>.</p>
</div>
</div>
</section>
<section id="beat-scheduler">
<span id="std-setting-beat_scheduler"></span><h4><code class="docutils literal notranslate"><span class="pre">beat_scheduler</span></code><a class="headerlink" href="#beat-scheduler" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;celery.beat:PersistentScheduler&quot;</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--203-input--1" name="tab-set--203" type="radio"><label class="tab-label" for="tab-set--203-input--1">中文</label><div class="tab-content docutils container">
<p>默认使用的调度器类。
例如，在配合 <a class="extlink-pypi reference external" href="https://pypi.org/project/django-celery-beat/">https://pypi.org/project/django-celery-beat/</a> 扩展使用时，可设置为
<code class="docutils literal notranslate"><span class="pre">&quot;django_celery_beat.schedulers:DatabaseScheduler&quot;</span></code>。</p>
<p>也可以通过 <a class="reference internal" href="../reference/cli.html#cmdoption-celery-beat-S"><code class="xref std std-option docutils literal notranslate"><span class="pre">celery</span> <span class="pre">beat</span> <span class="pre">-S</span></code></a> 参数进行设置。</p>
</div>
<input class="tab-input" id="tab-set--203-input--2" name="tab-set--203" type="radio"><label class="tab-label" for="tab-set--203-input--2">英文</label><div class="tab-content docutils container">
<p>The default scheduler class. May be set to
<code class="docutils literal notranslate"><span class="pre">&quot;django_celery_beat.schedulers:DatabaseScheduler&quot;</span></code> for instance,
if used alongside <a class="extlink-pypi reference external" href="https://pypi.org/project/django-celery-beat/">https://pypi.org/project/django-celery-beat/</a> extension.</p>
<p>Can also be set via the <a class="reference internal" href="../reference/cli.html#cmdoption-celery-beat-S"><code class="xref std std-option docutils literal notranslate"><span class="pre">celery</span> <span class="pre">beat</span> <span class="pre">-S</span></code></a> argument.</p>
</div>
</div>
</section>
<section id="beat-schedule-filename">
<span id="std-setting-beat_schedule_filename"></span><h4><code class="docutils literal notranslate"><span class="pre">beat_schedule_filename</span></code><a class="headerlink" href="#beat-schedule-filename" title="Link to this heading">¶</a></h4>
<p>Default: <code class="docutils literal notranslate"><span class="pre">&quot;celerybeat-schedule&quot;</span></code>.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--204-input--1" name="tab-set--204" type="radio"><label class="tab-label" for="tab-set--204-input--1">中文</label><div class="tab-content docutils container">
<p>当使用 <cite>PersistentScheduler</cite> 时，存储周期性任务最后运行时间的文件名。
可为相对路径或绝对路径，但注意在某些 Python 版本中可能自动添加 <cite>.db</cite> 后缀。</p>
<p>也可通过 <a class="reference internal" href="../reference/cli.html#cmdoption-celery-beat-s"><code class="xref std std-option docutils literal notranslate"><span class="pre">celery</span> <span class="pre">beat</span> <span class="pre">--schedule</span></code></a> 参数进行设置。</p>
</div>
<input class="tab-input" id="tab-set--204-input--2" name="tab-set--204" type="radio"><label class="tab-label" for="tab-set--204-input--2">英文</label><div class="tab-content docutils container">
<p>Name of the file used by <cite>PersistentScheduler</cite> to store the last run times
of periodic tasks. Can be a relative or absolute path, but be aware that the
suffix <cite>.db</cite> may be appended to the file name (depending on Python version).</p>
<p>Can also be set via the <a class="reference internal" href="../reference/cli.html#cmdoption-celery-beat-s"><code class="xref std std-option docutils literal notranslate"><span class="pre">celery</span> <span class="pre">beat</span> <span class="pre">--schedule</span></code></a> argument.</p>
</div>
</div>
</section>
<section id="beat-sync-every">
<span id="std-setting-beat_sync_every"></span><h4><code class="docutils literal notranslate"><span class="pre">beat_sync_every</span></code><a class="headerlink" href="#beat-sync-every" title="Link to this heading">¶</a></h4>
<p>Default: 0.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--205-input--1" name="tab-set--205" type="radio"><label class="tab-label" for="tab-set--205-input--1">中文</label><div class="tab-content docutils container">
<p>在执行下一次数据库同步前，最多允许调度的周期性任务数量。</p>
<p>默认值为 0，表示根据时间间隔进行同步——默认间隔为 3 分钟，由 scheduler.sync_every 决定。
若设置为 1，则每发送一个任务消息就执行一次同步。</p>
</div>
<input class="tab-input" id="tab-set--205-input--2" name="tab-set--205" type="radio"><label class="tab-label" for="tab-set--205-input--2">英文</label><div class="tab-content docutils container">
<p>The number of periodic tasks that can be called before another database sync
is issued.
A value of 0 (default) means sync based on timing - default of 3 minutes as determined by
scheduler.sync_every. If set to 1, beat will call sync after every task
message sent.</p>
</div>
</div>
</section>
<section id="beat-max-loop-interval">
<span id="std-setting-beat_max_loop_interval"></span><h4><code class="docutils literal notranslate"><span class="pre">beat_max_loop_interval</span></code><a class="headerlink" href="#beat-max-loop-interval" title="Link to this heading">¶</a></h4>
<p>Default: 0.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--206-input--1" name="tab-set--206" type="radio"><label class="tab-label" for="tab-set--206-input--1">中文</label><div class="tab-content docutils container">
<p><a class="reference internal" href="../reference/celery.bin.beat.html#module-celery.bin.beat" title="celery.bin.beat"><code class="xref py py-mod docutils literal notranslate"><span class="pre">beat</span></code></a> 在两次检查调度之间最多可休眠的秒数。</p>
<p>此值的默认取决于具体调度器。
对于默认的 Celery beat 调度器，默认值为 300 秒（5 分钟）；
而对基于 <a class="extlink-pypi reference external" href="https://pypi.org/project/django-celery-beat/">https://pypi.org/project/django-celery-beat/</a> 的数据库调度器而言，默认值为 5 秒，
因为调度计划可能由外部更改，因此需要及时感知并应用变更。</p>
<p>此外，当在 Jython 环境中以线程方式嵌入运行 Celery beat（使用 <a class="reference internal" href="../reference/cli.html#cmdoption-celery-worker-B"><code class="xref std std-option docutils literal notranslate"><span class="pre">-B</span></code></a>）时，
最大间隔会被重写为 1 秒，以保证能够及时关闭线程。</p>
</div>
<input class="tab-input" id="tab-set--206-input--2" name="tab-set--206" type="radio"><label class="tab-label" for="tab-set--206-input--2">英文</label><div class="tab-content docutils container">
<p>The maximum number of seconds <a class="reference internal" href="../reference/celery.bin.beat.html#module-celery.bin.beat" title="celery.bin.beat"><code class="xref py py-mod docutils literal notranslate"><span class="pre">beat</span></code></a> can sleep
between checking the schedule.</p>
<p>The default for this value is scheduler specific.
For the default Celery beat scheduler the value is 300 (5 minutes),
but for the <a class="extlink-pypi reference external" href="https://pypi.org/project/django-celery-beat/">https://pypi.org/project/django-celery-beat/</a> database scheduler it's 5 seconds
because the schedule may be changed externally, and so it must take
changes to the schedule into account.</p>
<p>Also when running Celery beat embedded (<a class="reference internal" href="../reference/cli.html#cmdoption-celery-worker-B"><code class="xref std std-option docutils literal notranslate"><span class="pre">-B</span></code></a>)
on Jython as a thread the max interval is overridden and set to 1 so
that it's possible to shut down in a timely manner.</p>
</div>
</div>
</section>
<section id="beat-cron-starting-deadline">
<span id="std-setting-beat_cron_starting_deadline"></span><h4><code class="docutils literal notranslate"><span class="pre">beat_cron_starting_deadline</span></code><a class="headerlink" href="#beat-cron-starting-deadline" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.3.</span></p>
</div>
<p>Default: None.</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--207-input--1" name="tab-set--207" type="radio"><label class="tab-label" for="tab-set--207-input--1">中文</label><div class="tab-content docutils container">
<p>在使用 cron 调度时，<a class="reference internal" href="../reference/celery.bin.beat.html#module-celery.bin.beat" title="celery.bin.beat"><code class="xref py py-mod docutils literal notranslate"><span class="pre">beat</span></code></a> 在判断调度是否到期时可向前回溯的秒数。
当设置为 <cite>None</cite> 时，所有超时的 cron 任务都会被立即执行。</p>
</div>
<input class="tab-input" id="tab-set--207-input--2" name="tab-set--207" type="radio"><label class="tab-label" for="tab-set--207-input--2">英文</label><div class="tab-content docutils container">
<p>When using cron, the number of seconds <a class="reference internal" href="../reference/celery.bin.beat.html#module-celery.bin.beat" title="celery.bin.beat"><code class="xref py py-mod docutils literal notranslate"><span class="pre">beat</span></code></a> can look back
when deciding whether a cron schedule is due. When set to <cite>None</cite>, cronjobs that
are past due will always run immediately.</p>
</div>
</div>
</section>
<section id="beat-logfile">
<span id="std-setting-beat_logfile"></span><h4><code class="docutils literal notranslate"><span class="pre">beat_logfile</span></code><a class="headerlink" href="#beat-logfile" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--208-input--1" name="tab-set--208" type="radio"><label class="tab-label" for="tab-set--208-input--1">中文</label><div class="tab-content docutils container">
<p><strong class="program">celery beat</strong> 的可选日志输出文件路径（默认为输出到 <cite>stdout</cite>）。</p>
</div>
<input class="tab-input" id="tab-set--208-input--2" name="tab-set--208" type="radio"><label class="tab-label" for="tab-set--208-input--2">英文</label><div class="tab-content docutils container">
<p>An optional file path for <strong class="program">celery beat</strong> to log into (defaults to <cite>stdout</cite>).</p>
</div>
</div>
</section>
<section id="beat-pidfile">
<span id="std-setting-beat_pidfile"></span><h4><code class="docutils literal notranslate"><span class="pre">beat_pidfile</span></code><a class="headerlink" href="#beat-pidfile" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--209-input--1" name="tab-set--209" type="radio"><label class="tab-label" for="tab-set--209-input--1">中文</label><div class="tab-content docutils container">
<p><strong class="program">celery beat</strong> 的可选 PID 文件创建/存储路径（默认不创建 PID 文件）。</p>
</div>
<input class="tab-input" id="tab-set--209-input--2" name="tab-set--209" type="radio"><label class="tab-label" for="tab-set--209-input--2">英文</label><div class="tab-content docutils container">
<p>An optional file path for <strong class="program">celery beat</strong> to create/store it PID file (defaults to no PID file created).</p>
</div>
</div>
</section>
<section id="beat-uid">
<span id="std-setting-beat_uid"></span><h4><code class="docutils literal notranslate"><span class="pre">beat_uid</span></code><a class="headerlink" href="#beat-uid" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--210-input--1" name="tab-set--210" type="radio"><label class="tab-label" for="tab-set--210-input--1">中文</label><div class="tab-content docutils container">
<p>当 <strong class="program">celery beat</strong> 守护进程化运行时，降权使用的用户 ID（默认不更改 UID）。</p>
</div>
<input class="tab-input" id="tab-set--210-input--2" name="tab-set--210" type="radio"><label class="tab-label" for="tab-set--210-input--2">英文</label><div class="tab-content docutils container">
<p>An optional user ID to use when beat <strong class="program">celery beat</strong> drops its privileges (defaults to no UID change).</p>
</div>
</div>
</section>
<section id="beat-gid">
<span id="std-setting-beat_gid"></span><h4><code class="docutils literal notranslate"><span class="pre">beat_gid</span></code><a class="headerlink" href="#beat-gid" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--211-input--1" name="tab-set--211" type="radio"><label class="tab-label" for="tab-set--211-input--1">中文</label><div class="tab-content docutils container">
<p>当 <strong class="program">celery beat</strong> 守护进程化运行时，降权使用的用户组 ID（默认不更改 GID）。</p>
</div>
<input class="tab-input" id="tab-set--211-input--2" name="tab-set--211" type="radio"><label class="tab-label" for="tab-set--211-input--2">英文</label><div class="tab-content docutils container">
<p>An optional group ID to use when <strong class="program">celery beat</strong> daemon drops its privileges (defaults to no GID change).</p>
</div>
</div>
</section>
<section id="beat-umask">
<span id="std-setting-beat_umask"></span><h4><code class="docutils literal notranslate"><span class="pre">beat_umask</span></code><a class="headerlink" href="#beat-umask" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--212-input--1" name="tab-set--212" type="radio"><label class="tab-label" for="tab-set--212-input--1">中文</label><div class="tab-content docutils container">
<p><strong class="program">celery beat</strong> 守护进程化运行时创建文件（日志、PID 文件等）使用的 <cite>umask</cite> （可选）。</p>
</div>
<input class="tab-input" id="tab-set--212-input--2" name="tab-set--212" type="radio"><label class="tab-label" for="tab-set--212-input--2">英文</label><div class="tab-content docutils container">
<p>An optional <cite>umask</cite> to use when <strong class="program">celery beat</strong> creates files (log, pid...) when daemonizing.</p>
</div>
</div>
</section>
<section id="beat-executable">
<span id="std-setting-beat_executable"></span><h4><code class="docutils literal notranslate"><span class="pre">beat_executable</span></code><a class="headerlink" href="#beat-executable" title="Link to this heading">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 5.4.</span></p>
</div>
<p>Default: <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--213-input--1" name="tab-set--213" type="radio"><label class="tab-label" for="tab-set--213-input--1">中文</label><div class="tab-content docutils container">
<p><strong class="program">celery beat</strong> 守护进程化运行时使用的 <cite>python</cite> 可执行文件路径（可选，默认为 <a class="reference external" href="https://docs.python.org/dev/library/sys.html#sys.executable" title="（在 Python v3.15）"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.executable</span></code></a>）。</p>
</div>
<input class="tab-input" id="tab-set--213-input--2" name="tab-set--213" type="radio"><label class="tab-label" for="tab-set--213-input--2">英文</label><div class="tab-content docutils container">
<p>An optional <cite>python</cite> executable path for <strong class="program">celery beat</strong> to use when deaemonizing (defaults to <a class="reference external" href="https://docs.python.org/dev/library/sys.html#sys.executable" title="（在 Python v3.15）"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.executable</span></code></a>).</p>
</div>
</div>
</section>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="sphinx.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">使用 Sphinx 文档化任务</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="extending.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">扩展 和 Bootsteps</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                <a href="../copyright.html">Copyright</a> &#169; 2009-2023, Ask Solem &amp; contributors
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">配置和默认值</a><ul>
<li><a class="reference internal" href="#conf-example">示例配置文件</a></li>
<li><a class="reference internal" href="#conf-old-settings-map">新的小写设置</a></li>
<li><a class="reference internal" href="#id4">配置指令</a><ul>
<li><a class="reference internal" href="#conf-datetime">常规设置</a><ul>
<li><a class="reference internal" href="#accept-content"><code class="docutils literal notranslate"><span class="pre">accept_content</span></code></a></li>
<li><a class="reference internal" href="#result-accept-content"><code class="docutils literal notranslate"><span class="pre">result_accept_content</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id6">时间和日期设置</a><ul>
<li><a class="reference internal" href="#enable-utc"><code class="docutils literal notranslate"><span class="pre">enable_utc</span></code></a></li>
<li><a class="reference internal" href="#timezone"><code class="docutils literal notranslate"><span class="pre">timezone</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-tasks">任务设置</a><ul>
<li><a class="reference internal" href="#task-annotations"><code class="docutils literal notranslate"><span class="pre">task_annotations</span></code></a></li>
<li><a class="reference internal" href="#task-compression"><code class="docutils literal notranslate"><span class="pre">task_compression</span></code></a></li>
<li><a class="reference internal" href="#task-protocol"><code class="docutils literal notranslate"><span class="pre">task_protocol</span></code></a></li>
<li><a class="reference internal" href="#task-serializer"><code class="docutils literal notranslate"><span class="pre">task_serializer</span></code></a></li>
<li><a class="reference internal" href="#task-publish-retry"><code class="docutils literal notranslate"><span class="pre">task_publish_retry</span></code></a></li>
<li><a class="reference internal" href="#task-publish-retry-policy"><code class="docutils literal notranslate"><span class="pre">task_publish_retry_policy</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-task-execution">任务执行设置</a><ul>
<li><a class="reference internal" href="#task-always-eager"><code class="docutils literal notranslate"><span class="pre">task_always_eager</span></code></a></li>
<li><a class="reference internal" href="#task-eager-propagates"><code class="docutils literal notranslate"><span class="pre">task_eager_propagates</span></code></a></li>
<li><a class="reference internal" href="#task-store-eager-result"><code class="docutils literal notranslate"><span class="pre">task_store_eager_result</span></code></a></li>
<li><a class="reference internal" href="#task-remote-tracebacks"><code class="docutils literal notranslate"><span class="pre">task_remote_tracebacks</span></code></a></li>
<li><a class="reference internal" href="#task-ignore-result"><code class="docutils literal notranslate"><span class="pre">task_ignore_result</span></code></a></li>
<li><a class="reference internal" href="#task-store-errors-even-if-ignored"><code class="docutils literal notranslate"><span class="pre">task_store_errors_even_if_ignored</span></code></a></li>
<li><a class="reference internal" href="#task-track-started"><code class="docutils literal notranslate"><span class="pre">task_track_started</span></code></a></li>
<li><a class="reference internal" href="#task-time-limit"><code class="docutils literal notranslate"><span class="pre">task_time_limit</span></code></a></li>
<li><a class="reference internal" href="#task-allow-error-cb-on-chord-header"><code class="docutils literal notranslate"><span class="pre">task_allow_error_cb_on_chord_header</span></code></a></li>
<li><a class="reference internal" href="#task-soft-time-limit"><code class="docutils literal notranslate"><span class="pre">task_soft_time_limit</span></code></a></li>
<li><a class="reference internal" href="#task-acks-late"><code class="docutils literal notranslate"><span class="pre">task_acks_late</span></code></a></li>
<li><a class="reference internal" href="#task-acks-on-failure-or-timeout"><code class="docutils literal notranslate"><span class="pre">task_acks_on_failure_or_timeout</span></code></a></li>
<li><a class="reference internal" href="#task-reject-on-worker-lost"><code class="docutils literal notranslate"><span class="pre">task_reject_on_worker_lost</span></code></a></li>
<li><a class="reference internal" href="#task-default-rate-limit"><code class="docutils literal notranslate"><span class="pre">task_default_rate_limit</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-result-backend">任务结果后端设置</a><ul>
<li><a class="reference internal" href="#result-backend"><code class="docutils literal notranslate"><span class="pre">result_backend</span></code></a></li>
<li><a class="reference internal" href="#result-backend-always-retry"><code class="docutils literal notranslate"><span class="pre">result_backend_always_retry</span></code></a></li>
<li><a class="reference internal" href="#result-backend-max-sleep-between-retries-ms"><code class="docutils literal notranslate"><span class="pre">result_backend_max_sleep_between_retries_ms</span></code></a></li>
<li><a class="reference internal" href="#result-backend-base-sleep-between-retries-ms"><code class="docutils literal notranslate"><span class="pre">result_backend_base_sleep_between_retries_ms</span></code></a></li>
<li><a class="reference internal" href="#result-backend-max-retries"><code class="docutils literal notranslate"><span class="pre">result_backend_max_retries</span></code></a></li>
<li><a class="reference internal" href="#result-backend-thread-safe"><code class="docutils literal notranslate"><span class="pre">result_backend_thread_safe</span></code></a></li>
<li><a class="reference internal" href="#result-backend-transport-options"><code class="docutils literal notranslate"><span class="pre">result_backend_transport_options</span></code></a></li>
<li><a class="reference internal" href="#result-serializer"><code class="docutils literal notranslate"><span class="pre">result_serializer</span></code></a></li>
<li><a class="reference internal" href="#result-compression"><code class="docutils literal notranslate"><span class="pre">result_compression</span></code></a></li>
<li><a class="reference internal" href="#result-extended"><code class="docutils literal notranslate"><span class="pre">result_extended</span></code></a></li>
<li><a class="reference internal" href="#result-expires"><code class="docutils literal notranslate"><span class="pre">result_expires</span></code></a></li>
<li><a class="reference internal" href="#result-cache-max"><code class="docutils literal notranslate"><span class="pre">result_cache_max</span></code></a></li>
<li><a class="reference internal" href="#result-chord-join-timeout"><code class="docutils literal notranslate"><span class="pre">result_chord_join_timeout</span></code></a></li>
<li><a class="reference internal" href="#result-chord-retry-interval"><code class="docutils literal notranslate"><span class="pre">result_chord_retry_interval</span></code></a></li>
<li><a class="reference internal" href="#override-backends"><code class="docutils literal notranslate"><span class="pre">override_backends</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-database-result-backend">数据库后端设置</a><ul>
<li><a class="reference internal" href="#url">数据库 URL 示例</a></li>
<li><a class="reference internal" href="#database-create-tables-at-setup"><code class="docutils literal notranslate"><span class="pre">database_create_tables_at_setup</span></code></a></li>
<li><a class="reference internal" href="#database-engine-options"><code class="docutils literal notranslate"><span class="pre">database_engine_options</span></code></a></li>
<li><a class="reference internal" href="#database-short-lived-sessions"><code class="docutils literal notranslate"><span class="pre">database_short_lived_sessions</span></code></a></li>
<li><a class="reference internal" href="#database-table-schemas"><code class="docutils literal notranslate"><span class="pre">database_table_schemas</span></code></a></li>
<li><a class="reference internal" href="#database-table-names"><code class="docutils literal notranslate"><span class="pre">database_table_names</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#rpc">RPC 后段设置</a><ul>
<li><a class="reference internal" href="#result-persistent"><code class="docutils literal notranslate"><span class="pre">result_persistent</span></code></a></li>
<li><a class="reference internal" href="#id14">示例配置</a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-cache-result-backend">缓存后端设置</a><ul>
<li><a class="reference internal" href="#cache-backend-options"><code class="docutils literal notranslate"><span class="pre">cache_backend_options</span></code></a></li>
<li><a class="reference internal" href="#cache-backend"><code class="docutils literal notranslate"><span class="pre">cache_backend</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-mongodb-result-backend">MongoDB 后端设置</a><ul>
<li><a class="reference internal" href="#mongodb-backend-settings">mongodb_backend_settings</a></li>
<li><a class="reference internal" href="#example-mongodb-result-config">示例配置</a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-redis-result-backend">Redis 后端设置</a><ul>
<li><a class="reference internal" href="#id19">配置后端 URL</a></li>
<li><a class="reference internal" href="#redis-backend-health-check-interval"><code class="docutils literal notranslate"><span class="pre">redis_backend_health_check_interval</span></code></a></li>
<li><a class="reference internal" href="#redis-backend-use-ssl"><code class="docutils literal notranslate"><span class="pre">redis_backend_use_ssl</span></code></a></li>
<li><a class="reference internal" href="#redis-max-connections"><code class="docutils literal notranslate"><span class="pre">redis_max_connections</span></code></a></li>
<li><a class="reference internal" href="#redis-socket-connect-timeout"><code class="docutils literal notranslate"><span class="pre">redis_socket_connect_timeout</span></code></a></li>
<li><a class="reference internal" href="#redis-socket-timeout"><code class="docutils literal notranslate"><span class="pre">redis_socket_timeout</span></code></a></li>
<li><a class="reference internal" href="#redis-retry-on-timeout"><code class="docutils literal notranslate"><span class="pre">redis_retry_on_timeout</span></code></a></li>
<li><a class="reference internal" href="#redis-socket-keepalive"><code class="docutils literal notranslate"><span class="pre">redis_socket_keepalive</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#cassandra-astradb">Cassandra/AstraDB 后端设置</a><ul>
<li><a class="reference internal" href="#cassandra-servers"><code class="docutils literal notranslate"><span class="pre">cassandra_servers</span></code></a></li>
<li><a class="reference internal" href="#cassandra-secure-bundle-path"><code class="docutils literal notranslate"><span class="pre">cassandra_secure_bundle_path</span></code></a></li>
<li><a class="reference internal" href="#cassandra-port"><code class="docutils literal notranslate"><span class="pre">cassandra_port</span></code></a></li>
<li><a class="reference internal" href="#cassandra-keyspace"><code class="docutils literal notranslate"><span class="pre">cassandra_keyspace</span></code></a></li>
<li><a class="reference internal" href="#cassandra-table"><code class="docutils literal notranslate"><span class="pre">cassandra_table</span></code></a></li>
<li><a class="reference internal" href="#cassandra-read-consistency"><code class="docutils literal notranslate"><span class="pre">cassandra_read_consistency</span></code></a></li>
<li><a class="reference internal" href="#cassandra-write-consistency"><code class="docutils literal notranslate"><span class="pre">cassandra_write_consistency</span></code></a></li>
<li><a class="reference internal" href="#cassandra-entry-ttl"><code class="docutils literal notranslate"><span class="pre">cassandra_entry_ttl</span></code></a></li>
<li><a class="reference internal" href="#cassandra-auth-provider"><code class="docutils literal notranslate"><span class="pre">cassandra_auth_provider</span></code></a></li>
<li><a class="reference internal" href="#cassandra-auth-kwargs"><code class="docutils literal notranslate"><span class="pre">cassandra_auth_kwargs</span></code></a></li>
<li><a class="reference internal" href="#cassandra-options"><code class="docutils literal notranslate"><span class="pre">cassandra_options</span></code></a></li>
<li><a class="reference internal" href="#id20">示例配置 (Cassandra)</a></li>
<li><a class="reference internal" href="#astra-db">示例配置 (Astra DB)</a></li>
<li><a class="reference internal" href="#id21">其他配置</a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-s3-result-backend">S3 后端设置</a><ul>
<li><a class="reference internal" href="#s3-access-key-id"><code class="docutils literal notranslate"><span class="pre">s3_access_key_id</span></code></a></li>
<li><a class="reference internal" href="#s3-secret-access-key"><code class="docutils literal notranslate"><span class="pre">s3_secret_access_key</span></code></a></li>
<li><a class="reference internal" href="#s3-bucket"><code class="docutils literal notranslate"><span class="pre">s3_bucket</span></code></a></li>
<li><a class="reference internal" href="#s3-base-path"><code class="docutils literal notranslate"><span class="pre">s3_base_path</span></code></a></li>
<li><a class="reference internal" href="#s3-endpoint-url"><code class="docutils literal notranslate"><span class="pre">s3_endpoint_url</span></code></a></li>
<li><a class="reference internal" href="#s3-region"><code class="docutils literal notranslate"><span class="pre">s3_region</span></code></a></li>
<li><a class="reference internal" href="#id24">示例配置</a></li>
</ul>
</li>
<li><a class="reference internal" href="#azure-block-blob">Azure Block Blob 后端设置</a><ul>
<li><a class="reference internal" href="#id25">示例配置</a></li>
<li><a class="reference internal" href="#azureblockblob-container-name"><code class="docutils literal notranslate"><span class="pre">azureblockblob_container_name</span></code></a></li>
<li><a class="reference internal" href="#azureblockblob-base-path"><code class="docutils literal notranslate"><span class="pre">azureblockblob_base_path</span></code></a></li>
<li><a class="reference internal" href="#azureblockblob-retry-initial-backoff-sec"><code class="docutils literal notranslate"><span class="pre">azureblockblob_retry_initial_backoff_sec</span></code></a></li>
<li><a class="reference internal" href="#azureblockblob-retry-increment-base"><code class="docutils literal notranslate"><span class="pre">azureblockblob_retry_increment_base</span></code></a></li>
<li><a class="reference internal" href="#azureblockblob-retry-max-attempts"><code class="docutils literal notranslate"><span class="pre">azureblockblob_retry_max_attempts</span></code></a></li>
<li><a class="reference internal" href="#azureblockblob-connection-timeout"><code class="docutils literal notranslate"><span class="pre">azureblockblob_connection_timeout</span></code></a></li>
<li><a class="reference internal" href="#azureblockblob-read-timeout"><code class="docutils literal notranslate"><span class="pre">azureblockblob_read_timeout</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-gcs-result-backend">GCS 后端设置</a><ul>
<li><a class="reference internal" href="#gcs-bucket"><code class="docutils literal notranslate"><span class="pre">gcs_bucket</span></code></a></li>
<li><a class="reference internal" href="#gcs-project"><code class="docutils literal notranslate"><span class="pre">gcs_project</span></code></a></li>
<li><a class="reference internal" href="#gcs-base-path"><code class="docutils literal notranslate"><span class="pre">gcs_base_path</span></code></a></li>
<li><a class="reference internal" href="#gcs-ttl"><code class="docutils literal notranslate"><span class="pre">gcs_ttl</span></code></a></li>
<li><a class="reference internal" href="#gcs-threadpool-maxsize"><code class="docutils literal notranslate"><span class="pre">gcs_threadpool_maxsize</span></code></a></li>
<li><a class="reference internal" href="#firestore-project"><code class="docutils literal notranslate"><span class="pre">firestore_project</span></code></a></li>
<li><a class="reference internal" href="#id27">示例配置</a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-elasticsearch-result-backend">Elasticsearch 后端设置</a><ul>
<li><a class="reference internal" href="#id29">示例配置</a></li>
<li><a class="reference internal" href="#elasticsearch-retry-on-timeout"><code class="docutils literal notranslate"><span class="pre">elasticsearch_retry_on_timeout</span></code></a></li>
<li><a class="reference internal" href="#elasticsearch-max-retries"><code class="docutils literal notranslate"><span class="pre">elasticsearch_max_retries</span></code></a></li>
<li><a class="reference internal" href="#elasticsearch-timeout"><code class="docutils literal notranslate"><span class="pre">elasticsearch_timeout</span></code></a></li>
<li><a class="reference internal" href="#elasticsearch-save-meta-as-text"><code class="docutils literal notranslate"><span class="pre">elasticsearch_save_meta_as_text</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#aws-dynamodb">AWS DynamoDB 后端设置</a></li>
<li><a class="reference internal" href="#conf-ironcache-result-backend">IronCache 后端设置</a></li>
<li><a class="reference internal" href="#conf-couchbase-result-backend">Couchbase 后端设置</a><ul>
<li><a class="reference internal" href="#couchbase-backend-settings"><code class="docutils literal notranslate"><span class="pre">couchbase_backend_settings</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-arangodb-result-backend">ArangoDB 后端设置</a><ul>
<li><a class="reference internal" href="#arangodb-backend-settings"><code class="docutils literal notranslate"><span class="pre">arangodb_backend_settings</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-cosmosdbsql-result-backend">CosmosDB 后端设置（实验性）</a><ul>
<li><a class="reference internal" href="#id41">示例配置</a></li>
<li><a class="reference internal" href="#cosmosdbsql-database-name"><code class="docutils literal notranslate"><span class="pre">cosmosdbsql_database_name</span></code></a></li>
<li><a class="reference internal" href="#cosmosdbsql-collection-name"><code class="docutils literal notranslate"><span class="pre">cosmosdbsql_collection_name</span></code></a></li>
<li><a class="reference internal" href="#cosmosdbsql-consistency-level"><code class="docutils literal notranslate"><span class="pre">cosmosdbsql_consistency_level</span></code></a></li>
<li><a class="reference internal" href="#cosmosdbsql-max-retry-attempts"><code class="docutils literal notranslate"><span class="pre">cosmosdbsql_max_retry_attempts</span></code></a></li>
<li><a class="reference internal" href="#cosmosdbsql-max-retry-wait-time"><code class="docutils literal notranslate"><span class="pre">cosmosdbsql_max_retry_wait_time</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-couchdb-result-backend">CouchDB 后端设置</a></li>
<li><a class="reference internal" href="#conf-filesystem-result-backend">文件系统后端设置</a></li>
<li><a class="reference internal" href="#conf-consul-result-backend">Consul 键值存储后端设置</a></li>
<li><a class="reference internal" href="#conf-messaging">消息路由</a><ul>
<li><a class="reference internal" href="#task-queues"><code class="docutils literal notranslate"><span class="pre">task_queues</span></code></a></li>
<li><a class="reference internal" href="#task-routes"><code class="docutils literal notranslate"><span class="pre">task_routes</span></code></a></li>
<li><a class="reference internal" href="#task-queue-max-priority"><code class="docutils literal notranslate"><span class="pre">task_queue_max_priority</span></code></a></li>
<li><a class="reference internal" href="#task-default-priority"><code class="docutils literal notranslate"><span class="pre">task_default_priority</span></code></a></li>
<li><a class="reference internal" href="#task-inherit-parent-priority"><code class="docutils literal notranslate"><span class="pre">task_inherit_parent_priority</span></code></a></li>
<li><a class="reference internal" href="#worker-direct"><code class="docutils literal notranslate"><span class="pre">worker_direct</span></code></a></li>
<li><a class="reference internal" href="#task-create-missing-queues"><code class="docutils literal notranslate"><span class="pre">task_create_missing_queues</span></code></a></li>
<li><a class="reference internal" href="#task-default-queue"><code class="docutils literal notranslate"><span class="pre">task_default_queue</span></code></a></li>
<li><a class="reference internal" href="#task-default-queue-type"><code class="docutils literal notranslate"><span class="pre">task_default_queue_type</span></code></a></li>
<li><a class="reference internal" href="#task-default-exchange"><code class="docutils literal notranslate"><span class="pre">task_default_exchange</span></code></a></li>
<li><a class="reference internal" href="#task-default-exchange-type"><code class="docutils literal notranslate"><span class="pre">task_default_exchange_type</span></code></a></li>
<li><a class="reference internal" href="#task-default-routing-key"><code class="docutils literal notranslate"><span class="pre">task_default_routing_key</span></code></a></li>
<li><a class="reference internal" href="#task-default-delivery-mode"><code class="docutils literal notranslate"><span class="pre">task_default_delivery_mode</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#broker">Broker 设置</a><ul>
<li><a class="reference internal" href="#broker-url"><code class="docutils literal notranslate"><span class="pre">broker_url</span></code></a></li>
<li><a class="reference internal" href="#broker-read-url-broker-write-url"><code class="docutils literal notranslate"><span class="pre">broker_read_url</span></code> / <code class="docutils literal notranslate"><span class="pre">broker_write_url</span></code></a></li>
<li><a class="reference internal" href="#broker-failover-strategy"><code class="docutils literal notranslate"><span class="pre">broker_failover_strategy</span></code></a></li>
<li><a class="reference internal" href="#broker-heartbeat"><code class="docutils literal notranslate"><span class="pre">broker_heartbeat</span></code></a></li>
<li><a class="reference internal" href="#broker-heartbeat-checkrate"><code class="docutils literal notranslate"><span class="pre">broker_heartbeat_checkrate</span></code></a></li>
<li><a class="reference internal" href="#broker-use-ssl"><code class="docutils literal notranslate"><span class="pre">broker_use_ssl</span></code></a><ul>
<li><a class="reference internal" href="#pyamqp"><code class="docutils literal notranslate"><span class="pre">pyamqp</span></code></a></li>
<li><a class="reference internal" href="#id46"><code class="docutils literal notranslate"><span class="pre">redis</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#broker-pool-limit"><code class="docutils literal notranslate"><span class="pre">broker_pool_limit</span></code></a></li>
<li><a class="reference internal" href="#broker-connection-timeout"><code class="docutils literal notranslate"><span class="pre">broker_connection_timeout</span></code></a></li>
<li><a class="reference internal" href="#broker-connection-retry"><code class="docutils literal notranslate"><span class="pre">broker_connection_retry</span></code></a></li>
<li><a class="reference internal" href="#broker-connection-retry-on-startup"><code class="docutils literal notranslate"><span class="pre">broker_connection_retry_on_startup</span></code></a></li>
<li><a class="reference internal" href="#broker-connection-max-retries"><code class="docutils literal notranslate"><span class="pre">broker_connection_max_retries</span></code></a></li>
<li><a class="reference internal" href="#broker-channel-error-retry"><code class="docutils literal notranslate"><span class="pre">broker_channel_error_retry</span></code></a></li>
<li><a class="reference internal" href="#broker-login-method"><code class="docutils literal notranslate"><span class="pre">broker_login_method</span></code></a></li>
<li><a class="reference internal" href="#broker-native-delayed-delivery-queue-type"><code class="docutils literal notranslate"><span class="pre">broker_native_delayed_delivery_queue_type</span></code></a></li>
<li><a class="reference internal" href="#broker-transport-options"><code class="docutils literal notranslate"><span class="pre">broker_transport_options</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#worker">Worker</a><ul>
<li><a class="reference internal" href="#imports"><code class="docutils literal notranslate"><span class="pre">imports</span></code></a></li>
<li><a class="reference internal" href="#include"><code class="docutils literal notranslate"><span class="pre">include</span></code></a></li>
<li><a class="reference internal" href="#worker-deduplicate-successful-tasks"><code class="docutils literal notranslate"><span class="pre">worker_deduplicate_successful_tasks</span></code></a></li>
<li><a class="reference internal" href="#worker-concurrency"><code class="docutils literal notranslate"><span class="pre">worker_concurrency</span></code></a></li>
<li><a class="reference internal" href="#worker-prefetch-multiplier"><code class="docutils literal notranslate"><span class="pre">worker_prefetch_multiplier</span></code></a></li>
<li><a class="reference internal" href="#worker-enable-prefetch-count-reduction"><code class="docutils literal notranslate"><span class="pre">worker_enable_prefetch_count_reduction</span></code></a></li>
<li><a class="reference internal" href="#worker-lost-wait"><code class="docutils literal notranslate"><span class="pre">worker_lost_wait</span></code></a></li>
<li><a class="reference internal" href="#worker-max-tasks-per-child"><code class="docutils literal notranslate"><span class="pre">worker_max_tasks_per_child</span></code></a></li>
<li><a class="reference internal" href="#worker-max-memory-per-child"><code class="docutils literal notranslate"><span class="pre">worker_max_memory_per_child</span></code></a></li>
<li><a class="reference internal" href="#worker-disable-rate-limits"><code class="docutils literal notranslate"><span class="pre">worker_disable_rate_limits</span></code></a></li>
<li><a class="reference internal" href="#worker-state-db"><code class="docutils literal notranslate"><span class="pre">worker_state_db</span></code></a></li>
<li><a class="reference internal" href="#worker-timer-precision"><code class="docutils literal notranslate"><span class="pre">worker_timer_precision</span></code></a></li>
<li><a class="reference internal" href="#worker-enable-remote-control"><code class="docutils literal notranslate"><span class="pre">worker_enable_remote_control</span></code></a></li>
<li><a class="reference internal" href="#worker-proc-alive-timeout"><code class="docutils literal notranslate"><span class="pre">worker_proc_alive_timeout</span></code></a></li>
<li><a class="reference internal" href="#worker-cancel-long-running-tasks-on-connection-loss"><code class="docutils literal notranslate"><span class="pre">worker_cancel_long_running_tasks_on_connection_loss</span></code></a></li>
<li><a class="reference internal" href="#worker-detect-quorum-queues"><code class="docutils literal notranslate"><span class="pre">worker_detect_quorum_queues</span></code></a></li>
<li><a class="reference internal" href="#worker-soft-shutdown-timeout"><code class="docutils literal notranslate"><span class="pre">worker_soft_shutdown_timeout</span></code></a></li>
<li><a class="reference internal" href="#worker-enable-soft-shutdown-on-idle"><code class="docutils literal notranslate"><span class="pre">worker_enable_soft_shutdown_on_idle</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#events">Events</a><ul>
<li><a class="reference internal" href="#worker-send-task-events"><code class="docutils literal notranslate"><span class="pre">worker_send_task_events</span></code></a></li>
<li><a class="reference internal" href="#task-send-sent-event"><code class="docutils literal notranslate"><span class="pre">task_send_sent_event</span></code></a></li>
<li><a class="reference internal" href="#event-queue-ttl"><code class="docutils literal notranslate"><span class="pre">event_queue_ttl</span></code></a></li>
<li><a class="reference internal" href="#event-queue-expires"><code class="docutils literal notranslate"><span class="pre">event_queue_expires</span></code></a></li>
<li><a class="reference internal" href="#event-queue-prefix"><code class="docutils literal notranslate"><span class="pre">event_queue_prefix</span></code></a></li>
<li><a class="reference internal" href="#event-exchange"><code class="docutils literal notranslate"><span class="pre">event_exchange</span></code></a></li>
<li><a class="reference internal" href="#event-serializer"><code class="docutils literal notranslate"><span class="pre">event_serializer</span></code></a></li>
<li><a class="reference internal" href="#events-logfile"><code class="docutils literal notranslate"><span class="pre">events_logfile</span></code></a></li>
<li><a class="reference internal" href="#events-pidfile"><code class="docutils literal notranslate"><span class="pre">events_pidfile</span></code></a></li>
<li><a class="reference internal" href="#events-uid"><code class="docutils literal notranslate"><span class="pre">events_uid</span></code></a></li>
<li><a class="reference internal" href="#events-gid"><code class="docutils literal notranslate"><span class="pre">events_gid</span></code></a></li>
<li><a class="reference internal" href="#events-umask"><code class="docutils literal notranslate"><span class="pre">events_umask</span></code></a></li>
<li><a class="reference internal" href="#events-executable"><code class="docutils literal notranslate"><span class="pre">events_executable</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-control">远程控制命令</a><ul>
<li><a class="reference internal" href="#control-queue-ttl"><code class="docutils literal notranslate"><span class="pre">control_queue_ttl</span></code></a></li>
<li><a class="reference internal" href="#control-queue-expires"><code class="docutils literal notranslate"><span class="pre">control_queue_expires</span></code></a></li>
<li><a class="reference internal" href="#control-exchange"><code class="docutils literal notranslate"><span class="pre">control_exchange</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-logging">日志</a><ul>
<li><a class="reference internal" href="#worker-hijack-root-logger"><code class="docutils literal notranslate"><span class="pre">worker_hijack_root_logger</span></code></a></li>
<li><a class="reference internal" href="#worker-log-color"><code class="docutils literal notranslate"><span class="pre">worker_log_color</span></code></a></li>
<li><a class="reference internal" href="#worker-log-format"><code class="docutils literal notranslate"><span class="pre">worker_log_format</span></code></a></li>
<li><a class="reference internal" href="#worker-task-log-format"><code class="docutils literal notranslate"><span class="pre">worker_task_log_format</span></code></a></li>
<li><a class="reference internal" href="#worker-redirect-stdouts"><code class="docutils literal notranslate"><span class="pre">worker_redirect_stdouts</span></code></a></li>
<li><a class="reference internal" href="#worker-redirect-stdouts-level"><code class="docutils literal notranslate"><span class="pre">worker_redirect_stdouts_level</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-security">安全</a><ul>
<li><a class="reference internal" href="#security-key"><code class="docutils literal notranslate"><span class="pre">security_key</span></code></a></li>
<li><a class="reference internal" href="#security-key-password"><code class="docutils literal notranslate"><span class="pre">security_key_password</span></code></a></li>
<li><a class="reference internal" href="#security-certificate"><code class="docutils literal notranslate"><span class="pre">security_certificate</span></code></a></li>
<li><a class="reference internal" href="#security-cert-store"><code class="docutils literal notranslate"><span class="pre">security_cert_store</span></code></a></li>
<li><a class="reference internal" href="#security-digest"><code class="docutils literal notranslate"><span class="pre">security_digest</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#conf-custom-components">自定义组件类(高级)</a><ul>
<li><a class="reference internal" href="#worker-pool"><code class="docutils literal notranslate"><span class="pre">worker_pool</span></code></a></li>
<li><a class="reference internal" href="#worker-pool-restarts"><code class="docutils literal notranslate"><span class="pre">worker_pool_restarts</span></code></a></li>
<li><a class="reference internal" href="#worker-autoscaler"><code class="docutils literal notranslate"><span class="pre">worker_autoscaler</span></code></a></li>
<li><a class="reference internal" href="#worker-consumer"><code class="docutils literal notranslate"><span class="pre">worker_consumer</span></code></a></li>
<li><a class="reference internal" href="#worker-timer"><code class="docutils literal notranslate"><span class="pre">worker_timer</span></code></a></li>
<li><a class="reference internal" href="#worker-logfile"><code class="docutils literal notranslate"><span class="pre">worker_logfile</span></code></a></li>
<li><a class="reference internal" href="#worker-pidfile"><code class="docutils literal notranslate"><span class="pre">worker_pidfile</span></code></a></li>
<li><a class="reference internal" href="#worker-uid"><code class="docutils literal notranslate"><span class="pre">worker_uid</span></code></a></li>
<li><a class="reference internal" href="#worker-gid"><code class="docutils literal notranslate"><span class="pre">worker_gid</span></code></a></li>
<li><a class="reference internal" href="#worker-umask"><code class="docutils literal notranslate"><span class="pre">worker_umask</span></code></a></li>
<li><a class="reference internal" href="#worker-executable"><code class="docutils literal notranslate"><span class="pre">worker_executable</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#celery-beat">调度设置 (<strong class="program">celery beat</strong>)</a><ul>
<li><a class="reference internal" href="#beat-schedule"><code class="docutils literal notranslate"><span class="pre">beat_schedule</span></code></a></li>
<li><a class="reference internal" href="#beat-scheduler"><code class="docutils literal notranslate"><span class="pre">beat_scheduler</span></code></a></li>
<li><a class="reference internal" href="#beat-schedule-filename"><code class="docutils literal notranslate"><span class="pre">beat_schedule_filename</span></code></a></li>
<li><a class="reference internal" href="#beat-sync-every"><code class="docutils literal notranslate"><span class="pre">beat_sync_every</span></code></a></li>
<li><a class="reference internal" href="#beat-max-loop-interval"><code class="docutils literal notranslate"><span class="pre">beat_max_loop_interval</span></code></a></li>
<li><a class="reference internal" href="#beat-cron-starting-deadline"><code class="docutils literal notranslate"><span class="pre">beat_cron_starting_deadline</span></code></a></li>
<li><a class="reference internal" href="#beat-logfile"><code class="docutils literal notranslate"><span class="pre">beat_logfile</span></code></a></li>
<li><a class="reference internal" href="#beat-pidfile"><code class="docutils literal notranslate"><span class="pre">beat_pidfile</span></code></a></li>
<li><a class="reference internal" href="#beat-uid"><code class="docutils literal notranslate"><span class="pre">beat_uid</span></code></a></li>
<li><a class="reference internal" href="#beat-gid"><code class="docutils literal notranslate"><span class="pre">beat_gid</span></code></a></li>
<li><a class="reference internal" href="#beat-umask"><code class="docutils literal notranslate"><span class="pre">beat_umask</span></code></a></li>
<li><a class="reference internal" href="#beat-executable"><code class="docutils literal notranslate"><span class="pre">beat_executable</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=8156d91f"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=5eb1bb1e"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    </body>
</html>