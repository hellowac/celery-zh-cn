<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="索引" href="../genindex.html" /><link rel="search" title="搜索" href="../search.html" /><link rel="copyright" title="版权所有" href="../copyright.html" /><link rel="next" title="Change history for Celery 2.0" href="changelog-2.0.html" /><link rel="prev" title="Change history for Celery 2.2" href="changelog-2.2.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>Change history for Celery 2.1 - Celery 5.5.1 文档</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=3ee1c6c6" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../_static/my.css?v=112ca36d" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Celery 5.5.1 文档</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/celery_512_1.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Celery 5.5.1 文档</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">版权</a></li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../getting-started/index.html">快速开始</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 快速开始</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/introduction.html">Celery 简介</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../getting-started/backends-and-brokers/index.html">Backends 和 Brokers</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Backends 和 Brokers</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/rabbitmq.html">使用 RabbitMQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/redis.html">使用 Redis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/sqs.html">使用 Amazon SQS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/kafka.html">使用 Kafka</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/gcpubsub.html">使用 Google Pub/Sub</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/first-steps-with-celery.html">使用 Celery 的第一步</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/next-steps.html">下一步</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/resources.html">资源</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../userguide/index.html">用户指南</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 用户指南</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../userguide/application.html">应用程序</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/tasks.html">任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/calling.html">调用任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/canvas.html">Canvas：设计工作流</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/workers.html">Workers 指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/daemonizing.html">守护进程</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/periodic-tasks.html">周期性任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/routing.html">路由任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/monitoring.html">监控和管理指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/security.html">安全</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/optimizing.html">优化</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/debugging.html">调试</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../userguide/concurrency/index.html">并发</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of 并发</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../userguide/concurrency/eventlet.html">Eventlet 并发</a></li>
<li class="toctree-l3"><a class="reference internal" href="../userguide/concurrency/gevent.html">gevent 并发</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/signals.html">信号</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/testing.html">使用 Celery 进行测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/extending.html">扩展 和 Bootsteps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/configuration.html">配置和默认值</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/sphinx.html">使用 Sphinx 文档化任务</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../django/index.html">Django</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Django</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../django/first-steps-with-django.html">使用 Django 的第一步</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community.html">社区资源</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">教程</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 教程</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/task-cookbook.html">Task Cookbook</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">常见问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">更改历史</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/index.html">API 参考</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of API 参考</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/cli.html">命令行接口</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">celery</span></code> --- Distributed processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.html">Proxies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.html#functions">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.task.html"><code class="docutils literal notranslate"><span class="pre">celery.app.task</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.amqp.html">AMQP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.amqp.html#queues">Queues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.defaults.html"><code class="docutils literal notranslate"><span class="pre">celery.app.defaults</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.control.html"><code class="docutils literal notranslate"><span class="pre">celery.app.control</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.registry.html"><code class="docutils literal notranslate"><span class="pre">celery.app.registry</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.backends.html"><code class="docutils literal notranslate"><span class="pre">celery.app.backends</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.builtins.html"><code class="docutils literal notranslate"><span class="pre">celery.app.builtins</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.events.html"><code class="docutils literal notranslate"><span class="pre">celery.app.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.log.html"><code class="docutils literal notranslate"><span class="pre">celery.app.log</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.utils.html"><code class="docutils literal notranslate"><span class="pre">celery.app.utils</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.autoretry.html"><code class="docutils literal notranslate"><span class="pre">celery.app.autoretry</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bootsteps.html"><code class="docutils literal notranslate"><span class="pre">celery.bootsteps</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.result.html"><code class="docutils literal notranslate"><span class="pre">celery.result</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.schedules.html"><code class="docutils literal notranslate"><span class="pre">celery.schedules</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.signals.html"><code class="docutils literal notranslate"><span class="pre">celery.signals</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.security.html"><code class="docutils literal notranslate"><span class="pre">celery.security</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.utils.debug.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.debug</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.exceptions.html"><code class="docutils literal notranslate"><span class="pre">celery.exceptions</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.app.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders.app</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.default.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders.default</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.base.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders.base</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html">States</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#sets">Sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#misc">Misc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.FAILURE"><code class="docutils literal notranslate"><span class="pre">FAILURE</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.PENDING"><code class="docutils literal notranslate"><span class="pre">PENDING</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.RECEIVED"><code class="docutils literal notranslate"><span class="pre">RECEIVED</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.RETRY"><code class="docutils literal notranslate"><span class="pre">RETRY</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.REVOKED"><code class="docutils literal notranslate"><span class="pre">REVOKED</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.STARTED"><code class="docutils literal notranslate"><span class="pre">STARTED</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.SUCCESS"><code class="docutils literal notranslate"><span class="pre">SUCCESS</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.precedence"><code class="docutils literal notranslate"><span class="pre">precedence()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.state"><code class="docutils literal notranslate"><span class="pre">state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.abortable.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.abortable</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.django.task.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.django.task</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.migrate.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.migrate</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.pytest.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.pytest</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.sphinx.html">celery.contrib.sphinx</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.app.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.app</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.manager.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.manager</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.mocks.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.mocks</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.rdb.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.rdb</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.html"><code class="docutils literal notranslate"><span class="pre">celery.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.receiver.html"><code class="docutils literal notranslate"><span class="pre">celery.events.receiver</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.dispatcher.html"><code class="docutils literal notranslate"><span class="pre">celery.events.state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.event.html"><code class="docutils literal notranslate"><span class="pre">celery.events.event</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.state.html"><code class="docutils literal notranslate"><span class="pre">celery.events.state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.beat.html"><code class="docutils literal notranslate"><span class="pre">celery.beat</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.apps.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.apps.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.apps.beat.html"><code class="docutils literal notranslate"><span class="pre">celery.apps.beat</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.apps.multi.html"><code class="docutils literal notranslate"><span class="pre">celery.apps.multi</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.request.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.request</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.state.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.strategy.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.strategy</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.agent.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.agent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.connection.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.connection</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.consumer.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.consumer</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.control.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.control</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.events.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.gossip.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.gossip</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.heart.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.heart</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.mingle.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.mingle</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.tasks.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.tasks</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.base.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.base</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.celery.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.celery</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.beat.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.beat</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.events.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.logtool.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.logtool</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.amqp.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.amqp</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.graph.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.graph</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.multi.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.multi</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.call.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.call</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.control.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.control</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.list.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.list</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.migrate.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.migrate</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.purge.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.purge</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.result.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.result</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.shell.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.shell</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.upgrade.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.upgrade</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../internals/index.html">内部</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of 内部</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../internals/guide.html">代码贡献指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/deprecation.html">Celery 弃用时间表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/worker.html">内部的 worker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/protocol.html">消息协议</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/app-overview.html">“大实例”重构</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../internals/reference/index.html">内部模块参考</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 内部模块参考</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.components.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.components</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.loops.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.loops</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.heartbeat.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.heartbeat</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.control.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.control</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.pidbox.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.pidbox</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.autoscale.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.autoscale</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.solo.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.solo</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.prefork.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.prefork</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.eventlet.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.eventlet</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.gevent.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.gevent</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.thread.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.thread</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.base.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.base</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.html"><code class="docutils literal notranslate"><span class="pre">celery.backends</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.base.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.base</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.asynchronous.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.asynchronous</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.azureblockblob.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.azureblockblob</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.rpc.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.rpc</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.database.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.database</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.cache.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.cache</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.consul.html">celery.backends.consul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.couchdb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.couchdb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.mongodb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.mongodb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.elasticsearch.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.elasticsearch</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.redis.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.redis</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.cassandra.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.cassandra</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.couchbase.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.couchbase</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.arangodb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.arangodb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.dynamodb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.dynamodb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.filesystem.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.filesystem</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.cosmosdbsql.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.cosmosdbsql</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.s3.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.s3</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.gcs.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.gcs</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.app.trace.html"><code class="docutils literal notranslate"><span class="pre">celery.app.trace</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.app.annotations.html"><code class="docutils literal notranslate"><span class="pre">celery.app.annotations</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.app.routes.html"><code class="docutils literal notranslate"><span class="pre">celery.app.routes</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.certificate.html"><code class="docutils literal notranslate"><span class="pre">celery.security.certificate</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.key.html"><code class="docutils literal notranslate"><span class="pre">celery.security.key</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.serialization.html"><code class="docutils literal notranslate"><span class="pre">celery.security.serialization</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.utils.html"><code class="docutils literal notranslate"><span class="pre">celery.security.utils</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.events.snapshot.html"><code class="docutils literal notranslate"><span class="pre">celery.events.snapshot</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.events.cursesmon.html"><code class="docutils literal notranslate"><span class="pre">celery.events.cursesmon</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.events.dumper.html"><code class="docutils literal notranslate"><span class="pre">celery.events.dumper</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.database.models.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.database.models</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.database.session.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.database.session</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.html"><code class="docutils literal notranslate"><span class="pre">celery.utils</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.abstract.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.abstract</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.collections.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.collections</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.nodenames.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.nodenames</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.deprecated.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.deprecated</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.functional.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.functional</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.graph.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.graph</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.objects.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.objects</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.term.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.term</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.time.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.time</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.iso8601.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.iso8601</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.saferepr.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.saferepr</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.serialization.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.serialization</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.sysinfo.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.sysinfo</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.threads.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.threads</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.timer2.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.timer2</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.imports.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.imports</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.log.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.log</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.text.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.text</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.dispatch.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.dispatch</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.dispatch.signal.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.dispatch.signal</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.platforms.html"><code class="docutils literal notranslate"><span class="pre">celery.platforms</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery._state.html"><code class="docutils literal notranslate"><span class="pre">celery._state</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">历史</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 历史</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="whatsnew-5.5.html">What's new in Celery 5.5 (Immunity)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-5.5.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-5.4.html">What's new in Celery 5.4 (Opalescent)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-5.4.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-5.3.html">What's new in Celery 5.3 (Emerald Rush)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-5.3.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-5.1.html">What's new in Celery 5.1 (Sun Harmonics)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-5.1.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-5.0.html">What's new in Celery 5.0 (singularity)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-5.0.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-4.4.html">What's new in Celery 4.4 (Cliffs)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-4.4.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-4.3.html">What's new in Celery 4.3 (rhubarb)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-4.3.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-4.2.html">What's new in Celery 4.2 (windowlicker)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-4.2.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-4.1.html">What's new in Celery 4.1 (latentcall)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-4.1.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-4.0.html">What's new in Celery 4.0 (latentcall)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-4.0.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-3.1.html">What's new in Celery 3.1 (Cipater)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-3.1.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-3.0.html">What's new in Celery 3.0 (Chiastic Slide)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-3.0.html">Change history for Celery 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-2.5.html">What's new in Celery 2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-2.5.html">Change history for Celery 2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-2.4.html">Change history for Celery 2.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-2.3.html">Change history for Celery 2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-2.2.html">Change history for Celery 2.2</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Change history for Celery 2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-2.0.html">Change history for Celery 2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-1.0.html">Change history for Celery 1.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">术语</a></li>
</ul>

</div>
<!-- <iframe src="https://ghbtns.com/github-btn.html?user=celery&repo=celery&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe> -->
<div id="donate">
  <h5>捐赠</h5>
  <p>请捐赠以支持这个社区项目</p>
  <a href="https://opencollective.com/celery/donate" target="_blank">
    <!-- <img src="https://opencollective.com/celery/donate/button@2x.png?color=blue" /> -->
    <img src="https://opencollective.com/celery/donate/button.png?color=blue" />
  </a>
</div></div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/history/changelog-2.1.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="change-history-for-celery-2-1">
<span id="changelog-2-1"></span><h1>Change history for Celery 2.1<a class="headerlink" href="#change-history-for-celery-2-1" title="Link to this heading">¶</a></h1>
<section id="version-2-1-4">
<span id="id1"></span><h2>2.1.4<a class="headerlink" href="#version-2-1-4" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2010-12-03 12:00 p.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<section id="fixes">
<span id="v214-fixes"></span><h3>Fixes<a class="headerlink" href="#fixes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Execution options to <cite>apply_async</cite> now takes precedence over options
returned by active routers. This was a regression introduced recently
(<span class="xref issue">Issue #244</span>).</p></li>
<li><p>curses monitor: Long arguments are now truncated so curses
doesn't crash with out of bounds errors (<span class="xref issue">Issue #235</span>).</p></li>
<li><p>multi: Channel errors occurring while handling control commands no
longer crash the worker but are instead logged with severity error.</p></li>
<li><p>SQLAlchemy database backend: Fixed a race condition occurring when
the client wrote the pending state. Just like the Django database backend,
it does no longer save the pending state (<span class="xref issue">Issue #261</span> + <span class="xref issue">Issue #262</span>).</p></li>
<li><p>Error email body now uses <cite>repr(exception)</cite> instead of <cite>str(exception)</cite>,
as the latter could result in Unicode decode errors (<span class="xref issue">Issue #245</span>).</p></li>
<li><p>Error email timeout value is now configurable by using the
<a class="reference external" href="http://docs.djangoproject.com/en/dev/ref/settings/#std-setting-EMAIL_TIMEOUT" title="（在 Django v6.0）"><code class="xref std std-setting docutils literal notranslate"><span class="pre">EMAIL_TIMEOUT</span></code></a> setting.</p></li>
<li><p><cite>celeryev</cite>: Now works on Windows (but the curses monitor won't work without
having curses).</p></li>
<li><p>Unit test output no longer emits non-standard characters.</p></li>
<li><p>worker: The broadcast consumer is now closed if the connection is reset.</p></li>
<li><p>worker: Now properly handles errors occurring while trying to acknowledge
the message.</p></li>
<li><dl class="simple">
<dt><cite>TaskRequest.on_failure</cite> now encodes traceback using the current file-system</dt><dd><p>encoding (<span class="xref issue">Issue #286</span>).</p>
</dd>
</dl>
</li>
<li><p><cite>EagerResult</cite> can now be pickled (<span class="xref issue">Issue #288</span>).</p></li>
</ul>
</section>
<section id="documentation">
<span id="v214-documentation"></span><h3>Documentation<a class="headerlink" href="#documentation" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Adding <a class="reference internal" href="../contributing.html#contributing"><span class="std std-ref">贡献</span></a>.</p></li>
<li><p>Added <a class="reference internal" href="../userguide/optimizing.html#guide-optimizing"><span class="std std-ref">优化</span></a>.</p></li>
<li><p>Added <a class="reference internal" href="../faq.html#faq-security"><span class="std std-ref">安全性</span></a> section to the FAQ.</p></li>
</ul>
</section>
</section>
<section id="version-2-1-3">
<span id="id2"></span><h2>2.1.3<a class="headerlink" href="#version-2-1-3" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2010-11-09 05:00 p.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul id="v213-fixes">
<li><p>Fixed deadlocks in <cite>timer2</cite> which could lead to <cite>djcelerymon</cite>/<cite>celeryev -c</cite>
hanging.</p></li>
<li><p><cite>EventReceiver</cite>: now sends heartbeat request to find workers.</p>
<blockquote>
<div><p>This means <strong class="program">celeryev</strong> and friends finds workers immediately
at start-up.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">celeryev</span></code> curses monitor: Set screen_delay to 10ms, so the screen
refreshes more often.</p></li>
<li><p>Fixed pickling errors when pickling <code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncResult</span></code> on older Python
versions.</p></li>
<li><p>worker: prefetch count was decremented by ETA tasks even if there
were no active prefetch limits.</p></li>
</ul>
</section>
<section id="version-2-1-2">
<span id="id3"></span><h2>2.1.2<a class="headerlink" href="#version-2-1-2" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-data<span class="colon">:</span></dt>
<dd class="field-odd"><p>TBA</p>
</dd>
</dl>
<section id="v212-fixes">
<span id="id4"></span><h3>Fixes<a class="headerlink" href="#v212-fixes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>worker: Now sends the <a class="reference internal" href="../userguide/monitoring.html#std-event-task-retried"><code class="xref std std-event docutils literal notranslate"><span class="pre">task-retried</span></code></a> event for retried tasks.</p></li>
<li><p>worker: Now honors ignore result for
<a class="reference internal" href="../reference/celery.exceptions.html#celery.exceptions.WorkerLostError" title="celery.exceptions.WorkerLostError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">WorkerLostError</span></code></a> and timeout errors.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">celerybeat</span></code>: Fixed <a class="reference external" href="https://docs.python.org/dev/library/exceptions.html#UnboundLocalError" title="（在 Python v3.15）"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnboundLocalError</span></code></a> in <code class="docutils literal notranslate"><span class="pre">celerybeat</span></code> logging
when using logging setup signals.</p></li>
<li><p>worker: All log messages now includes <cite>exc_info</cite>.</p></li>
</ul>
</section>
</section>
<section id="version-2-1-1">
<span id="id5"></span><h2>2.1.1<a class="headerlink" href="#version-2-1-1" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2010-10-14 02:00 p.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<section id="v211-fixes">
<span id="id6"></span><h3>Fixes<a class="headerlink" href="#v211-fixes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Now working on Windows again.</p>
<blockquote>
<div><p>Removed dependency on the <a class="reference external" href="https://docs.python.org/dev/library/pwd.html#module-pwd" title="（在 Python v3.15）"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pwd</span></code></a>/<a class="reference external" href="https://docs.python.org/dev/library/grp.html#module-grp" title="（在 Python v3.15）"><code class="xref py py-mod docutils literal notranslate"><span class="pre">grp</span></code></a> modules.</p>
</div></blockquote>
</li>
<li><p>snapshots: Fixed race condition leading to loss of events.</p></li>
<li><p>worker: Reject tasks with an ETA that cannot be converted to a time stamp.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #209</span></p>
</div></blockquote>
</li>
<li><p>concurrency.processes.pool: The semaphore was released twice for each task
(both at ACK and result ready).</p>
<blockquote>
<div><p>This has been fixed, and it is now released only once per task.</p>
</div></blockquote>
</li>
<li><p>docs/configuration: Fixed typo <cite>CELERYD_TASK_SOFT_TIME_LIMIT</cite> -&gt;
<code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_TASK_SOFT_TIME_LIMIT</span></code>.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #214</span></p>
</div></blockquote>
</li>
<li><p>control command <cite>dump_scheduled</cite>: was using old .info attribute</p></li>
<li><dl class="simple">
<dt>multi: Fixed <cite>set changed size during iteration</cite> bug</dt><dd><p>occurring in the restart command.</p>
</dd>
</dl>
</li>
<li><p>worker: Accidentally tried to use additional command-line arguments.</p>
<blockquote>
<div><p>This would lead to an error like:</p>
<blockquote>
<div><p><cite>got multiple values for keyword argument 'concurrency'</cite>.</p>
<p>Additional command-line arguments are now ignored, and doesn't
produce this error. However -- we do reserve the right to use
positional arguments in the future, so please don't depend on this
behavior.</p>
</div></blockquote>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">celerybeat</span></code>: Now respects routers and task execution options again.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">celerybeat</span></code>: Now reuses the publisher instead of the connection.</p></li>
<li><p>Cache result backend: Using <a class="reference external" href="https://docs.python.org/dev/library/functions.html#float" title="（在 Python v3.15）"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> as the expires argument
to <cite>cache.set</cite> is deprecated by the Memcached libraries,
so we now automatically cast to <a class="reference external" href="https://docs.python.org/dev/library/functions.html#int" title="（在 Python v3.15）"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>.</p></li>
<li><p>unit tests: No longer emits logging and warnings in test output.</p></li>
</ul>
</section>
<section id="news">
<span id="v211-news"></span><h3>News<a class="headerlink" href="#news" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Now depends on carrot version 0.10.7.</p></li>
<li><p>Added <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_REDIRECT_STDOUTS</span></code>, and
<code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_REDIRECT_STDOUTS_LEVEL</span></code> settings.</p>
<blockquote>
<div><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_REDIRECT_STDOUTS</span></code> is used by the worker and
beat. All output to <cite>stdout</cite> and <cite>stderr</cite> will be
redirected to the current logger if enabled.</p>
<p><code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_REDIRECT_STDOUTS_LEVEL</span></code> decides the log level used and is
<code class="xref py py-const docutils literal notranslate"><span class="pre">WARNING</span></code> by default.</p>
</div></blockquote>
</li>
<li><p>Added <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYBEAT_SCHEDULER</span></code> setting.</p>
<blockquote>
<div><p>This setting is used to define the default for the -S option to
<strong class="program">celerybeat</strong>.</p>
<p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CELERYBEAT_SCHEDULER</span> <span class="o">=</span> <span class="s1">&#39;djcelery.schedulers.DatabaseScheduler&#39;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Added Task.expires: Used to set default expiry time for tasks.</p></li>
<li><p>New remote control commands: <cite>add_consumer</cite> and <cite>cancel_consumer</cite>.</p>
<blockquote>
<div><dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">add_consumer(queue,</span> <span class="pre">exchange,</span> <span class="pre">exchange_type,</span> <span class="pre">routing_key,</span></span></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">\*\*options)</span></span></dt>
<dd><p>Tells the worker to declare and consume from the specified
declaration.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cancel_consumer">
<span class="sig-name descname"><span class="pre">cancel_consumer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queue_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#cancel_consumer" title="Link to this definition">¶</a></dt>
<dd><p>Tells the worker to stop consuming from queue (by queue name).</p>
</dd></dl>

<p>Commands also added to <strong class="program">celeryctl</strong> and
<code class="xref py py-class docutils literal notranslate"><span class="pre">inspect</span></code>.</p>
<p>Example using <code class="docutils literal notranslate"><span class="pre">celeryctl</span></code> to start consuming from queue &quot;queue&quot;, in
exchange &quot;exchange&quot;, of type &quot;direct&quot; using binding key &quot;key&quot;:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryctl<span class="w"> </span>inspect<span class="w"> </span>add_consumer<span class="w"> </span>queue<span class="w"> </span>exchange<span class="w"> </span>direct<span class="w"> </span>key
<span class="gp">$ </span>celeryctl<span class="w"> </span>inspect<span class="w"> </span>cancel_consumer<span class="w"> </span>queue
</pre></div>
</div>
<p>See <a class="reference internal" href="../userguide/monitoring.html#monitoring-control"><span class="std std-ref">命令行管理实用程序（inspect/control）</span></a> for more information about the
<strong class="program">celeryctl</strong> program.</p>
<p>Another example using <code class="xref py py-class docutils literal notranslate"><span class="pre">inspect</span></code>:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.task.control</span><span class="w"> </span><span class="kn">import</span> <span class="n">inspect</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inspect</span><span class="o">.</span><span class="n">add_consumer</span><span class="p">(</span><span class="n">queue</span><span class="o">=</span><span class="s1">&#39;queue&#39;</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s1">&#39;exchange&#39;</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="n">exchange_type</span><span class="o">=</span><span class="s1">&#39;direct&#39;</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="n">routing_key</span><span class="o">=</span><span class="s1">&#39;key&#39;</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="n">durable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="n">auto_delete</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">inspect</span><span class="o">.</span><span class="n">cancel_consumer</span><span class="p">(</span><span class="s1">&#39;queue&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">celerybeat</span></code>: Now logs the traceback if a message can't be sent.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">celerybeat</span></code>: Now enables a default socket timeout of 30 seconds.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">README</span></code>/introduction/homepage: Added link to <a class="reference external" href="https://github.com/ask/flask-celery">Flask-Celery</a>.</p></li>
</ul>
</section>
</section>
<section id="version-2-1-0">
<span id="id7"></span><h2>2.1.0<a class="headerlink" href="#version-2-1-0" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2010-10-08 12:00 p.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<section id="important-notes">
<span id="v210-important"></span><h3>Important Notes<a class="headerlink" href="#important-notes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Celery is now following the versioning semantics defined by <a class="reference external" href="http://semver.org">semver</a>.</p>
<blockquote>
<div><p>This means we're no longer allowed to use odd/even versioning semantics
By our previous versioning scheme this stable release should've
been version 2.2.</p>
</div></blockquote>
</li>
</ul>
<ul>
<li><p>Now depends on Carrot 0.10.7.</p></li>
<li><p>No longer depends on SQLAlchemy, this needs to be installed separately
if the database result backend is used.</p></li>
<li><p><a class="extlink-pypi reference external" href="https://pypi.org/project/django-celery/">https://pypi.org/project/django-celery/</a> now comes with a monitor for the Django Admin
interface. This can also be used if you're not a Django user.
(Update: Django-Admin monitor has been replaced with Flower, see the
Monitoring guide).</p></li>
<li><p>If you get an error after upgrading saying:
<cite>AttributeError: 'module' object has no attribute 'system'</cite>,</p>
<blockquote>
<div><p>Then this is because the <cite>celery.platform</cite> module has been
renamed to <cite>celery.platforms</cite> to not collide with the built-in
<a class="reference external" href="https://docs.python.org/dev/library/platform.html#module-platform" title="（在 Python v3.15）"><code class="xref py py-mod docutils literal notranslate"><span class="pre">platform</span></code></a> module.</p>
<p>You have to remove the old <code class="file docutils literal notranslate"><span class="pre">platform.py</span></code> (and maybe
<code class="file docutils literal notranslate"><span class="pre">platform.pyc</span></code>) file from your previous Celery installation.</p>
<p>To do this use <strong class="program">python</strong> to find the location
of this module:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python
<span class="go">&gt;&gt;&gt; import celery.platform</span>
<span class="go">&gt;&gt;&gt; celery.platform</span>
<span class="go">&lt;module &#39;celery.platform&#39; from &#39;/opt/devel/celery/celery/platform.pyc&#39;&gt;</span>
</pre></div>
</div>
<p>Here the compiled module is in <code class="file docutils literal notranslate"><span class="pre">/opt/devel/celery/celery/</span></code>,
to remove the offending files do:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>rm<span class="w"> </span>-f<span class="w"> </span>/opt/devel/celery/celery/platform.py*
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="v210-news">
<span id="id8"></span><h3>News<a class="headerlink" href="#v210-news" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Added support for expiration of AMQP results (requires RabbitMQ 2.1.0)</p>
<blockquote>
<div><p>The new configuration option <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_AMQP_TASK_RESULT_EXPIRES</span></code>
sets the expiry time in seconds (can be int or float):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CELERY_AMQP_TASK_RESULT_EXPIRES</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="mi">60</span>  <span class="c1"># 30 minutes.</span>
<span class="n">CELERY_AMQP_TASK_RESULT_EXPIRES</span> <span class="o">=</span> <span class="mf">0.80</span>     <span class="c1"># 800 ms.</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">celeryev</span></code>: Event Snapshots</p>
<blockquote>
<div><p>If enabled, the worker sends messages about what the worker is doing.
These messages are called &quot;events&quot;.
The events are used by real-time monitors to show what the
cluster is doing, but they're not very useful for monitoring
over a longer period of time. Snapshots
lets you take &quot;pictures&quot; of the clusters state at regular intervals.
This can then be stored in a database to generate statistics
with, or even monitoring over longer time periods.</p>
<p><a class="extlink-pypi reference external" href="https://pypi.org/project/django-celery/">https://pypi.org/project/django-celery/</a> now comes with a Celery monitor for the Django
Admin interface. To use this you need to run the <a class="extlink-pypi reference external" href="https://pypi.org/project/django-celery/">https://pypi.org/project/django-celery/</a>
snapshot camera, which stores snapshots to the database at configurable
intervals.</p>
<p>To use the Django admin monitor you need to do the following:</p>
<ol class="arabic">
<li><p>Create the new database tables:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>manage.py<span class="w"> </span>syncdb
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Start the <a class="extlink-pypi reference external" href="https://pypi.org/project/django-celery/">https://pypi.org/project/django-celery/</a> snapshot camera:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>manage.py<span class="w"> </span>celerycam
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Open up the django admin to monitor your cluster.</p></li>
</ol>
<p>The admin interface shows tasks, worker nodes, and even
lets you perform some actions, like revoking and rate limiting tasks,
and shutting down worker nodes.</p>
<p>There's also a Debian init.d script for <a class="reference internal" href="../reference/celery.bin.events.html#module-celery.bin.events" title="celery.bin.events"><code class="xref py py-mod docutils literal notranslate"><span class="pre">events</span></code></a> available,
see <a class="reference internal" href="../userguide/daemonizing.html#daemonizing"><span class="std std-ref">守护进程</span></a> for more information.</p>
<p>New command-line arguments to <code class="docutils literal notranslate"><span class="pre">celeryev</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="../reference/cli.html#cmdoption-celery-events-c"><code class="xref std std-option docutils literal notranslate"><span class="pre">celery</span> <span class="pre">events</span> <span class="pre">--camera</span></code></a>: Snapshot camera class to use.</p></li>
<li><p><a class="reference internal" href="../reference/cli.html#cmdoption-celery-events-f"><code class="xref std std-option docutils literal notranslate"><span class="pre">celery</span> <span class="pre">events</span> <span class="pre">--logfile</span></code></a>: Log file</p></li>
<li><p><a class="reference internal" href="../reference/cli.html#cmdoption-celery-events-l"><code class="xref std std-option docutils literal notranslate"><span class="pre">celery</span> <span class="pre">events</span> <span class="pre">--loglevel</span></code></a>: Log level</p></li>
<li><p><a class="reference internal" href="../reference/cli.html#cmdoption-celery-events-r"><code class="xref std std-option docutils literal notranslate"><span class="pre">celery</span> <span class="pre">events</span> <span class="pre">--maxrate</span></code></a>: Shutter rate limit.</p></li>
<li><p><a class="reference internal" href="../reference/cli.html#cmdoption-celery-events-F"><code class="xref std std-option docutils literal notranslate"><span class="pre">celery</span> <span class="pre">events</span> <span class="pre">--freq</span></code></a>: Shutter frequency</p></li>
</ul>
</div></blockquote>
<p>The <a class="reference internal" href="../reference/cli.html#cmdoption-celery-events-c"><code class="xref std std-option docutils literal notranslate"><span class="pre">--camera</span></code></a> argument is the name
of a class used to take snapshots with. It must support the interface
defined by <a class="reference internal" href="../internals/reference/celery.events.snapshot.html#celery.events.snapshot.Polaroid" title="celery.events.snapshot.Polaroid"><code class="xref py py-class docutils literal notranslate"><span class="pre">celery.events.snapshot.Polaroid</span></code></a>.</p>
<p>Shutter frequency controls how often the camera thread wakes up,
while the rate limit controls how often it will actually take
a snapshot.
The rate limit can be an integer (snapshots/s), or a rate limit string
which has the same syntax as the task rate limit strings (<cite>&quot;200/m&quot;</cite>,
<cite>&quot;10/s&quot;</cite>, <cite>&quot;1/h&quot;,</cite> etc).</p>
<p>For the Django camera case, this rate limit can be used to control
how often the snapshots are written to the database, and the frequency
used to control how often the thread wakes up to check if there's
anything new.</p>
<p>The rate limit is off by default, which means it will take a snapshot
for every <a class="reference internal" href="../reference/cli.html#cmdoption-celery-events-F"><code class="xref std std-option docutils literal notranslate"><span class="pre">--frequency</span></code></a> seconds.</p>
</div></blockquote>
</li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">broadcast()</span></code>: Added callback argument, this can be
used to process replies immediately as they arrive.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">celeryctl</span></code>: New command line utility to manage and inspect worker nodes,
apply tasks and inspect the results of tasks.</p>
<blockquote>
<div><div class="admonition seealso">
<p class="admonition-title">参见</p>
<p>The <a class="reference internal" href="../userguide/monitoring.html#monitoring-control"><span class="std std-ref">命令行管理实用程序（inspect/control）</span></a> section in the <a class="reference internal" href="../userguide/index.html#guide"><span class="std std-ref">用户指南</span></a>.</p>
</div>
<p>Some examples:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryctl<span class="w"> </span>apply<span class="w"> </span>tasks.add<span class="w"> </span>-a<span class="w"> </span><span class="s1">&#39;[2, 2]&#39;</span><span class="w"> </span>--countdown<span class="o">=</span><span class="m">10</span>

<span class="gp">$ </span>celeryctl<span class="w"> </span>inspect<span class="w"> </span>active
<span class="gp">$ </span>celeryctl<span class="w"> </span>inspect<span class="w"> </span>registered_tasks
<span class="gp">$ </span>celeryctl<span class="w"> </span>inspect<span class="w"> </span>scheduled
<span class="gp">$ </span>celeryctl<span class="w"> </span>inspect<span class="w"> </span>--help
<span class="gp">$ </span>celeryctl<span class="w"> </span>apply<span class="w"> </span>--help
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Added the ability to set an expiry date and time for tasks.</p>
<blockquote>
<div><p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Task expires after one minute from now.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span> <span class="n">expires</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Also supports datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">expires</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>When a worker receives a task that's been expired it will be
marked as revoked (<a class="reference internal" href="../reference/celery.exceptions.html#celery.exceptions.TaskRevokedError" title="celery.exceptions.TaskRevokedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TaskRevokedError</span></code></a>).</p>
</div></blockquote>
</li>
<li><p>Changed the way logging is configured.</p>
<blockquote>
<div><p>We now configure the root logger instead of only configuring
our custom logger. In addition we don't hijack
the multiprocessing logger anymore, but instead use a custom logger name
for different applications:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Application</strong></p></th>
<th class="head"><p><strong>Logger Name</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">celeryd</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;celery&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">celerybeat</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;celery.beat&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">celeryev</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;celery.ev&quot;</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>This means that the <cite>loglevel</cite> and <cite>logfile</cite> arguments will
affect all registered loggers (even those from third-party libraries).
Unless you configure the loggers manually as shown below, that is.</p>
<p><em>Users can choose to configure logging by subscribing to the
:signal:`~celery.signals.setup_logging` signal:</em></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">logging.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">fileConfig</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">celery</span><span class="w"> </span><span class="kn">import</span> <span class="n">signals</span>

<span class="nd">@signals</span><span class="o">.</span><span class="n">setup_logging</span><span class="o">.</span><span class="n">connect</span>
<span class="k">def</span><span class="w"> </span><span class="nf">setup_logging</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">fileConfig</span><span class="p">(</span><span class="s1">&#39;logging.conf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If there are no receivers for this signal, the logging subsystem
will be configured using the
<a class="reference internal" href="../reference/cli.html#cmdoption-celery-worker-l"><code class="xref std std-option docutils literal notranslate"><span class="pre">--loglevel</span></code></a>/
<a class="reference internal" href="../reference/cli.html#cmdoption-celery-worker-f"><code class="xref std std-option docutils literal notranslate"><span class="pre">--logfile</span></code></a>
arguments, this will be used for <em>all defined loggers</em>.</p>
<p>Remember that the worker also redirects stdout and stderr
to the Celery logger, if manually configure logging
you also need to redirect the standard outs manually:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="kn">from</span><span class="w"> </span><span class="nn">logging.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">fileConfig</span>
 <span class="kn">from</span><span class="w"> </span><span class="nn">celery</span><span class="w"> </span><span class="kn">import</span> <span class="n">log</span>

<span class="k">def</span><span class="w"> </span><span class="nf">setup_logging</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
     <span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
     <span class="n">fileConfig</span><span class="p">(</span><span class="s1">&#39;logging.conf&#39;</span><span class="p">)</span>
     <span class="n">stdouts</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;mystdoutslogger&#39;</span><span class="p">)</span>
     <span class="n">log</span><span class="o">.</span><span class="n">redirect_stdouts_to_logger</span><span class="p">(</span><span class="n">stdouts</span><span class="p">,</span> <span class="n">loglevel</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>worker Added command line option
<a class="reference internal" href="../reference/cli.html#cmdoption-celery-worker-I"><code class="xref std std-option docutils literal notranslate"><span class="pre">--include</span></code></a>:</p>
<blockquote>
<div><p>A comma separated list of (task) modules to be imported.</p>
<p>Example:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd<span class="w"> </span>-I<span class="w"> </span>app1.tasks,app2.tasks
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>worker: now emits a warning if running as the root user (euid is 0).</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">celery.messaging.establish_connection()</span></code>: Ability to override defaults
used using keyword argument &quot;defaults&quot;.</p></li>
<li><p>worker: Now uses <cite>multiprocessing.freeze_support()</cite> so that it should work
with <strong>py2exe</strong>, <strong>PyInstaller</strong>, <strong>cx_Freeze</strong>, etc.</p></li>
<li><p>worker: Now includes more meta-data for the <a class="reference internal" href="../userguide/tasks.html#std-state-STARTED"><code class="xref std std-state docutils literal notranslate"><span class="pre">STARTED</span></code></a> state: PID and
host name of the worker that started the task.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #181</span></p>
</div></blockquote>
</li>
<li><p>subtask: Merge additional keyword arguments to <cite>subtask()</cite> into task keyword
arguments.</p>
<blockquote>
<div><p>For example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">subtask</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">},</span> <span class="n">baz</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">args</span>
<span class="go">(1, 2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">kwargs</span>
<span class="go">{&#39;foo&#39;: &#39;bar&#39;, &#39;baz&#39;: 1}</span>
</pre></div>
</div>
<p>See <span class="xref issue">issue #182</span>.</p>
</div></blockquote>
</li>
<li><p>worker: Now emits a warning if there's already a worker node using the same
name running on the same virtual host.</p></li>
<li><p>AMQP result backend: Sending of results are now retried if the connection
is down.</p></li>
<li><dl class="simple">
<dt>AMQP result backend: <cite>result.get()</cite>: Wait for next state if state isn't</dt><dd><p>in <code class="xref py py-data docutils literal notranslate"><span class="pre">READY_STATES</span></code>.</p>
</dd>
</dl>
</li>
<li><p>TaskSetResult now supports subscription.</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">TaskSet</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span><span class="o">.</span><span class="n">apply_async</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Added <cite>Task.send_error_emails</cite> + <cite>Task.error_whitelist</cite>, so these can
be configured per task instead of just by the global setting.</p></li>
<li><p>Added <cite>Task.store_errors_even_if_ignored</cite>, so it can be changed per Task,
not just by the global setting.</p></li>
<li><p>The Crontab scheduler no longer wakes up every second, but implements
<cite>remaining_estimate</cite> (<em>Optimization</em>).</p></li>
<li><dl class="simple">
<dt>worker:  Store <a class="reference internal" href="../userguide/tasks.html#std-state-FAILURE"><code class="xref std std-state docutils literal notranslate"><span class="pre">FAILURE</span></code></a> result if the</dt><dd><p><a class="reference internal" href="../reference/celery.exceptions.html#celery.exceptions.WorkerLostError" title="celery.exceptions.WorkerLostError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">WorkerLostError</span></code></a> exception occurs (worker process
disappeared).</p>
</dd>
</dl>
</li>
<li><p>worker: Store <a class="reference internal" href="../userguide/tasks.html#std-state-FAILURE"><code class="xref std std-state docutils literal notranslate"><span class="pre">FAILURE</span></code></a> result if one of the <cite>*TimeLimitExceeded</cite>
exceptions occurs.</p></li>
<li><p>Refactored the periodic task responsible for cleaning up results.</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>The backend cleanup task is now only added to the schedule if</dt><dd><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_TASK_RESULT_EXPIRES</span></code> is set.</p>
</dd>
</dl>
</li>
<li><p>If the schedule already contains a periodic task named
&quot;celery.backend_cleanup&quot; it won't change it, so the behavior of the
backend cleanup task can be easily changed.</p></li>
<li><p>The task is now run every day at 4:00 AM, rather than every day since
the first time it was run (using Crontab schedule instead of
<cite>run_every</cite>)</p></li>
<li><dl class="simple">
<dt>Renamed <cite>celery.task.builtins.DeleteExpiredTaskMetaTask</cite></dt><dd><p>-&gt; <code class="xref py py-class docutils literal notranslate"><span class="pre">celery.task.builtins.backend_cleanup</span></code></p>
</dd>
</dl>
</li>
<li><p>The task itself has been renamed from &quot;celery.delete_expired_task_meta&quot;
to &quot;celery.backend_cleanup&quot;</p></li>
</ul>
<p>See <span class="xref issue">issue #134</span>.</p>
</div></blockquote>
</li>
<li><p>Implemented <cite>AsyncResult.forget</cite> for SQLAlchemy/Memcached/Redis/Tokyo Tyrant
backends (forget and remove task result).</p>
<blockquote>
<div><p>See <span class="xref issue">issue #184</span>.</p>
</div></blockquote>
</li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">TaskSetResult.join</span></code>:
Added 'propagate=True' argument.</p>
<p>When set to <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code> exceptions occurring in subtasks will
not be re-raised.</p>
</li>
<li><p>Added <cite>Task.update_state(task_id, state, meta)</cite>
as a shortcut to <cite>task.backend.store_result(task_id, meta, state)</cite>.</p>
<blockquote>
<div><p>The backend interface is &quot;private&quot; and the terminology outdated,
so better to move this to <code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> so it can be
used.</p>
</div></blockquote>
</li>
<li><p>timer2: Set <cite>self.running=False</cite> in
<a class="reference internal" href="../internals/reference/celery.utils.timer2.html#celery.utils.timer2.Timer.stop" title="celery.utils.timer2.Timer.stop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stop()</span></code></a> so it won't try to join again on
subsequent calls to <cite>stop()</cite>.</p></li>
<li><p>Log colors are now disabled by default on Windows.</p></li>
<li><p><cite>celery.platform</cite> renamed to <a class="reference internal" href="../internals/reference/celery.platforms.html#module-celery.platforms" title="celery.platforms"><code class="xref py py-mod docutils literal notranslate"><span class="pre">celery.platforms</span></code></a>, so it doesn't
collide with the built-in <a class="reference external" href="https://docs.python.org/dev/library/platform.html#module-platform" title="（在 Python v3.15）"><code class="xref py py-mod docutils literal notranslate"><span class="pre">platform</span></code></a> module.</p></li>
<li><p>Exceptions occurring in Mediator+Pool callbacks are now caught and logged
instead of taking down the worker.</p></li>
<li><p>Redis result backend: Now supports result expiration using the Redis
<cite>EXPIRE</cite> command.</p></li>
<li><p>unit tests: Don't leave threads running at tear down.</p></li>
<li><p>worker: Task results shown in logs are now truncated to 46 chars.</p></li>
<li><dl class="simple">
<dt><cite>Task.__name__</cite> is now an alias to <cite>self.__class__.__name__</cite>.</dt><dd><p>This way tasks introspects more like regular functions.</p>
</dd>
</dl>
</li>
<li><p><cite>Task.retry</cite>: Now raises <a class="reference external" href="https://docs.python.org/dev/library/exceptions.html#TypeError" title="（在 Python v3.15）"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> if kwargs argument is empty.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #164</span>.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">timedelta_seconds</span></code>: Use <code class="docutils literal notranslate"><span class="pre">timedelta.total_seconds</span></code> if running on Python 2.7</p></li>
<li><p><a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/main/reference/kombu.utils.limits.html#kombu.utils.limits.TokenBucket" title="（在 Kombu v5.5）"><code class="xref py py-class docutils literal notranslate"><span class="pre">TokenBucket</span></code></a>: Generic Token Bucket algorithm</p></li>
<li><p><a class="reference internal" href="../reference/celery.events.state.html#module-celery.events.state" title="celery.events.state"><code class="xref py py-mod docutils literal notranslate"><span class="pre">celery.events.state</span></code></a>: Recording of cluster state can now
be paused and resumed, including support for buffering.</p>
<blockquote>
<div><dl class="py method">
<dt class="sig sig-object py" id="State.freeze">
<span class="sig-prename descclassname"><span class="pre">State.</span></span><span class="sig-name descname"><span class="pre">freeze</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#State.freeze" title="Link to this definition">¶</a></dt>
<dd><p>Pauses recording of the stream.</p>
<p>If <cite>buffer</cite> is true, events received while being frozen will be
buffered, and may be replayed later.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="State.thaw">
<span class="sig-prename descclassname"><span class="pre">State.</span></span><span class="sig-name descname"><span class="pre">thaw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">replay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#State.thaw" title="Link to this definition">¶</a></dt>
<dd><p>Resumes recording of the stream.</p>
<p>If <cite>replay</cite> is true, then the recorded buffer will be applied.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="State.freeze_while">
<span class="sig-prename descclassname"><span class="pre">State.</span></span><span class="sig-name descname"><span class="pre">freeze_while</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fun</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#State.freeze_while" title="Link to this definition">¶</a></dt>
<dd><p>With a function to apply, freezes the stream before,
and replays the buffer after the function returns.</p>
</dd></dl>

</div></blockquote>
</li>
<li><p><a class="reference internal" href="../reference/celery.events.html#celery.events.EventReceiver.capture" title="celery.events.EventReceiver.capture"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EventReceiver.capture</span></code></a>
Now supports a timeout keyword argument.</p></li>
<li><p>worker: The mediator thread is now disabled if
<code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_RATE_LIMITS</span></code> is enabled, and tasks are directly sent to the
pool without going through the ready queue (<em>Optimization</em>).</p></li>
</ul>
</section>
<section id="v210-fixes">
<span id="id9"></span><h3>Fixes<a class="headerlink" href="#v210-fixes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Pool: Process timed out by <cite>TimeoutHandler</cite> must be joined by the Supervisor,
so don't remove it from the internal process list.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #192</span>.</p>
</div></blockquote>
</li>
<li><p><cite>TaskPublisher.delay_task</cite> now supports exchange argument, so exchange can be
overridden when sending tasks in bulk using the same publisher</p>
<blockquote>
<div><p>See <span class="xref issue">issue #187</span>.</p>
</div></blockquote>
</li>
<li><p>the worker no longer marks tasks as revoked if <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_IGNORE_RESULT</span></code>
is enabled.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #207</span>.</p>
</div></blockquote>
</li>
<li><p>AMQP Result backend: Fixed bug with <cite>result.get()</cite> if
<code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_TRACK_STARTED</span></code> enabled.</p>
<blockquote>
<div><p><cite>result.get()</cite> would stop consuming after receiving the
<a class="reference internal" href="../userguide/tasks.html#std-state-STARTED"><code class="xref std std-state docutils literal notranslate"><span class="pre">STARTED</span></code></a> state.</p>
</div></blockquote>
</li>
<li><p>Fixed bug where new processes created by the pool supervisor becomes stuck
while reading from the task Queue.</p>
<blockquote>
<div><p>See <a class="reference external" href="http://bugs.python.org/issue10037">http://bugs.python.org/issue10037</a></p>
</div></blockquote>
</li>
<li><p>Fixed timing issue when declaring the remote control command reply queue</p>
<blockquote>
<div><p>This issue could result in replies being lost, but have now been fixed.</p>
</div></blockquote>
</li>
<li><p>Backward compatible <cite>LoggerAdapter</cite> implementation: Now works for Python 2.4.</p>
<blockquote>
<div><p>Also added support for several new methods:
<cite>fatal</cite>, <cite>makeRecord</cite>, <cite>_log</cite>, <cite>log</cite>, <cite>isEnabledFor</cite>,
<cite>addHandler</cite>, <cite>removeHandler</cite>.</p>
</div></blockquote>
</li>
</ul>
</section>
<section id="experimental">
<span id="v210-experimental"></span><h3>Experimental<a class="headerlink" href="#experimental" title="Link to this heading">¶</a></h3>
<ul>
<li><p>multi: Added daemonization support.</p>
<blockquote>
<div><p>multi can now be used to start, stop and restart worker nodes:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd-multi<span class="w"> </span>start<span class="w"> </span>jerry<span class="w"> </span>elaine<span class="w"> </span>george<span class="w"> </span>kramer
</pre></div>
</div>
<p>This also creates PID files and log files (<code class="file docutils literal notranslate"><span class="pre">celeryd&#64;jerry.pid</span></code>,
..., <code class="file docutils literal notranslate"><span class="pre">celeryd&#64;jerry.log</span></code>. To specify a location for these files
use the <cite>--pidfile</cite> and <cite>--logfile</cite> arguments with the <cite>%n</cite>
format:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd-multi<span class="w"> </span>start<span class="w"> </span>jerry<span class="w"> </span>elaine<span class="w"> </span>george<span class="w"> </span>kramer<span class="w"> </span><span class="se">\</span>
<span class="w">                </span>--logfile<span class="o">=</span>/var/log/celeryd@%n.log<span class="w"> </span><span class="se">\</span>
<span class="w">                </span>--pidfile<span class="o">=</span>/var/run/celeryd@%n.pid
</pre></div>
</div>
<p>Stopping:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd-multi<span class="w"> </span>stop<span class="w"> </span>jerry<span class="w"> </span>elaine<span class="w"> </span>george<span class="w"> </span>kramer
</pre></div>
</div>
<p>Restarting. The nodes will be restarted one by one as the old ones
are shutdown:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd-multi<span class="w"> </span>restart<span class="w"> </span>jerry<span class="w"> </span>elaine<span class="w"> </span>george<span class="w"> </span>kramer
</pre></div>
</div>
<p>Killing the nodes (<strong>WARNING</strong>: Will discard currently executing tasks):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd-multi<span class="w"> </span><span class="nb">kill</span><span class="w"> </span>jerry<span class="w"> </span>elaine<span class="w"> </span>george<span class="w"> </span>kramer
</pre></div>
</div>
<p>See <cite>celeryd-multi help</cite> for help.</p>
</div></blockquote>
</li>
<li><p>multi: <cite>start</cite> command renamed to <cite>show</cite>.</p>
<blockquote>
<div><p><cite>celeryd-multi start</cite> will now actually start and detach worker nodes.
To just generate the commands you have to use <cite>celeryd-multi show</cite>.</p>
</div></blockquote>
</li>
<li><p>worker: Added <cite>--pidfile</cite> argument.</p>
<blockquote>
<div><p>The worker will write its pid when it starts. The worker will
not be started if this file exists and the pid contained is still alive.</p>
</div></blockquote>
</li>
<li><p>Added generic init.d script using <cite>celeryd-multi</cite></p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/celery/celery/tree/master/extra/generic-init.d/celeryd">https://github.com/celery/celery/tree/master/extra/generic-init.d/celeryd</a></p>
</div></blockquote>
</li>
</ul>
</section>
<section id="v210-documentation">
<span id="id10"></span><h3>Documentation<a class="headerlink" href="#v210-documentation" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Added User guide section: Monitoring</p></li>
<li><p>Added user guide section: Periodic Tasks</p>
<blockquote>
<div><p>Moved from <cite>getting-started/periodic-tasks</cite> and updated.</p>
</div></blockquote>
</li>
<li><p>tutorials/external moved to new section: &quot;community&quot;.</p></li>
<li><p>References has been added to all sections in the documentation.</p>
<blockquote>
<div><p>This makes it easier to link between documents.</p>
</div></blockquote>
</li>
</ul>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="changelog-2.0.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Change history for Celery 2.0</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="changelog-2.2.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Change history for Celery 2.2</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                <a href="../copyright.html">Copyright</a> &#169; 2009-2023, Ask Solem &amp; contributors
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Change history for Celery 2.1</a><ul>
<li><a class="reference internal" href="#version-2-1-4">2.1.4</a><ul>
<li><a class="reference internal" href="#fixes">Fixes</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-2-1-3">2.1.3</a></li>
<li><a class="reference internal" href="#version-2-1-2">2.1.2</a><ul>
<li><a class="reference internal" href="#v212-fixes">Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-2-1-1">2.1.1</a><ul>
<li><a class="reference internal" href="#v211-fixes">Fixes</a></li>
<li><a class="reference internal" href="#news">News</a><ul>
<li><a class="reference internal" href="#cancel_consumer"><code class="docutils literal notranslate"><span class="pre">cancel_consumer()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#version-2-1-0">2.1.0</a><ul>
<li><a class="reference internal" href="#important-notes">Important Notes</a></li>
<li><a class="reference internal" href="#v210-news">News</a><ul>
<li><a class="reference internal" href="#State.freeze"><code class="docutils literal notranslate"><span class="pre">State.freeze()</span></code></a></li>
<li><a class="reference internal" href="#State.thaw"><code class="docutils literal notranslate"><span class="pre">State.thaw()</span></code></a></li>
<li><a class="reference internal" href="#State.freeze_while"><code class="docutils literal notranslate"><span class="pre">State.freeze_while()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#v210-fixes">Fixes</a></li>
<li><a class="reference internal" href="#experimental">Experimental</a></li>
<li><a class="reference internal" href="#v210-documentation">Documentation</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=8156d91f"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=5eb1bb1e"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    </body>
</html>