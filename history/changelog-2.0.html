<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="索引" href="../genindex.html" /><link rel="search" title="搜索" href="../search.html" /><link rel="copyright" title="版权所有" href="../copyright.html" /><link rel="next" title="Change history for Celery 1.0" href="changelog-1.0.html" /><link rel="prev" title="Change history for Celery 2.1" href="changelog-2.1.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>Change history for Celery 2.0 - Celery 5.5.1 文档</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=3ee1c6c6" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../_static/my.css?v=112ca36d" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Celery 5.5.1 文档</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/celery_512_1.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Celery 5.5.1 文档</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">版权</a></li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../getting-started/index.html">快速开始</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 快速开始</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/introduction.html">Celery 简介</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../getting-started/backends-and-brokers/index.html">Backends 和 Brokers</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Backends 和 Brokers</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/rabbitmq.html">使用 RabbitMQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/redis.html">使用 Redis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/sqs.html">使用 Amazon SQS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/kafka.html">使用 Kafka</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/gcpubsub.html">使用 Google Pub/Sub</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/first-steps-with-celery.html">使用 Celery 的第一步</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/next-steps.html">下一步</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/resources.html">资源</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../userguide/index.html">用户指南</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 用户指南</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../userguide/application.html">应用程序</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/tasks.html">任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/calling.html">调用任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/canvas.html">Canvas：设计工作流</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/workers.html">Workers 指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/daemonizing.html">守护进程</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/periodic-tasks.html">周期性任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/routing.html">路由任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/monitoring.html">监控和管理指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/security.html">安全</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/optimizing.html">优化</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/debugging.html">调试</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../userguide/concurrency/index.html">并发</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of 并发</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../userguide/concurrency/eventlet.html">Eventlet 并发</a></li>
<li class="toctree-l3"><a class="reference internal" href="../userguide/concurrency/gevent.html">gevent 并发</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/signals.html">信号</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/testing.html">使用 Celery 进行测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/extending.html">扩展 和 Bootsteps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/configuration.html">配置和默认值</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/sphinx.html">使用 Sphinx 文档化任务</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../django/index.html">Django</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Django</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../django/first-steps-with-django.html">使用 Django 的第一步</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community.html">社区资源</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">教程</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 教程</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/task-cookbook.html">Task Cookbook</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">常见问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">更改历史</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/index.html">API 参考</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of API 参考</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/cli.html">命令行接口</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">celery</span></code> --- Distributed processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.html">Proxies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.html#functions">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.task.html"><code class="docutils literal notranslate"><span class="pre">celery.app.task</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.amqp.html">AMQP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.amqp.html#queues">Queues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.defaults.html"><code class="docutils literal notranslate"><span class="pre">celery.app.defaults</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.control.html"><code class="docutils literal notranslate"><span class="pre">celery.app.control</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.registry.html"><code class="docutils literal notranslate"><span class="pre">celery.app.registry</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.backends.html"><code class="docutils literal notranslate"><span class="pre">celery.app.backends</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.builtins.html"><code class="docutils literal notranslate"><span class="pre">celery.app.builtins</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.events.html"><code class="docutils literal notranslate"><span class="pre">celery.app.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.log.html"><code class="docutils literal notranslate"><span class="pre">celery.app.log</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.utils.html"><code class="docutils literal notranslate"><span class="pre">celery.app.utils</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.autoretry.html"><code class="docutils literal notranslate"><span class="pre">celery.app.autoretry</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bootsteps.html"><code class="docutils literal notranslate"><span class="pre">celery.bootsteps</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.result.html"><code class="docutils literal notranslate"><span class="pre">celery.result</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.schedules.html"><code class="docutils literal notranslate"><span class="pre">celery.schedules</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.signals.html"><code class="docutils literal notranslate"><span class="pre">celery.signals</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.security.html"><code class="docutils literal notranslate"><span class="pre">celery.security</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.utils.debug.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.debug</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.exceptions.html"><code class="docutils literal notranslate"><span class="pre">celery.exceptions</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.app.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders.app</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.default.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders.default</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.base.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders.base</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html">States</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#sets">Sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#misc">Misc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.FAILURE"><code class="docutils literal notranslate"><span class="pre">FAILURE</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.PENDING"><code class="docutils literal notranslate"><span class="pre">PENDING</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.RECEIVED"><code class="docutils literal notranslate"><span class="pre">RECEIVED</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.RETRY"><code class="docutils literal notranslate"><span class="pre">RETRY</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.REVOKED"><code class="docutils literal notranslate"><span class="pre">REVOKED</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.STARTED"><code class="docutils literal notranslate"><span class="pre">STARTED</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.SUCCESS"><code class="docutils literal notranslate"><span class="pre">SUCCESS</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.precedence"><code class="docutils literal notranslate"><span class="pre">precedence()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.state"><code class="docutils literal notranslate"><span class="pre">state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.abortable.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.abortable</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.django.task.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.django.task</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.migrate.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.migrate</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.pytest.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.pytest</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.sphinx.html">celery.contrib.sphinx</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.app.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.app</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.manager.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.manager</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.mocks.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.mocks</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.rdb.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.rdb</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.html"><code class="docutils literal notranslate"><span class="pre">celery.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.receiver.html"><code class="docutils literal notranslate"><span class="pre">celery.events.receiver</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.dispatcher.html"><code class="docutils literal notranslate"><span class="pre">celery.events.state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.event.html"><code class="docutils literal notranslate"><span class="pre">celery.events.event</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.state.html"><code class="docutils literal notranslate"><span class="pre">celery.events.state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.beat.html"><code class="docutils literal notranslate"><span class="pre">celery.beat</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.apps.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.apps.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.apps.beat.html"><code class="docutils literal notranslate"><span class="pre">celery.apps.beat</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.apps.multi.html"><code class="docutils literal notranslate"><span class="pre">celery.apps.multi</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.request.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.request</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.state.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.strategy.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.strategy</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.agent.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.agent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.connection.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.connection</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.consumer.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.consumer</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.control.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.control</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.events.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.gossip.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.gossip</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.heart.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.heart</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.mingle.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.mingle</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.tasks.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.tasks</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.base.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.base</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.celery.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.celery</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.beat.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.beat</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.events.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.logtool.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.logtool</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.amqp.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.amqp</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.graph.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.graph</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.multi.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.multi</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.call.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.call</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.control.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.control</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.list.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.list</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.migrate.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.migrate</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.purge.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.purge</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.result.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.result</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.shell.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.shell</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.upgrade.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.upgrade</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../internals/index.html">内部</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of 内部</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../internals/guide.html">代码贡献指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/deprecation.html">Celery 弃用时间表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/worker.html">内部的 worker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/protocol.html">消息协议</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/app-overview.html">“大实例”重构</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../internals/reference/index.html">内部模块参考</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 内部模块参考</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.components.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.components</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.loops.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.loops</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.heartbeat.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.heartbeat</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.control.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.control</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.pidbox.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.pidbox</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.autoscale.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.autoscale</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.solo.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.solo</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.prefork.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.prefork</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.eventlet.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.eventlet</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.gevent.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.gevent</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.thread.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.thread</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.base.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.base</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.html"><code class="docutils literal notranslate"><span class="pre">celery.backends</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.base.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.base</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.asynchronous.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.asynchronous</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.azureblockblob.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.azureblockblob</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.rpc.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.rpc</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.database.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.database</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.cache.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.cache</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.consul.html">celery.backends.consul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.couchdb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.couchdb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.mongodb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.mongodb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.elasticsearch.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.elasticsearch</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.redis.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.redis</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.cassandra.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.cassandra</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.couchbase.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.couchbase</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.arangodb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.arangodb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.dynamodb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.dynamodb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.filesystem.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.filesystem</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.cosmosdbsql.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.cosmosdbsql</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.s3.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.s3</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.gcs.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.gcs</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.app.trace.html"><code class="docutils literal notranslate"><span class="pre">celery.app.trace</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.app.annotations.html"><code class="docutils literal notranslate"><span class="pre">celery.app.annotations</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.app.routes.html"><code class="docutils literal notranslate"><span class="pre">celery.app.routes</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.certificate.html"><code class="docutils literal notranslate"><span class="pre">celery.security.certificate</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.key.html"><code class="docutils literal notranslate"><span class="pre">celery.security.key</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.serialization.html"><code class="docutils literal notranslate"><span class="pre">celery.security.serialization</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.utils.html"><code class="docutils literal notranslate"><span class="pre">celery.security.utils</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.events.snapshot.html"><code class="docutils literal notranslate"><span class="pre">celery.events.snapshot</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.events.cursesmon.html"><code class="docutils literal notranslate"><span class="pre">celery.events.cursesmon</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.events.dumper.html"><code class="docutils literal notranslate"><span class="pre">celery.events.dumper</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.database.models.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.database.models</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.database.session.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.database.session</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.html"><code class="docutils literal notranslate"><span class="pre">celery.utils</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.abstract.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.abstract</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.collections.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.collections</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.nodenames.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.nodenames</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.deprecated.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.deprecated</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.functional.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.functional</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.graph.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.graph</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.objects.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.objects</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.term.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.term</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.time.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.time</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.iso8601.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.iso8601</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.saferepr.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.saferepr</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.serialization.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.serialization</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.sysinfo.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.sysinfo</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.threads.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.threads</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.timer2.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.timer2</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.imports.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.imports</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.log.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.log</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.text.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.text</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.dispatch.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.dispatch</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.dispatch.signal.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.dispatch.signal</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.platforms.html"><code class="docutils literal notranslate"><span class="pre">celery.platforms</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery._state.html"><code class="docutils literal notranslate"><span class="pre">celery._state</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">历史</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 历史</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="whatsnew-5.5.html">What's new in Celery 5.5 (Immunity)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-5.5.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-5.4.html">What's new in Celery 5.4 (Opalescent)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-5.4.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-5.3.html">What's new in Celery 5.3 (Emerald Rush)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-5.3.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-5.1.html">What's new in Celery 5.1 (Sun Harmonics)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-5.1.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-5.0.html">What's new in Celery 5.0 (singularity)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-5.0.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-4.4.html">What's new in Celery 4.4 (Cliffs)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-4.4.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-4.3.html">What's new in Celery 4.3 (rhubarb)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-4.3.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-4.2.html">What's new in Celery 4.2 (windowlicker)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-4.2.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-4.1.html">What's new in Celery 4.1 (latentcall)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-4.1.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-4.0.html">What's new in Celery 4.0 (latentcall)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-4.0.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-3.1.html">What's new in Celery 3.1 (Cipater)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-3.1.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-3.0.html">What's new in Celery 3.0 (Chiastic Slide)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-3.0.html">Change history for Celery 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-2.5.html">What's new in Celery 2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-2.5.html">Change history for Celery 2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-2.4.html">Change history for Celery 2.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-2.3.html">Change history for Celery 2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-2.2.html">Change history for Celery 2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-2.1.html">Change history for Celery 2.1</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Change history for Celery 2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-1.0.html">Change history for Celery 1.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">术语</a></li>
</ul>

</div>
<!-- <iframe src="https://ghbtns.com/github-btn.html?user=celery&repo=celery&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe> -->
<div id="donate">
  <h5>捐赠</h5>
  <p>请捐赠以支持这个社区项目</p>
  <a href="https://opencollective.com/celery/donate" target="_blank">
    <!-- <img src="https://opencollective.com/celery/donate/button@2x.png?color=blue" /> -->
    <img src="https://opencollective.com/celery/donate/button.png?color=blue" />
  </a>
</div></div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/history/changelog-2.0.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="change-history-for-celery-2-0">
<span id="changelog-2-0"></span><h1>Change history for Celery 2.0<a class="headerlink" href="#change-history-for-celery-2-0" title="Link to this heading">¶</a></h1>
<section id="version-2-0-3">
<span id="id1"></span><h2>2.0.3<a class="headerlink" href="#version-2-0-3" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2010-08-27 12:00 p.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<section id="fixes">
<span id="v203-fixes"></span><h3>Fixes<a class="headerlink" href="#fixes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Worker: Properly handle connection errors happening while
closing consumers.</p></li>
<li><p>Worker: Events are now buffered if the connection is down,
then sent when the connection is re-established.</p></li>
<li><p>No longer depends on the <a class="extlink-pypi reference external" href="https://pypi.org/project/mailer/">https://pypi.org/project/mailer/</a> package.</p>
<blockquote>
<div><p>This package had a name space collision with <cite>django-mailer</cite>,
so its functionality was replaced.</p>
</div></blockquote>
</li>
<li><p>Redis result backend: Documentation typos: Redis doesn't have
database names, but database numbers. The default database is now 0.</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">inspect</span></code>:
<cite>registered_tasks</cite> was requesting an invalid command because of a typo.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #170</span>.</p>
</div></blockquote>
</li>
<li><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_ROUTES</span></code>: Values defined in the route should now have
precedence over values defined in <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_QUEUES</span></code> when merging
the two.</p>
<blockquote>
<div><p>With the follow settings:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CELERY_QUEUES</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;cpubound&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="s1">&#39;cpubound&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;routing_key&#39;</span><span class="p">:</span> <span class="s1">&#39;cpubound&#39;</span><span class="p">}}</span>

<span class="n">CELERY_ROUTES</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;tasks.add&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;queue&#39;</span><span class="p">:</span> <span class="s1">&#39;cpubound&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;routing_key&#39;</span><span class="p">:</span> <span class="s1">&#39;tasks.add&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;serializer&#39;</span><span class="p">:</span> <span class="s1">&#39;json&#39;</span><span class="p">}}</span>
</pre></div>
</div>
<p>The final routing options for <cite>tasks.add</cite> will become:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="s1">&#39;cpubound&#39;</span><span class="p">,</span>
 <span class="s1">&#39;routing_key&#39;</span><span class="p">:</span> <span class="s1">&#39;tasks.add&#39;</span><span class="p">,</span>
 <span class="s1">&#39;serializer&#39;</span><span class="p">:</span> <span class="s1">&#39;json&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>This wasn't the case before: the values
in <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_QUEUES</span></code> would take precedence.</p>
</div></blockquote>
</li>
<li><p>Worker crashed if the value of <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_TASK_ERROR_WHITELIST</span></code> was
not an iterable</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">apply()</span></code>: Make sure <cite>kwargs['task_id']</cite> is
always set.</p></li>
<li><p><cite>AsyncResult.traceback</cite>: Now returns <code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code>, instead of raising
<a class="reference external" href="https://docs.python.org/dev/library/exceptions.html#KeyError" title="（在 Python v3.15）"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a> if traceback is missing.</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">inspect</span></code>: Replies didn't work correctly
if no destination was specified.</p></li>
<li><p>Can now store result/meta-data for custom states.</p></li>
<li><p>Worker: A warning is now emitted if the sending of task error
emails fails.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">celeryev</span></code>: Curses monitor no longer crashes if the terminal window
is resized.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #160</span>.</p>
</div></blockquote>
</li>
<li><p>Worker: On macOS it isn't possible to run <cite>os.exec*</cite> in a process
that's threaded.</p>
<blockquote>
<div><blockquote>
<div><p>This breaks the SIGHUP restart handler,
and is now disabled on macOS, emitting a warning instead.</p>
</div></blockquote>
<p>See <span class="xref issue">issue #152</span>.</p>
</div></blockquote>
</li>
<li><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">celery.execute.trace</span></code>: Properly handle <cite>raise(str)</cite>,
which is still allowed in Python 2.4.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #175</span>.</p>
</div></blockquote>
</li>
<li><p>Using urllib2 in a periodic task on macOS crashed because
of the proxy auto detection used in macOS.</p>
<blockquote>
<div><p>This is now fixed by using a workaround.
See <span class="xref issue">issue #143</span>.</p>
</div></blockquote>
</li>
<li><p>Debian init-scripts: Commands shouldn't run in a sub shell</p>
<blockquote>
<div><p>See <span class="xref issue">issue #163</span>.</p>
</div></blockquote>
</li>
<li><p>Debian init-scripts: Use the absolute path of <code class="docutils literal notranslate"><span class="pre">celeryd</span></code> program to allow stat</p>
<blockquote>
<div><p>See <span class="xref issue">issue #162</span>.</p>
</div></blockquote>
</li>
</ul>
</section>
<section id="documentation">
<span id="v203-documentation"></span><h3>Documentation<a class="headerlink" href="#documentation" title="Link to this heading">¶</a></h3>
<ul>
<li><p>getting-started/broker-installation: Fixed typo</p>
<blockquote>
<div><p><cite>set_permissions &quot;&quot;</cite> -&gt; <cite>set_permissions &quot;.*&quot;</cite>.</p>
</div></blockquote>
</li>
<li><p>Tasks User Guide: Added section on database transactions.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #169</span>.</p>
</div></blockquote>
</li>
<li><p>Routing User Guide: Fixed typo <cite>&quot;feed&quot;: -&gt; {&quot;queue&quot;: &quot;feeds&quot;}</cite>.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #169</span>.</p>
</div></blockquote>
</li>
<li><p>Documented the default values for the <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_CONCURRENCY</span></code>
and <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_PREFETCH_MULTIPLIER</span></code> settings.</p></li>
<li><p>Tasks User Guide: Fixed typos in the subtask example</p></li>
<li><p>celery.signals: Documented worker_process_init.</p></li>
<li><p>Daemonization cookbook: Need to export DJANGO_SETTINGS_MODULE in
<cite>/etc/default/celeryd</cite>.</p></li>
<li><p>Added some more FAQs from stack overflow</p></li>
<li><p>Daemonization cookbook: Fixed typo <cite>CELERYD_LOGFILE/CELERYD_PIDFILE</cite></p>
<blockquote>
<div><p>to <cite>CELERYD_LOG_FILE</cite> / <cite>CELERYD_PID_FILE</cite></p>
<p>Also added troubleshooting section for the init-scripts.</p>
</div></blockquote>
</li>
</ul>
</section>
</section>
<section id="version-2-0-2">
<span id="id2"></span><h2>2.0.2<a class="headerlink" href="#version-2-0-2" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2010-07-22 11:31 a.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul>
<li><p>Routes: When using the dict route syntax, the exchange for a task
could disappear making the task unroutable.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #158</span>.</p>
</div></blockquote>
</li>
<li><p>Test suite now passing on Python 2.4</p></li>
<li><p>No longer have to type <cite>PYTHONPATH=.</cite> to use <code class="docutils literal notranslate"><span class="pre">celeryconfig</span></code> in the current
directory.</p>
<blockquote>
<div><p>This is accomplished by the default loader ensuring that the current
directory is in <cite>sys.path</cite> when loading the config module.
<cite>sys.path</cite> is reset to its original state after loading.</p>
<p>Adding the current working directory to <cite>sys.path</cite> without the user
knowing may be a security issue, as this means someone can drop a Python module in the users
directory that executes arbitrary commands. This was the original reason
not to do this, but if done <em>only when loading the config module</em>, this
means that the behavior will only apply to the modules imported in the
config module, which I think is a good compromise (certainly better than
just explicitly setting <cite>PYTHONPATH=.</cite> anyway)</p>
</div></blockquote>
</li>
<li><p>Experimental Cassandra backend added.</p></li>
<li><p>Worker: SIGHUP handler accidentally propagated to worker pool processes.</p>
<blockquote>
<div><p>In combination with <a class="extlink-sha reference external" href="https://github.com/celery/celery/commit/7a7c44e39344789f11b5346e9cc8340f5fe4846c">GitHub SHA&#64;7a7c44e39344789f11b5346e9cc8340f5fe4846c</a>
this would make each child process start a new worker instance when
the terminal window was closed :/</p>
</div></blockquote>
</li>
<li><p>Worker: Don't install SIGHUP handler if running from a terminal.</p>
<blockquote>
<div><p>This fixes the problem where the worker is launched in the background
when closing the terminal.</p>
</div></blockquote>
</li>
<li><p>Worker: Now joins threads at shutdown.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #152</span>.</p>
</div></blockquote>
</li>
<li><p>Test tear down: Don't use <cite>atexit</cite> but nose's <cite>teardown()</cite> functionality
instead.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #154</span>.</p>
</div></blockquote>
</li>
<li><p>Debian worker init-script: Stop now works correctly.</p></li>
<li><p>Task logger: <cite>warn</cite> method added (synonym for <cite>warning</cite>)</p></li>
<li><p>Can now define a white list of errors to send error emails for.</p>
<blockquote>
<div><p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CELERY_TASK_ERROR_WHITELIST</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;myapp.MalformedInputError&#39;</span><span class="p">,)</span>
</pre></div>
</div>
<p>See <span class="xref issue">issue #153</span>.</p>
</div></blockquote>
</li>
<li><p>Worker: Now handles overflow exceptions in <cite>time.mktime</cite> while parsing
the ETA field.</p></li>
<li><p>LoggerWrapper: Try to detect loggers logging back to stderr/stdout making
an infinite loop.</p></li>
<li><p>Added <code class="xref py py-class docutils literal notranslate"><span class="pre">celery.task.control.inspect</span></code>: Inspects a running worker.</p>
<blockquote>
<div><p>Examples:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="go"># Inspect a single worker</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">inspect</span><span class="p">(</span><span class="s1">&#39;myworker.example.com&#39;</span><span class="p">)</span>

<span class="go"># Inspect several workers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">inspect</span><span class="p">([</span><span class="s1">&#39;myworker.example.com&#39;</span><span class="p">,</span> <span class="s1">&#39;myworker2.example.com&#39;</span><span class="p">])</span>

<span class="go"># Inspect all workers consuming on this vhost.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">inspect</span><span class="p">()</span>

<span class="go">### Methods</span>

<span class="go"># Get currently executing tasks</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">active</span><span class="p">()</span>

<span class="go"># Get currently reserved tasks</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">reserved</span><span class="p">()</span>

<span class="go"># Get the current ETA schedule</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">scheduled</span><span class="p">()</span>

<span class="go"># Worker statistics and info</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">stats</span><span class="p">()</span>

<span class="go"># List of currently revoked tasks</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">revoked</span><span class="p">()</span>

<span class="go"># List of registered tasks</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">registered_tasks</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Remote control commands <cite>dump_active</cite>/<cite>dump_reserved</cite>/<cite>dump_schedule</cite>
now replies with detailed task requests.</p>
<blockquote>
<div><p>Containing the original arguments and fields of the task requested.</p>
<p>In addition the remote control command <cite>set_loglevel</cite> has been added,
this only changes the log level for the main process.</p>
</div></blockquote>
</li>
<li><p>Worker control command execution now catches errors and returns their
string representation in the reply.</p></li>
<li><p>Functional test suite added</p>
<blockquote>
<div><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">celery.tests.functional.case</span></code> contains utilities to start
and stop an embedded worker process, for use in functional testing.</p>
</div></blockquote>
</li>
</ul>
</section>
<section id="version-2-0-1">
<span id="id3"></span><h2>2.0.1<a class="headerlink" href="#version-2-0-1" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2010-07-09 03:02 p.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul>
<li><p>multiprocessing.pool: Now handles encoding errors, so that pickling errors
doesn't crash the worker processes.</p></li>
<li><p>The remote control command replies wasn't working with RabbitMQ 1.8.0's
stricter equivalence checks.</p>
<blockquote>
<div><p>If you've already hit this problem you may have to delete the
declaration:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>camqadm<span class="w"> </span>exchange.delete<span class="w"> </span>celerycrq
</pre></div>
</div>
<p>or:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>manage.py<span class="w"> </span>camqadm<span class="w"> </span>exchange.delete<span class="w"> </span>celerycrq
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>A bug sneaked in the ETA scheduler that made it only able to execute
one task per second(!)</p>
<blockquote>
<div><p>The scheduler sleeps between iterations so it doesn't consume too much CPU.
It keeps a list of the scheduled items sorted by time, at each iteration
it sleeps for the remaining time of the item with the nearest deadline.
If there are no ETA tasks it will sleep for a minimum amount of time, one
second by default.</p>
<p>A bug sneaked in here, making it sleep for one second for every task
that was scheduled. This has been fixed, so now it should move
tasks like hot knife through butter.</p>
<p>In addition a new setting has been added to control the minimum sleep
interval; <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_ETA_SCHEDULER_PRECISION</span></code>. A good
value for this would be a float between 0 and 1, depending
on the needed precision. A value of 0.8 means that when the ETA of a task
is met, it will take at most 0.8 seconds for the task to be moved to the
ready queue.</p>
</div></blockquote>
</li>
<li><p>Pool: Supervisor didn't release the semaphore.</p>
<blockquote>
<div><p>This would lead to a deadlock if all workers terminated prematurely.</p>
</div></blockquote>
</li>
<li><p>Added Python version trove classifiers: 2.4, 2.5, 2.6 and 2.7</p></li>
<li><p>Tests now passing on Python 2.7.</p></li>
<li><p>Task.__reduce__: Tasks created using the task decorator can now be pickled.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">setup.py</span></code>: <a class="extlink-pypi reference external" href="https://pypi.org/project/nose/">https://pypi.org/project/nose/</a> added to <cite>tests_require</cite>.</p></li>
<li><p>Pickle should now work with SQLAlchemy 0.5.x</p></li>
<li><p>New homepage design by Jan Henrik Helmers: <a class="reference external" href="http://celeryproject.org">http://celeryproject.org</a></p></li>
<li><p>New Sphinx theme by Armin Ronacher: <a class="reference external" href="https://docs.celeryq.dev/">https://docs.celeryq.dev/</a></p></li>
<li><p>Fixed &quot;pending_xref&quot; errors shown in the HTML rendering of the
documentation. Apparently this was caused by new changes in Sphinx 1.0b2.</p></li>
<li><p>Router classes in <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_ROUTES</span></code> are now imported lazily.</p>
<blockquote>
<div><p>Importing a router class in a module that also loads the Celery
environment would cause a circular dependency. This is solved
by importing it when needed after the environment is set up.</p>
</div></blockquote>
</li>
<li><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_ROUTES</span></code> was broken if set to a single dict.</p>
<blockquote>
<div><p>This example in the docs should now work again:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CELERY_ROUTES</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;feed.tasks.import_feed&#39;</span><span class="p">:</span> <span class="s1">&#39;feeds&#39;</span><span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><cite>CREATE_MISSING_QUEUES</cite> wasn't honored by apply_async.</p></li>
<li><p>New remote control command: <cite>stats</cite></p>
<blockquote>
<div><p>Dumps information about the worker, like pool process ids, and
total number of tasks executed by type.</p>
<p>Example reply:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;worker.local&#39;</span><span class="p">:</span>
     <span class="s1">&#39;total&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;tasks.sleeptask&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>
     <span class="s1">&#39;pool&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;timeouts&#39;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span>
              <span class="s1">&#39;processes&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">60376</span><span class="p">,</span> <span class="mi">60377</span><span class="p">],</span>
              <span class="s1">&#39;max-concurrency&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
              <span class="s1">&#39;max-tasks-per-child&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
              <span class="s1">&#39;put-guarded-by-semaphore&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}}]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>New remote control command: <cite>dump_active</cite></p>
<blockquote>
<div><p>Gives a list of tasks currently being executed by the worker.
By default arguments are passed through repr in case there
are arguments that's not JSON encodable. If you know
the arguments are JSON safe, you can pass the argument <cite>safe=True</cite>.</p>
<p>Example reply:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">broadcast</span><span class="p">(</span><span class="s1">&#39;dump_active&#39;</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;safe&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">},</span> <span class="n">reply</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[{&#39;worker.local&#39;: [</span>
<span class="go">    {&#39;args&#39;: &#39;(1,)&#39;,</span>
<span class="go">     &#39;time_start&#39;: 1278580542.6300001,</span>
<span class="go">     &#39;name&#39;: &#39;tasks.sleeptask&#39;,</span>
<span class="go">     &#39;delivery_info&#39;: {</span>
<span class="go">         &#39;consumer_tag&#39;: &#39;30&#39;,</span>
<span class="go">         &#39;routing_key&#39;: &#39;celery&#39;,</span>
<span class="go">         &#39;exchange&#39;: &#39;celery&#39;},</span>
<span class="go">     &#39;hostname&#39;: &#39;casper.local&#39;,</span>
<span class="go">     &#39;acknowledged&#39;: True,</span>
<span class="go">     &#39;kwargs&#39;: &#39;{}&#39;,</span>
<span class="go">     &#39;id&#39;: &#39;802e93e9-e470-47ed-b913-06de8510aca2&#39;,</span>
<span class="go">    }</span>
<span class="go">]}]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Added experimental support for persistent revokes.</p>
<blockquote>
<div><p>Use the <cite>-S|--statedb</cite> argument to the worker to enable it:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd<span class="w"> </span>--statedb<span class="o">=</span>/var/run/celeryd
</pre></div>
</div>
<p>This will use the file: <cite>/var/run/celeryd.db</cite>,
as the <cite>shelve</cite> module automatically adds the <cite>.db</cite> suffix.</p>
</div></blockquote>
</li>
</ul>
</section>
<section id="version-2-0-0">
<span id="id4"></span><h2>2.0.0<a class="headerlink" href="#version-2-0-0" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2010-07-02 02:30 p.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<section id="foreword">
<h3>Foreword<a class="headerlink" href="#foreword" title="Link to this heading">¶</a></h3>
<p>Celery 2.0 contains backward incompatible changes, the most important
being that the Django dependency has been removed so Celery no longer
supports Django out of the box, but instead as an add-on package
called <a class="extlink-pypi reference external" href="https://pypi.org/project/django-celery/">https://pypi.org/project/django-celery/</a>.</p>
<p>We're very sorry for breaking backwards compatibility, but there's
also many new and exciting features to make up for the time you lose
upgrading, so be sure to read the <a class="reference internal" href="#v200-news"><span class="std std-ref">News</span></a> section.</p>
<p>Quite a lot of potential users have been upset about the Django dependency,
so maybe this is a chance to get wider adoption by the Python community as
well.</p>
<p>Big thanks to all contributors, testers and users!</p>
</section>
<section id="upgrading-for-django-users">
<span id="v200-django-upgrade"></span><h3>Upgrading for Django-users<a class="headerlink" href="#upgrading-for-django-users" title="Link to this heading">¶</a></h3>
<p>Django integration has been moved to a separate package: <a class="extlink-pypi reference external" href="https://pypi.org/project/django-celery/">https://pypi.org/project/django-celery/</a>.</p>
<ul>
<li><p>To upgrade you need to install the <a class="extlink-pypi reference external" href="https://pypi.org/project/django-celery/">https://pypi.org/project/django-celery/</a> module and change:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="s1">&#39;celery&#39;</span>
</pre></div>
</div>
<p>to:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="s1">&#39;djcelery&#39;</span>
</pre></div>
</div>
</li>
<li><p>If you use <cite>mod_wsgi</cite> you need to add the following line to your <cite>.wsgi</cite>
file:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;CELERY_LOADER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;django&#39;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>The following modules has been moved to <a class="extlink-pypi reference external" href="https://pypi.org/project/django-celery/">https://pypi.org/project/django-celery/</a>:</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Module name</strong></p></th>
<th class="head"><p><strong>Replace with</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>celery.models</cite></p></td>
<td><p><cite>djcelery.models</cite></p></td>
</tr>
<tr class="row-odd"><td><p><cite>celery.managers</cite></p></td>
<td><p><cite>djcelery.managers</cite></p></td>
</tr>
<tr class="row-even"><td><p><cite>celery.views</cite></p></td>
<td><p><cite>djcelery.views</cite></p></td>
</tr>
<tr class="row-odd"><td><p><cite>celery.urls</cite></p></td>
<td><p><cite>djcelery.urls</cite></p></td>
</tr>
<tr class="row-even"><td><p><cite>celery.management</cite></p></td>
<td><p><cite>djcelery.management</cite></p></td>
</tr>
<tr class="row-odd"><td><p><cite>celery.loaders.djangoapp</cite></p></td>
<td><p><cite>djcelery.loaders</cite></p></td>
</tr>
<tr class="row-even"><td><p><cite>celery.backends.database</cite></p></td>
<td><p><cite>djcelery.backends.database</cite></p></td>
</tr>
<tr class="row-odd"><td><p><cite>celery.backends.cache</cite></p></td>
<td><p><cite>djcelery.backends.cache</cite></p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
</li>
</ul>
<p>Importing <code class="xref py py-mod docutils literal notranslate"><span class="pre">djcelery</span></code> will automatically setup Celery to use Django loader.
loader. It does this by setting the <span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CELERY_LOADER</span></code> environment variable to
<cite>&quot;django&quot;</cite> (it won't change it if a loader is already set).</p>
<p>When the Django loader is used, the &quot;database&quot; and &quot;cache&quot; result backend
aliases will point to the <code class="xref py py-mod docutils literal notranslate"><span class="pre">djcelery</span></code> backends instead of the built-in backends,
and configuration will be read from the Django settings.</p>
</section>
<section id="upgrading-for-others">
<span id="v200-upgrade"></span><h3>Upgrading for others<a class="headerlink" href="#upgrading-for-others" title="Link to this heading">¶</a></h3>
<section id="database-result-backend">
<span id="v200-upgrade-database"></span><h4>Database result backend<a class="headerlink" href="#database-result-backend" title="Link to this heading">¶</a></h4>
<p>The database result backend is now using <a class="reference external" href="http://www.sqlalchemy.org">SQLAlchemy</a> instead of the
Django ORM, see <a class="reference external" href="http://www.sqlalchemy.org/docs/core/engines.html#supported-databases">Supported Databases</a> for a table of supported databases.</p>
<p>The <cite>DATABASE_*</cite> settings has been replaced by a single setting:
<code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_RESULT_DBURI</span></code>. The value here should be an
<a class="reference external" href="http://www.sqlalchemy.org/docs/core/engines.html#database-urls">SQLAlchemy Connection String</a>, some examples include:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># sqlite (filename)</span>
<span class="n">CELERY_RESULT_DBURI</span> <span class="o">=</span> <span class="s1">&#39;sqlite:///celerydb.sqlite&#39;</span>

<span class="c1"># mysql</span>
<span class="n">CELERY_RESULT_DBURI</span> <span class="o">=</span> <span class="s1">&#39;mysql://scott:tiger@localhost/foo&#39;</span>

<span class="c1"># postgresql</span>
<span class="n">CELERY_RESULT_DBURI</span> <span class="o">=</span> <span class="s1">&#39;postgresql://scott:tiger@localhost/mydatabase&#39;</span>

<span class="c1"># oracle</span>
<span class="n">CELERY_RESULT_DBURI</span> <span class="o">=</span> <span class="s1">&#39;oracle://scott:tiger@127.0.0.1:1521/sidname&#39;</span>
</pre></div>
</div>
<p>See <a class="reference external" href="http://www.sqlalchemy.org/docs/core/engines.html#database-urls">SQLAlchemy Connection Strings</a> for more information about connection
strings.</p>
<p>To specify additional SQLAlchemy database engine options you can use
the <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_RESULT_ENGINE_OPTIONS</span></code> setting:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># echo enables verbose logging from SQLAlchemy.</span>
<span class="n">CELERY_RESULT_ENGINE_OPTIONS</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;echo&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="cache-result-backend">
<span id="v200-upgrade-cache"></span><h4>Cache result backend<a class="headerlink" href="#cache-result-backend" title="Link to this heading">¶</a></h4>
<p>The cache result backend is no longer using the Django cache framework,
but it supports mostly the same configuration syntax:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CELERY_CACHE_BACKEND</span> <span class="o">=</span> <span class="s1">&#39;memcached://A.example.com:11211;B.example.com&#39;</span>
</pre></div>
</div>
</div></blockquote>
<p>To use the cache backend you must either have the <a class="extlink-pypi reference external" href="https://pypi.org/project/pylibmc/">https://pypi.org/project/pylibmc/</a> or
<a class="extlink-pypi reference external" href="https://pypi.org/project/python-memcached/">https://pypi.org/project/python-memcached/</a> library installed, of which the former is regarded
as the best choice.</p>
<p>The support backend types are <cite>memcached://</cite> and <cite>memory://</cite>,
we haven't felt the need to support any of the other backends
provided by Django.</p>
</section>
</section>
<section id="backward-incompatible-changes">
<span id="v200-incompatible"></span><h3>Backward incompatible changes<a class="headerlink" href="#backward-incompatible-changes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Default (python) loader now prints warning on missing <cite>celeryconfig.py</cite>
instead of raising <a class="reference external" href="https://docs.python.org/dev/library/exceptions.html#ImportError" title="（在 Python v3.15）"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportError</span></code></a>.</p>
<blockquote>
<div><p>The worker raises <a class="reference internal" href="../reference/celery.exceptions.html#celery.exceptions.ImproperlyConfigured" title="celery.exceptions.ImproperlyConfigured"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImproperlyConfigured</span></code></a> if the configuration
isn't set up. This makes it possible to use <cite>--help</cite> etc., without having a
working configuration.</p>
<p>Also this makes it possible to use the client side of Celery without being
configured:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">carrot.connection</span><span class="w"> </span><span class="kn">import</span> <span class="n">BrokerConnection</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conn</span> <span class="o">=</span> <span class="n">BrokerConnection</span><span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="s1">&#39;guest&#39;</span><span class="p">,</span> <span class="s1">&#39;guest&#39;</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.execute</span><span class="w"> </span><span class="kn">import</span> <span class="n">send_task</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">send_task</span><span class="p">(</span><span class="s1">&#39;celery.ping&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="n">connection</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.backends.amqp</span><span class="w"> </span><span class="kn">import</span> <span class="n">AMQPBackend</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">backend</span> <span class="o">=</span> <span class="n">AMQPBackend</span><span class="p">(</span><span class="n">connection</span><span class="o">=</span><span class="n">conn</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="go">&#39;pong&#39;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>The following deprecated settings has been removed (as scheduled by
the <a class="reference internal" href="../internals/deprecation.html#deprecation-timeline"><span class="std std-ref">Celery 弃用时间表</span></a>):</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Setting name</strong></p></th>
<th class="head"><p><strong>Replace with</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>CELERY_AMQP_CONSUMER_QUEUES</cite></p></td>
<td><p><cite>CELERY_QUEUES</cite></p></td>
</tr>
<tr class="row-odd"><td><p><cite>CELERY_AMQP_EXCHANGE</cite></p></td>
<td><p><cite>CELERY_DEFAULT_EXCHANGE</cite></p></td>
</tr>
<tr class="row-even"><td><p><cite>CELERY_AMQP_EXCHANGE_TYPE</cite></p></td>
<td><p><cite>CELERY_DEFAULT_EXCHANGE_TYPE</cite></p></td>
</tr>
<tr class="row-odd"><td><p><cite>CELERY_AMQP_CONSUMER_ROUTING_KEY</cite></p></td>
<td><p><cite>CELERY_QUEUES</cite></p></td>
</tr>
<tr class="row-even"><td><p><cite>CELERY_AMQP_PUBLISHER_ROUTING_KEY</cite></p></td>
<td><p><cite>CELERY_DEFAULT_ROUTING_KEY</cite></p></td>
</tr>
</tbody>
</table>
</div>
</div></blockquote>
</li>
<li><p>The <cite>celery.task.rest</cite> module has been removed, use <cite>celery.task.http</cite>
instead (as scheduled by the <a class="reference internal" href="../internals/deprecation.html#deprecation-timeline"><span class="std std-ref">Celery 弃用时间表</span></a>).</p></li>
<li><p>It's no longer allowed to skip the class name in loader names.
(as scheduled by the <a class="reference internal" href="../internals/deprecation.html#deprecation-timeline"><span class="std std-ref">Celery 弃用时间表</span></a>):</p>
<blockquote>
<div><p>Assuming the implicit <cite>Loader</cite> class name is no longer supported,
for example, if you use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CELERY_LOADER</span> <span class="o">=</span> <span class="s1">&#39;myapp.loaders&#39;</span>
</pre></div>
</div>
<p>You need to include the loader class name, like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CELERY_LOADER</span> <span class="o">=</span> <span class="s1">&#39;myapp.loaders.Loader&#39;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_TASK_RESULT_EXPIRES</span></code> now defaults to 1 day.</p>
<blockquote>
<div><p>Previous default setting was to expire in 5 days.</p>
</div></blockquote>
</li>
<li><p>AMQP backend: Don't use different values for <cite>auto_delete</cite>.</p>
<blockquote>
<div><p>This bug became visible with RabbitMQ 1.8.0, which no longer
allows conflicting declarations for the auto_delete and durable settings.</p>
<p>If you've already used Celery with this backend chances are you
have to delete the previous declaration:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>camqadm<span class="w"> </span>exchange.delete<span class="w"> </span>celeryresults
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Now uses pickle instead of cPickle on Python versions &lt;= 2.5</p>
<blockquote>
<div><p>cPickle is broken in Python &lt;= 2.5.</p>
<p>It unsafely and incorrectly uses relative instead of absolute imports,
so for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">exceptions</span><span class="o">.</span><span class="n">KeyError</span>
</pre></div>
</div>
<p>becomes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">celery</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">KeyError</span>
</pre></div>
</div>
<p>Your best choice is to upgrade to Python 2.6,
as while the pure pickle version has worse performance,
it is the only safe option for older Python versions.</p>
</div></blockquote>
</li>
</ul>
</section>
<section id="news">
<span id="v200-news"></span><h3>News<a class="headerlink" href="#news" title="Link to this heading">¶</a></h3>
<ul>
<li><p><strong>celeryev</strong>: Curses Celery Monitor and Event Viewer.</p>
<blockquote>
<div><p>This is a simple monitor allowing you to see what tasks are
executing in real-time and investigate tracebacks and results of ready
tasks. It also enables you to set new rate limits and revoke tasks.</p>
<p>Screenshot:</p>
<figure class="align-default">
<img alt="../_images/celeryevshotsm.jpg" src="../_images/celeryevshotsm.jpg" />
</figure>
<p>If you run <cite>celeryev</cite> with the <cite>-d</cite> switch it will act as an event
dumper, simply dumping the events it receives to standard out:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryev<span class="w"> </span>-d
<span class="go">-&gt; celeryev: starting capture...</span>
<span class="go">casper.local [2010-06-04 10:42:07.020000] heartbeat</span>
<span class="go">casper.local [2010-06-04 10:42:14.750000] task received:</span>
<span class="go">    tasks.add(61a68756-27f4-4879-b816-3cf815672b0e) args=[2, 2] kwargs={}</span>
<span class="go">    eta=2010-06-04T10:42:16.669290, retries=0</span>
<span class="go">casper.local [2010-06-04 10:42:17.230000] task started</span>
<span class="go">    tasks.add(61a68756-27f4-4879-b816-3cf815672b0e) args=[2, 2] kwargs={}</span>
<span class="go">casper.local [2010-06-04 10:42:17.960000] task succeeded:</span>
<span class="go">    tasks.add(61a68756-27f4-4879-b816-3cf815672b0e)</span>
<span class="go">    args=[2, 2] kwargs={} result=4, runtime=0.782663106918</span>

<span class="go">The fields here are, in order: *sender hostname*, *timestamp*, *event type* and</span>
<span class="go">*additional event fields*.</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>AMQP result backend: Now supports <cite>.ready()</cite>, <cite>.successful()</cite>,
<cite>.result</cite>, <cite>.status</cite>, and even responds to changes in task state</p></li>
<li><p>New user guides:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="../userguide/workers.html#guide-workers"><span class="std std-ref">Workers 指南</span></a></p></li>
<li><p><a class="reference internal" href="../userguide/canvas.html#guide-canvas"><span class="std std-ref">Canvas：设计工作流</span></a></p></li>
<li><p><a class="reference internal" href="../userguide/routing.html#guide-routing"><span class="std std-ref">路由任务/Tasks</span></a></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Worker: Standard out/error is now being redirected to the log file.</p></li>
<li><p><a class="extlink-pypi reference external" href="https://pypi.org/project/billiard/">https://pypi.org/project/billiard/</a> has been moved back to the Celery repository.</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Module name</strong></p></th>
<th class="head"><p><strong>celery equivalent</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>billiard.pool</cite></p></td>
<td><p><cite>celery.concurrency.processes.pool</cite></p></td>
</tr>
<tr class="row-odd"><td><p><cite>billiard.serialization</cite></p></td>
<td><p><cite>celery.serialization</cite></p></td>
</tr>
<tr class="row-even"><td><p><cite>billiard.utils.functional</cite></p></td>
<td><p><cite>celery.utils.functional</cite></p></td>
</tr>
</tbody>
</table>
</div>
<p>The <a class="extlink-pypi reference external" href="https://pypi.org/project/billiard/">https://pypi.org/project/billiard/</a> distribution may be maintained, depending on interest.</p>
</div></blockquote>
</li>
<li><p>now depends on <a class="extlink-pypi reference external" href="https://pypi.org/project/carrot/">https://pypi.org/project/carrot/</a> &gt;= 0.10.5</p></li>
<li><p>now depends on <a class="extlink-pypi reference external" href="https://pypi.org/project/pyparsing/">https://pypi.org/project/pyparsing/</a></p></li>
<li><p>Worker: Added <cite>--purge</cite> as an alias to <cite>--discard</cite>.</p></li>
<li><p>Worker: <kbd class="kbd docutils literal notranslate">Control</kbd>-<kbd class="kbd docutils literal notranslate">c</kbd> (SIGINT) once does warm shutdown,
hitting <kbd class="kbd docutils literal notranslate">Control</kbd>-<kbd class="kbd docutils literal notranslate">c</kbd> twice forces termination.</p></li>
<li><p>Added support for using complex Crontab-expressions in periodic tasks. For
example, you can now use:</p>
<blockquote>
<div><div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">crontab</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="s1">&#39;*/15&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>or even:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">crontab</span><span class="p">(</span><span class="n">minute</span><span class="o">=</span><span class="s1">&#39;*/30&#39;</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="s1">&#39;8-17,1-2&#39;</span><span class="p">,</span> <span class="n">day_of_week</span><span class="o">=</span><span class="s1">&#39;thu-fri&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>See <a class="reference internal" href="../userguide/periodic-tasks.html#guide-beat"><span class="std std-ref">周期性任务/Tasks</span></a>.</p>
</li>
<li><p>Worker: Now waits for available pool processes before applying new
tasks to the pool.</p>
<blockquote>
<div><p>This means it doesn't have to wait for dozens of tasks to finish at shutdown
because it has applied prefetched tasks without having any pool
processes available to immediately accept them.</p>
<p>See <span class="xref issue">issue #122</span>.</p>
</div></blockquote>
</li>
<li><p>New built-in way to do task callbacks using
<code class="xref py py-class docutils literal notranslate"><span class="pre">subtask</span></code>.</p>
<p>See <a class="reference internal" href="../userguide/canvas.html#guide-canvas"><span class="std std-ref">Canvas：设计工作流</span></a> for more information.</p>
</li>
<li><p>TaskSets can now contain several types of tasks.</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">TaskSet</span></code> has been refactored to use
a new syntax, please see <a class="reference internal" href="../userguide/canvas.html#guide-canvas"><span class="std std-ref">Canvas：设计工作流</span></a> for more information.</p>
<p>The previous syntax is still supported, but will be deprecated in
version 1.4.</p>
</li>
<li><p>TaskSet failed() result was incorrect.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #132</span>.</p>
</div></blockquote>
</li>
<li><p>Now creates different loggers per task class.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #129</span>.</p>
</div></blockquote>
</li>
<li><p>Missing queue definitions are now created automatically.</p>
<blockquote>
<div><blockquote>
<div><p>You can disable this using the <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_CREATE_MISSING_QUEUES</span></code>
setting.</p>
<p>The missing queues are created with the following options:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CELERY_QUEUES</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
                       <span class="s1">&#39;exchange_type&#39;</span><span class="p">:</span> <span class="s1">&#39;direct&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;routing_key&#39;</span><span class="p">:</span> <span class="s1">&#39;name}</span>
</pre></div>
</div>
</div></blockquote>
<p>This feature is added for easily setting up routing using the <cite>-Q</cite>
option to the worker:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd<span class="w"> </span>-Q<span class="w"> </span>video,<span class="w"> </span>image
</pre></div>
</div>
<p>See the new routing section of the User Guide for more information:
<a class="reference internal" href="../userguide/routing.html#guide-routing"><span class="std std-ref">路由任务/Tasks</span></a>.</p>
</div></blockquote>
</li>
<li><p>New Task option: <cite>Task.queue</cite></p>
<blockquote>
<div><p>If set, message options will be taken from the corresponding entry
in <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_QUEUES</span></code>. <cite>exchange</cite>, <cite>exchange_type</cite> and <cite>routing_key</cite>
will be ignored</p>
</div></blockquote>
</li>
<li><p>Added support for task soft and hard time limits.</p>
<blockquote>
<div><p>New settings added:</p>
<ul>
<li><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_TASK_TIME_LIMIT</span></code></p>
<blockquote>
<div><p>Hard time limit. The worker processing the task will be killed and
replaced with a new one when this is exceeded.</p>
</div></blockquote>
</li>
<li><p><code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_TASK_SOFT_TIME_LIMIT</span></code></p>
<blockquote>
<div><p>Soft time limit. The <a class="reference internal" href="../reference/celery.exceptions.html#celery.exceptions.SoftTimeLimitExceeded" title="celery.exceptions.SoftTimeLimitExceeded"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SoftTimeLimitExceeded</span></code></a>
exception will be raised when this is exceeded. The task can catch
this to, for example, clean up before the hard time limit comes.</p>
</div></blockquote>
</li>
</ul>
<p>New command-line arguments to <code class="docutils literal notranslate"><span class="pre">celeryd</span></code> added:
<cite>--time-limit</cite> and <cite>--soft-time-limit</cite>.</p>
<p>What's left?</p>
<p>This won't work on platforms not supporting signals (and specifically
the <cite>SIGUSR1</cite> signal) yet. So an alternative the ability to disable
the feature all together on nonconforming platforms must be implemented.</p>
<p>Also when the hard time limit is exceeded, the task result should
be a <cite>TimeLimitExceeded</cite> exception.</p>
</div></blockquote>
</li>
<li><p>Test suite is now passing without a running broker, using the carrot
in-memory backend.</p></li>
<li><p>Log output is now available in colors.</p>
<blockquote>
<div><div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Log level</strong></p></th>
<th class="head"><p><strong>Color</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>DEBUG</cite></p></td>
<td><p>Blue</p></td>
</tr>
<tr class="row-odd"><td><p><cite>WARNING</cite></p></td>
<td><p>Yellow</p></td>
</tr>
<tr class="row-even"><td><p><cite>CRITICAL</cite></p></td>
<td><p>Magenta</p></td>
</tr>
<tr class="row-odd"><td><p><cite>ERROR</cite></p></td>
<td><p>Red</p></td>
</tr>
</tbody>
</table>
</div>
<p>This is only enabled when the log output is a tty.
You can explicitly enable/disable this feature using the
<code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_LOG_COLOR</span></code> setting.</p>
</div></blockquote>
</li>
<li><p>Added support for task router classes (like the django multi-db routers)</p>
<blockquote>
<div><ul class="simple">
<li><p>New setting: <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_ROUTES</span></code></p></li>
</ul>
<p>This is a single, or a list of routers to traverse when
sending tasks. Dictionaries in this list converts to a
<code class="xref py py-class docutils literal notranslate"><span class="pre">celery.routes.MapRoute</span></code> instance.</p>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CELERY_ROUTES</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;celery.ping&#39;</span><span class="p">:</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
<span class="go">                     &#39;mytasks.add&#39;: &#39;cpu-bound&#39;,</span>
<span class="go">                     &#39;video.encode&#39;: {</span>
<span class="go">                         &#39;queue&#39;: &#39;video&#39;,</span>
<span class="go">                         &#39;exchange&#39;: &#39;media&#39;</span>
<span class="go">                         &#39;routing_key&#39;: &#39;media.video.encode&#39;}}</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CELERY_ROUTES</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;myapp.tasks.Router&#39;</span><span class="p">,</span>
<span class="go">                     {&#39;celery.ping&#39;: &#39;default&#39;})</span>
</pre></div>
</div>
<p>Where <cite>myapp.tasks.Router</cite> could be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Router</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">route_for_task</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">task</span> <span class="o">==</span> <span class="s1">&#39;celery.ping&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;default&#39;</span>
</pre></div>
</div>
<p>route_for_task may return a string or a dict. A string then means
it's a queue name in <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_QUEUES</span></code>, a dict means it's a custom route.</p>
<p>When sending tasks, the routers are consulted in order. The first
router that doesn't return <cite>None</cite> is the route to use. The message options
is then merged with the found route settings, where the routers settings
have priority.</p>
<p>Example if <code class="xref py py-func docutils literal notranslate"><span class="pre">apply_async()</span></code> has these arguments:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Task</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">immediate</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exchange</span><span class="o">=</span><span class="s1">&#39;video&#39;</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">routing_key</span><span class="o">=</span><span class="s1">&#39;video.compress&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>and a router returns:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;immediate&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;exchange&#39;</span><span class="p">:</span> <span class="s1">&#39;urgent&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>the final message options will be:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">task</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span>
<span class="gp">... </span>   <span class="n">immediate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>   <span class="n">exchange</span><span class="o">=</span><span class="s1">&#39;urgent&#39;</span><span class="p">,</span>
<span class="gp">... </span>   <span class="n">routing_key</span><span class="o">=</span><span class="s1">&#39;video.compress&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>(and any default message options defined in the
<code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code> class)</p>
</div></blockquote>
</li>
<li><p>New Task handler called after the task returns:
<code class="xref py py-meth docutils literal notranslate"><span class="pre">after_return()</span></code>.</p></li>
<li><dl class="simple">
<dt><code class="xref py py-class docutils literal notranslate"><span class="pre">ExceptionInfo</span></code> now passed to</dt><dd><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">on_retry()</span></code>/
<code class="xref py py-meth docutils literal notranslate"><span class="pre">on_failure()</span></code> as <code class="docutils literal notranslate"><span class="pre">einfo</span></code> keyword argument.</p>
</dd>
</dl>
</li>
<li><p>Worker: Added <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_MAX_TASKS_PER_CHILD</span></code> /
<code class="docutils literal notranslate"><span class="pre">celery</span> <span class="pre">worker</span> <span class="pre">--maxtasksperchild</span></code>.</p>
<blockquote>
<div><p>Defines the maximum number of tasks a pool worker can process before
the process is terminated and replaced by a new one.</p>
</div></blockquote>
</li>
<li><p>Revoked tasks now marked with state <a class="reference internal" href="../userguide/tasks.html#std-state-REVOKED"><code class="xref std std-state docutils literal notranslate"><span class="pre">REVOKED</span></code></a>, and <cite>result.get()</cite>
will now raise <a class="reference internal" href="../reference/celery.exceptions.html#celery.exceptions.TaskRevokedError" title="celery.exceptions.TaskRevokedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TaskRevokedError</span></code></a>.</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">celery.task.control.ping()</span></code> now works as expected.</p></li>
<li><p><cite>apply(throw=True)</cite> / <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_EAGER_PROPAGATES_EXCEPTIONS</span></code>:
Makes eager execution re-raise task errors.</p></li>
<li><p>New signal: <code class="xref std std-signal docutils literal notranslate"><span class="pre">~celery.signals.worker_process_init</span></code>: Sent inside the
pool worker process at init.</p></li>
<li><p>Worker: <a class="reference internal" href="../reference/cli.html#cmdoption-celery-worker-Q"><code class="xref std std-option docutils literal notranslate"><span class="pre">celery</span> <span class="pre">worker</span> <span class="pre">-Q</span></code></a> option: Ability to specify list of queues
to use, disabling other configured queues.</p>
<blockquote>
<div><p>For example, if <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_QUEUES</span></code> defines four
queues: <cite>image</cite>, <cite>video</cite>, <cite>data</cite> and <cite>default</cite>, the following
command would make the worker only consume from the <cite>image</cite> and <cite>video</cite>
queues:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd<span class="w"> </span>-Q<span class="w"> </span>image,video
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Worker: New return value for the <cite>revoke</cite> control command:</p>
<blockquote>
<div><p>Now returns:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;ok&#39;</span><span class="p">:</span> <span class="s1">&#39;task $id revoked&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>instead of <code class="xref py py-const docutils literal notranslate"><span class="pre">True</span></code>.</p>
</div></blockquote>
</li>
<li><p>Worker: Can now enable/disable events using remote control</p>
<blockquote>
<div><p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.task.control</span><span class="w"> </span><span class="kn">import</span> <span class="n">broadcast</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">broadcast</span><span class="p">(</span><span class="s1">&#39;enable_events&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">broadcast</span><span class="p">(</span><span class="s1">&#39;disable_events&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Removed top-level tests directory. Test config now in celery.tests.config</p>
<blockquote>
<div><p>This means running the unit tests doesn't require any special setup.
<cite>celery/tests/__init__</cite> now configures the <span class="target" id="index-1"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CELERY_CONFIG_MODULE</span></code>
and <span class="target" id="index-2"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CELERY_LOADER</span></code> environment variables, so when <cite>nosetests</cite>
imports that, the unit test environment is all set up.</p>
<p>Before you run the tests you need to install the test requirements:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements/test.txt
</pre></div>
</div>
<p>Running all tests:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>nosetests
</pre></div>
</div>
<p>Specifying the tests to run:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>nosetests<span class="w"> </span>celery.tests.test_task
</pre></div>
</div>
<p>Producing HTML coverage:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>nosetests<span class="w"> </span>--with-coverage3
</pre></div>
</div>
<p>The coverage output is then located in <cite>celery/tests/cover/index.html</cite>.</p>
</div></blockquote>
</li>
<li><p>Worker: New option <cite>--version</cite>: Dump version info and exit.</p></li>
<li><p><code class="xref py py-mod docutils literal notranslate"><span class="pre">celeryd-multi</span></code>: Tool for shell scripts
to start multiple workers.</p>
<blockquote>
<div><p>Some examples:</p>
<ul>
<li><p>Advanced example with 10 workers:</p>
<blockquote>
<div><ul class="simple">
<li><p>Three of the workers processes the images and video queue</p></li>
<li><p>Two of the workers processes the data queue with loglevel DEBUG</p></li>
<li><p>the rest processes the default' queue.</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd-multi<span class="w"> </span>start<span class="w"> </span><span class="m">10</span><span class="w"> </span>-l<span class="w"> </span>INFO<span class="w"> </span>-Q:1-3<span class="w"> </span>images,video<span class="w"> </span>-Q:4,5:data<span class="w"> </span>-Q<span class="w"> </span>default<span class="w"> </span>-L:4,5<span class="w"> </span>DEBUG
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Get commands to start 10 workers, with 3 processes each</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd-multi<span class="w"> </span>start<span class="w"> </span><span class="m">3</span><span class="w"> </span>-c<span class="w"> </span><span class="m">3</span>
<span class="go">celeryd -n celeryd1.myhost -c 3</span>
<span class="go">celeryd -n celeryd2.myhost -c 3</span>
<span class="go">celeryd -n celeryd3.myhost -c 3</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Start 3 named workers</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd-multi<span class="w"> </span>start<span class="w"> </span>image<span class="w"> </span>video<span class="w"> </span>data<span class="w"> </span>-c<span class="w"> </span><span class="m">3</span>
<span class="go">celeryd -n image.myhost -c 3</span>
<span class="go">celeryd -n video.myhost -c 3</span>
<span class="go">celeryd -n data.myhost -c 3</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Specify custom hostname</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd-multi<span class="w"> </span>start<span class="w"> </span><span class="m">2</span><span class="w"> </span>-n<span class="w"> </span>worker.example.com<span class="w"> </span>-c<span class="w"> </span><span class="m">3</span>
<span class="go">celeryd -n celeryd1.worker.example.com -c 3</span>
<span class="go">celeryd -n celeryd2.worker.example.com -c 3</span>
</pre></div>
</div>
<p>Additional options are added to each <code class="docutils literal notranslate"><span class="pre">celeryd</span></code>,
but you can also modify the options for ranges of or single workers</p>
</div></blockquote>
</li>
<li><p>3 workers: Two with 3 processes, and one with 10 processes.</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd-multi<span class="w"> </span>start<span class="w"> </span><span class="m">3</span><span class="w"> </span>-c<span class="w"> </span><span class="m">3</span><span class="w"> </span>-c:1<span class="w"> </span><span class="m">10</span>
<span class="go">celeryd -n celeryd1.myhost -c 10</span>
<span class="go">celeryd -n celeryd2.myhost -c 3</span>
<span class="go">celeryd -n celeryd3.myhost -c 3</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Can also specify options for named workers</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd-multi<span class="w"> </span>start<span class="w"> </span>image<span class="w"> </span>video<span class="w"> </span>data<span class="w"> </span>-c<span class="w"> </span><span class="m">3</span><span class="w"> </span>-c:image<span class="w"> </span><span class="m">10</span>
<span class="go">celeryd -n image.myhost -c 10</span>
<span class="go">celeryd -n video.myhost -c 3</span>
<span class="go">celeryd -n data.myhost -c 3</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Ranges and lists of workers in options is also allowed:
(<code class="docutils literal notranslate"><span class="pre">-c:1-3</span></code> can also be written as <code class="docutils literal notranslate"><span class="pre">-c:1,2,3</span></code>)</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd-multi<span class="w"> </span>start<span class="w"> </span><span class="m">5</span><span class="w"> </span>-c<span class="w"> </span><span class="m">3</span><span class="w">  </span>-c:1-3<span class="w"> </span><span class="m">10</span>
<span class="go">celeryd-multi -n celeryd1.myhost -c 10</span>
<span class="go">celeryd-multi -n celeryd2.myhost -c 10</span>
<span class="go">celeryd-multi -n celeryd3.myhost -c 10</span>
<span class="go">celeryd-multi -n celeryd4.myhost -c 3</span>
<span class="go">celeryd-multi -n celeryd5.myhost -c 3</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Lists also work with named workers:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd-multi<span class="w"> </span>start<span class="w"> </span>foo<span class="w"> </span>bar<span class="w"> </span>baz<span class="w"> </span>xuzzy<span class="w"> </span>-c<span class="w"> </span><span class="m">3</span><span class="w"> </span>-c:foo,bar,baz<span class="w"> </span><span class="m">10</span>
<span class="go">celeryd-multi -n foo.myhost -c 10</span>
<span class="go">celeryd-multi -n bar.myhost -c 10</span>
<span class="go">celeryd-multi -n baz.myhost -c 10</span>
<span class="go">celeryd-multi -n xuzzy.myhost -c 3</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p>The worker now calls the result backends <cite>process_cleanup</cite> method
<em>after</em> task execution instead of before.</p></li>
<li><p>AMQP result backend now supports Pika.</p></li>
</ul>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="changelog-1.0.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Change history for Celery 1.0</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="changelog-2.1.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Change history for Celery 2.1</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                <a href="../copyright.html">Copyright</a> &#169; 2009-2023, Ask Solem &amp; contributors
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Change history for Celery 2.0</a><ul>
<li><a class="reference internal" href="#version-2-0-3">2.0.3</a><ul>
<li><a class="reference internal" href="#fixes">Fixes</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-2-0-2">2.0.2</a></li>
<li><a class="reference internal" href="#version-2-0-1">2.0.1</a></li>
<li><a class="reference internal" href="#version-2-0-0">2.0.0</a><ul>
<li><a class="reference internal" href="#foreword">Foreword</a></li>
<li><a class="reference internal" href="#upgrading-for-django-users">Upgrading for Django-users</a></li>
<li><a class="reference internal" href="#upgrading-for-others">Upgrading for others</a><ul>
<li><a class="reference internal" href="#database-result-backend">Database result backend</a></li>
<li><a class="reference internal" href="#cache-result-backend">Cache result backend</a></li>
</ul>
</li>
<li><a class="reference internal" href="#backward-incompatible-changes">Backward incompatible changes</a></li>
<li><a class="reference internal" href="#news">News</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=8156d91f"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=5eb1bb1e"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    </body>
</html>