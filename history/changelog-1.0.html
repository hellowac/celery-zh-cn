<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="索引" href="../genindex.html" /><link rel="search" title="搜索" href="../search.html" /><link rel="copyright" title="版权所有" href="../copyright.html" /><link rel="next" title="术语" href="../glossary.html" /><link rel="prev" title="Change history for Celery 2.0" href="changelog-2.0.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>Change history for Celery 1.0 - Celery 5.5.1 文档</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=3ee1c6c6" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=4c969af8" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../_static/my.css?v=112ca36d" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Celery 5.5.1 文档</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/celery_512_1.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Celery 5.5.1 文档</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">版权</a></li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../getting-started/index.html">快速开始</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 快速开始</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/introduction.html">Celery 简介</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../getting-started/backends-and-brokers/index.html">Backends 和 Brokers</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Backends 和 Brokers</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/rabbitmq.html">使用 RabbitMQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/redis.html">使用 Redis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/sqs.html">使用 Amazon SQS</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/kafka.html">使用 Kafka</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/backends-and-brokers/gcpubsub.html">使用 Google Pub/Sub</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/first-steps-with-celery.html">使用 Celery 的第一步</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/next-steps.html">下一步</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/resources.html">资源</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../userguide/index.html">用户指南</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 用户指南</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../userguide/application.html">应用程序</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/tasks.html">任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/calling.html">调用任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/canvas.html">Canvas：设计工作流</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/workers.html">Workers 指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/daemonizing.html">守护进程</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/periodic-tasks.html">周期性任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/routing.html">路由任务/Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/monitoring.html">监控和管理指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/security.html">安全</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/optimizing.html">优化</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/debugging.html">调试</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../userguide/concurrency/index.html">并发</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of 并发</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../userguide/concurrency/eventlet.html">Eventlet 并发</a></li>
<li class="toctree-l3"><a class="reference internal" href="../userguide/concurrency/gevent.html">gevent 并发</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/signals.html">信号</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/testing.html">使用 Celery 进行测试</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/extending.html">扩展 和 Bootsteps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/configuration.html">配置和默认值</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userguide/sphinx.html">使用 Sphinx 文档化任务</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../django/index.html">Django</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Django</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../django/first-steps-with-django.html">使用 Django 的第一步</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community.html">社区资源</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">教程</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 教程</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/task-cookbook.html">Task Cookbook</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">常见问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">更改历史</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/index.html">API 参考</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of API 参考</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/cli.html">命令行接口</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">celery</span></code> --- Distributed processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.html">Proxies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.html#functions">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.task.html"><code class="docutils literal notranslate"><span class="pre">celery.app.task</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.amqp.html">AMQP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.amqp.html#queues">Queues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.defaults.html"><code class="docutils literal notranslate"><span class="pre">celery.app.defaults</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.control.html"><code class="docutils literal notranslate"><span class="pre">celery.app.control</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.registry.html"><code class="docutils literal notranslate"><span class="pre">celery.app.registry</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.backends.html"><code class="docutils literal notranslate"><span class="pre">celery.app.backends</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.builtins.html"><code class="docutils literal notranslate"><span class="pre">celery.app.builtins</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.events.html"><code class="docutils literal notranslate"><span class="pre">celery.app.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.log.html"><code class="docutils literal notranslate"><span class="pre">celery.app.log</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.utils.html"><code class="docutils literal notranslate"><span class="pre">celery.app.utils</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.app.autoretry.html"><code class="docutils literal notranslate"><span class="pre">celery.app.autoretry</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bootsteps.html"><code class="docutils literal notranslate"><span class="pre">celery.bootsteps</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.result.html"><code class="docutils literal notranslate"><span class="pre">celery.result</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.schedules.html"><code class="docutils literal notranslate"><span class="pre">celery.schedules</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.signals.html"><code class="docutils literal notranslate"><span class="pre">celery.signals</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.security.html"><code class="docutils literal notranslate"><span class="pre">celery.security</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.utils.debug.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.debug</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.exceptions.html"><code class="docutils literal notranslate"><span class="pre">celery.exceptions</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.app.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders.app</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.default.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders.default</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.loaders.base.html"><code class="docutils literal notranslate"><span class="pre">celery.loaders.base</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html">States</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#sets">Sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#misc">Misc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.FAILURE"><code class="docutils literal notranslate"><span class="pre">FAILURE</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.PENDING"><code class="docutils literal notranslate"><span class="pre">PENDING</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.RECEIVED"><code class="docutils literal notranslate"><span class="pre">RECEIVED</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.RETRY"><code class="docutils literal notranslate"><span class="pre">RETRY</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.REVOKED"><code class="docutils literal notranslate"><span class="pre">REVOKED</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.STARTED"><code class="docutils literal notranslate"><span class="pre">STARTED</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.SUCCESS"><code class="docutils literal notranslate"><span class="pre">SUCCESS</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.precedence"><code class="docutils literal notranslate"><span class="pre">precedence()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.states.html#celery.states.state"><code class="docutils literal notranslate"><span class="pre">state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.abortable.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.abortable</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.django.task.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.django.task</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.migrate.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.migrate</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.pytest.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.pytest</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.sphinx.html">celery.contrib.sphinx</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.app.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.app</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.manager.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.manager</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.testing.mocks.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.testing.mocks</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.contrib.rdb.html"><code class="docutils literal notranslate"><span class="pre">celery.contrib.rdb</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.html"><code class="docutils literal notranslate"><span class="pre">celery.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.receiver.html"><code class="docutils literal notranslate"><span class="pre">celery.events.receiver</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.dispatcher.html"><code class="docutils literal notranslate"><span class="pre">celery.events.state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.event.html"><code class="docutils literal notranslate"><span class="pre">celery.events.event</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.events.state.html"><code class="docutils literal notranslate"><span class="pre">celery.events.state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.beat.html"><code class="docutils literal notranslate"><span class="pre">celery.beat</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.apps.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.apps.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.apps.beat.html"><code class="docutils literal notranslate"><span class="pre">celery.apps.beat</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.apps.multi.html"><code class="docutils literal notranslate"><span class="pre">celery.apps.multi</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.request.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.request</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.state.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.state</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.strategy.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.strategy</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.agent.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.agent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.connection.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.connection</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.consumer.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.consumer</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.control.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.control</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.events.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.gossip.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.gossip</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.heart.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.heart</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.mingle.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.mingle</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.consumer.tasks.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.consumer.tasks</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.worker.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.base.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.base</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.celery.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.celery</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.worker.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.worker</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.beat.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.beat</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.events.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.events</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.logtool.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.logtool</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.amqp.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.amqp</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.graph.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.graph</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.multi.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.multi</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.call.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.call</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.control.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.control</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.list.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.list</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.migrate.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.migrate</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.purge.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.purge</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.result.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.result</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.shell.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.shell</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/celery.bin.upgrade.html"><code class="docutils literal notranslate"><span class="pre">celery.bin.upgrade</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../internals/index.html">内部</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of 内部</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../internals/guide.html">代码贡献指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/deprecation.html">Celery 弃用时间表</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/worker.html">内部的 worker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/protocol.html">消息协议</a></li>
<li class="toctree-l2"><a class="reference internal" href="../internals/app-overview.html">“大实例”重构</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../internals/reference/index.html">内部模块参考</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of 内部模块参考</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.components.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.components</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.loops.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.loops</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.heartbeat.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.heartbeat</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.control.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.control</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.pidbox.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.pidbox</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.worker.autoscale.html"><code class="docutils literal notranslate"><span class="pre">celery.worker.autoscale</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.solo.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.solo</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.prefork.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.prefork</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.eventlet.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.eventlet</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.gevent.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.gevent</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.thread.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.thread</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.concurrency.base.html"><code class="docutils literal notranslate"><span class="pre">celery.concurrency.base</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.html"><code class="docutils literal notranslate"><span class="pre">celery.backends</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.base.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.base</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.asynchronous.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.asynchronous</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.azureblockblob.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.azureblockblob</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.rpc.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.rpc</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.database.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.database</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.cache.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.cache</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.consul.html">celery.backends.consul</a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.couchdb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.couchdb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.mongodb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.mongodb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.elasticsearch.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.elasticsearch</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.redis.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.redis</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.cassandra.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.cassandra</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.couchbase.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.couchbase</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.arangodb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.arangodb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.dynamodb.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.dynamodb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.filesystem.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.filesystem</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.cosmosdbsql.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.cosmosdbsql</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.s3.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.s3</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.gcs.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.gcs</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.app.trace.html"><code class="docutils literal notranslate"><span class="pre">celery.app.trace</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.app.annotations.html"><code class="docutils literal notranslate"><span class="pre">celery.app.annotations</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.app.routes.html"><code class="docutils literal notranslate"><span class="pre">celery.app.routes</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.certificate.html"><code class="docutils literal notranslate"><span class="pre">celery.security.certificate</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.key.html"><code class="docutils literal notranslate"><span class="pre">celery.security.key</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.serialization.html"><code class="docutils literal notranslate"><span class="pre">celery.security.serialization</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.security.utils.html"><code class="docutils literal notranslate"><span class="pre">celery.security.utils</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.events.snapshot.html"><code class="docutils literal notranslate"><span class="pre">celery.events.snapshot</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.events.cursesmon.html"><code class="docutils literal notranslate"><span class="pre">celery.events.cursesmon</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.events.dumper.html"><code class="docutils literal notranslate"><span class="pre">celery.events.dumper</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.database.models.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.database.models</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.backends.database.session.html"><code class="docutils literal notranslate"><span class="pre">celery.backends.database.session</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.html"><code class="docutils literal notranslate"><span class="pre">celery.utils</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.abstract.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.abstract</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.collections.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.collections</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.nodenames.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.nodenames</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.deprecated.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.deprecated</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.functional.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.functional</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.graph.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.graph</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.objects.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.objects</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.term.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.term</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.time.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.time</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.iso8601.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.iso8601</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.saferepr.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.saferepr</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.serialization.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.serialization</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.sysinfo.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.sysinfo</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.threads.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.threads</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.timer2.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.timer2</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.imports.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.imports</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.log.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.log</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.text.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.text</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.dispatch.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.dispatch</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.utils.dispatch.signal.html"><code class="docutils literal notranslate"><span class="pre">celery.utils.dispatch.signal</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery.platforms.html"><code class="docutils literal notranslate"><span class="pre">celery.platforms</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../internals/reference/celery._state.html"><code class="docutils literal notranslate"><span class="pre">celery._state</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">历史</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of 历史</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="whatsnew-5.5.html">What's new in Celery 5.5 (Immunity)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-5.5.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-5.4.html">What's new in Celery 5.4 (Opalescent)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-5.4.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-5.3.html">What's new in Celery 5.3 (Emerald Rush)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-5.3.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-5.1.html">What's new in Celery 5.1 (Sun Harmonics)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-5.1.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-5.0.html">What's new in Celery 5.0 (singularity)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-5.0.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-4.4.html">What's new in Celery 4.4 (Cliffs)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-4.4.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-4.3.html">What's new in Celery 4.3 (rhubarb)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-4.3.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-4.2.html">What's new in Celery 4.2 (windowlicker)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-4.2.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-4.1.html">What's new in Celery 4.1 (latentcall)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-4.1.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-4.0.html">What's new in Celery 4.0 (latentcall)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-4.0.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-3.1.html">What's new in Celery 3.1 (Cipater)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-3.1.html">Change history</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-3.0.html">What's new in Celery 3.0 (Chiastic Slide)</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-3.0.html">Change history for Celery 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="whatsnew-2.5.html">What's new in Celery 2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-2.5.html">Change history for Celery 2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-2.4.html">Change history for Celery 2.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-2.3.html">Change history for Celery 2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-2.2.html">Change history for Celery 2.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-2.1.html">Change history for Celery 2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="changelog-2.0.html">Change history for Celery 2.0</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Change history for Celery 1.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">术语</a></li>
</ul>

</div>
<!-- <iframe src="https://ghbtns.com/github-btn.html?user=celery&repo=celery&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe> -->
<div id="donate">
  <h5>捐赠</h5>
  <p>请捐赠以支持这个社区项目</p>
  <a href="https://opencollective.com/celery/donate" target="_blank">
    <!-- <img src="https://opencollective.com/celery/donate/button@2x.png?color=blue" /> -->
    <img src="https://opencollective.com/celery/donate/button.png?color=blue" />
  </a>
</div></div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/history/changelog-1.0.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="change-history-for-celery-1-0">
<span id="changelog-1-0"></span><h1>Change history for Celery 1.0<a class="headerlink" href="#change-history-for-celery-1-0" title="Link to this heading">¶</a></h1>
<section id="version-1-0-6">
<span id="id1"></span><h2>1.0.6<a class="headerlink" href="#version-1-0-6" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2010-06-30 09:57 a.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul>
<li><p>RabbitMQ 1.8.0 has extended their exchange equivalence tests to
include <cite>auto_delete</cite> and <cite>durable</cite>. This broke the AMQP backend.</p>
<p>If you've already used the AMQP backend this means you have to
delete the previous definitions:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>camqadm<span class="w"> </span>exchange.delete<span class="w"> </span>celeryresults
</pre></div>
</div>
<p>or:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>manage.py<span class="w"> </span>camqadm<span class="w"> </span>exchange.delete<span class="w"> </span>celeryresults
</pre></div>
</div>
</li>
</ul>
</section>
<section id="version-1-0-5">
<span id="id2"></span><h2>1.0.5<a class="headerlink" href="#version-1-0-5" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2010-06-01 02:36 p.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<section id="critical">
<span id="v105-critical"></span><h3>Critical<a class="headerlink" href="#critical" title="Link to this heading">¶</a></h3>
<ul>
<li><p><code class="xref std std-sig docutils literal notranslate"><span class="pre">INT</span></code>/<kbd class="kbd docutils literal notranslate">Control</kbd>-<kbd class="kbd docutils literal notranslate">c</kbd> killed the pool, abruptly terminating the
currently executing tasks.</p>
<blockquote>
<div><p>Fixed by making the pool worker processes ignore <code class="xref py py-const docutils literal notranslate"><span class="pre">SIGINT</span></code>.</p>
</div></blockquote>
</li>
<li><p>Shouldn't close the consumers before the pool is terminated, just cancel
the consumers.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #122</span>.</p>
</div></blockquote>
</li>
<li><p>Now depends on <a class="extlink-pypi reference external" href="https://pypi.org/project/billiard/">https://pypi.org/project/billiard/</a> &gt;= 0.3.1</p></li>
<li><p>worker: Previously exceptions raised by worker components could stall
start-up, now it correctly logs the exceptions and shuts down.</p></li>
<li><p>worker: Prefetch counts was set too late. QoS is now set as early as possible,
so the worker: can't slurp in all the messages at start-up.</p></li>
</ul>
</section>
<section id="changes">
<span id="v105-changes"></span><h3>Changes<a class="headerlink" href="#changes" title="Link to this heading">¶</a></h3>
<ul>
<li><p><a class="reference internal" href="../reference/celery.contrib.abortable.html#module-celery.contrib.abortable" title="celery.contrib.abortable"><code class="xref py py-mod docutils literal notranslate"><span class="pre">celery.contrib.abortable</span></code></a>: Abortable tasks.</p>
<blockquote>
<div><p>Tasks that defines steps of execution, the task can then
be aborted after each step has completed.</p>
</div></blockquote>
</li>
<li><p><a class="reference internal" href="../reference/celery.events.html#celery.events.EventDispatcher" title="celery.events.EventDispatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">EventDispatcher</span></code></a>: No longer creates AMQP channel
if events are disabled</p></li>
<li><p>Added required RPM package names under <cite>[bdist_rpm]</cite> section, to support building RPMs
from the sources using <code class="file docutils literal notranslate"><span class="pre">setup.py</span></code>.</p></li>
<li><p>Running unit tests: <span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">NOSE_VERBOSE</span></code> environment var now enables verbose output from Nose.</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">celery.execute.apply()</span></code>: Pass log file/log level arguments as task kwargs.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #110</span>.</p>
</div></blockquote>
</li>
<li><p>celery.execute.apply: Should return exception, not
<code class="xref py py-class docutils literal notranslate"><span class="pre">ExceptionInfo</span></code> on error.</p>
<blockquote>
<div><p>See <span class="xref issue">issue #111</span>.</p>
</div></blockquote>
</li>
<li><p>Added new entries to the <a class="reference internal" href="../faq.html#faq"><span class="std std-ref">FAQs</span></a>:</p>
<blockquote>
<div><ul class="simple">
<li><p>Should I use retry or acks_late?</p></li>
<li><p>Can I call a task by name?</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
</section>
<section id="version-1-0-4">
<span id="id3"></span><h2>1.0.4<a class="headerlink" href="#version-1-0-4" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2010-05-31 09:54 a.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>Changelog merged with 1.0.5 as the release was never announced.</p></li>
</ul>
</section>
<section id="version-1-0-3">
<span id="id4"></span><h2>1.0.3<a class="headerlink" href="#version-1-0-3" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2010-05-15 03:00 p.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<section id="important-notes">
<span id="v103-important"></span><h3>Important notes<a class="headerlink" href="#important-notes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Messages are now acknowledged <em>just before</em> the task function is executed.</p>
<blockquote>
<div><p>This is the behavior we've wanted all along, but couldn't have because of
limitations in the multiprocessing module.
The previous behavior wasn't good, and the situation worsened with the
release of 1.0.1, so this change will definitely improve
reliability, performance and operations in general.</p>
<p>For more information please see <a class="reference external" href="http://bit.ly/9hom6T">http://bit.ly/9hom6T</a></p>
</div></blockquote>
</li>
<li><p>Database result backend: result now explicitly sets <cite>null=True</cite> as
<cite>django-picklefield</cite> version 0.1.5 changed the default behavior
right under our noses :(</p>
<blockquote>
<div><p>See: <a class="reference external" href="http://bit.ly/d5OwMr">http://bit.ly/d5OwMr</a></p>
<p>This means those who created their Celery tables (via <code class="docutils literal notranslate"><span class="pre">syncdb</span></code> or
<code class="docutils literal notranslate"><span class="pre">celeryinit</span></code>) with <a class="extlink-pypi reference external" href="https://pypi.org/project/django-picklefield`/">https://pypi.org/project/django-picklefield`/</a>
versions &gt;= 0.1.5 has to alter their tables to
allow the result field to be <cite>NULL</cite> manually.</p>
<p>MySQL:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">celery_taskmeta</span><span class="w"> </span><span class="k">MODIFY</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">NULL</span>
</pre></div>
</div>
<p>PostgreSQL:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">celery_taskmeta</span><span class="w"> </span><span class="k">ALTER</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">DROP</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Removed <cite>Task.rate_limit_queue_type</cite>, as it wasn't really useful
and made it harder to refactor some parts.</p></li>
<li><p>Now depends on carrot &gt;= 0.10.4</p></li>
<li><p>Now depends on billiard &gt;= 0.3.0</p></li>
</ul>
</section>
<section id="news">
<span id="v103-news"></span><h3>News<a class="headerlink" href="#news" title="Link to this heading">¶</a></h3>
<ul>
<li><p>AMQP backend: Added timeout support for <cite>result.get()</cite> /
<cite>result.wait()</cite>.</p></li>
<li><p>New task option: <cite>Task.acks_late</cite> (default: <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_ACKS_LATE</span></code>)</p>
<blockquote>
<div><p>Late ack means the task messages will be acknowledged <strong>after</strong> the task
has been executed, not <em>right before</em>, which is the default behavior.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>This means the tasks may be executed twice if the worker
crashes in mid-execution. Not acceptable for most
applications, but desirable for others.</p>
</div>
</div></blockquote>
</li>
<li><p>Added Crontab-like scheduling to periodic tasks.</p>
<blockquote>
<div><p>Like a cronjob, you can specify units of time of when
you'd like the task to execute. While not a full implementation
of <strong class="command">cron</strong>'s features, it should provide a fair degree of common scheduling
needs.</p>
<p>You can specify a minute (0-59), an hour (0-23), and/or a day of the
week (0-6 where 0 is Sunday, or by names:
<code class="docutils literal notranslate"><span class="pre">sun,</span> <span class="pre">mon,</span> <span class="pre">tue,</span> <span class="pre">wed,</span> <span class="pre">thu,</span> <span class="pre">fri,</span> <span class="pre">sat</span></code>).</p>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.schedules</span><span class="w"> </span><span class="kn">import</span> <span class="n">crontab</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">celery.decorators</span><span class="w"> </span><span class="kn">import</span> <span class="n">periodic_task</span>

<span class="nd">@periodic_task</span><span class="p">(</span><span class="n">run_every</span><span class="o">=</span><span class="n">crontab</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">every_morning</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Runs every morning at 7:30a.m&#39;</span><span class="p">)</span>

<span class="nd">@periodic_task</span><span class="p">(</span><span class="n">run_every</span><span class="o">=</span><span class="n">crontab</span><span class="p">(</span><span class="n">hour</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">day_of_week</span><span class="o">=</span><span class="s1">&#39;mon&#39;</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">every_monday_morning</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Run every monday morning at 7:30a.m&#39;</span><span class="p">)</span>

<span class="nd">@periodic_task</span><span class="p">(</span><span class="n">run_every</span><span class="o">=</span><span class="n">crontab</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span>
<span class="k">def</span><span class="w"> </span><span class="nf">every_hour</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Runs every hour on the clock (e.g., 1:30, 2:30, 3:30 etc.).&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>This a late addition. While we have unit tests, due to the
nature of this feature we haven't been able to completely test this
in practice, so consider this experimental.</p>
</div>
</div></blockquote>
</li>
<li><p><cite>TaskPool.apply_async</cite>: Now supports the <cite>accept_callback</cite> argument.</p></li>
<li><p><cite>apply_async</cite>: Now raises <a class="reference external" href="https://docs.python.org/dev/library/exceptions.html#ValueError" title="（在 Python v3.15）"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> if task args isn't a list,
or kwargs isn't a tuple (<span class="xref issue">Issue #95</span>).</p></li>
<li><p><cite>Task.max_retries</cite> can now be <cite>None</cite>, which means it will retry forever.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">celerybeat</span></code>: Now reuses the same connection when publishing large
sets of tasks.</p></li>
<li><p>Modified the task locking example in the documentation to use
<cite>cache.add</cite> for atomic locking.</p></li>
<li><p>Added experimental support for a <em>started</em> status on tasks.</p>
<blockquote>
<div><p>If <cite>Task.track_started</cite> is enabled the task will report its status
as &quot;started&quot; when the task is executed by a worker.</p>
<p>The default value is <cite>False</cite> as the normal behavior is to not
report that level of granularity. Tasks are either pending, finished,
or waiting to be retried. Having a &quot;started&quot; status can be useful for
when there are long running tasks and there's a need to report which
task is currently running.</p>
<p>The global default can be overridden by the <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_TRACK_STARTED</span></code>
setting.</p>
</div></blockquote>
</li>
<li><p>User Guide: New section <cite>Tips and Best Practices</cite>.</p>
<blockquote>
<div><p>Contributions welcome!</p>
</div></blockquote>
</li>
</ul>
</section>
<section id="remote-control-commands">
<span id="v103-remote-control"></span><h3>Remote control commands<a class="headerlink" href="#remote-control-commands" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Remote control commands can now send replies back to the caller.</p>
<blockquote>
<div><p>Existing commands has been improved to send replies, and the client
interface in <cite>celery.task.control</cite> has new keyword arguments: <cite>reply</cite>,
<cite>timeout</cite> and <cite>limit</cite>. Where reply means it will wait for replies,
timeout is the time in seconds to stop waiting for replies, and limit
is the maximum number of replies to get.</p>
<p>By default, it will wait for as many replies as possible for one second.</p>
<ul>
<li><p>rate_limit(task_name, destination=all, reply=False, timeout=1, limit=0)</p>
<blockquote>
<div><p>Worker returns <cite>{'ok': message}</cite> on success,
or <cite>{'failure': message}</cite> on failure.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.task.control</span><span class="w"> </span><span class="kn">import</span> <span class="n">rate_limit</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rate_limit</span><span class="p">(</span><span class="s1">&#39;tasks.add&#39;</span><span class="p">,</span> <span class="s1">&#39;10/s&#39;</span><span class="p">,</span> <span class="n">reply</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[{&#39;worker1&#39;: {&#39;ok&#39;: &#39;new rate limit set successfully&#39;}},</span>
<span class="go"> {&#39;worker2&#39;: {&#39;ok&#39;: &#39;new rate limit set successfully&#39;}}]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>ping(destination=all, reply=False, timeout=1, limit=0)</p>
<blockquote>
<div><p>Worker returns the simple message <cite>&quot;pong&quot;</cite>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.task.control</span><span class="w"> </span><span class="kn">import</span> <span class="n">ping</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ping</span><span class="p">(</span><span class="n">reply</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[{&#39;worker1&#39;: &#39;pong&#39;},</span>
<span class="go"> {&#39;worker2&#39;: &#39;pong&#39;},</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>revoke(destination=all, reply=False, timeout=1, limit=0)</p>
<blockquote>
<div><p>Worker simply returns <cite>True</cite>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.task.control</span><span class="w"> </span><span class="kn">import</span> <span class="n">revoke</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">revoke</span><span class="p">(</span><span class="s1">&#39;419e46eb-cf6a-4271-86a8-442b7124132c&#39;</span><span class="p">,</span> <span class="n">reply</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[{&#39;worker1&#39;: True},</span>
<span class="go"> {&#39;worker2&#39;; True}]</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p>You can now add your own remote control commands!</p>
<blockquote>
<div><p>Remote control commands are functions registered in the command
registry. Registering a command is done using
<a class="reference internal" href="../internals/reference/celery.worker.control.html#celery.worker.control.Panel.register" title="celery.worker.control.Panel.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">celery.worker.control.Panel.register()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.task.control</span><span class="w"> </span><span class="kn">import</span> <span class="n">Panel</span>

<span class="nd">@Panel</span><span class="o">.</span><span class="n">register</span>
<span class="k">def</span><span class="w"> </span><span class="nf">reset_broker_connection</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">state</span><span class="o">.</span><span class="n">consumer</span><span class="o">.</span><span class="n">reset_connection</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;ok&#39;</span><span class="p">:</span> <span class="s1">&#39;connection re-established&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>With this module imported in the worker, you can launch the command
using <cite>celery.task.control.broadcast</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.task.control</span><span class="w"> </span><span class="kn">import</span> <span class="n">broadcast</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">broadcast</span><span class="p">(</span><span class="s1">&#39;reset_broker_connection&#39;</span><span class="p">,</span> <span class="n">reply</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[{&#39;worker1&#39;: {&#39;ok&#39;: &#39;connection re-established&#39;},</span>
<span class="go"> {&#39;worker2&#39;: {&#39;ok&#39;: &#39;connection re-established&#39;}}]</span>
</pre></div>
</div>
<p><strong>TIP</strong> You can choose the worker(s) to receive the command
by using the <cite>destination</cite> argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">broadcast</span><span class="p">(</span><span class="s1">&#39;reset_broker_connection&#39;</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;worker1&#39;</span><span class="p">])</span>
<span class="go">[{&#39;worker1&#39;: {&#39;ok&#39;: &#39;connection re-established&#39;}]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>New remote control command: <cite>dump_reserved</cite></p>
<blockquote>
<div><p>Dumps tasks reserved by the worker, waiting to be executed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.task.control</span><span class="w"> </span><span class="kn">import</span> <span class="n">broadcast</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">broadcast</span><span class="p">(</span><span class="s1">&#39;dump_reserved&#39;</span><span class="p">,</span> <span class="n">reply</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[{&#39;myworker1&#39;: [&lt;TaskRequest ....&gt;]}]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>New remote control command: <cite>dump_schedule</cite></p>
<blockquote>
<div><p>Dumps the workers currently registered ETA schedule.
These are tasks with an <cite>eta</cite> (or <cite>countdown</cite>) argument
waiting to be executed by the worker.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.task.control</span><span class="w"> </span><span class="kn">import</span> <span class="n">broadcast</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">broadcast</span><span class="p">(</span><span class="s1">&#39;dump_schedule&#39;</span><span class="p">,</span> <span class="n">reply</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[{&#39;w1&#39;: []},</span>
<span class="go"> {&#39;w3&#39;: []},</span>
<span class="go"> {&#39;w2&#39;: [&#39;0. 2010-05-12 11:06:00 pri0 &lt;TaskRequest</span>
<span class="go">            {name:&#39;opalfeeds.tasks.refresh_feed_slice&#39;,</span>
<span class="go">             id:&#39;95b45760-4e73-4ce8-8eac-f100aa80273a&#39;,</span>
<span class="go">             args:&#39;(&lt;Feeds freq_max:3600 freq_min:60</span>
<span class="go">                           start:2184.0 stop:3276.0&gt;,)&#39;,</span>
<span class="go">             kwargs:&#39;{&#39;page&#39;: 2}&#39;}&gt;&#39;]},</span>
<span class="go"> {&#39;w4&#39;: [&#39;0. 2010-05-12 11:00:00 pri0 &lt;TaskRequest</span>
<span class="go">            {name:&#39;opalfeeds.tasks.refresh_feed_slice&#39;,</span>
<span class="go">             id:&#39;c053480b-58fb-422f-ae68-8d30a464edfe&#39;,</span>
<span class="go">             args:&#39;(&lt;Feeds freq_max:3600 freq_min:60</span>
<span class="go">                           start:1092.0 stop:2184.0&gt;,)&#39;,</span>
<span class="go">             kwargs:&#39;{\&#39;page\&#39;: 1}&#39;}&gt;&#39;,</span>
<span class="go">        &#39;1. 2010-05-12 11:12:00 pri0 &lt;TaskRequest</span>
<span class="go">            {name:&#39;opalfeeds.tasks.refresh_feed_slice&#39;,</span>
<span class="go">             id:&#39;ab8bc59e-6cf8-44b8-88d0-f1af57789758&#39;,</span>
<span class="go">             args:&#39;(&lt;Feeds freq_max:3600 freq_min:60</span>
<span class="go">                           start:3276.0 stop:4365&gt;,)&#39;,</span>
<span class="go">             kwargs:&#39;{\&#39;page\&#39;: 3}&#39;}&gt;&#39;]}]</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="fixes">
<span id="v103-fixes"></span><h3>Fixes<a class="headerlink" href="#fixes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Mediator thread no longer blocks for more than 1 second.</p>
<blockquote>
<div><p>With rate limits enabled and when there was a lot of remaining time,
the mediator thread could block shutdown (and potentially block other
jobs from coming in).</p>
</div></blockquote>
</li>
<li><p>Remote rate limits wasn't properly applied (<span class="xref issue">Issue #98</span>).</p></li>
<li><p>Now handles exceptions with Unicode messages correctly in
<cite>TaskRequest.on_failure</cite>.</p></li>
<li><p>Database backend: <cite>TaskMeta.result</cite>: default value should be <cite>None</cite>
not empty string.</p></li>
</ul>
</section>
</section>
<section id="version-1-0-2">
<span id="id5"></span><h2>1.0.2<a class="headerlink" href="#version-1-0-2" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2010-03-31 12:50 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul>
<li><p>Deprecated: <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_BACKEND</span></code>, please use
<code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_RESULT_BACKEND</span></code> instead.</p></li>
<li><p>We now use a custom logger in tasks. This logger supports task magic
keyword arguments in formats.</p>
<blockquote>
<div><p>The default format for tasks (<code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_TASK_LOG_FORMAT</span></code>) now
includes the id and the name of tasks so the origin of task log messages
can easily be traced.</p>
<dl class="simple">
<dt>Example output::</dt><dd><dl class="simple">
<dt>[2010-03-25 13:11:20,317: INFO/PoolWorker-1]</dt><dd><p>[tasks.add(a6e1c5ad-60d9-42a0-8b24-9e39363125a4)] Hello from add</p>
</dd>
</dl>
</dd>
</dl>
<p>To revert to the previous behavior you can set:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CELERYD_TASK_LOG_FORMAT</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    [</span><span class="si">%(asctime)s</span><span class="s2">: </span><span class="si">%(levelname)s</span><span class="s2">/</span><span class="si">%(processName)s</span><span class="s2">] </span><span class="si">%(message)s</span>
<span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Unit tests: Don't disable the django test database tear down,
instead fixed the underlying issue which was caused by modifications
to the <cite>DATABASE_NAME</cite> setting (<span class="xref issue">Issue #82</span>).</p></li>
<li><p>Django Loader: New config <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_DB_REUSE_MAX</span></code> (max number of
tasks to reuse the same database connection)</p>
<blockquote>
<div><p>The default is to use a new connection for every task.
We'd very much like to reuse the connection, but a safe number of
reuses isn't known, and we don't have any way to handle the errors
that might happen, which may even be database dependent.</p>
<p>See: <a class="reference external" href="http://bit.ly/94fwdd">http://bit.ly/94fwdd</a></p>
</div></blockquote>
</li>
<li><p>worker: The worker components are now configurable: <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_POOL</span></code>,
<code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_CONSUMER</span></code>, <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_MEDIATOR</span></code>, and
<code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_ETA_SCHEDULER</span></code>.</p>
<blockquote>
<div><p>The default configuration is as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CELERYD_POOL</span> <span class="o">=</span> <span class="s1">&#39;celery.concurrency.processes.TaskPool&#39;</span>
<span class="n">CELERYD_MEDIATOR</span> <span class="o">=</span> <span class="s1">&#39;celery.worker.controllers.Mediator&#39;</span>
<span class="n">CELERYD_ETA_SCHEDULER</span> <span class="o">=</span> <span class="s1">&#39;celery.worker.controllers.ScheduleController&#39;</span>
<span class="n">CELERYD_CONSUMER</span> <span class="o">=</span> <span class="s1">&#39;celery.worker.consumer.Consumer&#39;</span>
</pre></div>
</div>
<p>The <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_POOL</span></code> setting makes it easy to swap out the
multiprocessing pool with a threaded pool, or how about a
twisted/eventlet pool?</p>
<p>Consider the competition for the first pool plug-in started!</p>
</div></blockquote>
</li>
<li><p>Debian init-scripts: Use <cite>-a</cite> not <cite>&amp;&amp;</cite> (<span class="xref issue">Issue #82</span>).</p></li>
<li><p>Debian init-scripts: Now always preserves <cite>$CELERYD_OPTS</cite> from the
<cite>/etc/default/celeryd</cite> and <cite>/etc/default/celerybeat</cite>.</p></li>
<li><p>celery.beat.Scheduler: Fixed a bug where the schedule wasn't properly
flushed to disk if the schedule hadn't been properly initialized.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">celerybeat</span></code>: Now syncs the schedule to disk when receiving the <code class="xref std std-sig docutils literal notranslate"><span class="pre">SIGTERM</span></code>
and <code class="xref std std-sig docutils literal notranslate"><span class="pre">SIGINT</span></code> signals.</p></li>
<li><p>Control commands: Make sure keywords arguments aren't in Unicode.</p></li>
<li><p>ETA scheduler: Was missing a logger object, so the scheduler crashed
when trying to log that a task had been revoked.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">management.commands.camqadm</span></code>: Fixed typo <cite>camqpadm</cite> -&gt; <cite>camqadm</cite>
(<span class="xref issue">Issue #83</span>).</p></li>
<li><p>PeriodicTask.delta_resolution: wasn't working for days and hours, now fixed
by rounding to the nearest day/hour.</p></li>
<li><p>Fixed a potential infinite loop in <cite>BaseAsyncResult.__eq__</cite>, although
there's no evidence that it has ever been triggered.</p></li>
<li><p>worker: Now handles messages with encoding problems by acking them and
emitting an error message.</p></li>
</ul>
</section>
<section id="version-1-0-1">
<span id="id6"></span><h2>1.0.1<a class="headerlink" href="#version-1-0-1" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2010-02-24 07:05 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul>
<li><p>Tasks are now acknowledged early instead of late.</p>
<blockquote>
<div><p>This is done because messages can only be acknowledged within the same
connection channel, so if the connection is lost we'd've to
re-fetch the message again to acknowledge it.</p>
<p>This might or might not affect you, but mostly those running tasks with a
really long execution time are affected, as all tasks that's made it
all the way into the pool needs to be executed before the worker can
safely terminate (this is at most the number of pool workers, multiplied
by the <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_PREFETCH_MULTIPLIER</span></code> setting).</p>
<p>We multiply the prefetch count by default to increase the performance at
times with bursts of tasks with a short execution time. If this doesn't
apply to your use case, you should be able to set the prefetch multiplier
to zero, without sacrificing performance.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>A patch to <a class="reference external" href="https://docs.python.org/dev/library/multiprocessing.html#module-multiprocessing" title="（在 Python v3.15）"><code class="xref py py-mod docutils literal notranslate"><span class="pre">multiprocessing</span></code></a> is currently being
worked on, this patch would enable us to use a better solution, and is
scheduled for inclusion in the <cite>2.0.0</cite> release.</p>
</div>
</div></blockquote>
</li>
<li><p>The worker now shutdowns cleanly when receiving the <code class="xref std std-sig docutils literal notranslate"><span class="pre">SIGTERM</span></code> signal.</p></li>
<li><p>The worker now does a cold shutdown if the <code class="xref std std-sig docutils literal notranslate"><span class="pre">SIGINT</span></code> signal
is received (<kbd class="kbd docutils literal notranslate">Control</kbd>-<kbd class="kbd docutils literal notranslate">c</kbd>),
this means it tries to terminate as soon as possible.</p></li>
<li><p>Caching of results now moved to the base backend classes, so no need
to implement this functionality in the base classes.</p></li>
<li><p>Caches are now also limited in size, so their memory usage doesn't grow
out of control.</p>
<blockquote>
<div><p>You can set the maximum number of results the cache
can hold using the <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_MAX_CACHED_RESULTS</span></code> setting (the
default is five thousand results). In addition, you can re-fetch already
retrieved results using <cite>backend.reload_task_result</cite> +
<cite>backend.reload_taskset_result</cite> (that's for those who want to send
results incrementally).</p>
</div></blockquote>
</li>
<li><p>The worker now works on Windows again.</p>
<blockquote>
<div><div class="admonition warning">
<p class="admonition-title">警告</p>
<p>If you're using Celery with Django, you can't use <cite>project.settings</cite>
as the settings module name, but the following should work:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>manage.py<span class="w"> </span>celeryd<span class="w"> </span>--settings<span class="o">=</span>settings
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p>Execution: <cite>.messaging.TaskPublisher.send_task</cite> now
incorporates all the functionality apply_async previously did.</p>
<blockquote>
<div><p>Like converting countdowns to ETA, so <code class="xref py py-func docutils literal notranslate"><span class="pre">celery.execute.apply_async()</span></code> is
now simply a convenient front-end to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">celery.messaging.TaskPublisher.send_task()</span></code>, using
the task classes default options.</p>
<p>Also <code class="xref py py-func docutils literal notranslate"><span class="pre">celery.execute.send_task()</span></code> has been
introduced, which can apply tasks using just the task name (useful
if the client doesn't have the destination task in its task registry).</p>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.execute</span><span class="w"> </span><span class="kn">import</span> <span class="n">send_task</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">send_task</span><span class="p">(</span><span class="s1">&#39;celery.ping&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[],</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="go">&#39;pong&#39;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><cite>camqadm</cite>: This is a new utility for command-line access to the AMQP API.</p>
<blockquote>
<div><p>Excellent for deleting queues/bindings/exchanges, experimentation and
testing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>camqadm
<span class="go">1&gt; help</span>
</pre></div>
</div>
<p>Gives an interactive shell, type <cite>help</cite> for a list of commands.</p>
<p>When using Django, use the management command instead:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>manage.py<span class="w"> </span>camqadm
<span class="go">1&gt; help</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Redis result backend: To conform to recent Redis API changes, the following
settings has been deprecated:</p>
<blockquote>
<div><blockquote>
<div><ul class="simple">
<li><p><cite>REDIS_TIMEOUT</cite></p></li>
<li><p><cite>REDIS_CONNECT_RETRY</cite></p></li>
</ul>
</div></blockquote>
<p>These will emit a <cite>DeprecationWarning</cite> if used.</p>
<p>A <cite>REDIS_PASSWORD</cite> setting has been added, so you can use the new
simple authentication mechanism in Redis.</p>
</div></blockquote>
</li>
<li><p>The redis result backend no longer calls <cite>SAVE</cite> when disconnecting,
as this is apparently better handled by Redis itself.</p></li>
<li><p>If <cite>settings.DEBUG</cite> is on, the worker now warns about the possible
memory leak it can result in.</p></li>
<li><p>The ETA scheduler now sleeps at most two seconds between iterations.</p></li>
<li><p>The ETA scheduler now deletes any revoked tasks it might encounter.</p>
<blockquote>
<div><p>As revokes aren't yet persistent, this is done to make sure the task
is revoked even though, for example, it's currently being hold because
its ETA is a week into the future.</p>
</div></blockquote>
</li>
<li><p>The <cite>task_id</cite> argument is now respected even if the task is executed
eagerly (either using apply, or <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_ALWAYS_EAGER</span></code>).</p></li>
<li><p>The internal queues are now cleared if the connection is reset.</p></li>
<li><p>New magic keyword argument: <cite>delivery_info</cite>.</p>
<blockquote>
<div><p>Used by retry() to resend the task to its original destination using the same
exchange/routing_key.</p>
</div></blockquote>
</li>
<li><p>Events: Fields wasn't passed by <cite>.send()</cite> (fixes the UUID key errors
in celerymon)</p></li>
<li><p>Added <cite>--schedule</cite>/<cite>-s</cite> option to the worker, so it is possible to
specify a custom schedule filename when using an embedded <code class="docutils literal notranslate"><span class="pre">celerybeat</span></code>
server (the <cite>-B</cite>/<cite>--beat</cite>) option.</p></li>
<li><p>Better Python 2.4 compatibility. The test suite now passes.</p></li>
<li><p>task decorators: Now preserve docstring as <cite>cls.__doc__</cite>, (was previously
copied to <cite>cls.run.__doc__</cite>)</p></li>
<li><p>The <cite>testproj</cite> directory has been renamed to <cite>tests</cite> and we're now using
<cite>nose</cite> + <cite>django-nose</cite> for test discovery, and <cite>unittest2</cite> for test
cases.</p></li>
<li><p>New pip requirements files available in <code class="file docutils literal notranslate"><span class="pre">requirements</span></code>.</p></li>
<li><p>TaskPublisher: Declarations are now done once (per process).</p></li>
<li><p>Added <cite>Task.delivery_mode</cite> and the <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_DEFAULT_DELIVERY_MODE</span></code>
setting.</p>
<blockquote>
<div><p>These can be used to mark messages non-persistent (i.e., so they're
lost if the broker is restarted).</p>
</div></blockquote>
</li>
<li><p>Now have our own <cite>ImproperlyConfigured</cite> exception, instead of using the
Django one.</p></li>
<li><p>Improvements to the Debian init-scripts: Shows an error if the program is
not executable. Does not modify <cite>CELERYD</cite> when using django with
virtualenv.</p></li>
</ul>
</section>
<section id="version-1-0-0">
<span id="id7"></span><h2>1.0.0<a class="headerlink" href="#version-1-0-0" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2010-02-10 04:00 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<section id="backward-incompatible-changes">
<span id="v100-incompatible"></span><h3>Backward incompatible changes<a class="headerlink" href="#backward-incompatible-changes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Celery doesn't support detaching anymore, so you have to use the tools
available on your platform, or something like <a class="extlink-pypi reference external" href="https://pypi.org/project/supervisor/">https://pypi.org/project/supervisor/</a> to make
<code class="docutils literal notranslate"><span class="pre">celeryd</span></code>/<code class="docutils literal notranslate"><span class="pre">celerybeat</span></code>/<code class="docutils literal notranslate"><span class="pre">celerymon</span></code> into background processes.</p>
<blockquote>
<div><p>We've had too many problems with the worker daemonizing itself, so it was
decided it has to be removed. Example start-up scripts has been added to
the <cite>extra/</cite> directory:</p>
<ul>
<li><p>Debian, Ubuntu, (<strong class="command">start-stop-daemon</strong>)</p>
<blockquote>
<div><p><cite>extra/debian/init.d/celeryd</cite>
<cite>extra/debian/init.d/celerybeat</cite></p>
</div></blockquote>
</li>
<li><p>macOS <strong class="command">launchd</strong></p>
<blockquote>
<div><p><cite>extra/mac/org.celeryq.celeryd.plist</cite>
<cite>extra/mac/org.celeryq.celerybeat.plist</cite>
<cite>extra/mac/org.celeryq.celerymon.plist</cite></p>
</div></blockquote>
</li>
<li><p>Supervisor (<a class="reference external" href="http://supervisord.org">http://supervisord.org</a>)</p>
<blockquote>
<div><p><cite>extra/supervisord/supervisord.conf</cite></p>
</div></blockquote>
</li>
</ul>
<p>In addition to <cite>--detach</cite>, the following program arguments has been
removed: <cite>--uid</cite>, <cite>--gid</cite>, <cite>--workdir</cite>, <cite>--chroot</cite>, <cite>--pidfile</cite>,
<cite>--umask</cite>. All good daemonization tools should support equivalent
functionality, so don't worry.</p>
<p>Also the following configuration keys has been removed:
<cite>CELERYD_PID_FILE</cite>, <cite>CELERYBEAT_PID_FILE</cite>, <cite>CELERYMON_PID_FILE</cite>.</p>
</div></blockquote>
</li>
<li><p>Default worker loglevel is now <cite>WARN</cite>, to enable the previous log level
start the worker with <cite>--loglevel=INFO</cite>.</p></li>
<li><p>Tasks are automatically registered.</p>
<blockquote>
<div><p>This means you no longer have to register your tasks manually.
You don't have to change your old code right away, as it doesn't matter if
a task is registered twice.</p>
<p>If you don't want your task to be automatically registered you can set
the <cite>abstract</cite> attribute</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyTask</span><span class="p">(</span><span class="n">Task</span><span class="p">):</span>
    <span class="n">abstract</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>By using <cite>abstract</cite> only tasks subclassing this task will be automatically
registered (this works like the Django ORM).</p>
<p>If you don't want subclasses to be registered either, you can set the
<cite>autoregister</cite> attribute to <cite>False</cite>.</p>
<p>Incidentally, this change also fixes the problems with automatic name
assignment and relative imports. So you also don't have to specify a task name
anymore if you use relative imports.</p>
</div></blockquote>
</li>
<li><p>You can no longer use regular functions as tasks.</p>
<blockquote>
<div><p>This change was added
because it makes the internals a lot more clean and simple. However, you can
now turn functions into tasks by using the <cite>&#64;task</cite> decorator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.decorators</span><span class="w"> </span><span class="kn">import</span> <span class="n">task</span>

<span class="nd">@task</span><span class="p">()</span>
<span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p><a class="reference internal" href="../userguide/tasks.html#guide-tasks"><span class="std std-ref">任务/Tasks</span></a> for more information about the task decorators.</p>
</div>
</div></blockquote>
</li>
<li><p>The periodic task system has been rewritten to a centralized solution.</p>
<blockquote>
<div><p>This means the worker no longer schedules periodic tasks by default,
but a new daemon has been introduced: <cite>celerybeat</cite>.</p>
<p>To launch the periodic task scheduler you have to run <code class="docutils literal notranslate"><span class="pre">celerybeat</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celerybeat
</pre></div>
</div>
<p>Make sure this is running on one server only, if you run it twice, all
periodic tasks will also be executed twice.</p>
<p>If you only have one worker server you can embed it into the worker like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>celeryd<span class="w"> </span>--beat<span class="w"> </span><span class="c1"># Embed celerybeat in celeryd.</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>The supervisor has been removed.</p>
<blockquote>
<div><p>This means the <cite>-S</cite> and <cite>--supervised</cite> options to <cite>celeryd</cite> is
no longer supported. Please use something like <a class="reference external" href="http://supervisord.org">http://supervisord.org</a>
instead.</p>
</div></blockquote>
</li>
<li><p><cite>TaskSet.join</cite> has been removed, use <cite>TaskSetResult.join</cite> instead.</p></li>
<li><p>The task status <cite>&quot;DONE&quot;</cite> has been renamed to <cite>&quot;SUCCESS&quot;</cite>.</p></li>
<li><p><cite>AsyncResult.is_done</cite> has been removed, use <cite>AsyncResult.successful</cite>
instead.</p></li>
<li><p>The worker no longer stores errors if <cite>Task.ignore_result</cite> is set, to
revert to the previous behavior set
<code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_STORE_ERRORS_EVEN_IF_IGNORED</span></code> to <cite>True</cite>.</p></li>
<li><p>The statistics functionality has been removed in favor of events,
so the <cite>-S</cite> and --statistics` switches has been removed.</p></li>
<li><p>The module <cite>celery.task.strategy</cite> has been removed.</p></li>
<li><p><cite>celery.discovery</cite> has been removed, and it's <code class="docutils literal notranslate"><span class="pre">autodiscover</span></code> function is
now in <cite>celery.loaders.djangoapp</cite>. Reason: Internal API.</p></li>
<li><p>The <span class="target" id="index-1"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CELERY_LOADER</span></code> environment variable now needs loader class name
in addition to module name,</p>
<blockquote>
<div><p>For example, where you previously had: <cite>&quot;celery.loaders.default&quot;</cite>, you now
need <cite>&quot;celery.loaders.default.Loader&quot;</cite>, using the previous syntax will result
in a <cite>DeprecationWarning</cite>.</p>
</div></blockquote>
</li>
<li><p>Detecting the loader is now lazy, and so isn't done when importing
<cite>celery.loaders</cite>.</p>
<blockquote>
<div><p>To make this happen <cite>celery.loaders.settings</cite> has
been renamed to <cite>load_settings</cite> and is now a function returning the
settings object. <cite>celery.loaders.current_loader</cite> is now also
a function, returning the current loader.</p>
<p>So:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">loader</span> <span class="o">=</span> <span class="n">current_loader</span>
</pre></div>
</div>
<p>needs to be changed to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">loader</span> <span class="o">=</span> <span class="n">current_loader</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="deprecations">
<span id="v100-deprecations"></span><h3>Deprecations<a class="headerlink" href="#deprecations" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The following configuration variables has been renamed and will be
deprecated in v2.0:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CELERYD_DAEMON_LOG_FORMAT</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">CELERYD_LOG_FORMAT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CELERYD_DAEMON_LOG_LEVEL</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">CELERYD_LOG_LEVEL</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CELERY_AMQP_CONNECTION_TIMEOUT</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">CELERY_BROKER_CONNECTION_TIMEOUT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CELERY_AMQP_CONNECTION_RETRY</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">CELERY_BROKER_CONNECTION_RETRY</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CELERY_AMQP_CONNECTION_MAX_RETRIES</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">CELERY_BROKER_CONNECTION_MAX_RETRIES</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SEND_CELERY_TASK_ERROR_EMAILS</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">CELERY_SEND_TASK_ERROR_EMAILS</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>The public API names in celery.conf has also changed to a consistent naming
scheme.</p></li>
<li><p>We now support consuming from an arbitrary number of queues.</p>
<blockquote>
<div><p>To do this we had to rename the configuration syntax. If you use any of
the custom AMQP routing options (queue/exchange/routing_key, etc.), you
should read the new FAQ entry: <a class="reference internal" href="../faq.html#faq-task-routing"><span class="std std-ref">我可以只将某些任务发送到某些服务器吗？</span></a>.</p>
<p>The previous syntax is deprecated and scheduled for removal in v2.0.</p>
</div></blockquote>
</li>
<li><p><cite>TaskSet.run</cite> has been renamed to <cite>TaskSet.apply_async</cite>.</p>
<blockquote>
<div><p><cite>TaskSet.run</cite> has now been deprecated, and is scheduled for
removal in v2.0.</p>
</div></blockquote>
</li>
</ul>
</section>
<section id="id8">
<h3>News<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Rate limiting support (per task type, or globally).</p></li>
<li><p>New periodic task system.</p></li>
<li><p>Automatic registration.</p></li>
<li><p>New cool task decorator syntax.</p></li>
<li><p>worker: now sends events if enabled with the <cite>-E</cite> argument.</p>
<blockquote>
<div><p>Excellent for monitoring tools, one is already in the making
(<a class="reference external" href="https://github.com/celery/celerymon">https://github.com/celery/celerymon</a>).</p>
<p>Current events include: <a class="reference internal" href="../userguide/monitoring.html#std-event-worker-heartbeat"><code class="xref std std-event docutils literal notranslate"><span class="pre">worker-heartbeat</span></code></a>,
task-[received/succeeded/failed/retried],
<a class="reference internal" href="../userguide/monitoring.html#std-event-worker-online"><code class="xref std std-event docutils literal notranslate"><span class="pre">worker-online</span></code></a>, <a class="reference internal" href="../userguide/monitoring.html#std-event-worker-offline"><code class="xref std std-event docutils literal notranslate"><span class="pre">worker-offline</span></code></a>.</p>
</div></blockquote>
</li>
<li><p>You can now delete (revoke) tasks that's already been applied.</p></li>
<li><p>You can now set the hostname the worker identifies as using the <cite>--hostname</cite>
argument.</p></li>
<li><p>Cache backend now respects the <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_TASK_RESULT_EXPIRES</span></code> setting.</p></li>
<li><p>Message format has been standardized and now uses ISO-8601 format
for dates instead of datetime.</p></li>
<li><p>worker now responds to the <code class="xref std std-sig docutils literal notranslate"><span class="pre">SIGHUP</span></code> signal by restarting itself.</p></li>
<li><p>Periodic tasks are now scheduled on the clock.</p>
<blockquote>
<div><p>That is, <cite>timedelta(hours=1)</cite> means every hour at :00 minutes, not every
hour from the server starts. To revert to the previous behavior you
can set <cite>PeriodicTask.relative = True</cite>.</p>
</div></blockquote>
</li>
<li><p>Now supports passing execute options to a TaskSets list of args.</p>
<blockquote>
<div><p>Example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">TaskSet</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">[([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">{},</span> <span class="p">{</span><span class="s1">&#39;countdown&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}),</span>
<span class="gp">... </span>                   <span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">{},</span> <span class="p">{</span><span class="s1">&#39;countdown&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}),</span>
<span class="gp">... </span>                   <span class="p">([</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">{},</span> <span class="p">{</span><span class="s1">&#39;countdown&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Got a 3x performance gain by setting the prefetch count to four times the
concurrency, (from an average task round-trip of 0.1s to 0.03s!).</p>
<blockquote>
<div><p>A new setting has been added: <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYD_PREFETCH_MULTIPLIER</span></code>, which
is set to <cite>4</cite> by default.</p>
</div></blockquote>
</li>
<li><p>Improved support for webhook tasks.</p>
<blockquote>
<div><p><cite>celery.task.rest</cite> is now deprecated, replaced with the new and shiny
<cite>celery.task.http</cite>. With more reflective names, sensible interface,
and it's possible to override the methods used to perform HTTP requests.</p>
</div></blockquote>
</li>
<li><p>The results of task sets are now cached by storing it in the result
backend.</p></li>
</ul>
</section>
<section id="v100-changes">
<span id="id9"></span><h3>Changes<a class="headerlink" href="#v100-changes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Now depends on <a class="extlink-pypi reference external" href="https://pypi.org/project/carrot/">https://pypi.org/project/carrot/</a> &gt;= 0.8.1</p></li>
<li><p>New dependencies: <a class="extlink-pypi reference external" href="https://pypi.org/project/billiard/">https://pypi.org/project/billiard/</a>, <a class="extlink-pypi reference external" href="https://pypi.org/project/python-dateutil/">https://pypi.org/project/python-dateutil/</a>,
<a class="extlink-pypi reference external" href="https://pypi.org/project/django-picklefield/">https://pypi.org/project/django-picklefield/</a>.</p></li>
<li><p>No longer depends on python-daemon</p></li>
<li><p>The <cite>uuid</cite> distribution is added as a dependency when running Python 2.4.</p></li>
<li><p>Now remembers the previously detected loader by keeping it in
the <span class="target" id="index-2"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CELERY_LOADER</span></code> environment variable.</p>
<blockquote>
<div><p>This may help on windows where fork emulation is used.</p>
</div></blockquote>
</li>
<li><p>ETA no longer sends datetime objects, but uses ISO 8601 date format in a
string for better compatibility with other platforms.</p></li>
<li><p>No longer sends error mails for retried tasks.</p></li>
<li><p>Task can now override the backend used to store results.</p></li>
<li><p>Refactored the ExecuteWrapper, <cite>apply</cite> and <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_ALWAYS_EAGER</span></code>
now also executes the task callbacks and signals.</p></li>
<li><p>Now using a proper scheduler for the tasks with an ETA.</p>
<blockquote>
<div><p>This means waiting ETA tasks are sorted by time, so we don't have
to poll the whole list all the time.</p>
</div></blockquote>
</li>
<li><p>Now also imports modules listed in <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_IMPORTS</span></code> when running
with django (as documented).</p></li>
<li><p>Log level for stdout/stderr changed from INFO to ERROR</p></li>
<li><p>ImportErrors are now properly propagated when auto-discovering tasks.</p></li>
<li><p>You can now use <cite>celery.messaging.establish_connection</cite> to establish a
connection to the broker.</p></li>
<li><p>When running as a separate service the periodic task scheduler does some
smart moves to not poll too regularly.</p>
<blockquote>
<div><p>If you need faster poll times you can lower the value
of <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERYBEAT_MAX_LOOP_INTERVAL</span></code>.</p>
</div></blockquote>
</li>
<li><p>You can now change periodic task intervals at runtime, by making
<cite>run_every</cite> a property, or subclassing <cite>PeriodicTask.is_due</cite>.</p></li>
<li><p>The worker now supports control commands enabled through the use of a
broadcast queue, you can remotely revoke tasks or set the rate limit for
a task type. See <code class="xref py py-mod docutils literal notranslate"><span class="pre">celery.task.control</span></code>.</p></li>
<li><p>The services now sets informative process names (as shown in <cite>ps</cite>
listings) if the <a class="extlink-pypi reference external" href="https://pypi.org/project/setproctitle/">https://pypi.org/project/setproctitle/</a> module is installed.</p></li>
<li><p><a class="reference internal" href="../reference/celery.exceptions.html#celery.exceptions.NotRegistered" title="celery.exceptions.NotRegistered"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotRegistered</span></code></a> now inherits from <a class="reference external" href="https://docs.python.org/dev/library/exceptions.html#KeyError" title="（在 Python v3.15）"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a>,
and <cite>TaskRegistry.__getitem__`+`pop</cite> raises <cite>NotRegistered</cite> instead</p></li>
<li><p>You can set the loader via the <span class="target" id="index-3"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CELERY_LOADER</span></code> environment variable.</p></li>
<li><p>You can now set <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_IGNORE_RESULT</span></code> to ignore task results by
default (if enabled, tasks doesn't save results or errors to the backend used).</p></li>
<li><p>The worker now correctly handles malformed messages by throwing away and
acknowledging the message, instead of crashing.</p></li>
</ul>
</section>
<section id="bugs">
<span id="v100-bugs"></span><h3>Bugs<a class="headerlink" href="#bugs" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed a race condition that could happen while storing task results in the
database.</p></li>
</ul>
</section>
<section id="documentation">
<span id="v100-documentation"></span><h3>Documentation<a class="headerlink" href="#documentation" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Reference now split into two sections; API reference and internal module
reference.</p></li>
</ul>
</section>
</section>
<section id="version-0-8-4">
<span id="id10"></span><h2>0.8.4<a class="headerlink" href="#version-0-8-4" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2010-02-05 01:52 p.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>Now emits a warning if the --detach argument is used.
--detach shouldn't be used anymore, as it has several not easily fixed
bugs related to it. Instead, use something like start-stop-daemon,
<a class="extlink-pypi reference external" href="https://pypi.org/project/supervisor/">https://pypi.org/project/supervisor/</a> or <strong class="command">launchd</strong> (macOS).</p></li>
<li><p>Make sure logger class is process aware, even if running Python &gt;= 2.6.</p></li>
<li><p>Error emails are not sent anymore when the task is retried.</p></li>
</ul>
</section>
<section id="version-0-8-3">
<span id="id11"></span><h2>0.8.3<a class="headerlink" href="#version-0-8-3" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-12-22 09:43 a.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>Fixed a possible race condition that could happen when storing/querying
task results using the database backend.</p></li>
<li><p>Now has console script entry points in the <code class="file docutils literal notranslate"><span class="pre">setup.py</span></code> file, so tools like
<a class="extlink-pypi reference external" href="https://pypi.org/project/zc.buildout/">https://pypi.org/project/zc.buildout/</a> will correctly install the programs <code class="docutils literal notranslate"><span class="pre">celeryd</span></code> and
<code class="docutils literal notranslate"><span class="pre">celeryinit</span></code>.</p></li>
</ul>
</section>
<section id="version-0-8-2">
<span id="id12"></span><h2>0.8.2<a class="headerlink" href="#version-0-8-2" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-11-20 03:40 p.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>QOS Prefetch count wasn't applied properly, as it was set for every message
received (which apparently behaves like, &quot;receive one more&quot;), instead of only
set when our wanted value changed.</p></li>
</ul>
</section>
<section id="version-0-8-1">
<span id="id13"></span><h2>0.8.1<a class="headerlink" href="#version-0-8-1" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-11-16 05:21 p.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<section id="very-important-note">
<span id="v081-very-important"></span><h3>Very important note<a class="headerlink" href="#very-important-note" title="Link to this heading">¶</a></h3>
<p>This release (with carrot 0.8.0) enables AMQP QoS (quality of service), which
means the workers will only receive as many messages as it can handle at a
time. As with any release, you should test this version upgrade on your
development servers before rolling it out to production!</p>
</section>
<section id="important-changes">
<span id="v081-important"></span><h3>Important changes<a class="headerlink" href="#important-changes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>If you're using Python &lt; 2.6 and you use the multiprocessing backport, then
multiprocessing version 2.6.2.1 is required.</p></li>
<li><p>All AMQP_* settings has been renamed to BROKER_*, and in addition
AMQP_SERVER has been renamed to BROKER_HOST, so before where you had:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AMQP_SERVER</span> <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span>
<span class="n">AMQP_PORT</span> <span class="o">=</span> <span class="mi">5678</span>
<span class="n">AMQP_USER</span> <span class="o">=</span> <span class="s1">&#39;myuser&#39;</span>
<span class="n">AMQP_PASSWORD</span> <span class="o">=</span> <span class="s1">&#39;mypassword&#39;</span>
<span class="n">AMQP_VHOST</span> <span class="o">=</span> <span class="s1">&#39;celery&#39;</span>
</pre></div>
</div>
<p>You need to change that to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BROKER_HOST</span> <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span>
<span class="n">BROKER_PORT</span> <span class="o">=</span> <span class="mi">5678</span>
<span class="n">BROKER_USER</span> <span class="o">=</span> <span class="s1">&#39;myuser&#39;</span>
<span class="n">BROKER_PASSWORD</span> <span class="o">=</span> <span class="s1">&#39;mypassword&#39;</span>
<span class="n">BROKER_VHOST</span> <span class="o">=</span> <span class="s1">&#39;celery&#39;</span>
</pre></div>
</div>
</li>
<li><p>Custom carrot backends now need to include the backend class name, so before
where you had:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CARROT_BACKEND</span> <span class="o">=</span> <span class="s1">&#39;mycustom.backend.module&#39;</span>
</pre></div>
</div>
<p>you need to change it to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CARROT_BACKEND</span> <span class="o">=</span> <span class="s1">&#39;mycustom.backend.module.Backend&#39;</span>
</pre></div>
</div>
<p>where <cite>Backend</cite> is the class name. This is probably <cite>&quot;Backend&quot;</cite>, as
that was the previously implied name.</p>
</li>
<li><p>New version requirement for carrot: 0.8.0</p></li>
</ul>
</section>
<section id="v081-changes">
<span id="id14"></span><h3>Changes<a class="headerlink" href="#v081-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Incorporated the multiprocessing backport patch that fixes the
<cite>processName</cite> error.</p></li>
<li><p>Ignore the result of PeriodicTask's by default.</p></li>
<li><p>Added a Redis result store backend</p></li>
<li><p>Allow <code class="file docutils literal notranslate"><span class="pre">/etc/default/celeryd</span></code> to define additional options
for the <code class="docutils literal notranslate"><span class="pre">celeryd</span></code> init-script.</p></li>
<li><p>MongoDB periodic tasks issue when using different time than UTC fixed.</p></li>
<li><p>Windows specific: Negate test for available <code class="docutils literal notranslate"><span class="pre">os.fork</span></code>
(thanks <a class="extlink-github_user reference external" href="https://github.com/miracle2k/">&#64;miracle2k</a>).</p></li>
<li><p>Now tried to handle broken PID files.</p></li>
<li><p>Added a Django test runner to contrib that sets
<cite>CELERY_ALWAYS_EAGER = True</cite> for testing with the database backend.</p></li>
<li><p>Added a <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_CACHE_BACKEND</span></code> setting for using something other
than the Django-global cache backend.</p></li>
<li><p>Use custom implementation of <code class="docutils literal notranslate"><span class="pre">functools.partial</span></code> for Python 2.4 support
(Probably still problems with running on 2.4, but it will eventually be
supported)</p></li>
<li><p>Prepare exception to pickle when saving <a class="reference internal" href="../userguide/tasks.html#std-state-RETRY"><code class="xref std std-state docutils literal notranslate"><span class="pre">RETRY</span></code></a> status for all backends.</p></li>
<li><p>SQLite no concurrency limit should only be effective if the database backend
is used.</p></li>
</ul>
</section>
</section>
<section id="version-0-8-0">
<span id="id15"></span><h2>0.8.0<a class="headerlink" href="#version-0-8-0" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-09-22 03:06 p.m. CEST</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<section id="v080-incompatible">
<span id="id16"></span><h3>Backward incompatible changes<a class="headerlink" href="#v080-incompatible" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Add traceback to result value on failure.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">备注</p>
<p>If you use the database backend you have to re-create the
database table <cite>celery_taskmeta</cite>.</p>
<p>Contact the <span class="xref std std-ref">mailing-list</span> or <span class="xref std std-ref">irc-channel</span> channel
for help doing this.</p>
</div>
</div></blockquote>
</li>
<li><p>Database tables are now only created if the database backend is used,
so if you change back to the database backend at some point,
be sure to initialize tables (django: <cite>syncdb</cite>, python: <cite>celeryinit</cite>).</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>This is only applies if using Django version 1.1 or higher.</p>
</div>
</li>
<li><p>Now depends on <cite>carrot</cite> version 0.6.0.</p></li>
<li><p>Now depends on python-daemon 1.4.8</p></li>
</ul>
</section>
<section id="v080-important">
<span id="id17"></span><h3>Important changes<a class="headerlink" href="#v080-important" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Celery can now be used in pure Python (outside of a Django project).</p>
<blockquote>
<div><p>This means Celery is no longer Django specific.</p>
<p>For more information see the FAQ entry
<a class="reference internal" href="../faq.html#faq-is-celery-for-django-only"><span class="std std-ref">Celery 只适用于 Django 吗？</span></a>.</p>
</div></blockquote>
</li>
<li><p>Celery now supports task retries.</p>
<blockquote>
<div><p>See <a class="reference internal" href="../userguide/tasks.html#task-retry"><span class="std std-ref">重试</span></a> for more information.</p>
</div></blockquote>
</li>
<li><p>We now have an AMQP result store backend.</p>
<blockquote>
<div><p>It uses messages to publish task return value and status. And it's
incredibly fast!</p>
<p>See <span class="xref issue">issue #6</span> for more info!</p>
</div></blockquote>
</li>
<li><p>AMQP QoS (prefetch count) implemented:</p>
<blockquote>
<div><p>This to not receive more messages than we can handle.</p>
</div></blockquote>
</li>
<li><p>Now redirects stdout/stderr to the workers log file when detached</p></li>
<li><dl class="simple">
<dt>Now uses <cite>inspect.getargspec</cite> to only pass default arguments</dt><dd><p>the task supports.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Add Task.on_success, .on_retry, .on_failure handlers</dt><dd><dl class="simple">
<dt>See <code class="xref py py-meth docutils literal notranslate"><span class="pre">celery.task.base.Task.on_success()</span></code>,</dt><dd><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">celery.task.base.Task.on_retry()</span></code>,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">celery.task.base.Task.on_failure()</span></code>,</p>
</dd>
</dl>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>celery.utils.gen_unique_id</cite>: Workaround for</dt><dd><p><a class="reference external" href="http://bugs.python.org/issue4607">http://bugs.python.org/issue4607</a></p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>You can now customize what happens at worker start, at process init, etc.,</dt><dd><p>by creating your own loaders (see <a class="reference internal" href="../reference/celery.loaders.default.html#module-celery.loaders.default" title="celery.loaders.default"><code class="xref py py-mod docutils literal notranslate"><span class="pre">celery.loaders.default</span></code></a>,
<code class="xref py py-mod docutils literal notranslate"><span class="pre">celery.loaders.djangoapp</span></code>, <a class="reference internal" href="../reference/celery.loaders.html#module-celery.loaders" title="celery.loaders"><code class="xref py py-mod docutils literal notranslate"><span class="pre">celery.loaders</span></code></a>).</p>
</dd>
</dl>
</li>
<li><p>Support for multiple AMQP exchanges and queues.</p>
<blockquote>
<div><p>This feature misses documentation and tests, so anyone interested
is encouraged to improve this situation.</p>
</div></blockquote>
</li>
<li><p>The worker now survives a restart of the AMQP server!</p>
<p>Automatically re-establish AMQP broker connection if it's lost.</p>
<p>New settings:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>AMQP_CONNECTION_RETRY</dt><dd><p>Set to <cite>True</cite> to enable connection retries.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>AMQP_CONNECTION_MAX_RETRIES.</dt><dd><p>Maximum number of restarts before we give up. Default: <cite>100</cite>.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="v080-news">
<span id="id18"></span><h3>News<a class="headerlink" href="#v080-news" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>Fix an incompatibility between python-daemon and multiprocessing,</dt><dd><p>which resulted in the <cite>[Errno 10] No child processes</cite> problem when
detaching.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Fixed a possible DjangoUnicodeDecodeError being raised when saving pickled</dt><dd><p>data to Django`s Memcached cache backend.</p>
</dd>
</dl>
</li>
<li><p>Better Windows compatibility.</p></li>
<li><dl class="simple">
<dt>New version of the pickled field (taken from</dt><dd><p><a class="reference external" href="http://www.djangosnippets.org/snippets/513/">http://www.djangosnippets.org/snippets/513/</a>)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>New signals introduced: <cite>task_sent</cite>, <cite>task_prerun</cite> and</dt><dd><p><cite>task_postrun</cite>, see <a class="reference internal" href="../reference/celery.signals.html#module-celery.signals" title="celery.signals"><code class="xref py py-mod docutils literal notranslate"><span class="pre">celery.signals</span></code></a> for more information.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>TaskSetResult.join</cite> caused <cite>TypeError</cite> when <cite>timeout=None</cite>.</dt><dd><p>Thanks Jerzy Kozera. Closes #31</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>views.apply</cite> should return <cite>HttpResponse</cite> instance.</dt><dd><p>Thanks to Jerzy Kozera. Closes #32</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>PeriodicTask</cite>: Save conversion of <cite>run_every</cite> from <cite>int</cite></dt><dd><p>to <cite>timedelta</cite> to the class attribute instead of on the instance.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Exceptions has been moved to <cite>celery.exceptions</cite>, but are still</dt><dd><p>available in the previous module.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Try to rollback transaction and retry saving result if an error happens</dt><dd><p>while setting task status with the database backend.</p>
</dd>
</dl>
</li>
<li><p>jail() refactored into <code class="xref py py-class docutils literal notranslate"><span class="pre">celery.execute.ExecuteWrapper</span></code>.</p></li>
<li><p><cite>views.apply</cite> now correctly sets mime-type to &quot;application/json&quot;</p></li>
<li><p><cite>views.task_status</cite> now returns exception if state is <a class="reference internal" href="../userguide/tasks.html#std-state-RETRY"><code class="xref std std-state docutils literal notranslate"><span class="pre">RETRY</span></code></a></p></li>
<li><dl class="simple">
<dt><cite>views.task_status</cite> now returns traceback if state is <a class="reference internal" href="../userguide/tasks.html#std-state-FAILURE"><code class="xref std std-state docutils literal notranslate"><span class="pre">FAILURE</span></code></a></dt><dd><p>or <a class="reference internal" href="../userguide/tasks.html#std-state-RETRY"><code class="xref std std-state docutils literal notranslate"><span class="pre">RETRY</span></code></a></p>
</dd>
</dl>
</li>
<li><p>Documented default task arguments.</p></li>
<li><p>Add a sensible __repr__ to ExceptionInfo for easier debugging</p></li>
<li><dl class="simple">
<dt>Fix documentation typo <cite>.. import map</cite> -&gt; <cite>.. import dmap</cite>.</dt><dd><p>Thanks to <a class="extlink-github_user reference external" href="https://github.com/mikedizon/">&#64;mikedizon</a>.</p>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="version-0-6-0">
<span id="id19"></span><h2>0.6.0<a class="headerlink" href="#version-0-6-0" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-08-07 06:54 a.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<section id="v060-important">
<span id="id20"></span><h3>Important changes<a class="headerlink" href="#v060-important" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt>Fixed a bug where tasks raising unpickleable exceptions crashed pool</dt><dd><p>workers. So if you've had pool workers mysteriously disappearing, or
problems with the worker stopping working, this has been fixed in this
version.</p>
</dd>
</dl>
</li>
<li><p>Fixed a race condition with periodic tasks.</p></li>
<li><dl class="simple">
<dt>The task pool is now supervised, so if a pool worker crashes,</dt><dd><p>goes away or stops responding, it is automatically replaced with
a new one.</p>
</dd>
</dl>
</li>
<li><p>Task.name is now automatically generated out of class module+name, for
example <cite>&quot;djangotwitter.tasks.UpdateStatusesTask&quot;</cite>. Very convenient.
No idea why we didn't do this before. Some documentation is updated to not
manually specify a task name.</p></li>
</ul>
</section>
<section id="v060-news">
<span id="id21"></span><h3>News<a class="headerlink" href="#v060-news" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Tested with Django 1.1</p></li>
<li><p>New Tutorial: Creating a click counter using Carrot and Celery</p></li>
<li><dl class="simple">
<dt>Database entries for periodic tasks are now created at the workers</dt><dd><p>start-up instead of for each check (which has been a forgotten TODO/XXX
in the code for a long time)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>New settings variable: <code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_TASK_RESULT_EXPIRES</span></code></dt><dd><p>Time (in seconds, or a <cite>datetime.timedelta</cite> object) for when after
stored task results are deleted. For the moment this only works for the
database backend.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>The worker now emits a debug log message for which periodic tasks</dt><dd><p>has been launched.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>The periodic task table is now locked for reading while getting</dt><dd><p>periodic task status (MySQL only so far, seeking patches for other
engines)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>A lot more debugging information is now available by turning on the</dt><dd><p><cite>DEBUG</cite> log level (<cite>--loglevel=DEBUG</cite>).</p>
</dd>
</dl>
</li>
<li><p>Functions/methods with a timeout argument now works correctly.</p></li>
<li><dl class="simple">
<dt>New: <cite>celery.strategy.even_time_distribution</cite>:</dt><dd><p>With an iterator yielding task args, kwargs tuples, evenly distribute
the processing of its tasks throughout the time window available.</p>
</dd>
</dl>
</li>
<li><p>Log message <cite>Unknown task ignored...</cite> now has log level <cite>ERROR</cite></p></li>
<li><dl class="simple">
<dt>Log message when task is received is now emitted for all tasks, even if</dt><dd><p>the task has an ETA (estimated time of arrival). Also the log message now
includes the ETA for the task (if any).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Acknowledgment now happens in the pool callback. Can't do ack in the job</dt><dd><p>target, as it's not pickleable (can't share AMQP connection, etc.).</p>
</dd>
</dl>
</li>
<li><p>Added note about .delay hanging in README</p></li>
<li><p>Tests now passing in Django 1.1</p></li>
<li><p>Fixed discovery to make sure app is in INSTALLED_APPS</p></li>
<li><dl class="simple">
<dt>Previously overridden pool behavior (process reap, wait until pool worker</dt><dd><p>available, etc.) is now handled by <cite>multiprocessing.Pool</cite> itself.</p>
</dd>
</dl>
</li>
<li><p>Convert statistics data to Unicode for use as kwargs. Thanks Lucy!</p></li>
</ul>
</section>
</section>
<section id="version-0-4-1">
<span id="id22"></span><h2>0.4.1<a class="headerlink" href="#version-0-4-1" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-07-02 01:42 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>Fixed a bug with parsing the message options (<cite>mandatory</cite>,
<cite>routing_key</cite>, <cite>priority</cite>, <cite>immediate</cite>)</p></li>
</ul>
</section>
<section id="version-0-4-0">
<span id="id23"></span><h2>0.4.0<a class="headerlink" href="#version-0-4-0" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-07-01 07:29 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>Adds eager execution. <cite>celery.execute.apply`|`Task.apply</cite> executes the
function blocking until the task is done, for API compatibility it
returns a <cite>celery.result.EagerResult</cite> instance. You can configure
Celery to always run tasks locally by setting the
<code class="xref std std-setting docutils literal notranslate"><span class="pre">CELERY_ALWAYS_EAGER</span></code> setting to <cite>True</cite>.</p></li>
<li><p>Now depends on <cite>anyjson</cite>.</p></li>
<li><p>99% coverage using Python <cite>coverage</cite> 3.0.</p></li>
</ul>
</section>
<section id="version-0-3-20">
<span id="id24"></span><h2>0.3.20<a class="headerlink" href="#version-0-3-20" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-06-25 08:42 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul>
<li><p>New arguments to <cite>apply_async</cite> (the advanced version of
<cite>delay_task</cite>), <cite>countdown</cite> and <cite>eta</cite>;</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Run 10 seconds into the future.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">apply_async</span><span class="p">(</span><span class="n">MyTask</span><span class="p">,</span> <span class="n">countdown</span><span class="o">=</span><span class="mi">10</span><span class="p">);</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Run 1 day from now</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">apply_async</span><span class="p">(</span><span class="n">MyTask</span><span class="p">,</span>
<span class="gp">... </span>                  <span class="n">eta</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p>Now unlinks stale PID files</p></li>
<li><p>Lots of more tests.</p></li>
<li><p>Now compatible with carrot &gt;= 0.5.0.</p></li>
<li><p><strong>IMPORTANT</strong> The <cite>subtask_ids</cite> attribute on the <cite>TaskSetResult</cite>
instance has been removed. To get this information instead use:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">subtask_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">subtask</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">subtask</span> <span class="ow">in</span> <span class="n">ts_res</span><span class="o">.</span><span class="n">subtasks</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p><cite>Taskset.run()</cite> now respects extra message options from the task class.</p></li>
<li><p>Task: Add attribute <cite>ignore_result</cite>: Don't store the status and
return value. This means you can't use the
<cite>celery.result.AsyncResult</cite> to check if the task is
done, or get its return value. Only use if you need the performance
and is able live without these features. Any exceptions raised will
store the return value/status as usual.</p></li>
<li><p>Task: Add attribute <cite>disable_error_emails</cite> to disable sending error
emails for that task.</p></li>
<li><p>Should now work on Windows (although running in the background won't
work, so using the <cite>--detach</cite> argument results in an exception
being raised).</p></li>
<li><p>Added support for statistics for profiling and monitoring.
To start sending statistics start the worker with the
<cite>--statistics option. Then after a while you can dump the results
by running `python manage.py celerystats</cite>. See
<cite>celery.monitoring</cite> for more information.</p></li>
<li><p>The Celery daemon can now be supervised (i.e., it is automatically
restarted if it crashes). To use this start the worker with the
--supervised` option (or alternatively <cite>-S</cite>).</p></li>
<li><p>views.apply: View calling a task.</p>
<blockquote>
<div><p>Example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>http://e.com/celery/apply/task_name/arg1/arg2//?kwarg1=a&amp;kwarg2=b
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>Use with caution! Don't expose this URL to the public
without first ensuring that your code is safe!</p>
</div>
</div></blockquote>
</li>
<li><p>Refactored <cite>celery.task</cite>. It's now split into three modules:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">celery.task</span></code></p>
<blockquote>
<div><p>Contains <cite>apply_async</cite>, <cite>delay_task</cite>, <cite>discard_all</cite>, and task
shortcuts, plus imports objects from <cite>celery.task.base</cite> and
<cite>celery.task.builtins</cite></p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">celery.task.base</span></code></p>
<blockquote>
<div><p>Contains task base classes: <cite>Task</cite>, <cite>PeriodicTask</cite>,
<cite>TaskSet</cite>, <cite>AsynchronousMapTask</cite>, <cite>ExecuteRemoteTask</cite>.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">celery.task.builtins</span></code></p>
<blockquote>
<div><p>Built-in tasks: <cite>PingTask</cite>, <cite>DeleteExpiredTaskMetaTask</cite>.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="version-0-3-7">
<span id="id25"></span><h2>0.3.7<a class="headerlink" href="#version-0-3-7" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2008-06-16 11:41 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul>
<li><p><strong>IMPORTANT</strong> Now uses AMQP`s <cite>basic.consume</cite> instead of
<cite>basic.get</cite>. This means we're no longer polling the broker for
new messages.</p></li>
<li><p><strong>IMPORTANT</strong> Default concurrency limit is now set to the number of CPUs
available on the system.</p></li>
<li><p><strong>IMPORTANT</strong> <cite>tasks.register</cite>: Renamed <cite>task_name</cite> argument to
<cite>name</cite>, so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tasks</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">task_name</span><span class="o">=</span><span class="s1">&#39;mytask&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>has to be replaced with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tasks</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;mytask&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>The daemon now correctly runs if the pidfile is stale.</p></li>
<li><p>Now compatible with carrot 0.4.5</p></li>
<li><p>Default AMQP connection timeout is now 4 seconds.</p></li>
<li><p><cite>AsyncResult.read()</cite> was always returning <cite>True</cite>.</p></li>
<li><p>Only use README as long_description if the file exists so easy_install
doesn't break.</p></li>
<li><p><cite>celery.view</cite>: JSON responses now properly set its mime-type.</p></li>
<li><p><cite>apply_async</cite> now has a <cite>connection</cite> keyword argument so you
can re-use the same AMQP connection if you want to execute
more than one task.</p></li>
<li><p>Handle failures in task_status view such that it won't throw 500s.</p></li>
<li><p>Fixed typo <cite>AMQP_SERVER</cite> in documentation to <cite>AMQP_HOST</cite>.</p></li>
<li><p>Worker exception emails sent to administrators now works properly.</p></li>
<li><p>No longer depends on <cite>django</cite>, so installing <cite>celery</cite> won't affect
the preferred Django version installed.</p></li>
<li><p>Now works with PostgreSQL (<a class="extlink-pypi reference external" href="https://pypi.org/project/psycopg2/">https://pypi.org/project/psycopg2/</a>) again by registering the
<cite>PickledObject</cite> field.</p></li>
<li><p>Worker: Added <cite>--detach</cite> option as an alias to <cite>--daemon</cite>, and
it's the term used in the documentation from now on.</p></li>
<li><p>Make sure the pool and periodic task worker thread is terminated
properly at exit (so <kbd class="kbd docutils literal notranslate">Control</kbd>-<kbd class="kbd docutils literal notranslate">c</kbd> works again).</p></li>
<li><p>Now depends on <cite>python-daemon</cite>.</p></li>
<li><p>Removed dependency to <cite>simplejson</cite></p></li>
<li><p>Cache Backend: Re-establishes connection for every task process
if the Django cache backend is <a class="extlink-pypi reference external" href="https://pypi.org/project/python-memcached/">https://pypi.org/project/python-memcached/</a>/<a class="extlink-pypi reference external" href="https://pypi.org/project/libmemcached/">https://pypi.org/project/libmemcached/</a>.</p></li>
<li><p>Tyrant Backend: Now re-establishes the connection for every task
executed.</p></li>
</ul>
</section>
<section id="version-0-3-3">
<span id="id26"></span><h2>0.3.3<a class="headerlink" href="#version-0-3-3" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-06-08 01:07 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>The <cite>PeriodicWorkController</cite> now sleeps for 1 second between checking
for periodic tasks to execute.</p></li>
</ul>
</section>
<section id="version-0-3-2">
<span id="id27"></span><h2>0.3.2<a class="headerlink" href="#version-0-3-2" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-06-08 01:07 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>worker: Added option <cite>--discard</cite>: Discard (delete!) all waiting
messages in the queue.</p></li>
<li><p>Worker: The <cite>--wakeup-after</cite> option wasn't handled as a float.</p></li>
</ul>
</section>
<section id="version-0-3-1">
<span id="id28"></span><h2>0.3.1<a class="headerlink" href="#version-0-3-1" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-06-08 01:07 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>The <cite>PeriodicTask</cite> worker is now running in its own thread instead
of blocking the <cite>TaskController</cite> loop.</p></li>
<li><p>Default <cite>QUEUE_WAKEUP_AFTER</cite> has been lowered to <cite>0.1</cite> (was <cite>0.3</cite>)</p></li>
</ul>
</section>
<section id="version-0-3-0">
<span id="id29"></span><h2>0.3.0<a class="headerlink" href="#version-0-3-0" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-06-08 12:41 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>This is a development version, for the stable release, please
see versions 0.2.x.</p>
</div>
<p><strong>VERY IMPORTANT:</strong> Pickle is now the encoder used for serializing task
arguments, so be sure to flush your task queue before you upgrade.</p>
<ul>
<li><p><strong>IMPORTANT</strong> TaskSet.run() now returns a <code class="docutils literal notranslate"><span class="pre">celery.result.TaskSetResult</span></code>
instance, which lets you inspect the status and return values of a
taskset as it was a single entity.</p></li>
<li><p><strong>IMPORTANT</strong> Celery now depends on carrot &gt;= 0.4.1.</p></li>
<li><p>The Celery daemon now sends task errors to the registered admin emails.
To turn off this feature, set <cite>SEND_CELERY_TASK_ERROR_EMAILS</cite> to
<cite>False</cite> in your <cite>settings.py</cite>. Thanks to Grégoire Cachet.</p></li>
<li><p>You can now run the Celery daemon by using <cite>manage.py</cite>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python<span class="w"> </span>manage.py<span class="w"> </span>celeryd
</pre></div>
</div>
<p>Thanks to Grégoire Cachet.</p>
</li>
<li><p>Added support for message priorities, topic exchanges, custom routing
keys for tasks. This means we've introduced
<cite>celery.task.apply_async</cite>, a new way of executing tasks.</p>
<p>You can use <cite>celery.task.delay</cite> and <cite>celery.Task.delay</cite> like usual, but
if you want greater control over the message sent, you want
<cite>celery.task.apply_async</cite> and <cite>celery.Task.apply_async</cite>.</p>
<p>This also means the AMQP configuration has changed. Some settings has
been renamed, while others are new:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CELERY_AMQP_EXCHANGE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CELERY_AMQP_PUBLISHER_ROUTING_KEY</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CELERY_AMQP_CONSUMER_ROUTING_KEY</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CELERY_AMQP_CONSUMER_QUEUE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CELERY_AMQP_EXCHANGE_TYPE</span></code></p></li>
</ul>
</div></blockquote>
<p>See the entry <a class="reference internal" href="../faq.html#faq-task-routing"><span class="std std-ref">我可以只将某些任务发送到某些服务器吗？</span></a> in the
<a class="reference internal" href="../faq.html#faq"><span class="std std-ref">FAQ</span></a> for more information.</p>
</li>
<li><p>Task errors are now logged using log level <cite>ERROR</cite> instead of <cite>INFO</cite>,
and stack-traces are dumped. Thanks to Grégoire Cachet.</p></li>
<li><p>Make every new worker process re-establish it's Django DB connection,
this solving the &quot;MySQL connection died?&quot; exceptions.
Thanks to Vitaly Babiy and Jirka Vejrazka.</p></li>
<li><p><strong>IMPORTANT</strong> Now using pickle to encode task arguments. This means you
now can pass complex Python objects to tasks as arguments.</p></li>
<li><p>Removed dependency to <cite>yadayada</cite>.</p></li>
<li><p>Added a FAQ, see <cite>docs/faq.rst</cite>.</p></li>
<li><p>Now converts any Unicode keys in task <cite>kwargs</cite> to regular strings.
Thanks Vitaly Babiy.</p></li>
<li><p>Renamed the <cite>TaskDaemon</cite> to <cite>WorkController</cite>.</p></li>
<li><p><cite>celery.datastructures.TaskProcessQueue</cite> is now renamed to
<cite>celery.pool.TaskPool</cite>.</p></li>
<li><p>The pool algorithm has been refactored for greater performance and
stability.</p></li>
</ul>
</section>
<section id="version-0-2-0">
<span id="id30"></span><h2>0.2.0<a class="headerlink" href="#version-0-2-0" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-05-20 05:14 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>Final release of 0.2.0</p></li>
<li><p>Compatible with carrot version 0.4.0.</p></li>
<li><p>Fixes some syntax errors related to fetching results
from the database backend.</p></li>
</ul>
</section>
<section id="pre3">
<span id="version-0-2-0-pre3"></span><h2>0.2.0-pre3<a class="headerlink" href="#pre3" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-05-20 05:14 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p><em>Internal release</em>. Improved handling of unpickleable exceptions,
<cite>get_result</cite> now tries to recreate something looking like the
original exception.</p></li>
</ul>
</section>
<section id="pre2">
<span id="version-0-2-0-pre2"></span><h2>0.2.0-pre2<a class="headerlink" href="#pre2" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-05-20 01:56 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>Now handles unpickleable exceptions (like the dynamically generated
subclasses of <cite>django.core.exception.MultipleObjectsReturned</cite>).</p></li>
</ul>
</section>
<section id="pre1">
<span id="version-0-2-0-pre1"></span><h2>0.2.0-pre1<a class="headerlink" href="#pre1" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-05-20 12:33 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>It's getting quite stable, with a lot of new features, so bump
version to 0.2. This is a pre-release.</p></li>
<li><p><cite>celery.task.mark_as_read()</cite> and <cite>celery.task.mark_as_failure()</cite> has
been removed. Use <cite>celery.backends.default_backend.mark_as_read()</cite>,
and <cite>celery.backends.default_backend.mark_as_failure()</cite> instead.</p></li>
</ul>
</section>
<section id="version-0-1-15">
<span id="id31"></span><h2>0.1.15<a class="headerlink" href="#version-0-1-15" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-05-19 04:13 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>The Celery daemon was leaking AMQP connections, this should be fixed,
if you have any problems with too many files open (like <cite>emfile</cite>
errors in <cite>rabbit.log</cite>, please contact us!</p></li>
</ul>
</section>
<section id="version-0-1-14">
<span id="id32"></span><h2>0.1.14<a class="headerlink" href="#version-0-1-14" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-05-19 01:08 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>Fixed a syntax error in the <cite>TaskSet</cite> class (no such variable
<cite>TimeOutError</cite>).</p></li>
</ul>
</section>
<section id="version-0-1-13">
<span id="id33"></span><h2>0.1.13<a class="headerlink" href="#version-0-1-13" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-05-19 12:36 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul>
<li><p>Forgot to add <cite>yadayada</cite> to install requirements.</p></li>
<li><p>Now deletes all expired task results, not just those marked as done.</p></li>
<li><p>Able to load the Tokyo Tyrant backend class without django
configuration, can specify tyrant settings directly in the class
constructor.</p></li>
<li><p>Improved API documentation</p></li>
<li><p>Now using the Sphinx documentation system, you can build
the html documentation by doing:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>docs
<span class="gp">$ </span>make<span class="w"> </span>html
</pre></div>
</div>
</div></blockquote>
<p>and the result will be in <cite>docs/_build/html</cite>.</p>
</li>
</ul>
</section>
<section id="version-0-1-12">
<span id="id34"></span><h2>0.1.12<a class="headerlink" href="#version-0-1-12" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-05-18 04:38 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul>
<li><p><cite>delay_task()</cite> etc. now returns <cite>celery.task.AsyncResult</cite> object,
which lets you check the result and any failure that might've
happened. It kind of works like the <cite>multiprocessing.AsyncResult</cite>
class returned by <cite>multiprocessing.Pool.map_async</cite>.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">dmap()</span></code> and <code class="docutils literal notranslate"><span class="pre">dmap_async()</span></code>. This works like the
<cite>multiprocessing.Pool</cite> versions except they're tasks
distributed to the Celery server. Example:</p>
<blockquote>
<div><div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.task</span><span class="w"> </span><span class="kn">import</span> <span class="n">dmap</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">operator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dmap</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">celery.task</span><span class="w"> </span><span class="kn">import</span> <span class="n">dmap_async</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">operator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">dmap_async</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">ready</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">ready</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">result</span>
<span class="go">[4, 8, 16]</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Refactored the task meta-data cache and database backends, and added
a new backend for Tokyo Tyrant. You can set the backend in your django
settings file.</p>
<blockquote>
<div><p>Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">CELERY_RESULT_BACKEND</span> <span class="o">=</span> <span class="s1">&#39;database&#39;</span><span class="p">;</span> <span class="c1"># Uses the database</span>
<span class="n">CELERY_RESULT_BACKEND</span> <span class="o">=</span> <span class="s1">&#39;cache&#39;</span><span class="p">;</span> <span class="c1"># Uses the django cache framework</span>
<span class="n">CELERY_RESULT_BACKEND</span> <span class="o">=</span> <span class="s1">&#39;tyrant&#39;</span><span class="p">;</span> <span class="c1"># Uses Tokyo Tyrant</span>
<span class="n">TT_HOST</span> <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span><span class="p">;</span> <span class="c1"># Hostname for the Tokyo Tyrant server.</span>
<span class="n">TT_PORT</span> <span class="o">=</span> <span class="mi">6657</span><span class="p">;</span> <span class="c1"># Port of the Tokyo Tyrant server.</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="version-0-1-11">
<span id="id35"></span><h2>0.1.11<a class="headerlink" href="#version-0-1-11" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-05-12 02:08 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>The logging system was leaking file descriptors, resulting in
servers stopping with the EMFILES (too many open files) error (fixed).</p></li>
</ul>
</section>
<section id="version-0-1-10">
<span id="id36"></span><h2>0.1.10<a class="headerlink" href="#version-0-1-10" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-05-11 12:46 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>Tasks now supports both positional arguments and keyword arguments.</p></li>
<li><p>Requires carrot 0.3.8.</p></li>
<li><p>The daemon now tries to reconnect if the connection is lost.</p></li>
</ul>
</section>
<section id="version-0-1-8">
<span id="id37"></span><h2>0.1.8<a class="headerlink" href="#version-0-1-8" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-05-07 12:27 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>Better test coverage</p></li>
<li><p>More documentation</p></li>
<li><p>The worker doesn't emit <cite>Queue is empty</cite> message if
<cite>settings.CELERYD_EMPTY_MSG_EMIT_EVERY</cite> is 0.</p></li>
</ul>
</section>
<section id="version-0-1-7">
<span id="id38"></span><h2>0.1.7<a class="headerlink" href="#version-0-1-7" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-04-30 01:50 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>Added some unit tests</p></li>
<li><p>Can now use the database for task meta-data (like if the task has
been executed or not). Set <cite>settings.CELERY_TASK_META</cite></p></li>
<li><p>Can now run <cite>python setup.py test</cite> to run the unit tests from
within the <cite>tests</cite> project.</p></li>
<li><p>Can set the AMQP exchange/routing key/queue using
<cite>settings.CELERY_AMQP_EXCHANGE</cite>, <cite>settings.CELERY_AMQP_ROUTING_KEY</cite>,
and <cite>settings.CELERY_AMQP_CONSUMER_QUEUE</cite>.</p></li>
</ul>
</section>
<section id="version-0-1-6">
<span id="id39"></span><h2>0.1.6<a class="headerlink" href="#version-0-1-6" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-04-28 02:13 p.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul>
<li><p>Introducing <cite>TaskSet</cite>. A set of subtasks is executed and you can
find out how many, or if all them, are done (excellent for progress
bars and such)</p></li>
<li><p>Now catches all exceptions when running <cite>Task.__call__</cite>, so the
daemon doesn't die. This doesn't happen for pure functions yet, only
<cite>Task</cite> classes.</p></li>
<li><p><cite>autodiscover()</cite> now works with zipped eggs.</p></li>
<li><p>Worker: Now adds current working directory to <cite>sys.path</cite> for
convenience.</p></li>
<li><p>The <cite>run_every</cite> attribute of <cite>PeriodicTask</cite> classes can now be a
<cite>datetime.timedelta()</cite> object.</p></li>
<li><p>Worker: You can now set the <cite>DJANGO_PROJECT_DIR</cite> variable
for the worker and it will add that to <cite>sys.path</cite> for easy launching.</p></li>
<li><p>Can now check if a task has been executed or not via HTTP.</p></li>
<li><p>You can do this by including the Celery <cite>urls.py</cite> into your project,</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^celery/$&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s1">&#39;celery.urls&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>then visiting the following URL:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>http://mysite/celery/$task_id/done/
</pre></div>
</div>
<p>this will return a JSON dictionary, for example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;task&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TASK_ID&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;executed&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">}}</span>
</pre></div>
</div>
</li>
<li><p><cite>delay_task</cite> now returns string id, not <cite>uuid.UUID</cite> instance.</p></li>
<li><p>Now has <cite>PeriodicTasks</cite>, to have <cite>cron</cite> like functionality.</p></li>
<li><p>Project changed name from <cite>crunchy</cite> to <cite>celery</cite>. The details of
the name change request is in <cite>docs/name_change_request.txt</cite>.</p></li>
</ul>
</section>
<section id="version-0-1-0">
<span id="id40"></span><h2>0.1.0<a class="headerlink" href="#version-0-1-0" title="Link to this heading">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">release-date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2009-04-24 11:28 a.m. CET</p>
</dd>
<dt class="field-even">release-by<span class="colon">:</span></dt>
<dd class="field-even"><p>Ask Solem</p>
</dd>
</dl>
<ul class="simple">
<li><p>Initial release</p></li>
</ul>
<p>Sphinx started sucking by removing images from _static, so we need to add
them here into actual content to ensure they are included :-(</p>
<img alt="../_images/celery-banner.png" src="../_images/celery-banner.png" />
<img alt="../_images/celery-banner-small.png" src="../_images/celery-banner-small.png" />
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../glossary.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">术语</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="changelog-2.0.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Change history for Celery 2.0</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                <a href="../copyright.html">Copyright</a> &#169; 2009-2023, Ask Solem &amp; contributors
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Change history for Celery 1.0</a><ul>
<li><a class="reference internal" href="#version-1-0-6">1.0.6</a></li>
<li><a class="reference internal" href="#version-1-0-5">1.0.5</a><ul>
<li><a class="reference internal" href="#critical">Critical</a></li>
<li><a class="reference internal" href="#changes">Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-1-0-4">1.0.4</a></li>
<li><a class="reference internal" href="#version-1-0-3">1.0.3</a><ul>
<li><a class="reference internal" href="#important-notes">Important notes</a></li>
<li><a class="reference internal" href="#news">News</a></li>
<li><a class="reference internal" href="#remote-control-commands">Remote control commands</a></li>
<li><a class="reference internal" href="#fixes">Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-1-0-2">1.0.2</a></li>
<li><a class="reference internal" href="#version-1-0-1">1.0.1</a></li>
<li><a class="reference internal" href="#version-1-0-0">1.0.0</a><ul>
<li><a class="reference internal" href="#backward-incompatible-changes">Backward incompatible changes</a></li>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li><a class="reference internal" href="#id8">News</a></li>
<li><a class="reference internal" href="#v100-changes">Changes</a></li>
<li><a class="reference internal" href="#bugs">Bugs</a></li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-0-8-4">0.8.4</a></li>
<li><a class="reference internal" href="#version-0-8-3">0.8.3</a></li>
<li><a class="reference internal" href="#version-0-8-2">0.8.2</a></li>
<li><a class="reference internal" href="#version-0-8-1">0.8.1</a><ul>
<li><a class="reference internal" href="#very-important-note">Very important note</a></li>
<li><a class="reference internal" href="#important-changes">Important changes</a></li>
<li><a class="reference internal" href="#v081-changes">Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-0-8-0">0.8.0</a><ul>
<li><a class="reference internal" href="#v080-incompatible">Backward incompatible changes</a></li>
<li><a class="reference internal" href="#v080-important">Important changes</a></li>
<li><a class="reference internal" href="#v080-news">News</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-0-6-0">0.6.0</a><ul>
<li><a class="reference internal" href="#v060-important">Important changes</a></li>
<li><a class="reference internal" href="#v060-news">News</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-0-4-1">0.4.1</a></li>
<li><a class="reference internal" href="#version-0-4-0">0.4.0</a></li>
<li><a class="reference internal" href="#version-0-3-20">0.3.20</a></li>
<li><a class="reference internal" href="#version-0-3-7">0.3.7</a></li>
<li><a class="reference internal" href="#version-0-3-3">0.3.3</a></li>
<li><a class="reference internal" href="#version-0-3-2">0.3.2</a></li>
<li><a class="reference internal" href="#version-0-3-1">0.3.1</a></li>
<li><a class="reference internal" href="#version-0-3-0">0.3.0</a></li>
<li><a class="reference internal" href="#version-0-2-0">0.2.0</a></li>
<li><a class="reference internal" href="#pre3">0.2.0-pre3</a></li>
<li><a class="reference internal" href="#pre2">0.2.0-pre2</a></li>
<li><a class="reference internal" href="#pre1">0.2.0-pre1</a></li>
<li><a class="reference internal" href="#version-0-1-15">0.1.15</a></li>
<li><a class="reference internal" href="#version-0-1-14">0.1.14</a></li>
<li><a class="reference internal" href="#version-0-1-13">0.1.13</a></li>
<li><a class="reference internal" href="#version-0-1-12">0.1.12</a></li>
<li><a class="reference internal" href="#version-0-1-11">0.1.11</a></li>
<li><a class="reference internal" href="#version-0-1-10">0.1.10</a></li>
<li><a class="reference internal" href="#version-0-1-8">0.1.8</a></li>
<li><a class="reference internal" href="#version-0-1-7">0.1.7</a></li>
<li><a class="reference internal" href="#version-0-1-6">0.1.6</a></li>
<li><a class="reference internal" href="#version-0-1-0">0.1.0</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=8156d91f"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/tabs.js?v=3ee01567"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=5eb1bb1e"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../_static/translations.js?v=beaddf03"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    </body>
</html>